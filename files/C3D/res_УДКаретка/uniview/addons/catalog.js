/*! Cortona3D Solo Universal Viewer bundle - catalog, Copyright (c) 2015-2023 Paragraphics Ltd. (http://www.cortona3d.com/) */
define((function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([,,function(e,t,n){var i;void 0===(i=function(e,t,n){n.exports={intersection:function(e,t){for(var n=e.length,i=t.length,o=0,r=[],a=0;a<n;a++){for(var c=0,p=0;t[c]!==e[a]&&c<i;)c++;for(;r[p]!==e[a]&&p<o;)p++;c!=i&&p==o&&(r[o++]=e[a])}return r},difference:function(e,t){for(var n=e.length,i=t.length,o=0,r=[],a=0;a<n;a++){for(var c=0,p=0;t[c]!==e[a]&&c<i;)c++;for(;r[p]!==e[a]&&p<o;)p++;c==i&&p==o&&(r[o++]=e[a])}return r},union:function(e,t){var n=e.length,i=t.length,o=0,r=[];r=e,o=n;for(var a=0;a<i;a++){for(var c=!1,p=0;p<n;p++)if(r[p]==t[a]){c=!0;break}!1===c&&(r[o++]=t[a])}return r},xor:function(e,t){for(var n=e.length,i=t.length,o=0,r=[],a=0;a<n;a++){for(var c=0,p=0;t[c]!==e[a]&&c<i;)c++;for(;r[p]!==e[a]&&p<o;)p++;c==i&&p==o&&(r[o++]=e[a])}for(a=0;a<i;a++){for(c=0,p=0;e[c]!==t[a]&&c<n;)c++;for(;r[p]!==t[a]&&p<o;)p++;c==n&&p==o&&(r[o++]=t[a])}return r}}}.call(t,n,t,e))||(e.exports=i)},,,,function(e,t,n){var i;void 0===(i=function(e,t,i){var o=window.Cortona3DSolo,r=o.app.ipc,a=r.interactivity;if(o.catalog)i.exports=o.catalog;else{o.core?(o.app.configureInstance(o.app.DISABLE_DOCUMENT_INTERACTIVITY),o.app.recursiveObjectLookup&&(o.touch.options.FEATURE_PICK_TOPMOST=!1)):n(7);var c,p=n(2),d=p.union,u=p.intersection,l=p.difference,f=n(8),s=!1,g={options:{enableGhostItems:!1,disableMultipleSelections:!1},filter:n(9),useMultiLink:n(10),keep3DStructure:function(){o.touch.options.FEATURE_PICK_TOPMOST=!1,o.core&&(o.app.recursiveObjectLookup=!0)}},h={},m=[],I=[],v=[],b={};a.json.$("ipc/figure/dplist/item").forEach((function(e){e.$("commands/command").forEach((function(e){b[e.$attr("id")]=e}))}));var y=a.getRowByIndex,O=a.getIndexByRow,w=r.resetCurrentSheet,S=a.getChildren;o.use("drawing"),o.app.initialize(),o.expand(o.app,{isObjectVisible:function(e){return-1===(o.app.getObjectsWithDirtyProperty(o.app.PROPERTY_VISIBILITY)||[]).indexOf(e)},isSelectedObjectsVisible:function(){var e=o.app.getSelectedObjects()||[],t=o.app.getObjectsWithDirtyProperty(o.app.PROPERTY_VISIBILITY)||[];return 0===u(e,t).length},toggleSelectedObjectsVisibility:function(e){var t=o.app.getSelectedObjects()||[],n=void 0===e?o.app.isSelectedObjectsVisible():!e,i=[];return t.forEach((function(e){var t=a.getIndexByRow(a.getRowByObjectName(o.app.getObjectName(e)));t>=0&&i.indexOf(t)<0&&i.push(t),n?o.app.setObjectPropertyf(e,o.app.PROPERTY_VISIBILITY,!1,-1):o.app.restoreObjectProperty(e,o.app.PROPERTY_VISIBILITY,!1)})),i.length&&o.dispatch("app.ipc.didChangeItemVisibility",!n,i),!n},setSelectedObjectsTransparency:function(e,t){(o.app.getSelectedObjects()||[]).forEach((function(t){o.app.setObjectPropertyf(t,o.app.PROPERTY_TRANSPARENCY,!1,e),T(o.app.getObjectName(t),e)}))},getSelectedObjectsTransparency:function(){return(o.app.getSelectedObjects()||[]).reduce((function(e,t){var n,i=o.app.getObjectName(t);return Math.max(((n=i)in h||(h[n]={transparency:0,visible:!0}),h[n].transparency),e)}),0)}}),Object.defineProperty(r,"fullDPLMode",{get:function(){return s},set:function(e){s!==e&&(s=e,o.dispatch("app.ipc.didSelectSheet",r.getCurrentSheet(),s))},enumerable:!0,configurable:!0}),Object.defineProperty(r,"selectedItems",{get:function(){return Array.prototype.slice.call(m)},enumerable:!0}),Object.defineProperty(r,"filteredItems",{get:function(){return Array.prototype.slice.call(v)},enumerable:!0}),Object.defineProperty(r,"dplTable",{get:function(){var e=a.getSheetInfo(r.currentSheetInfo.id);return(s?f.getFullDPLTable(a.json):f.getDPLTable(a.json,e.items))||""},enumerable:!0,configurable:!0}),o.expand(r,{selectSheet:function(e,t){return e===r.currentSheetInfo.id?Promise.resolve(r.currentSheetInfo):new Promise((function(n,i){o.once("app.ipc.didSelectSheet",(function(t){t.id===e&&n(t)})),r.setCurrentSheet(e,t)}))},addSelection:function(e){var t=a.getRowByIndex(e);r.isItemActive(t)&&(m.indexOf(t)<0&&(r.dpl.selectRow(e),o.app.drawing.selectItem(e),m.push(t),P(t)))},removeSelection:function(e){var t=a.getRowByIndex(e);if(r.isItemActive(t)){var n=m.indexOf(t);n>=0&&(r.dpl.selectRow(e,!1),o.app.drawing.selectItem(e,!1),m.splice(n,1),P(t))}},toggleSelection:function(e,t){var n=a.getRowByIndex(e),i=m.indexOf(n);(t=void 0===t?i<0:t)?r.addSelection(e):r.removeSelection(e)},fitItem:function(e,t,n){var i=a.getRowByIndex(e),r=a.getObjectsForRow(i);o.app.fitObjectsInView(r,t,n)},getCurrentSheetItems:function(){var e=r.getCurrentSheet().id;return a.getSheetInfo(e).items.map((function(e){return a.getItemInfo(e)}))},isItemActive:function(e){var t=r.getCurrentSheet().id;return t&&a.getSheetInfo(t).items.indexOf(e)>=0},isItemVisible:function(e){return I.indexOf(a.getIndexByRow(e))<0},restoreAllItemsVisibility:function(e){I.forEach((function(e){M(e,!0)})),E()}}),o.expand(r,{hoverItem:function(e){var t=a.getObjectsForRow(a.getRowByIndex(e));o.app.setHoveredObjects(t,!0),r.dpl.hoverRow(e),o.app.drawing.hoverItem(e),o.dispatch("catalog.didHoverItem",e)},selectItem:function(e){var t=a.getRowByIndex(e),n=o.app.ipc.selectOnlyClickedObject&&c;r.isItemActive(t)||(t=-1),m.forEach((function(e){var t=a.getIndexByRow(e);r.dpl.selectRow(t,!1),o.app.drawing.selectItem(t,!1)})),m=t<0?[]:[t];var i=n?c:a.getObjectsForRow(t);o.app.setSelectedObjects(i,o.touch.options.FEATURE_PICK_TOPMOST),c=null,m.forEach((function(e){var t=a.getIndexByRow(e);r.dpl.selectRow(t),o.app.drawing.selectItem(t)}))},toggleItemVisibility:M,resetCurrentSheet:function(e){w(e),B(e)},resetAllObjects:B}),o.expand(r.interactivity,{getObjectsForRow:function(e,t){if(e<0)return[];void 0===t&&(t=!0);var n=[e];return t&&(n=n.concat(a.getChildren(e,!0))),n.reduce((function(e,t){return e.concat(a.getObjectsNamesByRow(t))}),[]).reduce((function(e,t){return e.concat(o.app.getObjectWithName(t)||[])}),[])},getSheetsForRow:function(e){return o.app.modelInfo.sheets.filter((function(t){return t.items.indexOf(e)>=0}))},getDPLColumnIndexById:function(e){for(var t=a.json.$("ipc/figure/ipc-table/table/thead/row/entry"),n=t.length-1;n>=0&&t[n].$attr("column-id")!==e;)n-=1;return n},getCommandById:function(e){return b[e]}}),o.expand(r.interactivity,{getRowByIndex:function(e){return s||e<0?e:y(e)},getIndexByRow:function(e){return s||e<0?e:O(e)},getChildren:function(e,t){return o.touch.options.FEATURE_PICK_TOPMOST?S.call(a,e,t):[]}}),o.app.drawing=o.expand(o.app.drawing||{},{hoverItem:function(e){if(o.app.drawing.hoverHotspot){var t=a.getItemByIndex(e);o.app.drawing.hoverHotspot(t)}},selectItem:function(e,t){var n;if(o.app.drawing.selectHotspot){!1===t&&(n="");var i=a.getItemByIndex(e);o.app.drawing.selectHotspot(i,n)}}}),o.on("app.ipc.dpl.didHoverRow",r.hoverItem),o.on("app.ipc.didHoverItem",r.hoverItem),o.on("app.drawing.didHoverHotspot",(function(e,t){var n=t?this.app.ipc.interactivity.getIndexByItem(e):-1;this.app.ipc.hoverItem(n),this.dispatch("app.drawing.didHoverItem",n)}));var x,R=-1;o.on("app.ipc.dpl.didSelectRow",(function(e,t){if(g.options.disableMultipleSelections&&(t&=-4),1===t&&R>=0){var n=a.getIndexByRow(R);r.selectItem(n);var i=e-n;if(0!==i){i=i>0?1:-1;for(var c=n;c!=e;)c+=i,r.toggleSelection(c);o.dispatch("catalog.didChangeSelection",Array.prototype.slice.call(m))}}else R=a.getRowByIndex(e),_(e,t,o.app.ipc.dpl)})),o.on("app.ipc.didSelectItem",(function(e,t){g.options.disableMultipleSelections&&(t&=-4),_(e,t,o.app.ipc)})),o.on("app.drawing.didSelectHotspot",(function(e,t){g.options.disableMultipleSelections&&(t&=-4);var n=this.app.ipc.interactivity.getIndexByItem(e);_(n,t,o.app.drawing),this.dispatch("app.drawing.didSelectItem",n,t)})),o.on("app.didCallContextMenu",(function(e,t,n){var i=-1,r=this.app.pickObject(e,t,o.touch.options.FEATURE_PICK_TOPMOST),a=r?A(r.handle):"";a&&(i=this.app.ipc.interactivity.getRowByObjectName(a),i=this.app.ipc.interactivity.getRowByIndex(j(i)),s&&!g.options.enableGhostItems&&C(i)&&(i=-1)),this.dispatch("catalog.didCallContextMenu",i,e,t,n)})),o.on("app.drawing.didCallContextMenu",(function(e,t,n,i){var o=-1;e&&(o=this.app.ipc.interactivity.getRowByItem(e)),this.dispatch("catalog.didCallContextMenu",o,t,n,i)})),o.on("app.ipc.dpl.didCallContextMenu",(function(e,t,n,i){var o=a.getRowByIndex(e);this.dispatch("catalog.didCallContextMenu",o,t,n,i)})),o.on("touch.didObjectEnter",(function(e){var t=A(e),n=j(a.getRowByObjectName(t));s&&!g.options.enableGhostItems&&C(a.getRowByIndex(n))&&(n=-1),this.dispatch("app.ipc.didHoverItem",n)})),o.on("touch.didObjectOut",(function(e,t){this.dispatch("app.ipc.didHoverItem",-1)})),o.on("touch.didObjectClick",(function(e,t,n,i,r,p,d){if(1===r&&!(-3&p)){var u=A(e),l=o.app.getObjectWithName(u);if(c=l,"function"!=typeof this.catalog.willObjectClick||this.catalog.willObjectClick(l,u,n,i,r,p,d)){var f=j(a.getRowByObjectName(u));s&&!g.options.enableGhostItems&&C(a.getRowByIndex(f))&&(f=-1),this.dispatch("app.ipc.didSelectItem",f,p)}}})),o.on("app.ipc.didSelectSheet",(function(e,t){void 0===t&&(B(!1),this.dispatch("app.ipc.didSelectItem",-1),this.dispatch("app.ipc.didHoverItem",-1))})),o.on("app.ipc.didChangeItemVisibility",(function(e,t){var n=I.map((function(e){return a.getRowByIndex(e)}));I=e?l(I,t):d(I,t),this.dispatch("catalog.didChangeHiddenItems",I.map((function(e){return a.getRowByIndex(e)})),n)})),o.on("catalog.didChangeFilteredItems",(function(e,t){v=e,l(t,e).forEach((function(e){var t=a.getIndexByRow(e);-1===I.indexOf(t)&&M(t,!0,!0,!1)})),l(e,t).forEach((function(e){var t=a.getIndexByRow(e);-1===I.indexOf(t)&&M(t,!1,!0,!1)}))})),o.on("app.ipc.didSelectSheet",(function(e,t){function n(t){t===e.id&&(clearTimeout(x),o.once("app.ipc.didStopSheetTransitionAnimation",(function(t){t===e.id&&o.dispatch("catalog.sheetChangeCompleted")})))}clearTimeout(x),x=setTimeout((function(){o.removeListener("app.ipc.willStartSheetTransitionAnimation",n),o.dispatch("catalog.sheetChangeCompleted")}),100),o.once("app.ipc.willStartSheetTransitionAnimation",n)})),o.catalog=g,i.exports=g}function j(e){return e>=0?r.isItemActive(e)?a.getIndexByRow(e):j(a.getParent(e)):-1}function C(e){return 0===a.getSheetsForRow(e).length}function P(e){var t=[];e>=0&&(t=m.reduce((function(e,t){return d(e,[t].concat(a.getChildren(t,!0)))}),[]).reduce((function(e,t){return e.concat(a.getObjectsNamesByRow(t))}),[]).reduce((function(e,t){return e.concat(o.app.getObjectWithName(t)||[])}),[]));!o.touch.options.FEATURE_PICK_TOPMOST&&t.length&&o.app.setSelectedObjects([],!1),o.app.setSelectedObjects(t,o.touch.options.FEATURE_PICK_TOPMOST)}function T(e,t){e in h||(h[e]={transparency:0,visible:!0}),h[e].transparency=t}function B(e){h={},E(),o.app.restoreObjectProperty(0,o.app.PROPERTY_TRANSPARENCY,e),o.app.restoreObjectProperty(0,o.app.PROPERTY_VISIBILITY,e),g.filter.resetAll()}function E(){I.length&&o.dispatch("app.ipc.didChangeItemVisibility",!0,I),I=[],o.dispatch("catalog.didChangeHiddenItems",I)}function M(e,t,n,i){var r=a.getRowByIndex(e),c=a.getObjectsForRow(r,i),p=-1!==v.indexOf(r),d=!1===t?[e]:[],u=!0===t?[e]:[];c.forEach((function(e){var n=t;void 0===t&&(n=!o.app.isObjectVisible(e));var i=a.getIndexByRow(a.getRowByObjectName(o.app.getObjectName(e)));i>=0&&u.indexOf(i)<0&&d.indexOf(i)<0&&(n?u:d).push(i),n&&!p?o.app.restoreObjectProperty(e,o.app.PROPERTY_VISIBILITY,!1):o.app.setObjectPropertyf(e,o.app.PROPERTY_VISIBILITY,!1,-1)})),n||(d.length&&o.dispatch("app.ipc.didChangeItemVisibility",!1,d),u.length&&o.dispatch("app.ipc.didChangeItemVisibility",!0,u))}function _(e,t,n){var i=n.selectOnlyClickedObject&&c;t?2===t&&e>=0&&r.toggleSelection(e):(!i&&m.indexOf(a.getRowByIndex(e))>=0&&(e=-1),r.selectItem(e),o.dispatch("catalog.didSelectItem",e,n)),e<0&&(R=-1),o.dispatch("catalog.didChangeSelection",Array.prototype.slice.call(m))}function A(e){var t=e;if(!o.touch.options.FEATURE_PICK_TOPMOST)for(var n=a.getRowByObjectName(o.app.getObjectName(t)),i=a.getIndexByRow(n);i<0&&(t=o.app.getParentObject(t));)n=a.getRowByObjectName(o.app.getObjectName(t)),i=a.getIndexByRow(n);return t?o.app.getObjectName(t):""}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(e,t,n){var i=window.Cortona3DSolo;i.core||i.expand(i.app,{ipc:{getCurrentSheet:function(){}}})}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(e,t,n){var i,o=[];document.createElement("textarea");function r(e){i||(i={},e.$("ipc/figure/dplist/item").forEach((function(e){e.$("commands/command").forEach((function(e){i[e.$attr("id")]=e}))})))}function a(e){o=[];var t=e.$("thead/row/entry"),n=t.reduce((function(e,t,n,i){return e+(+t.$attr("width")||0)}),0);return"<colgroup>"+t.reduce((function(e,t,i,r){var a=+t.$attr("width")||0,c=Math.floor(100*a/n)+"%";return o.push({width:a,col:c}),e+'<col width="'+c+'">'}),"")+"</colgroup>"}function c(e){var t=e.$("thead/row/entry").reduce((function(e,t,n){var i=t.$attr("column-id"),r=i?'data-column-id="'+i+'"':"";return e+'<td width="'+o[n].col+'" '+r+"><pre>"+t.$text("para")+"</pre></td>"}),"");return t="<thead><tr>"+t+"</tr></thead>"}function p(e){var t=o.reduce((function(e,t){var n=new Array(Math.max(1,t.width)+1).join("W");return e+'<td width="'+t.col+'" class="strut"><div><pre>'+n+"</pre></div></td>"}),"<tr>")+"</tr>";return t="<tbody>"+(t+=e.reduce((function(e,t,n){var o="row"+n,r=t.$attr("refItem");return e+(t.$("entry").reduce((function(e,t){return e+"<td><pre>"+(t.$text("para")||t.$("cmdtext").reduce((function(e,t){return e+'<span class="command" data-ref="'+t.$attr("refCmd")+'" data-type="'+i[t.$attr("refCmd")].$attr("type")+'">'+t.$text()+"</span>"}),"")||"&nbsp;").replace(/^([\r\n])/,"&nbsp;$1")+"</pre></td>"}),'<tr id="'+o+'" data-ref="'+r+'">')+"</tr>")}),""))+"</tbody>"}n.exports={getFullDPLTable:function(e){var t=e.$("ipc/figure/ipc-table/table")[0],n=t.$("tbody/row");r(e);var i='<table id="dpl-table" class="dpl-table">';return i+=a(t),i+=c(t),i+=p(n),i+="</table>"},getDPLTable:function(e,t){var n=e.$("ipc/figure/ipc-table/table")[0],i=n.$("tbody/row").filter((function(e,n){return t.indexOf(n)>=0}));r(e);var o='<table id="dpl-table" class="dpl-table">';return o+=a(n),o+=c(n),o+=p(i),o+="</table>"}}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(e,t,n){var i={},o={},r=[];function a(){var e=Cortona3DSolo.app.ipc.interactivity,t=[];return t=e.json.$("ipc/figure/dplist/item").map((function(t,n){var r=!0;for(var a in i)if(!(r=void 0===o[a]||"*"===o[a]||i[a].test(e.getItemInfo(n),o[a])))break;return r?-1:n})).filter((function(e){return e>=0})),r.toString()!==t.toString()&&(Cortona3DSolo.dispatch("catalog.didChangeFilteredItems",t,r),r=t),t}n.exports={create:function(e,t,n){i[e]||("function"!=typeof t&&(t=function(){}),i[e]={name:e,values:n,test:t})},set:function(e,t){o[e]=t,Cortona3DSolo.dispatch("catalog.didChangeFilterValue",e,t),a()},resetAll:function(){for(var e in i)delete o[e],Cortona3DSolo.dispatch("catalog.didChangeFilterValue",e);a()},remove:function(e){delete i[e],delete o[e],a()},testMeta:function(e,t,n){var i=(t.metadata[e]||t.part.metadata[e]||"").trim();return!i||i===n},testCommand:function(e,t,n,i){return n.commands.some((function(n){return n.type===e&&n.args[t]===i}))},valuesMeta:function(e){var t=Cortona3DSolo.app.ipc.interactivity,n=[];return t.json.$("ipc/figure/dplist/item").forEach((function(i,o){var r=t.getItemInfo(o),a=(r.metadata[e]||r.part.metadata[e]||"").trim();a&&n.indexOf(a)<0&&n.push(a)})),n},valuesCommand:function(e,t){t=t||0;var n=Cortona3DSolo.app.ipc.interactivity,i=[];return n.json.$("ipc/figure/dplist/item").forEach((function(o,r){n.getItemInfo(r).commands.filter((function(t){return t.type===e})).map((function(e){return!e.args.length||e.args[t].trim()})).forEach((function(e){e&&i.indexOf(e)<0&&i.push(e)}))})),i}}}.call(t,n,t,e))||(e.exports=i)},function(e,t,n){var i;void 0===(i=function(e,t,i){i.exports=function(e){var t=n(2),i=Cortona3DSolo,o=i.app.ipc.interactivity,r=-1,a=[];function c(n){var r=[];if(n>=0){var a=o.getItemInfo(o.getRowByIndex(n)),c=o.getSheetInfo(i.app.ipc.currentSheetInfo.id).items,p="function"==typeof e.testMultiLinkCondition?e.testMultiLinkCondition:function(){return!0},d=e.disableDefaultMultiLinkCondition?function(){return!0}:function(e,n){return t.intersection(e.objectNames,n.objectNames).length};r=c.filter((function(e,t){var i=o.getItemInfo(e);return t!==n&&d(i,a)&&p(i,a)}))}return r.map((function(e){return o.getIndexByRow(e)}))}e=e||{},i.on("catalog.didHoverItem",(function(e){r>=0&&r!==e&&c(r).forEach((function(e){i.app.ipc.dpl.highlightRow(e,!1)})),r=e,c(e).forEach((function(e){i.app.ipc.dpl.highlightRow(e,!0)}))})),i.on("catalog.didChangeSelection",(function(e){var n=a.map(o.getIndexByRow),r=e.map(o.getIndexByRow);t.difference(r,n).forEach((function(e){var n=c(e);t.difference(n,r).forEach((function(e){i.app.ipc.addSelection(e)}))})),t.difference(n,r).forEach((function(e){var o=c(e);t.intersection(o,n).forEach((function(e){i.app.ipc.removeSelection(e)}))})),a=i.app.ipc.selectedItems})),i.on("app.ipc.didChangeItemVisibility",(function e(n,r){var a=r.map(o.getIndexByRow),p=a.reduce((function(e,n){var i=c(n);return t.union(e,i)}),a);i.removeListener("app.ipc.didChangeItemVisibility",e),i.dispatch("app.ipc.didChangeItemVisibility",n,p),i.on("app.ipc.didChangeItemVisibility",e)}))}}.call(t,n,t,e))||(e.exports=i)}])}));