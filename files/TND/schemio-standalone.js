/*! For license information please see schemio-standalone.js.LICENSE.txt */
(()=>{var e={2505:(e,t,i)=>{e.exports=i(8015)},5592:(e,t,i)=>{"use strict";var n=i(9516),r=i(7522),s=i(3948),o=i(9106),a=i(9615),l=i(2012),c=i(4202),h=i(7763),d=i(6987),u=i(1928);e.exports=function(e){return new Promise((function(t,i){var p,f=e.data,m=e.headers,g=e.responseType;function y(){e.cancelToken&&e.cancelToken.unsubscribe(p),e.signal&&e.signal.removeEventListener("abort",p)}n.isFormData(f)&&delete m["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var x=e.auth.username||"",b=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";m.Authorization="Basic "+btoa(x+":"+b)}var w=a(e.baseURL,e.url);function O(){if(v){var n="getAllResponseHeaders"in v?l(v.getAllResponseHeaders()):null,s={data:g&&"text"!==g&&"json"!==g?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:n,config:e,request:v};r((function(e){t(e),y()}),(function(e){i(e),y()}),s),v=null}}if(v.open(e.method.toUpperCase(),o(w,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=O:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(O)},v.onabort=function(){v&&(i(h("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){i(h("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded",n=e.transitional||d.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),i(h(t,e,n.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},n.isStandardBrowserEnv()){var S=(e.withCredentials||c(w))&&e.xsrfCookieName?s.read(e.xsrfCookieName):void 0;S&&(m[e.xsrfHeaderName]=S)}"setRequestHeader"in v&&n.forEach(m,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete m[t]:v.setRequestHeader(t,e)})),n.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),g&&"json"!==g&&(v.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(p=function(e){v&&(i(!e||e&&e.type?new u("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(p),e.signal&&(e.signal.aborted?p():e.signal.addEventListener("abort",p))),f||(f=null),v.send(f)}))}},8015:(e,t,i)=>{"use strict";var n=i(9516),r=i(9012),s=i(5155),o=i(5343),a=function e(t){var i=new s(t),a=r(s.prototype.request,i);return n.extend(a,s.prototype,i),n.extend(a,i),a.create=function(i){return e(o(t,i))},a}(i(6987));a.Axios=s,a.Cancel=i(1928),a.CancelToken=i(3191),a.isCancel=i(3864),a.VERSION=i(9641).version,a.all=function(e){return Promise.all(e)},a.spread=i(7980),a.isAxiosError=i(5019),e.exports=a,e.exports.default=a},1928:e=>{"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},3191:(e,t,i)=>{"use strict";var n=i(1928);function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var i=this;this.promise.then((function(e){if(i._listeners){var t,n=i._listeners.length;for(t=0;t<n;t++)i._listeners[t](e);i._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){i.subscribe(e),t=e})).then(e);return n.cancel=function(){i.unsubscribe(t)},n},e((function(e){i.reason||(i.reason=new n(e),t(i.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e;return{token:new r((function(t){e=t})),cancel:e}},e.exports=r},3864:e=>{"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},5155:(e,t,i)=>{"use strict";var n=i(9516),r=i(9106),s=i(3471),o=i(4490),a=i(5343),l=i(4841),c=l.validators;function h(e){this.defaults=e,this.interceptors={request:new s,response:new s}}h.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=e.transitional;void 0!==t&&l.assertOptions(t,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var i=[],n=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(n=n&&t.synchronous,i.unshift(t.fulfilled,t.rejected))}));var r,s=[];if(this.interceptors.response.forEach((function(e){s.push(e.fulfilled,e.rejected)})),!n){var h=[o,void 0];for(Array.prototype.unshift.apply(h,i),h=h.concat(s),r=Promise.resolve(e);h.length;)r=r.then(h.shift(),h.shift());return r}for(var d=e;i.length;){var u=i.shift(),p=i.shift();try{d=u(d)}catch(e){p(e);break}}try{r=o(d)}catch(e){return Promise.reject(e)}for(;s.length;)r=r.then(s.shift(),s.shift());return r},h.prototype.getUri=function(e){return e=a(this.defaults,e),r(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){h.prototype[e]=function(t,i){return this.request(a(i||{},{method:e,url:t,data:(i||{}).data}))}})),n.forEach(["post","put","patch"],(function(e){h.prototype[e]=function(t,i,n){return this.request(a(n||{},{method:e,url:t,data:i}))}})),e.exports=h},3471:(e,t,i)=>{"use strict";var n=i(9516);function r(){this.handlers=[]}r.prototype.use=function(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!i&&i.synchronous,runWhen:i?i.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=r},9615:(e,t,i)=>{"use strict";var n=i(9137),r=i(4680);e.exports=function(e,t){return e&&!n(t)?r(e,t):t}},7763:(e,t,i)=>{"use strict";var n=i(5449);e.exports=function(e,t,i,r,s){var o=new Error(e);return n(o,t,i,r,s)}},4490:(e,t,i)=>{"use strict";var n=i(9516),r=i(2881),s=i(3864),o=i(6987),a=i(1928);function l(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new a("canceled")}e.exports=function(e){return l(e),e.headers=e.headers||{},e.data=r.call(e,e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||o.adapter)(e).then((function(t){return l(e),t.data=r.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(l(e),t&&t.response&&(t.response.data=r.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},5449:e=>{"use strict";e.exports=function(e,t,i,n,r){return e.config=t,i&&(e.code=i),e.request=n,e.response=r,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},5343:(e,t,i)=>{"use strict";var n=i(9516);e.exports=function(e,t){t=t||{};var i={};function r(e,t){return n.isPlainObject(e)&&n.isPlainObject(t)?n.merge(e,t):n.isPlainObject(t)?n.merge({},t):n.isArray(t)?t.slice():t}function s(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(e[i],t[i])}function o(e){if(!n.isUndefined(t[e]))return r(void 0,t[e])}function a(i){return n.isUndefined(t[i])?n.isUndefined(e[i])?void 0:r(void 0,e[i]):r(void 0,t[i])}function l(i){return i in t?r(e[i],t[i]):i in e?r(void 0,e[i]):void 0}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return n.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||s,r=t(e);n.isUndefined(r)&&t!==l||(i[e]=r)})),i}},7522:(e,t,i)=>{"use strict";var n=i(7763);e.exports=function(e,t,i){var r=i.config.validateStatus;i.status&&r&&!r(i.status)?t(n("Request failed with status code "+i.status,i.config,null,i.request,i)):e(i)}},2881:(e,t,i)=>{"use strict";var n=i(9516),r=i(6987);e.exports=function(e,t,i){var s=this||r;return n.forEach(i,(function(i){e=i.call(s,e,t)})),e}},6987:(e,t,i)=>{"use strict";var n=i(9516),r=i(7018),s=i(5449),o={"Content-Type":"application/x-www-form-urlencoded"};function a(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var l,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(l=i(5592)),l),transformRequest:[function(e,t){return r(t,"Accept"),r(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(a(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)||t&&"application/json"===t["Content-Type"]?(a(t,"application/json"),function(e,t,i){if(n.isString(e))try{return(0,JSON.parse)(e),n.trim(e)}catch(e){if("SyntaxError"!==e.name)throw e}return(0,JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,i=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!i&&"json"===this.responseType;if(o||r&&n.isString(e)&&e.length)try{return JSON.parse(e)}catch(e){if(o){if("SyntaxError"===e.name)throw s(e,this,"E_JSON_PARSE");throw e}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};n.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){c.headers[e]=n.merge(o)})),e.exports=c},9641:e=>{e.exports={version:"0.22.0"}},9012:e=>{"use strict";e.exports=function(e,t){return function(){for(var i=new Array(arguments.length),n=0;n<i.length;n++)i[n]=arguments[n];return e.apply(t,i)}}},9106:(e,t,i)=>{"use strict";var n=i(9516);function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,i){if(!t)return e;var s;if(i)s=i(t);else if(n.isURLSearchParams(t))s=t.toString();else{var o=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),o.push(r(t)+"="+r(e))})))})),s=o.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},4680:e=>{"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},3948:(e,t,i)=>{"use strict";var n=i(9516);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,i,r,s,o){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),n.isString(r)&&a.push("path="+r),n.isString(s)&&a.push("domain="+s),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},9137:e=>{"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},5019:e=>{"use strict";e.exports=function(e){return"object"==typeof e&&!0===e.isAxiosError}},4202:(e,t,i)=>{"use strict";var n=i(9516);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a");function r(e){var n=e;return t&&(i.setAttribute("href",n),n=i.href),i.setAttribute("href",n),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:"/"===i.pathname.charAt(0)?i.pathname:"/"+i.pathname}}return e=r(window.location.href),function(t){var i=n.isString(t)?r(t):t;return i.protocol===e.protocol&&i.host===e.host}}():function(){return!0}},7018:(e,t,i)=>{"use strict";var n=i(9516);e.exports=function(e,t){n.forEach(e,(function(i,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=i,delete e[n])}))}},2012:(e,t,i)=>{"use strict";var n=i(9516),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,i,s,o={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),i=n.trim(e.substr(s+1)),t){if(o[t]&&r.indexOf(t)>=0)return;o[t]="set-cookie"===t?(o[t]?o[t]:[]).concat([i]):o[t]?o[t]+", "+i:i}})),o):o}},7980:e=>{"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},4841:(e,t,i)=>{"use strict";var n=i(9641).version,r={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){r[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}}));var s={};r.transitional=function(e,t,i){function r(e,t){return"[Axios v"+n+"] Transitional option '"+e+"'"+t+(i?". "+i:"")}return function(i,n,o){if(!1===e)throw new Error(r(n," has been removed"+(t?" in "+t:"")));return t&&!s[n]&&(s[n]=!0,console.warn(r(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(i,n,o)}},e.exports={assertOptions:function(e,t,i){if("object"!=typeof e)throw new TypeError("options must be an object");for(var n=Object.keys(e),r=n.length;r-- >0;){var s=n[r],o=t[s];if(o){var a=e[s],l=void 0===a||o(a,s,e);if(!0!==l)throw new TypeError("option "+s+" must be "+l)}else if(!0!==i)throw Error("Unknown option "+s)}},validators:r}},9516:(e,t,i)=>{"use strict";var n=i(9012),r=Object.prototype.toString;function s(e){return"[object Array]"===r.call(e)}function o(e){return void 0===e}function a(e){return null!==e&&"object"==typeof e}function l(e){if("[object Object]"!==r.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function c(e){return"[object Function]"===r.call(e)}function h(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),s(e))for(var i=0,n=e.length;i<n;i++)t.call(null,e[i],i,e);else for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.call(null,e[r],r,e)}e.exports={isArray:s,isArrayBuffer:function(e){return"[object ArrayBuffer]"===r.call(e)},isBuffer:function(e){return null!==e&&!o(e)&&null!==e.constructor&&!o(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isPlainObject:l,isUndefined:o,isDate:function(e){return"[object Date]"===r.call(e)},isFile:function(e){return"[object File]"===r.call(e)},isBlob:function(e){return"[object Blob]"===r.call(e)},isFunction:c,isStream:function(e){return a(e)&&c(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function e(){var t={};function i(i,n){l(t[n])&&l(i)?t[n]=e(t[n],i):l(i)?t[n]=e({},i):s(i)?t[n]=i.slice():t[n]=i}for(var n=0,r=arguments.length;n<r;n++)h(arguments[n],i);return t},extend:function(e,t,i){return h(t,(function(t,r){e[r]=i&&"function"==typeof t?n(t,i):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},5396:(e,t,i)=>{"use strict";i.d(t,{O:()=>r});var n=i(2063);function r(e,t){if(e){for(let i in t)if(t.hasOwnProperty(i))if("*"===i)for(let i in e)r(e[i],t["*"]);else{const s=t[i];if(!e.hasOwnProperty(i)||null===e[i]||s&&typeof e[i]!=typeof s||Array.isArray(s)&&!Array.isArray(e[i]))Array.isArray(s)?e[i]=[]:e[i]=n.A.clone(s);else if("object"!=typeof s||Array.isArray(s)){if(Array.isArray(s)&&1===s.length)for(let t=0;t<e[i].length;t++)r(e[i][t],s[0])}else r(e[i],s)}return e}}},6935:(e,t,i)=>{"use strict";i.d(t,{A:()=>r,V:()=>s});const n=i(4728);function r(e){const t=e.replaceAll(/<p>\s*<\/p>/g,"<br/>");return n(t,{allowedTags:["blockquote","code","div","em","li","ol","br","p","strong","b","sub","sup","s","i","u","ul","img","a","h1","h2","h3","h4","h5","h6"],allowedSchemes:["http","https"],allowedAttributes:{a:["href"],img:["src"]}})}function s(e){return n(e,{allowedTags:[]})}},8590:(e,t,i)=>{"use strict";i.d(t,{D9:()=>a,eU:()=>o});var n=i(269);class r{constructor(e,t,i){this.storage=e,this.name=t,this.limit=i,this.items={},this.amountOfElements=0,this.revision=0,this.loadFromSettingsStorage()}_saveItem(e,t){this.storage.setItem(e,JSON.stringify(t))}_getItem(e,t){const i=this.storage.getItem(e);return i?JSON.parse(i):t}loadFromSettingsStorage(){const e=this._getItem(`LSS-${this.name}`);e&&e.items&&e.amountOfElements&&e.revision&&(this.items=e.items,this.amountOfElements=e.amountOfElements,this.revision=e.revision)}saveToSettingsStorage(){this._saveItem(`LSS-${this.name}`,{items:this.items,amountOfElements:this.amountOfElements,revision:this.revision})}save(e,t){if(this.items.hasOwnProperty(e))return this.makeMostRecent(this.items[e]),this.items[e].v=t,void this.saveToSettingsStorage();this.amountOfElements>=this.limit&&this.evict(),this.items[e]={r:this.getNewRevision(),v:t},this.amountOfElements+=1,this.saveToSettingsStorage()}get(e,t){const i=this.items[e];return i?i.v:t}makeMostRecent(e){e.r=this.getNewRevision()}evict(){let e=null,t=0;(0,n.jJ)(this.items,((i,n)=>{(!e||t>i.r)&&(e=n,t=i.r)})),e&&(delete this.items[e],this.amountOfElements-=1)}getElementsCount(){return this.amountOfElements}getNewRevision(){return this.revision+=1,this.revision}}const s={getItem:e=>window.localStorage.getItem(e),setItem(e,t){window.localStorage.setItem(e,t)}};function o(e,t){return new r(s,e,t)}class a{constructor(e=100){this.limit=e,this.items=new Map,this.counter=0}set(e,t){this._makeSpace(),this.counter+=1,this.items.set(e,{value:t,rev:this.counter})}getInstant(e,t){if(this.items.has(e)){const t=this.items.get(e);if(t)return t.value}return t}get(e,t){return this.items.has(e)?Promise.resolve(this.items.get(e).value):t().then((t=>(this._makeSpace(),this.counter+=1,this.items.set(e,{value:t,rev:this.counter}),t)))}_makeSpace(){if(this.items.size<this.limit)return;let e=null,t=0;this.items.forEach(((i,n)=>{(!e||t>i.rev)&&(e=n,t=i.rev)})),e&&this.items.delete(e)}}},176:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(5824),r=i.n(n),s=i(269);class o{constructor(){this.enabled=!0,this.entityId=null,this.id=r().generate()}init(){return!0}play(e){return!1}destroy(){}svg(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg",e);return this._enrichDomElement(n,t,i),n}html(e,t,i){const n=document.createElement(e);return this._enrichDomElement(n,t,i),n}_enrichDomElement(e,t,i){t&&(0,s.jJ)(t,((t,i)=>{e.setAttribute(i,t)})),i&&(0,s.jJ)(i,(t=>{e.appendChild(t)}))}stop(){this.enabled=!1}}},955:(e,t,i)=>{"use strict";i.d(t,{BX:()=>p,N4:()=>u,_j:()=>h});var n=i(5824),r=i.n(n),s=i(269);const o=new Map,a=new Map;class l{constructor(e){this.id=r().generate(),this.editorId=e,this.animationsEnabled=!0,this.isAlreadyLooping=!1,this.animations=[]}play(e,t,i){for(let t=0;t<this.animations.length;t++)if(this.animations[t].id===e.id){this.animations[t].enabled=!1;try{this.animations[t].enabled=!1}catch(e){console.error(e),this.animations[t].destroy()}this.animations.splice(t,1);break}e.entityId=t,e.animationId=i,i&&function(e,t,i){(0,s.jJ)(e.animations,(e=>{e.entityId===t&&e.animationId===i&&(e.enabled=!1)}))}(this,t,i);let n=!1;try{e.enabled=!0,n=e.init()}catch(e){console.error("Could not initialize animation",e)}if(n)this.animations.push(e),(r=this).animationsEnabled&&!r.isAlreadyLooping&&(r.isAlreadyLooping=!0,window.requestAnimationFrame((()=>c(r,performance.now(),0))));else try{e.destroy()}catch(e){console.error(e)}var r}stopAllAnimations(){const e=this.animations;this.animations=[],(0,s.jJ)(e,(e=>{try{e.destroy()}catch(e){console.error(e)}}))}disableAnimations(){this.animationsEnabled=!1}enableAnimations(){this.animationsEnabled=!0}stopAllAnimationsForEntity(e){(0,s.jJ)(this.animations,(t=>{t.entityId===e&&(t.enabled=!1)}))}destroy(){this.stopAllAnimations(),o.has(this.id)&&o.delete(this.id)}}function c(e,t,i){if(0!==e.animations.length)if(e.animationsEnabled){let n=0;for(;n<e.animations.length;){let t=e.animations[n],r=!0;try{r=!!t.enabled&&t.play(Math.min(100,i))}catch(e){r=!1,console.error(e)}if(r)n+=1;else{try{t.destroy()}catch(e){console.error(e)}e.animations.splice(n,1)}}window.requestAnimationFrame((()=>{const i=performance.now();c(e,i,i-t)}))}else e.isAlreadyLooping=!1;else e.isAlreadyLooping=!1}function h(e){const t=new l(e);return o.set(t.id,t),a.set(e,t.id),t}function d(e,t){if(!a.has(e))return;const i=a.get(e);o.has(i)&&t(o.get(i))}function u(e,t,i,n){d(e,(e=>{e.play(t,i,n)}))}function p(e,t){d(e,(e=>{e.stopAllAnimationsForEntity(t)}))}},1953:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>o,Uq:()=>r,t:()=>s});var n=i(176);const r={LINEAR:"linear",STEP:"step",SMOOTH:"smooth",EASE_IN:"ease-in",EASE_OUT:"ease-out",EASE_IN_OUT:"ease-in-out",BOUNCE:"bounce",values(){return[this.LINEAR,this.STEP,this.SMOOTH,this.EASE_IN,this.EASE_OUT,this.EASE_IN_OUT,this.BOUNCE]}};function s(e,t){return t===r.SMOOTH?Math.sin(e*Math.PI/2):t===r.EASE_IN?e*e:t===r.EASE_OUT?1-(e-1)*(e-1):t===r.EASE_IN_OUT?.5-Math.cos(e*Math.PI)/2:"bounce"===t?1-Math.pow(3,-10*e)*Math.cos(10*Math.PI*e):e}class o extends n.A{constructor(e){super(),this.updateCallback=null,this.durationMillis=1e3,this.elapsedTime=0,this.initCallback=null,this.destroyCallback=null,this.animationType="ease-out",e&&(e.durationMillis&&(this.durationMillis=e.durationMillis),e.update&&(this.updateCallback=e.update),e.init&&(this.initCallback=e.init),e.destroy&&(this.destroyCallback=e.destroy),e.animationType&&(this.animationType=e.animationType))}init(){return!!this.updateCallback&&(this.initCallback&&this.initCallback(),!0)}play(e){if(this.elapsedTime+=e,this.elapsedTime>=this.durationMillis){try{this.updateCallback(1)}catch(e){console.error(e)}return!1}const t=this.elapsedTime/this.durationMillis;try{this.updateCallback(s(t,this.animationType))}catch(e){return console.error(e),!1}return!0}destroy(){this.destroyCallback&&this.destroyCallback()}}},4535:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(8176),r=i(8728),s=i(1570),o=i(869);const a={name:"Move along path",args:{item:{name:"Item",type:"element",value:null},path:{name:"Path",type:"element",value:null},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}}},inputs:{distance:{name:"Distance (%)",type:"number",value:0,endValue:100}},create(e,t){const i=t.findFirstElementBySelector(e.item);if(!i)return null;const n=t.findFirstElementBySelector(e.path);if(!n)return null;if(!r.A.find(n.shape))return null;const s=t.getSvgOutlineOfItem(n);return s?{path:s,item:i,pathItem:n,schemeContainer:t,totalLength:s.getTotalLength(),rotateItem:e.rotateItem,rotationOffset:e.rotationOffset}:null},getFullName(e,t){const i=e=>{const i=t.findFirstElementBySelector(e);return i?i.name:"unknown"};return`Move "${i(e.item)}" along the path of "${i(e.path)}"`},execute({path:e,item:t,pathItem:i,schemeContainer:r,totalLength:a,rotateItem:l,rotationOffset:c},{distance:h}){const d=h*a/100,u=e.getPointAtLength(d);let p=(0,o.xS)(u.x,u.y,i);if(l){const n=e.getPointAtLength(d+2),r=(0,o.xS)(n.x,n.y,i),a=r.x-p.x,l=r.y-p.y,h=a*a+l*l;if(!s.A.tooSmall(h)){const e=Math.sqrt(h),i=a/e,n=l/e,r=180*s.A.fullAngleForNormalizedVector(i,n)/Math.PI;t.area.r=r,isFinite(c)&&(t.area.r+=c)}}let f=p;if(t.meta&&t.meta.parentId){const e=r.findItemById(t.meta.parentId);e&&(f=(0,o.Qb)(p.x,p.y,e))}t.area.x=f.x-t.area.w/2,t.area.y=f.y-t.area.h/2,r.updateChildTransforms(t),n.A.item.changed.specific.$emit(r.editorId,t.id)}}},269:(e,t,i)=>{"use strict";function n(e,t){let i=-1;for(let n=0;n<t.length;n++){const r=t[n];if(r.startsWith(e)){const t=r.substring(e.length).trim();if(t.length>0){if(!isNaN(t)){const e=parseInt(t);e>i&&(i=e)}}else i<0&&(i=1)}}return i>=0?`${e}${i+1}`:e}function r(e,t){Array.isArray(e)?e.forEach(t):s(e,t)}function s(e,t){if(e&&"object"==typeof e)for(let i in e)e.hasOwnProperty(i)&&t(e[i],i)}function o(e,t){return Array.isArray(e)?e.map(t):function(e,t){if(!e)return e;if("object"!=typeof e)return e;const i={};for(let n in e)e.hasOwnProperty(n)&&(i[n]=t(e[n],n));return i}(e,t)}function a(e,t){return Array.isArray(e)?e.filter(t):[]}function l(e,t){return Array.isArray(e)?e.find(t):null}function c(e,t){return Array.isArray(e)?e.findIndex(t):null}function h(e,t){if(!e)return e;if("object"!=typeof e)return e;for(let i in e)if(e.hasOwnProperty(i)&&t(e[i],i))return i;return null}function d(e,t){if(!Array.isArray(e))return-1;if("function"==typeof t){for(let i=0;i<e.length;i++)if(t(e[i],i))return i;return-1}return e.indexOf(t)}i.d(t,{I6:()=>l,SL:()=>c,Tj:()=>h,iV:()=>s,jJ:()=>r,kH:()=>o,mA:()=>n,pb:()=>a,qh:()=>d})},5894:(e,t,i)=>{"use strict";function n(e){return`rgba(${e.r},${e.g},${e.b},${e.a})`}function r(e){try{return function(e){const t=(e=e.toLowerCase()).indexOf("("),i=e.indexOf(")");if(t>0&&i>0){const n=e.substring(0,t).trim();if("rgb"===n||"rgba"===n)return function(e){const t=e.split(",");let i=0,n=0,r=0,s=1;return t.length>0&&(i=parseInt(t[0])),t.length>1&&(n=parseInt(t[1])),t.length>2&&(r=parseInt(t[2])),t.length>3&&(s=parseFloat(t[3])),{r:i,g:n,b:r,a:s}}(e.substring(t+1,i))}if("#"===e.charAt(0))return function(e){let t=0,i=0,n=0;return 3===e.length?(t=parseInt(`${e[0]}${e[0]}`,16),i=parseInt(`${e[1]}${e[1]}`,16),n=parseInt(`${e[2]}${e[2]}`,16)):(e.length>=2&&(t=parseInt(e.substring(0,2),16)),e.length>=4&&(i=parseInt(e.substring(2,4),16)),e.length>=6&&(n=parseInt(e.substring(4,6),16))),{r:t,g:i,b:n,a:1}}(e.substring(1));throw new Error("Cannot parse color: "+e)}(e)}catch(e){}return{r:0,g:0,b:0,a:1}}i.d(t,{H0:()=>r,_T:()=>n})},4804:(e,t,i)=>{"use strict";i.d(t,{X:()=>f,p:()=>p});var n=i(5824),r=i.n(n),s=i(1570),o=i(7234),a=i(3550),l=i(9898),c=i(8176),h=i(711),d=i(9131);const u="view";function p(e,t,i,n,p){if(n.state.apiClient&&n.state.apiClient.getScheme)return i.meta.componentSchemeContainer=null,i.meta.componentUserEventBus=null,i.meta.componentLoadFailed=!1,n.state.apiClient.getScheme(i.shapeProps.schemeId).then((e=>e&&e.scheme?(0,d.vN)(e.scheme.items,n).catch((e=>{console.error(e),a.A.addErrorSystemMessage(n,"Failed to load shapes")})).then((()=>e)):Promise.reject("Empty document"))).then((a=>{const d=a.scheme,f=new o.Ay(d,e.editorId,u,n.state.apiClient),m=f.cloneItemsPreservingNames(f.scheme.items);d.items=m;const g=(0,o._z)(d.items),y=new o.Ay(d,e.editorId,u,n.state.apiClient,{onSchemeChangeCommitted:()=>{}});y.screenTransform=e.screenTransform,y.screenSettings=e.screenSettings,y.prepareFrameAnimationsForItems(),y.scheme.items.forEach((n=>{n.meta.getParentEnvironment=()=>({item:i,schemeContainer:e,userEventBus:t})}));const v=new l.A(e.editorId),x=Math.max(g.w,1e-5),b=Math.max(g.h,1e-5),w=Math.min(i.area.w/x,i.area.h/b),O=(i.area.w-x*w)/2,S=(i.area.h-b*w)/2,k=(0,o.by)();k.id=r().generate(),k.area.x=0,k.area.y=0,k.area.w=i.area.w,k.area.h=i.area.h,k.selfOpacity=0,k.name="Overlay container";const P=(0,o.by)();P.shape="none",P.selfOpacity=0,P.id=r().generate(),P.name="Scaled container",P.area.x=O,P.area.y=S,P.area.w=x,P.area.h=b,P.area.px=0,P.area.py=0,P.area.sx=w,P.area.sy=w;const C=(0,o.by)();C.shape="none",C.selfOpacity=0,C.id=r().generate(),C.name="Displacement container",C.area.x=-g.x,C.area.y=-g.y,C.area.w=g.w,C.area.h=g.h,C.area.px=0,C.area.py=0,C.area.sx=1,C.area.sy=1,P._childItems=[C],k._childItems=[P],C.meta.componentItemIdsForInit=y.indexUserEvents(v,p),C.meta.componentSchemeContainer=y,C.meta.componentUserEventBus=v;const A=(0,h.qk)(i,k,e.screenTransform);A&&k._childItems.push(A),i._childItems=[k];const I=s.A.standardTransformWithArea(i.meta.transformMatrix,i.area);e.reindexSpecifiedItems(i._childItems,I,i,i.meta.ancestorIds.concat([i.id]),!1),e.indexUserEventsForItems(i._childItems,t,p);const T=e.shadowTransform?e.shadowTransform:s.A.identityMatrix(),$=s.A.multiplyMatrices(s.A.standardTransformWithArea(s.A.multiplyMatrices(T,P.meta.transformMatrix),P.area),s.A.translationMatrix(-g.x,-g.y));return y.setShadowTransform($),c.A.item.changed.specific.$emit(e.editorId,i.id),t.emitItemEvent(i.id,h.TW),{schemeContainer:y,userEventBus:v}})).catch((r=>{console.error(r),a.A.addErrorSystemMessage(n,"Failed to load component","scheme-component-load"),i.meta.componentLoadFailed=!0,i.meta.componentSchemeContainer=null,i.meta.componentUserEventBus=null,i._childItems=[],c.A.component.loadFailed.specific.$emit(e.editorId,i.id,i),t.emitItemEvent(i.id,h.Ej)}))}function f(e){if(!Array.isArray(e._childItems)||e._childItems.length<1)return;const t=e._childItems[0];if(!Array.isArray(t._childItems)||t._childItems.length<1)return;const i=t._childItems[0];if(!Array.isArray(i._childItems)||i._childItems.length<1)return;const n=i._childItems[0];return n.meta.componentSchemeContainer&&n.meta.componentUserEventBus?{schemeContainer:n.meta.componentSchemeContainer,userEventBus:n.meta.componentUserEventBus}:void 0}},8176:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(6678),r=i.n(n);const s=new(i(6354).Vy)("EditorEventBus"),o=new(r())({});function a(e,t,i){let n=e+"/"+t;return i&&i.length>0?n+"/"+i.join("/"):n}function l(e,t,i,n){if(!e)throw new Error("editorId should be specified, got: ",e);o.$on(a(e,t,i),n)}function c(e,t,i,n){if(!e)throw new Error("editorId should be specified, got: ",e);o.$off(a(e,t,i),n)}function h(e,t,i,...n){if(!e)throw new Error("editorId should be specified, got: ",e);const r=a(e,t,i);s.infoEvent(r,n),o.$emit(r,...n)}const d={custom:{$on:(e,t,i)=>l(e,`custom-${t}`,[],i),$off:(e,t,i)=>c(e,`custom-${t}`,[],i),$emit:(e,t,...i)=>h(e,`custom-${t}`,[],...i)},schemeChangeCommitted:{$on:(e,t)=>l(e,"scheme-change-committed",[],t),$off:(e,t)=>c(e,"scheme-change-committed",[],t),$emit:(e,t)=>h(e,"scheme-change-committed",[],t)},patchedSchemeUpdated:{$on:(e,t)=>l(e,"patched-scheme-updated",[],t),$off:(e,t)=>c(e,"patched-scheme-updated",[],t),$emit:(e,t)=>h(e,"patched-scheme-updated",[],t)},schemeRebased:{$on:(e,t)=>l(e,"scheme-rebased",[],t),$off:(e,t)=>c(e,"scheme-rebased",[],t),$emit:(e,t)=>h(e,"scheme-rebased",[],t)},item:{custom:{$on:(e,t,i,n)=>l(t,e,[i],n),$off:(e,t,i,n)=>c(t,e,[i],n),$emit:(e,t,i,...n)=>h(t,e,[i],...n)},userEvent:{$on:(e,t)=>l(e,"shape-custom-event",[],t),$off:(e,t)=>c(e,"shape-custom-event",[],t),$emit:(e,t,i,...n)=>{h(e,"shape-custom-event",[],...[t,i].concat(n))}},selected:{any:{$on:(e,t)=>l(e,"any-item-selected",[],t),$off:(e,t)=>c(e,"any-item-selected",[],t),$emit:(e,t)=>h(e,"any-item-selected",[],t)},specific:{$on:(e,t,i)=>l(e,"item-selected",[t],i),$off:(e,t,i)=>c(e,"item-selected",[t],i),$emit:(e,t)=>{d.item.selected.any.$emit(e,t),h(e,"item-selected",[t])}}},deselected:{any:{$on:(e,t)=>l(e,"any-item-deselected",[],t),$off:(e,t)=>c(e,"any-item-deselected",[],t),$emit:(e,t)=>h(e,"any-item-deselected",[],t)},specific:{$on:(e,t,i)=>l(e,"item-deselected",[t],i),$off:(e,t,i)=>c(e,"item-deselected",[t],i),$emit:(e,t)=>{d.item.deselected.any.$emit(e,t),h(e,"item-deselected",[t])}}},clicked:{any:{$on:(e,t)=>l(e,"any-item-clicked",[],t),$off:(e,t)=>c(e,"any-item-clicked",[],t),$emit:(e,t)=>h(e,"any-item-clicked",[],t)}},changed:{any:{$on:(e,t)=>l(e,"any-item-changed",[],t),$off:(e,t)=>c(e,"any-item-changed",[],t),$emit:(e,t,i)=>h(e,"any-item-changed",[],t,i)},specific:{$on:(e,t,i)=>l(e,"item-changed",[t],i),$off:(e,t,i)=>c(e,"item-changed",[t],i),$emit:(e,t,i)=>{d.item.changed.any.$emit(e,t,i),h(e,"item-changed",[t],t,i)}}},linksShowRequested:{$on:(e,t)=>l(e,"item-links-show-requested",[],t),$off:(e,t)=>c(e,"item-links-show-requested",[],t),$emit:(e,t,i)=>h(e,"item-links-show-requested",[],t,i)},templateSelected:{$on:(e,t)=>l(e,"item-template-selected",[],t),$off:(e,t)=>c(e,"item-template-selected",[],t),$emit:(e,t,i)=>{h(e,"item-template-selected",[],t,i)}},templateArgsUpdated:{specific:{$on:(e,t,i)=>l(e,"item-template-args-changed",[t],i),$off:(e,t,i)=>c(e,"item-template-args-changed",[t],i),$emit:(e,t)=>{h(e,"item-template-args-changed",[t],t)}}}},textSlot:{triggered:{any:{$on:(e,t)=>l(e,"any-text-slot-triggered",[],t),$off:(e,t)=>c(e,"any-text-slot-triggered",[],t),$emit:(e,t,i,n,r,s)=>{h(e,"any-text-slot-triggered",[],t,i,n,r,s)}},specific:{$on:(e,t,i)=>l(e,"text-slot-triggered",[t],i),$off:(e,t,i)=>c(e,"text-slot-triggered",[t],i),$emit:(e,t,i,n,r,s)=>{d.textSlot.triggered.any.$emit(e,t,i,n,r,s),h(e,"text-slot-triggered",[t.id],t,i,n,r,s)}}},canceled:{any:{$on:(e,t)=>l(e,"any-text-slot-canceled",[],t),$off:(e,t)=>c(e,"any-text-slot-canceled",[],t),$emit:(e,t,i)=>{h(e,"any-text-slot-canceled",[],t,i)}},specific:{$on:(e,t,i)=>l(e,"text-slot-canceled",[t],i),$off:(e,t,i)=>c(e,"text-slot-canceled",[t],i),$emit:(e,t,i)=>{d.textSlot.canceled.any.$emit(e,t,i),h(e,"text-slot-canceled",[t.id],t,i)}}},moved:{$on:(e,t)=>l(e,"text-slot-moved",[],t),$off:(e,t)=>c(e,"text-slot-moved",[],t),$emit:(e,t,i,n)=>{h(e,"text-slot-moved",[],t,i,n)}}},inPlaceTextEditor:{created:{$on:(e,t)=>l(e,"in-place-text-editor-created",[],t),$off:(e,t)=>c(e,"in-place-text-editor-created",[],t),$emit:(e,t)=>{h(e,"in-place-text-editor-created",[],t)}}},void:{clicked:{$on:(e,t)=>l(e,"void-clicked",[],t),$off:(e,t)=>c(e,"void-clicked",[],t),$emit:e=>h(e,"void-clicked",[])},doubleClicked:{$on:(e,t)=>l(e,"void-double-clicked",[],t),$off:(e,t)=>c(e,"void-double-clicked",[],t),$emit:(e,t,i,n,r)=>h(e,"void-double-clicked",[],t,i,n,r)}},component:{loadRequested:{any:{$on:(e,t)=>l(e,"any-component-load-requested",[],t),$off:(e,t)=>c(e,"any-component-load-requested",[],t),$emit:(e,t,i,n)=>h(e,"any-component-load-requested",[],t,i,n)},specific:{$on:(e,t,i)=>l(e,"component-load-requested",[t],i),$off:(e,t,i)=>c(e,"component-load-requested",[t],i),$emit:(e,t,i,n,r)=>{d.component.loadRequested.any.$emit(e,i,n,r),h(e,"component-load-requested",[t],i,n,r)}}},destroyed:{$on:(e,t)=>l(e,"component-destroyed",[],t),$off:(e,t)=>c(e,"component-destroyed",[],t),$emit:(e,t,i)=>h(e,"component-destroyed",[],t,i)},loadFailed:{any:{$on:(e,t)=>l(e,"any-component-load-failed",[],t),$off:(e,t)=>c(e,"any-component-load-failed",[],t),$emit:(e,t)=>h(e,"any-component-load-failed",[],t)},specific:{$on:(e,t,i)=>l(e,"component-load-failed",[t],i),$off:(e,t,i)=>c(e,"component-load-failed",[t],i),$emit:(e,t,i)=>{d.component.loadFailed.any.$emit(e,i),h(e,"component-load-failed",[t],i)}}}},zoomToAreaRequested:{$on:(e,t)=>l(e,"zoom-to-area-requested",[],t),$off:(e,t)=>c(e,"zoom-to-area-requested",[],t),$emit:(e,t,i)=>h(e,"zoom-to-area-requested",[],t,i)},elementPick:{requested:{$on:(e,t)=>l(e,"element-pick-requested",[],t),$off:(e,t)=>c(e,"element-pick-requested",[],t),$emit:(e,t)=>h(e,"element-pick-requested",[],t)},canceled:{$on:(e,t)=>l(e,"element-pick-canceled",[],t),$off:(e,t)=>c(e,"element-pick-canceled",[],t),$emit:e=>h(e,"element-pick-canceled",[])}},screenTransformUpdated:{$on:(e,t)=>l(e,"screen-transform-updated",[],t),$off:(e,t)=>c(e,"screen-transform-updated",[],t),$emit:(e,t)=>h(e,"screen-transform-updated",[],t)},itemSurround:{created:{$on:(e,t)=>l(e,"item-surround-created",[],t),$off:(e,t)=>c(e,"item-surround-created",[],t),$emit:(e,t,i,n)=>h(e,"item-surround-created",[],t,i,n)}},behaviorPanel:{requested:{$on:(e,t)=>l(e,"behavior-panel-requested",[],t),$off:(e,t)=>c(e,"behavior-panel-requested",[],t),$emit:e=>h(e,"behavior-panel-requested",[])}},editBox:{updated:{$on:(e,t)=>l(e,"edit-box-items-updated",[],t),$off:(e,t)=>c(e,"edit-box-items-updated",[],t),$emit:e=>h(e,"edit-box-items-updated",[])},fillEnabled:{$on:(e,t)=>l(e,"edit-box-fill-enabled",[],t),$off:(e,t)=>c(e,"edit-box-fill-enabled",[],t),$emit:e=>h(e,"edit-box-fill-enabled",[])},fillDisabled:{$on:(e,t)=>l(e,"edit-box-fill-disabled",[],t),$off:(e,t)=>c(e,"edit-box-fill-disabled",[],t),$emit:e=>h(e,"edit-box-fill-disabled",[])}},framePlayer:{prepared:{$on:(e,t)=>l(e,"frame-player-prepared",[],t),$off:(e,t)=>c(e,"frame-player-prepared",[],t),$emit:(e,t,i)=>h(e,"frame-player-prepared",[],t,i)}},searchKeywordUpdated:{$on:(e,t)=>l(e,"search-keyword-updated",[],t),$off:(e,t)=>c(e,"search-keyword-updated",[],t),$emit:(e,t)=>h(e,"search-keyword-updated",[],t)},searchedItemsToggled:{$on:(e,t)=>l(e,"searched-items-toggled",[],t),$off:(e,t)=>c(e,"searched-items-toggled",[],t),$emit:e=>h(e,"searched-items-toggled",[])},clickableMarkers:{toggled:{$on:(e,t)=>l(e,"clickable-markers-toggled",[],t),$off:(e,t)=>c(e,"clickable-markers-toggled",[],t),$emit:e=>h(e,"clickable-markers-toggled",[])}},colorControlToggled:{$on:(e,t)=>l(e,"color-control-toggled",[],t),$off:(e,t)=>c(e,"color-control-toggled",[],t),$emit:(e,t)=>h(e,"color-control-toggled",[],t)},editorResized:{$on:(e,t)=>l(e,"editor-resized",[],t),$off:(e,t)=>c(e,"editor-resized",[],t),$emit:e=>h(e,"editor-resized",[])},scriptLog:{$on:(e,t)=>l(e,"script-log",[],t),$off:(e,t)=>c(e,"script-log",[],t),$emit:(e,t,i)=>h(e,"script-log",[],t,i)},exportSchemeAsPicture:{$on:(e,t)=>l(e,"export-scheme-as-picture",[],t),$off:(e,t)=>c(e,"export-scheme-as-picture",[],t),$emit:(e,t)=>h(e,"export-scheme-as-picture",[],t)}},u=d},7562:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(269);const r=[{name:"default",fontAwesomeSymbol:"",cssClass:"fas fa-link"},{name:"doc",fontAwesomeSymbol:"",cssClass:"fas fa-project-diagram"},{name:"logs",fontAwesomeSymbol:"",cssClass:"fas fa-stream"},{name:"graphs",fontAwesomeSymbol:"",cssClass:"fas fa-chart-line"},{name:"video",fontAwesomeSymbol:"",cssClass:"fas fa-video"},{name:"file",fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"}],s={default:{fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"},pdf:{fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-pdf"}};function o(e,t){t.forEach((t=>s[t]=e))}o({fontAwesomeSymbol:"",cssClass:"fa-regular fa-file-image"},["jpg","png","bmp","gif","tiff"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file"},["doc","docx","odt","rtf"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-excel"},["xls","xlsx"]),o({fontAwesomeSymbol:"",cssClass:"fa-solid fa-file-zipper"},["zip","gz","bz2","iso"]);const a={knownTypes:r,findTypeByNameOrDefault:e=>(0,n.I6)(r,(t=>t.name===e))||r[0],findFileIcon:e=>s.hasOwnProperty(e)?s[e]:s.default}},4286:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});const n={solid:()=>"",dotted:e=>`${e} ${2*e}`,dashed:e=>`${4*e} ${4*e}`,"dashed-2":e=>`${4*e} ${2*e}`,"dashed-3":e=>`${4*e} ${8*e}`,"dashed-dotted":e=>`${4*e} ${2*e} ${2*e} ${2*e}`,"dashed-dotted-2":e=>`${4*e} ${e} ${e} ${e}`,"dashed-dotted-3":e=>`${8*e} ${4*e} ${4*e} ${4*e}`,"dashed-dotted-4":e=>`${8*e} ${2*e} ${2*e} ${2*e}`},r={createDashArray(e,t){const i=n[e];return i?i(t):""},generateStrokeHtml(e,t,i,n,r){return`<svg width="${n}px" height="${r}px"><path d="M0 ${i} l ${n} 0" fill="none" stroke="#111111" stroke-width="${t}" stroke-dasharray="${this.createDashArray(e,t)}"/></svg>`},patterns:Object.keys(n),SOLID:"solid",DASHED:"dashed",DOTTED:"dotted"}},2687:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={shapeConfig:{shapeType:"standard",id:"bracket",menuItems:[{name:"Curly Bracket",group:"General",iconUrl:"/assets/images/items/curly-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"curly"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Square Bracket",group:"General",iconUrl:"/assets/images/items/square-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"square"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}},{name:"Round Bracket",group:"General",iconUrl:"/assets/images/items/round-bracket.svg",item:{shapeProps:{fill:{type:"none"},style:"round"}},size:{w:20,h:200},previewArea:{x:5,y:30,w:130,h:15,r:0}}],getPins:e=>({}),getTextSlots:e=>[],computePath(e){const t={x:0,y:0},i={x:0,y:1};let n=e.area.h;const r={x:1,y:0};let s=e.area.w;e.area.w<e.area.h&&(i.x=1,i.y=0,n=e.area.w,r.x=0,r.y=-1,s=e.area.h,t.x=0,t.y=e.area.h);let o=[];o="curly"===e.shapeProps.style?function(e,t,i,n,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{type:"Q",x1:e.x+t.x*n/2,y1:e.y+t.y*n/2,x2:e.x+t.x*n/2+i.x*s,y2:e.y+t.y*n/2+i.y*s},{x:e.x+t.x*n/2+i.x*(r/2-o),y:e.y+t.y*n/2+i.y*(r/2-o)},{type:"Q",x1:e.x+t.x*n/2+i.x*(r/2),y1:e.y+t.y*n/2+i.y*r/2,x2:e.x+t.x*n+i.x*(r/2),y2:e.y+t.y*n+i.y*(r/2)},{type:"Q",x1:e.x+t.x*n/2+i.x*(r/2),y1:e.y+t.y*n/2+i.y*r/2,x2:e.x+t.x*n/2+i.x*(r/2+o),y2:e.y+t.y*n/2+i.y*(r/2+o)},{x:e.x+t.x*n/2+i.x*(r-s),y:e.y+t.y*n/2+i.y*(r-s)},{type:"Q",x1:e.x+i.x*r+t.x*n/2,y1:e.y+i.y*r+t.y*n/2,x2:e.x+i.x*r,y2:e.y+i.y*r}]}(t,i,r,n,s):"curly-sharp"===e.shapeProps.style?function(e,t,i,n,r){const s=Math.min(40,.2*r),o=Math.min(20,.2*r);return[e,{x:e.x+t.x*n/2+i.x*s,y:e.y+t.y*n/2+i.y*s},{x:e.x+t.x*n/2+i.x*(r/2-o),y:e.y+t.y*n/2+i.y*(r/2-o)},{x:e.x+t.x*n+i.x*(r/2),y:e.y+t.y*n+i.y*(r/2)},{x:e.x+t.x*n/2+i.x*(r/2+o),y:e.y+t.y*n/2+i.y*(r/2+o)},{x:e.x+t.x*n/2+i.x*(r-s),y:e.y+t.y*n/2+i.y*(r-s)},{x:e.x+i.x*r,y:e.y+i.y*r}]}(t,i,r,n,s):"round"===e.shapeProps.style?function(e,t,i,n,r){const s=.3;return[e,{type:"C",x1:e.x+t.x*n+i.x*s,y1:e.y+t.y*n+i.y*s,x2:e.x+t.x*n+i.x*(r-s),y2:e.y+t.y*n+i.y*(r-s),x3:e.x+i.x*r,y3:e.y+i.y*r}]}(t,i,r,n,s):function(e,t,i,n,r){return[e,{x:e.x+t.x*n,y:e.y+t.y*n},{x:e.x+t.x*n+i.x*r,y:e.y+t.y*n+i.y*r},{x:e.x+i.x*r,y:e.y+i.y*r}]}(t,i,r,n,s);let a=`M ${o[0].x} ${o[0].y}`;for(let e=1;e<o.length;e++)"C"===o[e].type?a+=` C ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2} ${o[e].x3} ${o[e].y3}`:"Q"===o[e].type?a+=` Q ${o[e].x1} ${o[e].y1} ${o[e].x2} ${o[e].y2}`:a+=` L ${o[e].x} ${o[e].y}`;return a},args:{style:{type:"choice",value:"curly",name:"Style",options:["curly","curly-sharp","square","round"]}}}}},5858:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(269),r=i(1570);const s={tail:function(e){let t=0,i=0;return"top"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,i=-e.shapeProps.tailLength):"bottom"===e.shapeProps.tailSide?(t=e.shapeProps.tailPosition,i=e.area.h+e.shapeProps.tailLength):"left"===e.shapeProps.tailSide?(t=-e.shapeProps.tailLength,i=e.shapeProps.tailPosition):"right"===e.shapeProps.tailSide&&(t=e.area.w+e.shapeProps.tailLength,i=e.shapeProps.tailPosition),{x:t,y:i}},tailWidth:function(e){const t=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),i=e.area.w,n=e.area.h;let s=0,o=0;const a=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let n=0;const l=Math.max(0,i-2*t);l>0&&(n=r.A.clamp(e.shapeProps.tailPosition/l,0,1)),s=t+a+(l-a)*n,o=0}else if("bottom"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,i-2*t);c>0&&(l=1-r.A.clamp(e.shapeProps.tailPosition/c,0,1)),s=i-t-a-(c-a)*l,o=n}else if("left"===e.shapeProps.tailSide){let i=0;const l=Math.max(0,n-2*t);l>0&&(i=1-r.A.clamp(e.shapeProps.tailPosition/l,0,1)),s=0,o=n-t-a-(l-a)*i}else if("right"===e.shapeProps.tailSide){let l=0;const c=Math.max(0,n-2*t);c>0&&(l=r.A.clamp(e.shapeProps.tailPosition/c,0,1)),s=i,o=t+a+(c-a)*l}return{x:s,y:o}},cornerRadius:function(e){return{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}},o={shapeConfig:{shapeType:"standard",id:"comment",menuItems:[{group:"Basic Shapes",name:"Comment",iconUrl:"/assets/images/items/comment.svg",item:{shapeProps:{cornerRadius:5,tailLength:20,tailWidth:20,tailSide:"bottom",tailPosition:10}},previewArea:{x:5,y:5,w:130,h:60,r:0}}],computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);let s=`M 0 ${n} `,o=[{name:"top",length:t-2*n,invertT:!0,p1x:n,p1y:0,vx:1,vy:0,nx:0,ny:-1,ax:1,ay:-1},{name:"right",length:i-2*n,invertT:!0,p1x:t,p1y:n,vx:0,vy:1,nx:1,ny:0,ax:1,ay:1},{name:"bottom",length:t-2*n,invertT:!1,p1x:t-n,p1y:i,vx:-1,vy:0,nx:0,ny:1,ax:-1,ay:1},{name:"left",length:i-2*n,invertT:!1,p1x:0,p1y:i-n,vx:0,vy:-1,nx:-1,ny:0,ax:-1,ay:-1}];const a=Math.max(0,e.shapeProps.tailWidth);for(let t=0;t<o.length;t++){const i=o[t];if(s+=`a ${n} ${n} 0 0 1 ${n*i.ax} ${n*i.ay} `,e.shapeProps.tailSide===i.name){const t=e.shapeProps.tailLength,n=Math.min(Math.max(0,i.length-a),a);let o=0;i.length>0&&(o=r.A.clamp(e.shapeProps.tailPosition/i.length,0,1)),i.invertT&&(o=1-o);const l=(i.length-n)*(1-o),c=(i.length-n)*o,h=l*i.vx,d=l*i.vy,u=i.p1x+h,p=i.p1y+d,f=u+n*i.vx,m=p+n*i.vy,g=f+c*i.vx,y=m+c*i.vy;let v=0,x=0;"bottom"===i.name||"top"===i.name?(v=e.shapeProps.tailPosition,x=i.p1y+t*i.ny):(x=e.shapeProps.tailPosition,v=i.p1x+t*i.nx),s+=`L ${i.p1x} ${i.p1y} L ${u} ${p} L ${v} ${x}  L ${f} ${m} L ${g} ${y} `}else s+=`l ${i.length*i.vx} ${i.length*i.vy} `}return s+=" z",s},controlPoints:{make(e,t){if(t)return s[t](e);{const t={};return(0,n.jJ)(s,((i,n)=>{t[n]=i(e)})),t}},handleDrag(e,t,i,n,s,o){"tail"===t?function(e,t,i,n,s){let o=t+n,a=i+s,l=3;r.A.identifyPointSideAgainstLine(o,a,r.A.createLineEquation(0,0,e.area.w,e.area.h))<0&&(l&=1),r.A.identifyPointSideAgainstLine(o,a,r.A.createLineEquation(0,e.area.h,e.area.w,0))<0&&(l&=2),0===l?(e.shapeProps.tailSide="top",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=-a):3===l&&(e.shapeProps.tailSide="bottom",e.shapeProps.tailPosition=o,e.shapeProps.tailLength=a-e.area.h),2==l?(e.shapeProps.tailSide="left",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=-o):1==l&&(e.shapeProps.tailSide="right",e.shapeProps.tailPosition=a,e.shapeProps.tailLength=o-e.area.w)}(e,i,n,s,o):"cornerRadius"===t?e.shapeProps.cornerRadius=Math.max(0,e.area.w-Math.max(e.area.w/2,i+s)):"tailWidth"===t&&function(e,t,i,n,s){const o=t+n,a=i+s,l=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),c=e.area.w,h=e.area.h,d=Math.max(0,e.shapeProps.tailWidth);if("top"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,c-2*l);i>0&&(t=r.A.clamp(e.shapeProps.tailPosition/i,0,1));const n=l+(i-d)*t;e.shapeProps.tailWidth=r.A.clamp(o-n,0,i/2)}else if("bottom"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,c-2*l);i>0&&(t=1-r.A.clamp(e.shapeProps.tailPosition/i,0,1));const n=c-l-(i-d)*t;e.shapeProps.tailWidth=r.A.clamp(n-o,0,i/2)}else if("left"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,h-2*l);i>0&&(t=1-r.A.clamp(e.shapeProps.tailPosition/i,0,1));const n=h-l-(i-d)*t;e.shapeProps.tailWidth=r.A.clamp(n-a,0,i/2)}else if("right"===e.shapeProps.tailSide){let t=0;const i=Math.max(0,h-2*l);i>0&&(t=r.A.clamp(e.shapeProps.tailPosition/i,0,1));const n=l+(i-d)*t;e.shapeProps.tailWidth=r.A.clamp(a-n,0,i/2)}}(e,i,n,s,o)}},args:{cornerRadius:{type:"number",value:10,name:"Corner radius",min:0},tailLength:{type:"number",value:30,name:"Tail Length"},tailWidth:{type:"number",value:40,name:"Tail Width"},tailSide:{type:"choice",value:"bottom",name:"Tail Side",options:["top","bottom","left","right"]},tailPosition:{type:"number",value:0,name:"Tail Position"}}}}},5394:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1570);const r={shapeConfig:{shapeType:"standard",id:"donut_segment",menuItems:[{group:"Basic Shapes",name:"Donut Segment",iconUrl:"/assets/images/items/donut-segment.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,i=e.area.h/2,r=Math.min(e.area.w,e.area.h)/2,s=r*n.A.clamp(e.shapeProps.hole,0,100)/100;if(e.shapeProps.percent<1e-4)return`M ${t} ${i-s} L ${t} ${i-r}`;if(e.shapeProps.percent>99.99)return`M ${t-r} ${i}\n                    A ${r} ${r} 0 1 1 ${t+r} ${i}\n                    A ${r} ${r} 0 1 1 ${t-r} ${i}\n                    M ${t+s} ${i}\n                    A ${s} ${s} 0 1 0 ${t-s} ${i}\n                    A ${s} ${s} 0 1 0 ${t+s} ${i} Z`;const o=2*Math.PI*e.shapeProps.percent/100,a=t+Math.sin(o)*r,l=i-Math.cos(o)*r,c=t+Math.sin(o)*s,h=i-Math.cos(o)*s,d=e.shapeProps.percent<50?0:1;return`M ${t} ${i-s}\n                L ${t} ${i-r}\n                A ${r} ${r} 0 ${d} 1 ${a} ${l}\n                L ${c} ${h}\n                A ${s} ${s} 0 ${d} 0 ${t} ${i-s} Z`},args:{percent:{type:"number",value:75,min:0,max:100,name:"Segment Percent (%)",description:"Percent of the donut area that should be filled"},hole:{type:"number",value:75,min:0,max:100,name:"Donut Percent (%)"}}}}},2645:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(4912);const r={shapeConfig:{shapeType:"standard",id:"ellipse",menuItems:[{group:"Basic Shapes",name:"Ellipse",iconUrl:"/assets/images/items/ellipse.svg"}],getPins:e=>(0,n.aO)(e),computePath:e=>(0,n.cM)(e.area.w,e.area.h)}}},9131:(e,t,i)=>{"use strict";i.d(t,{vN:()=>l});var n=i(2505),r=i.n(n),s=i(3627),o=i(3550),a=i(8728);function l(e,t){const i=function(e){const t=new Set;return(0,s.zD)(e,(e=>{e.shape&&!a.A.find(e.shape)&&t.add(e.shape)})),Array.from(t)}(e);return i&&i.length>0?function(e,t){const i=new Set;if(e.forEach((e=>{const t=e.split(":");3===t.length&&i.add(t[2])})),0===i.size)return Promise.resolve(null);const n=t.state.assetsPath||"/assets",s=n.endsWith("/")?"":"/";return r().get(`${n}${s}shapes/shapes.json`).then((e=>{const n=e.data;if(!n)return null;const s=new Map;return n.forEach((e=>{s.set(e.id,e)})),Promise.all(Array.from(i).map((e=>{const i=s.get(e);return i?r().get(i.ref).then((i=>{const n="string"==typeof i.data?JSON.parse(i.data):i.data;!function(e,t,i){if("object"!=typeof i||!Array.isArray(i.shapes))throw new Error(`Invalid shape group in ${url}`);i.shapes.forEach((e=>{if("templated"!==e.shapeConfig.shapeType)return;const i=function(e,t){return`ext:${t.shapeConfig.id}:${e}`}(t,e);a.A.registerTemplatedShape(i,e.shapeConfig)})),o.A.registerShapeGroupId(e,t)}(t,e,n)})):Promise.resolve(null)})))}))}(i,t):Promise.resolve()}},5395:(e,t,i)=>{"use strict";i.d(t,{Ay:()=>a,DS:()=>o,wU:()=>s});var n=i(4912);const r=function(){const e=["Space","Left","Right","Up","Down","Enter","Escape"];for(let t=65;t<90;t++)e.push(String.fromCharCode(t));for(let t=48;t<58;t++)e.push(String.fromCharCode(t));return e}(),s="Key up",o="Key down",a={props:["item","mode"],shapeConfig:{shapeType:"standard",id:"key_bind",menuItems:[{group:"General",name:"Key",iconUrl:"/assets/images/items/key-bind.svg",description:"\n                Used for reacting on keyboard events\n            ",item:{name:"Key",shapeProps:{},textSlots:{body:{text:"Key"}}},previewArea:{x:3,y:30,w:100,h:100}}],computeOutline:e=>(0,n.Ew)(e.area.w,e.area.h,Math.min(e.area.w/4,e.area.h/4)),getTextSlots:e=>(Math.min(e.area.w/4,e.area.h/4),[{name:"body",area:{x:0,y:0,w:e.area.w,h:3*e.area.h/4}}]),computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} ZM ${t} ${i-2*n} a ${n} ${n} 0 0 1 ${-n} ${n} L ${n} ${i-n} a ${n} ${n} 0 0 1 ${-n} ${-n}`},editorProps:{onlyEditMode:!0},getEvents(e){const t=[];return e.shapeProps.down&&t.push({name:o,description:"Triggered once when key is pressed"}),e.shapeProps.up&&t.push({name:s,description:"Triggered when key is being released"}),t},args:{key:{type:"choice",value:"Space",options:r,name:"Key",immutable:!0},down:{type:"boolean",value:!0,name:"Key down event",immutable:!0},up:{type:"boolean",value:!0,name:"Key up event",immutable:!0},active:{type:"boolean",value:!0,name:"Active"}}}}},7279:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1570);const r={shapeConfig:{shapeType:"standard",id:"npoly",menuItems:[{group:"Basic Shapes",name:"N-Polygon",iconUrl:"/assets/images/items/npolygon.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath:e=>function(e){const t=e.area.w/2,i=e.area.h/2,r=Math.max(3,e.shapeProps.corners),s=[];for(let n=0;n<r;n++){const o=e.area.w/2*Math.cos(2*n*Math.PI/r-Math.PI/2+e.shapeProps.angle*Math.PI/180)+t,a=e.area.h/2*Math.sin(2*n*Math.PI/r-Math.PI/2+e.shapeProps.angle*Math.PI/180)+i;s.push({x:o,y:a})}return e.shapeProps.rounding>0?function(e,t){const i=function(e){let t=0;for(let i=1;i<e.length;i++){const r=e[i-1],s=e[i],o=n.A.distanceBetweenPoints(r.x,r.y,s.x,s.y);(1===i||t>o)&&(t=o)}return t}(e);let r="";const s=i*n.A.clamp(t,0,100)/200;for(let t=0;t<e.length;t++){let i=t-1;i<0&&(i=e.length-1);const o=(t+1)%e.length,a=e[i],l=e[t],c=e[o],h=n.A.distanceBetweenPoints(a.x,a.y,l.x,l.y),d=n.A.distanceBetweenPoints(l.x,l.y,c.x,c.y),u=(a.x-l.x)/h,p=(a.y-l.y)/h,f=(c.x-l.x)/d,m=(c.y-l.y)/d,g=l.x+u*s,y=l.y+p*s,v=l.x+f*s,x=l.y+m*s,b=c.x-f*s,w=c.y-m*s;0===t&&(r=`M ${g} ${y}`);const O=l.x-g,S=l.y-y,k=l.x-v,P=-S,C=O,A=-(l.y-x),I=k,T=n.A.createLineEquation(g,y,g+P,y+C),$=n.A.createLineEquation(v,x,v+A,x+I);let M=null;if(T&&$&&(M=n.A.linesIntersection(T,$)),M){const e=n.A.distanceBetweenPoints(g,y,M.x,M.y);r+=` A ${e} ${e} 0 0 1 ${v} ${x} L ${b} ${w}`}else r+=` L ${v} ${x} L ${b} ${w}`}return r+" Z"}(s,e.shapeProps.rounding):function(e){let t=`M ${e[0].x} ${e[0].y} `;for(let i=1;i<e.length;i++)t+=` L ${e[i].x} ${e[i].y} `;return t+" Z"}(s)}(e),args:{corners:{type:"number",value:6,name:"Corners"},angle:{type:"number",value:0,name:"Angle"},rounding:{type:"number",value:0,name:"Rounding (%)",min:0,max:100}}}}},5752:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(4912);const r={shapeConfig:{shapeType:"empty",id:"none",menuItems:[{group:"General",name:"Text",iconUrl:"/assets/images/items/text.svg",item:{textSlots:{body:{text:"Text ...",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,n.aO)(e),computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${i}  L 0 ${i} Z`},args:{}}}},5564:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={shapeConfig:{shapeType:"standard",id:"pie_segment",menuItems:[{group:"Basic Shapes",name:"Pie Segment",iconUrl:"/assets/images/items/pie-segment.svg",size:{w:60,h:60},previewArea:{x:0,y:0,w:150,h:150,r:0}}],computePath(e){const t=e.area.w/2,i=e.area.h/2,n=Math.min(e.area.w,e.area.h)/2;if(e.shapeProps.percent<1e-4)return`M ${t} ${i} L ${t} ${i-n}`;if(e.shapeProps.percent>99.99)return`M ${t-n} ${i} A ${n} ${n} 0 1 1 ${t+n} ${i}  A ${n} ${n} 0 1 1 ${t-n} ${i} Z`;const r=2*Math.PI*e.shapeProps.percent/100,s=t+Math.sin(r)*n,o=i-Math.cos(r)*n;return`M ${t} ${i-n} A ${n} ${n} 0 ${e.shapeProps.percent<50?0:1} 1 ${s} ${o} L ${t} ${i} Z`},args:{percent:{type:"number",value:75,min:0,max:100,name:"Percent (%)",description:"Percent of the circle area that should be filled"}}}}},3269:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"rect",menuItems:[{group:"Basic Shapes",name:"Rect",iconUrl:"/assets/images/items/rect.svg",item:{shapeProps:{cornerRadius:0}}},{group:"Basic Shapes",name:"Rounded Rect",iconUrl:"/assets/images/items/rounded-rect.svg",item:{shapeProps:{cornerRadius:20}}},{group:"General",name:"Overlay",iconUrl:"/assets/images/items/overlay.svg",ignoreRecentProps:!0,description:"\n                It lets you create a clickable area on the image (or any other element of the scheme) and treat it like an object.\n                E.g. you can select it, trigger events or connect it to other items on the page.\n            ",item:{cursor:"pointer",opacity:5,shapeProps:{cornerRadius:0},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:50,animated:!0,animationDuration:.2,transition:"ease-in-out"}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:5,animated:!0,animationDuration:.2,transition:"ease-in-out"}}]}]}}},{group:"General",name:"Button",iconUrl:"/assets/images/items/button.svg",ignoreRecentProps:!0,item:{cursor:"pointer",opacity:100,shapeProps:{cornerRadius:20,fill:{type:"gradient",color:"rgba(29, 108, 176, 1)",gradient:{colors:[{c:"rgba(25, 121, 204, 1)",p:0},{c:"rgba(86, 172, 246, 1)",p:100}],type:"linear",direction:0}},strokeColor:"rgba(39, 132, 211, 1)",strokeSize:2,strokePattern:"solid"},textSlots:{body:{bold:!0,text:"<p>Button</p>",color:"rgba(255, 255, 255, 1)",halign:"center",valign:"middle"}},behavior:{events:[{event:"mousein",actions:[{element:"self",method:"set",args:{field:"opacity",value:90}}]},{event:"mouseout",actions:[{element:"self",method:"set",args:{field:"opacity",value:100}}]}]}},previewArea:{x:0,y:0,w:140,h:60,r:0}}],getPins:e=>(0,r.aO)(e),computePath:e=>(0,r.Ew)(e.area.w,e.area.h,e.shapeProps.cornerRadius),editorProps:{},controlPoints:{make:e=>({cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}),handleDrag(e,t,i,r,s,o){"cornerRadius"===t&&(e.shapeProps.cornerRadius=Math.max(0,n.A.roundPrecise(e.area.w-Math.max(e.area.w/2,i+s),1)))}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0}}}}},8728:(e,t,i)=>{"use strict";i.d(t,{A:()=>M});var n=i(269),r=i(1570),s=i(2063),o=i(9135),a=i(7298);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(e){return{name:e.name,width:e.area.w,height:e.area.h,args:e.shapeProps}}function u(e,t){const i=(0,o.On)({"$-eval":e||[],controlPoints:t||[]}),n=e=>i(d(e)).controlPoints;return{make(e){const t={};return n(e).forEach((i=>{const n=(r.A.clamp(e.shapeProps[i.updates],i.min,i.max)-i.min)/(i.max-i.min);t[i.id]={x:i.start.x*(1-n)+i.end.x*n,y:i.start.y*(1-n)+i.end.y*n}})),t},handleDrag(e,t,i,s,o,a){const l=n(e).find((e=>e.id===t));if(!l)return;const c=l.end.x-l.start.x,h=l.end.y-l.start.y,d=i+o-l.start.x,u=s+a-l.start.y,p=Math.abs(r.A.projectVectorToVector(d,u,c,h)),f=c*c+h*h;if(r.A.tooSmall(f))return;const m=r.A.clamp(p/Math.sqrt(f),0,1);e.shapeProps[l.updates]=l.min*(1-m)+l.max*m}}}function p(e,t){if(!Array.isArray(t))return null;const i=(0,o.On)({"$-eval":e||[],pins:t});return e=>{const t=i(d(e)),n={};return t.pins.forEach((e=>{const t=e.id;delete e.id,n[t]=e})),n}}function f(e,t){if(!t)return null;const i=(0,o.On)({"$-eval":e||[],obj:t});return e=>i(d(e)).obj}function m(e,t){const i=(0,o.On)({"$-eval":e||[],primitives:t});return e=>Array.isArray(t)?i(d(e)).primitives.map((t=>{if("text"===t.type){if("relative"===t.transformType){const{x:i,y:n,w:r,h:s}=t.area;t.area={x:i*e.area.w/100,y:n*e.area.h/100,w:r*e.area.w/100,h:s*e.area.h/100}}return{type:t.type,text:t.text||"",fontSize:t.fontSize||12,fontColor:t.fontColor||"rgba(0, 0, 0, 1.0)",area:t.area||{x:0,y:0,w:e.area.w,h:e.area.h}}}return{fill:t.fill||{type:"none"},strokeColor:t.strokeColor||"rgba(0,0,0,1.0)",strokeSize:t.hasOwnProperty("strokeSize")?t.strokeSize:0,strokePattern:t.hasOwnProperty("strokePattern")?t.strokePattern:"solid",type:t.type,svgPath:(0,a.wJ)(e,t)}})):[]}function g(e,t){const i=(0,o.On)({"$-eval":e||[],outlines:t});return e=>{if(!Array.isArray(t))return null;const n=i(d(e));let r="";return n.outlines.forEach((t=>{const i=(0,a.wJ)(e,t);i&&(r+=i+" ")})),r}}const y=i(7543).A,v=i(3704).A;let x=[i(3269).A,i(5752).A,i(2645).A,i(7279).A,i(7689).A,i(4993).A,i(2687).A,i(1003).A,i(5858).A,i(6849).A,i(773).A,i(1578).A,i(5672).A,i(4232).A,i(128).A,i(5395).Ay,i(464).A,i(4094).A,i(1380).A,i(5564).A,i(5394).A,i(1182).A,i(711).Ay,i(7224).A,i(8679).A,i(6295).A,i(3971).A,i(4818).A,i(9240).A,i(6502).A,i(4420).A,i(1750).A,i(5398).A,i(5389).A,i(5520).A,i(3693).A,i(8129).A,i(9711).A,i(5387).A,i(7972).A,i(9294).A,i(5159).A,i(8523).A,i(3763).A,i(9545).A,i(6814).A,i(41).A,i(1058).A];function b(e){return[]}x=x.concat(y.shapes).concat(v.shapes);const w={description:"rich",onlyEditMode:!1,customTextRendering:!1,disableEventLayer:!1},O={fill:{name:"Fill",type:"advanced-color"},strokeColor:{name:"Stroke",type:"color"},strokeSize:{name:"Stroke Size",type:"number"},strokePattern:{name:"Stroke Pattern",type:"stroke-pattern"}};function S(e){return[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}]}function k(e){return{c:{x:e.area.w/2,y:e.area.h/2}}}function P(e,t,i){return r.A.worldPointInArea(e,t,i.area,i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null)}function C(e){const t=P(0,0,e),i=P(e.area.w,0,e),n=P(e.area.w,e.area.h,e),r=P(0,e.area.h,e),s=[];return e.area.w>1e-4&&(Math.abs(t.y-i.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:t.y}),Math.abs(n.y-r.y)<1e-4&&s.push({item:e,snapperType:"horizontal",value:n.y}),Math.abs(t.x-r.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:t.x}),Math.abs(i.x-n.x)<1e-4&&s.push({item:e,snapperType:"vertical",value:i.x})),s}function A(e){return{x:r.A.clamp(5,e.area.w-15-5,e.area.w-15),y:r.A.clamp(5,0,e.area.h-15),w:15,h:15}}function I(e,t){let i={};e.shapeConfig&&(i=e.shapeConfig),i.shapeType||console.error(`Missing shapeType for shape "${t}"`);const r={};return"standard"===i.shapeType&&(0,n.jJ)(O,((e,t)=>{r[t]=s.A.clone(e)})),i.args&&(0,n.jJ)(i.args,((e,t)=>{r[t]=s.A.clone(e),e.onUpdate&&(r[t].onUpdate=e.onUpdate)})),{shapeType:i.shapeType,editorProps:i.editorProps||w,args:r,computePath:i.computePath,computePrimitives:i.computePrimitives,computeOutline:i.computeOutline||i.computePath,readjustItem:i.readjustItem,getTextSlots:i.getTextSlots||S,getEvents:i.getEvents||b,controlPoints:i.controlPoints||null,getDetailsMarker:i.getDetailsMarker||A,getPins:i.getPins||k,shapeEvents:{beforeCreate:i.beforeCreate,mounted:i.mounted},fixItem:i.fixItem,getSnappers:i.getSnappers||C,vueComponent:"vue"===i.shapeType?e:null,menuItems:i.menuItems||[],onMouseDown:i.onMouseDown,onMouseMove:i.onMouseMove,onMouseOut:i.onMouseOut,onTextSlotTextUpdate:i.onTextSlotTextUpdate,computeCustomAreas:i.computeCustomAreas,scriptFunctions:i.scriptFunctions||null,argType(e){return this.args&&this.args[e]?this.args[e].type:"standard"===this.shapeType&&O[e]?O[e].type:null}}}const T={};function $(e,t){const i=function(e){const t=e.args||{},i=e.includeStandardArgs?{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#111111",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke Size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"}}:{};return{shapeConfig:{id:e.id,shapeType:"templated",menuItems:e.menuItems,computeOutline:g(e.init,e.outlines),computePrimitives:m(e.init,e.primitives),getPins:p(e.init,e.pins),getTextSlots:f(e.init,e.textSlots||[]),controlPoints:u(e.init,e.controlPoints),args:c(c({},i),t),editorProps:e.editorProps}}}(t);i.shapeConfig.id=e,T[e]=I(i)}(0,n.jJ)(x,(function(e){if(e.shapeConfig.id){if("raw"===e.shapeConfig.shapeType)throw new Error("Raw shapes are not supported");if("templated"===e.shapeConfig.shapeType)try{$(e.shapeConfig.id,e.shapeConfig)}catch(t){console.error(`Failed to register shape ${e.shapeConfig.id}`,t)}else T[e.shapeConfig.id]=I(e)}}));const M={getShapeIds:()=>Object.keys(T),find:e=>T[e],standardShapeProps:O,getShapePropDescriptor:function(e,t){return"standard"===e.shapeType&&O.hasOwnProperty(t)?O[t]:e.args&&e.args.hasOwnProperty(t)?e.args[t]:null},getRegistry:function(){return T},getShapeArgs:function(e){if(!e)return{};if("standard"===e.shapeType||e.includeStandardArgs){const t={},i=(e,i)=>t[i]=e;return(0,n.jJ)(O,i),(0,n.jJ)(e.args,i),t}return e.args},registerTemplatedShape:$}},4912:(e,t,i)=>{"use strict";function n(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:i/2,nx:-1,ny:0},r:{x:t,y:i/2,nx:1,ny:0}}}function r(e,t){const i=e/2,n=t/2;return`M 0 ${n} A ${i} ${n} 0 1 1 ${e} ${n}  A ${i} ${n} 0 1 1 0 ${n} Z`}function s(e,t,i){const n=Math.min(i,e/2,t/2);return`M ${e-n} ${t}  L ${n} ${t} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${e-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${e} ${t-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`}function o(e,t){return`M ${e} ${t}  L 0 ${t}  L 0 0  L ${e} 0  L ${e} ${t} Z`}i.d(t,{Ew:()=>s,WS:()=>o,aO:()=>n,cM:()=>r})},7298:(e,t,i)=>{"use strict";i.d(t,{Sf:()=>l,Sn:()=>c,rt:()=>h,wJ:()=>d});var n=i(269),r=i(1570);function s(e){return r.A.roundPrecise2(e)}const o=100;function a(e,t){return"A"===e.t?function(e,t,i,n,o){const a=r.A.distanceBetweenPoints(e,t,i,n),l=a*o/100;if(r.A.tooSmall(l)||r.A.tooSmall(a))return`L ${s(i)} ${s(n)} `;const c=Math.abs(l/2+a*a/(8*l));let h=Math.abs(l)>a/2?1:0,d=o>0?1:0;return`A ${s(c)} ${s(c)} 0 ${h} ${d} ${s(i)} ${s(n)}`}(e.x,e.y,t.x,t.y,e.h):"L"===e.t&&"B"===t.t?`Q ${s(t.x1+t.x)} ${s(t.y1+t.y)} ${s(t.x)} ${s(t.y)} `:"B"===e.t&&"B"!==t.t?`Q ${s(e.x2+e.x)} ${s(e.y2+e.y)} ${s(t.x)} ${s(t.y)} `:"B"===e.t&&"B"===t.t?`C ${s(e.x2+e.x)} ${s(e.y2+e.y)} ${s(t.x1+t.x)} ${s(t.y1+t.y)} ${s(t.x)} ${s(t.y)} `:`L ${s(t.x)} ${s(t.y)} `}function l(e,t,i,r){if(i.length<2)return null;let o="",l=null,c=null;return(0,n.jJ)(i,(i=>{const n=h(i,e,t);c||(c=n),o+=l?a(l,n):`M ${s(n.x)} ${s(n.y)} `,l=n})),r&&l&&c&&(o+=a(l,c),o+=" Z"),o}function c(e,t,i){let n=1,s=1;return r.A.tooSmall(t)&&(t=1,n=0),r.A.tooSmall(i)&&(i=1,s=0),"B"===e.t?{t:"B",x:r.A.roundPrecise2(e.x*o*n/t),y:r.A.roundPrecise2(e.y*o*s/i),x1:r.A.roundPrecise2(e.x1*o*n/t),y1:r.A.roundPrecise2(e.y1*o*s/i),x2:r.A.roundPrecise2(e.x2*o*n/t),y2:r.A.roundPrecise2(e.y2*o*s/i)}:"A"===e.t?{t:e.t,x:r.A.roundPrecise2(e.x*o*n/t),y:r.A.roundPrecise2(e.y*o*s/i),h:e.h||50}:{t:"L",x:r.A.roundPrecise2(e.x*o*n/t),y:r.A.roundPrecise2(e.y*o*s/i)}}function h(e,t,i){return"B"===e.t?{t:e.t,x:r.A.roundPrecise2(t*e.x/o),y:r.A.roundPrecise2(i*e.y/o),x1:r.A.roundPrecise2(t*e.x1/o),y1:r.A.roundPrecise2(i*e.y1/o),x2:r.A.roundPrecise2(t*e.x2/o),y2:r.A.roundPrecise2(i*e.y2/o)}:"A"===e.t?{t:e.t,x:r.A.roundPrecise2(t*e.x/o),y:r.A.roundPrecise2(i*e.y/o),h:e.h}:{t:"L",x:r.A.roundPrecise2(t*e.x/o),y:r.A.roundPrecise2(i*e.y/o)}}function d(e,t){return"path"===t.type?function(e,t){if(!Array.isArray(t.paths))return null;let i=t.paths;"absolute"===t.transformType&&(i=t.paths.map((t=>({closed:t.closed,id:t.id,points:t.points.map((t=>c(t,e.area.w,e.area.h)))}))));let r="";return(0,n.jJ)(i,(t=>{const i=l(e.area.w,e.area.h,t.points,t.closed);r+=i+" "})),r}(e,t):"ellipse"===t.type?function(e,t){if(!t.area)return null;const{x:i,y:n,w:r,h:s}=t.area,o=r/2,a=s/2;return`M ${i} ${n+a} A ${o} ${a} 0 1 1 ${i+r} ${n+a}  A ${o} ${a} 0 1 1 ${i} ${n+a} Z`}(0,t):(console.error("Uknown raw shape type: "+t.type),null)}},4094:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(4912);const r={shapeConfig:{shapeType:"standard",id:"basic_diamond",menuItems:[{group:"Basic Shapes",name:"Diamond",iconUrl:"/assets/images/items/basic-diamond.svg"},{group:"UML",name:"Decision",iconUrl:"/assets/images/items/basic-diamond.svg"}],computePath:e=>function(e){const t=e.area.w,i=e.area.h;return`M ${t/2} 0  L ${t} ${i/2}  L ${t/2} ${i}  L 0 ${i/2} Z`}(e),getPins:e=>(0,n.aO)(e),args:{}}}},464:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1570);const r={shapeConfig:{shapeType:"standard",id:"basic_triangle",computePath(e){const t=e.area.w*e.shapeProps.skewP/100;return`M 0 ${e.area.h}  L ${t} 0  L ${e.area.w} ${e.area.h} Z`},controlPoints:{make:e=>({skewP:{x:e.area.w*e.shapeProps.skewP/100,y:0}}),handleDrag(e,t,i,r,s,o){"skewP"===t&&e.area.w>.01&&(e.shapeProps.skewP=n.A.roundPrecise1(n.A.clamp(100*(i+s)/e.area.w,0,100)))}},getPins(e){const t=e.area.w*e.shapeProps.skewP/100;return{c:{x:(t+e.area.w)/3,y:2*e.area.h/3},c1:{x:t,y:0},c2:{x:e.area.w,y:e.area.h},c3:{x:0,y:e.area.h},e1:{x:t/2,y:e.area.h/2},e2:{x:t+(e.area.w-t)/2,y:e.area.h/2},e3:{x:e.area.w/2,y:e.area.h}}},menuItems:[{group:"Basic Shapes",name:"Triangle",iconUrl:"/assets/images/items/basic-triangle.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:50}}},{group:"Basic Shapes",name:"Left Triangle",iconUrl:"/assets/images/items/basic-triangle-left.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:0}}},{group:"Basic Shapes",name:"Right Triangle",iconUrl:"/assets/images/items/basic-triangle-right.svg",item:{textSlots:{body:{valign:"bottom",halign:"center"}},shapeProps:{skewP:100}}}],args:{skewP:{type:"number",value:50,min:0,max:100,name:"Skew (%)"}}}}},7543:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={group:"Basic Shapes",shapes:[{name:"Cloud",shapeConfig:{shapeType:"templated",pins:[],textSlots:[{name:"body",area:{x:0,y:0,w:{"$-expr":"width"},h:{"$-expr":"height"}}}],primitives:[{type:"path",transformType:"relative",paths:[{points:[{t:"B",x:14.78,y:99.73,x1:20.52,y1:-.26,x2:-4,y2:-.83},{t:"B",x:1.75,y:83.05,x1:2.27,y1:9.24,x2:-2.27,y2:-9.24},{t:"B",x:4.61,y:54.04,x1:-3.38,y1:6.25,x2:3.38,y2:-6.25},{t:"B",x:20.33,y:44.28,x1:-6.34,y1:-2.84,x2:-.13,y2:-4.08},{t:"B",x:26,y:25.05,x1:-4.97,y1:5.3,x2:4.97,y2:-5.3},{t:"B",x:40.28,y:23.09,x1:-5.33,y1:-3.41,x2:1.77,y2:-4},{t:"B",x:51,y:4.46,x1:-7.36,y1:6.04,x2:7.36,y2:-6.04},{t:"B",x:73.5,y:6.14,x1:-6.5,y1:-6.82,x2:6.5,y2:6.82},{t:"B",x:83.92,y:44,x1:1.06,y1:-18.27,x2:2.39,y2:.82},{t:"B",x:96.86,y:56.14,x1:-4.23,y1:-10.86,x2:4.23,y2:10.86},{t:"B",x:93.52,y:92.91,x1:5.91,y1:-6.68,x2:-5.91,y2:6.68},{t:"L",x:83.92,y:99.73}],closed:!0}],strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}}],outlines:[{type:"path",transformType:"relative",paths:[{points:[{t:"B",x:14.78,y:99.72,x1:20.52,y1:-.26,x2:-4,y2:-.83},{t:"B",x:1.75,y:83.04,x1:2.27,y1:9.24,x2:-2.27,y2:-9.24},{t:"B",x:4.61,y:54.04,x1:-3.38,y1:6.25,x2:3.38,y2:-6.25},{t:"B",x:20.33,y:44.26,x1:-6.34,y1:-2.84,x2:-.13,y2:-4.08},{t:"B",x:26,y:25.05,x1:-4.97,y1:5.3,x2:4.97,y2:-5.3},{t:"B",x:40.28,y:23.09,x1:-5.33,y1:-3.41,x2:1.77,y2:-4},{t:"B",x:51,y:4.45,x1:-7.36,y1:6.04,x2:7.36,y2:-6.04},{t:"B",x:73.5,y:6.13,x1:-6.5,y1:-6.82,x2:6.5,y2:6.82},{t:"B",x:83.92,y:44,x1:1.06,y1:-18.28,x2:2.39,y2:.82},{t:"B",x:96.86,y:56.13,x1:-4.23,y1:-10.86,x2:4.23,y2:10.86},{t:"B",x:93.52,y:92.9,x1:5.91,y1:-6.69,x2:-5.91,y2:6.69},{t:"L",x:83.92,y:99.72}],closed:!0}]}],includeStandardArgs:!0,id:"basic_cloud",menuItems:[{group:"Basic Shapes",name:"Cloud",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNDIgMjUuNjY2NjY2NjY2NjY2NjY0IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iNDJweCIgaGVpZ2h0PSIyNS42NjY2NjY2NjY2NjY2NjRweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMywgMykiPjxwYXRoIGQ9Ik0gNS4zMiAxOS42MSBDIDMuODggMTkuNDUgMS40NSAxOC4xNSAwLjYzIDE2LjMzIEMgLTAuMTkgMTQuNTEgMC40NCAxMS44NiAxLjY2IDEwLjYzIEMgMi44OCA5LjQgNS4wNCA4LjE1IDcuMzIgOC43MSBDIDcuMjcgNy45MSA3LjU3IDUuOTcgOS4zNiA0LjkzIEMgMTEuMTUgMy44OSAxMi41OCAzLjg3IDE0LjUgNC41NCBDIDE1LjE0IDMuNzUgMTUuNzEgMi4wNyAxOC4zNiAwLjg4IEMgMjEuMDEgLTAuMzEgMjQuMTIgLTAuMTMgMjYuNDYgMS4yMSBDIDI4LjggMi41NSAzMC41OSA1LjA2IDMwLjIxIDguNjUgQyAzMS4wNyA4LjgxIDMzLjM1IDguOSAzNC44NyAxMS4wNCBDIDM2LjM5IDEzLjE4IDM1LjggMTYuOTYgMzMuNjcgMTguMjcgUSAzMS41NCAxOS41OCAzMC4yMSAxOS42MSBRIDEyLjcxIDE5LjU2IDUuMzIgMTkuNjEgIFogIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PC9nPjwvc3ZnPg==",size:{w:80,h:48.9},previewArea:{x:0,y:0,w:150,h:91.7,r:0}}]}}],preview:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSItMTAgLTEwIDEyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxMzBweCIgaGVpZ2h0PSIxMzBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgMTUuNTU1NTU1NTU1NTU1NTU3KSI+PHBhdGggZD0iTSAxMS44MiA0OC43NiBDIDguNjIgNDguMzUgMy4yMiA0NS4xMiAxLjQgNDAuNiBDIC0wLjQyIDM2LjA4IDAuOTkgMjkuNDggMy42OSAyNi40MiBDIDYuMzkgMjMuMzYgMTEuMTkgMjAuMjYgMTYuMjYgMjEuNjUgQyAxNi4xNiAxOS42NiAxNi44MiAxNC44NCAyMC44IDEyLjI1IEMgMjQuNzggOS42NiAyNy45NiA5LjYyIDMyLjIyIDExLjI5IEMgMzMuNjQgOS4zMyAzNC45MSA1LjEzIDQwLjggMi4xOCBDIDQ2LjY5IC0wLjc3IDUzLjYgLTAuMzMgNTguOCAzIEMgNjQgNi4zMyA2Ny45OSAxMi41OCA2Ny4xNCAyMS41MSBDIDY5LjA1IDIxLjkxIDc0LjExIDIyLjE0IDc3LjQ5IDI3LjQ1IEMgODAuODcgMzIuNzYgNzkuNTUgNDIuMTUgNzQuODIgNDUuNDIgUSA3MC4wOSA0OC42OSA2Ny4xNCA0OC43NiBRIDI4LjI0IDQ4LjYzIDExLjgyIDQ4Ljc2ICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}},1380:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={name:"Star",shapeConfig:{id:"basic_star",shapeType:"templated",init:["R = max(min(width, height) / 2, 0.0001)"],menuItems:[{group:"Basic Shapes",name:"Star",size:{w:80,h:80},previewArea:{x:0,y:0,w:130,h:130,r:0},iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMsIDMpIj48cGF0aCBkPSJNIDEzIDAgTCAxNS40OSA3IEwgMjIuMTkgMy44MSBMIDE5LjAxIDEwLjUyIEwgMjYgMTMgTCAxOS4wMSAxNS40OCBMIDIyLjE5IDIyLjE5IEwgMTUuNDkgMTkuMDEgTCAxMyAyNiBMIDEwLjUyIDE5LjAxIEwgMy44MSAyMi4xOSBMIDYuOTkgMTUuNDggTCAwIDEzIEwgNi45OSAxMC41MiBMIDMuODEgMy44MSBMIDEwLjUyIDYuOTkgTCAxMyAwICBaICIgZmlsbD0iI2ZmZmZmZiIgc3Ryb2tlPSIjMTExMTExIiBzdHJva2Utd2lkdGg9IjJweCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPjwvZz48L3N2Zz4="}],pins:[{id:"c",x:{"$-expr":"width/2"},y:{"$-expr":"height/2"}},{"$-for":{start:0,until:{"$-expr":"args.spikes*2"},it:"idx"},id:{"$-expr":"`p${idx}`"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},nx:{"$-expr":"cos(2*PI()*idx/(args.spikes))"},ny:{"$-expr":"sin(2*PI()*idx/(args.spikes))"}}],includeStandardArgs:!0,args:{spikes:{type:"number",value:8,min:3,max:100,name:"Spikes"},spikeHeight:{type:"number",value:.5,min:0,max:1,name:"Spike height"}},primitives:[{type:"path",fill:{"$-expr":"args.fill"},strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},transformType:"absolute",paths:[{closed:!0,points:[{"$-for":{start:0,until:{"$-expr":"args.spikes * 2"},it:"idx"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},t:"L"}]}]}],outlines:[{type:"path",transformType:"absolute",paths:[{closed:"true",points:[{"$-for":{start:0,until:{"$-expr":"args.spikes * 2"},it:"idx"},x:{"$-expr":"width/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * cos(PI()*(2*idx/(args.spikes*2)-0.5))*width/(2*R)"},y:{"$-expr":"height/2 + ifcond(idx%2 == 0, R, R*args.spikeHeight) * sin(PI()*(2*idx/(args.spikes*2)-0.5))*height/(2*R)"},t:"L"}]}]}],controlPoints:[{id:"spikeHeight",min:0,max:1,start:{x:{"$-expr":"width/2"},y:{"$-expr":"height/2"}},end:{x:{"$-expr":"width/2"},y:{"$-expr":"0"}},updates:"spikeHeight"}],textSlots:[{name:"body",area:{x:0,y:0,w:{"$-expr":"width"},h:{"$-expr":"height"}}}]}}},4818:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(1570),r=i(4912);function s(e){return n.A.clamp(n.A.roundPrecise1(Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius)),0,e.area.h)}function o(e,t){return n.A.clamp(n.A.roundPrecise1((e.area.h-t)*Math.max(e.shapeProps.sectionRatio,10)/100+t),0,e.area.h)}const a={shapeConfig:{shapeType:"standard",id:"uml_class",menuItems:[{group:"UML",name:"Class",iconUrl:"/assets/images/items/uml-class.svg",item:{textSlots:{title:{text:"Class",bold:!0,fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},section1:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5},section2:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.aO)(e),computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4),r=s(e);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} ZM 0 ${r} l ${t} 0M 0 ${o(e,r)} l ${t} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},getTextSlots(e){const t=s(e),i=o(e,t);return[{name:"title",area:{x:0,y:0,w:e.area.w,h:t}},{name:"section1",area:{x:0,y:t,w:e.area.w,h:i-t}},{name:"section2",area:{x:0,y:i,w:e.area.w,h:e.area.h-i}}]},controlPoints:{make:e=>({sectionRatio:{x:e.area.w/2,y:o(e,s(e))},headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,i,r,o,a){if("headerHeight"===t)e.shapeProps.headerHeight=n.A.clamp(n.A.roundPrecise1(r+a),0,e.area.h);else if("cornerRadius"===t)e.shapeProps.cornerRadius=n.A.clamp(n.A.roundPrecise1(e.area.w-i-o),0,Math.min(e.area.w/4,e.area.h/4));else if("sectionRatio"===t){const t=s(e),i=Math.max(0,e.area.h-t);i>0&&(e.shapeProps.sectionRatio=n.A.clamp(n.A.roundPrecise1(100*Math.max(0,r+a-t)/i),0,100))}}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header Height",min:0},sectionRatio:{type:"number",value:50,name:"Section Ratio (%)",min:0,max:100}}}}},3693:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_database",menuItems:[{group:"UML",name:"Database",iconUrl:"/assets/images/items/uml-database.svg",size:{w:100,h:130}}],computePath(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${i-r} C ${t} ${i-s}  ${t-o} ${i} ${a} ${i} C ${o} ${i} 0 ${i-s} 0 ${i-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}C ${t} ${r+s} ${t-o} ${2*r} ${a} ${2*r} C ${o} ${2*r} 0 ${r+s} 0 ${r}`},getPins:e=>(0,r.aO)(e),computeOutline(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.h/3),s=r/2,o=e.area.w/4,a=t/2;return`M ${t} ${r} L ${t} ${i-r} C ${t} ${i-s}  ${t-o} ${i} ${a} ${i} C ${o} ${i} 0 ${i-s} 0 ${i-r} L 0 ${r}C 0 ${s} ${o} 0 ${a} 0  C ${t-o} 0 ${t} ${s} ${t} ${r}`},controlPoints:{make:e=>({skew:{x:e.area.w/2,y:2*n.A.clamp(e.shapeProps.skew,0,e.area.h/3)}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp((r+o)/2,0,e.area.h/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},5520:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_dataflow",menuItems:[{group:"UML",name:"Data Flow",iconUrl:"/assets/images/items/uml-dataflow.svg"}],getPins:e=>(0,r.aO)(e),computePath(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t-r} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${i-s} ${t-r} ${i} Q ${t-2*r} ${i-s} ${t-2*r} ${o} Q ${t-2*r} ${s} ${t-r} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t-r} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t-r} 0 Q ${t} ${s} ${t} ${o} Q ${t} ${i-s} ${t-r} ${i}`},controlPoints:{make:e=>({skew:{x:e.area.w-2*n.A.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp((e.area.w-i-s)/2,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},8129:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_delay",menuItems:[{group:"UML",name:"Delay",iconUrl:"/assets/images/items/uml-delay.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=e.area.h/2,s=n.A.clamp(t-r,0);return`M 0 0 L ${s} 0 A ${Math.min(r,t-s)} ${r} 0 0 1 ${s} ${i} L 0 ${i} Z`}(e),args:{}}}},5389:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={shapeConfig:{shapeType:"standard",id:"uml_document",menuItems:[{group:"UML",name:"Document",iconUrl:"/assets/images/items/uml-document.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.h/8,i=e.area.w,n=e.area.h-t;return[{x:i/2,y:n/2},{x:i/2,y:0,nx:0,ny:-1},{x:i/2,y:n,nx:0,ny:1},{x:0,y:n/2,nx:-1,ny:0},{x:i,y:n/2,nx:1,ny:0}]},computePath:e=>function(e){const t=e.area.h/8,i=e.area.w,n=e.area.h-t,r=n/2;return`M 0 0 L ${i} 0 L ${i} ${n} C ${i/2} ${n-r} ${i/2} ${n+r} 0 ${n} Z`}(e),args:{}}}},41:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(1570),r=i(3627),s=i(4912);const o={shapeConfig:{shapeType:"standard",id:"uml_group",menuItems:[{group:"UML",name:"Group",iconUrl:"/assets/images/items/uml-group.svg",item:{textSlots:{title:{text:"Group",bold:!0,color:"#969696",fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0}},shapeProps:{fill:{type:"none"},strokeSize:3,strokeColor:"rgba(160,160,160,1.0)"}},size:{w:140,h:100}}],getPins:e=>(0,s.aO)(e),computePath(e){const t=e.area.w,i=e.area.h,r=Math.max(0,e.shapeProps.cornerRadius),s=Math.min(r,e.area.w/4,e.area.h/4),o=e.area.w-2*s,a=n.A.clamp(e.shapeProps.gap,0,o);let l=0,c=0;return"begin"===e.shapeProps.align?(l=0,c=o-a):"middle"===e.shapeProps.align?(l=(o-a)/2,c=l):(l=o-a,c=0),"bottom"===e.shapeProps.pos?`M ${t-s} 0  a ${s} ${s} 0 0 1 ${s} ${s} L ${t} ${i-s} a ${s} ${s} 0 0 1 ${-s} ${s}L ${t-s-c} ${i} M ${s+l} ${i} L ${s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L 0 ${s}  a ${s} ${s} 0 0 1 ${s} ${-s} L ${t-s} 0`:`M ${t-s-c} 0  L ${t-s} 0 a ${s} ${s} 0 0 1 ${s} ${s} L ${t} ${i-s} a ${s} ${s} 0 0 1 ${-s} ${s}L ${s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L 0 ${s}  a ${s} ${s} 0 0 1 ${s} ${-s}  L ${s+l} 0`},computeOutline:r.gE,getTextSlots(e){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),i=e.area.w-2*t,r=n.A.clamp(e.shapeProps.gap,0,i);let s=0;s="begin"===e.shapeProps.align?0:"middle"===e.shapeProps.align?(i-r)/2:i-r;const o=n.A.clamp(e.area.h/2,10,50);return[{name:"title",area:{x:t+s,y:-o/2+("bottom"===e.shapeProps.pos?e.area.h:0),w:r,h:o}}]},controlPoints:{make(e){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),i=e.area.w-2*t,r=n.A.clamp(e.shapeProps.gap,0,i);let s=0;return s="begin"===e.shapeProps.align?t+r:"middle"===e.shapeProps.align?(e.area.w+r)/2:e.area.w-t-r,{cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0},gap:{x:s,y:"top"===e.shapeProps.pos?0:e.area.h}}},handleDrag(e,t,i,r,s,o){if("gap"===t){const t=Math.min(Math.max(0,e.shapeProps.cornerRadius),e.area.w/4,e.area.h/4),r=e.area.w-2*t;let o=0,a=i+s;o="begin"===e.shapeProps.align?a-t:"middle"===e.shapeProps.align?2*a-e.area.w:e.area.w-t-a,e.shapeProps.gap=n.A.clamp(o,0,r)}else"cornerRadius"===t&&(e.shapeProps.cornerRadius=n.A.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/4)))}},args:{gap:{type:"number",value:150,name:"Gap size",min:0},pos:{type:"choice",value:"top",name:"Title placement",options:["top","bottom"]},align:{type:"choice",value:"middle",name:"Title alignment",options:["begin","middle","end"]},cornerRadius:{type:"number",value:20,name:"Corner radius",min:0}}}}},5398:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570);function r(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,t/2);return`M ${r} 0 L ${t} 0 L ${t-r} ${i} L 0 ${i} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_input",menuItems:[{group:"UML",name:"Input/Output",iconUrl:"/assets/images/items/uml-input.svg",size:{w:140,h:100}}],getPins(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.w/2);return[{x:t/2,y:i/2},{x:t/2,y:0,nx:0,ny:-1},{x:t/2,y:i,nx:0,ny:1},{x:r/2,y:i/2,nx:-1,ny:0},{x:t-r/2,y:i/2,nx:1,ny:0}]},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:n.A.clamp(e.shapeProps.skew,0,e.area.w/2),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp(i+s,0,e.area.w/2))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},5387:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_loop_limit",menuItems:[{group:"UML",name:"Loop Limit",iconUrl:"/assets/images/items/uml-loop-limit.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,Math.min(t/4,i/2));return`M ${r} 0 L ${t-r} 0 L ${t} ${r} L ${t} ${i} L 0 ${i} L 0 ${r} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.A.clamp(e.shapeProps.skew,0,Math.min(e.area.w/4,e.area.h/2)),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},9240:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1570);const r={shapeConfig:{shapeType:"standard",id:"uml_module",menuItems:[{group:"UML",name:"Module",iconUrl:"/assets/images/items/uml-module.svg",item:{textSlots:{title:{text:"Module",bold:!0,halign:"center"},body:{text:"",halign:"left"}}},size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:4*n.A.clamp(e.shapeProps.brickHeight,0,e.area.h)}}),handleDrag(e,t,i,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=n.A.clamp(i+s,0,e.area.w/2),e.shapeProps.brickHeight=n.A.clamp((r+o)/4,0,e.area.h/4))}},getPins(e){const t=Math.min(e.shapeProps.brickWidth,e.area.w/2)/2,i=e.area.w,n=e.area.h,r=e.area.w-t;return{c:{x:t+r/2,y:n/2},t:{x:t+r/2,y:0,nx:0,ny:-1},b:{x:t+r/2,y:n,nx:0,ny:1},r:{x:t,y:n/2,nx:-1,ny:0},l:{x:i,y:n/2,nx:1,ny:0}}},computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,n);return`M ${t-s} ${i}  L ${n/2+s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${n/2} ${4*r} L ${n} ${4*r} L ${n} ${3*r} L ${n/2} ${3*r} L ${n/2} ${2*r} L ${n} ${2*r} L ${n} ${r} L ${n/2} ${r} L ${n/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${i-s}   a ${s} ${s} 0 0 1 ${-s} ${s} ZM 0 ${r} l ${n} 0  l 0 ${r} l ${-n} 0 ZM 0 ${3*r} l ${n} 0  l 0 ${r} l ${-n} 0 Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.brickWidth,e.area.w/2),r=Math.min(e.shapeProps.brickHeight,e.area.h/4),s=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4,r,n);return`M ${t-s} ${i}  L ${n/2+s} ${i} a ${s} ${s} 0 0 1 ${-s} ${-s} L ${n/2} ${4*r} L 0 ${4*r} L 0 ${3*r} L ${n/2} ${3*r} L ${n/2} ${2*r} L 0 ${2*r} L 0 ${r} L ${n/2} ${r} L ${n/2} ${s}a ${s} ${s} 0 0 1 ${s} ${-s}   L ${t-s} 0   a ${s} ${s} 0 0 1 ${s} ${s}  L ${t} ${i-s}   a ${s} ${s} 0 0 1 ${-s} ${s} Z`},getTextSlots(e){const t=Math.max(e.shapeProps.brickWidth,0);return[{name:"body",area:{x:t,y:0,w:Math.max(0,e.area.w-t),h:e.area.h}}]},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},brickWidth:{type:"number",value:70,name:"Brick Width",min:0},brickHeight:{type:"number",value:20,name:"Brick Height",min:0}}}}},4420:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(1570),r=i(4912);const s=e=>{let t=e.shapeProps.depth;const i=Math.min(e.area.w,e.area.h)/2;return t>i&&(t=i),t},o={shapeConfig:{shapeType:"standard",id:"uml_node",menuItems:[{group:"UML",name:"Node",iconUrl:"/assets/images/items/uml-node.svg",size:{w:140,h:100}}],controlPoints:{make(e){const t=s(e);return{depth:{x:n.A.clamp(e.area.w-t,0,e.area.w),y:n.A.clamp(t,0,e.area.h)}}},handleDrag(e,t,i,r,s,o){"depth"===t&&(e.shapeProps.depth=n.A.clamp(r+o,0,Math.min(e.area.w,e.area.h)/2))}},getPins:e=>(0,r.aO)(e),getTextSlots(e){const t=s(e);return[{name:"body",area:{x:0,y:t,w:e.area.w-t,h:e.area.h-t}}]},computePath(e){const t=e.area.w,i=e.area.h,n=s(e);return`M 0 ${n}  L ${t-n} ${n}  L ${t-n} ${i} L 0 ${i} ZM 0 ${n} L ${n} 0 L ${t} 0 L ${t-n} ${n} ZM ${t-n} ${n} L ${t} 0 L ${t} ${i-n} L ${t-n} ${i} Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=s(e);return`M 0 ${n}  L ${n} 0  L ${t} 0  L ${t} ${i-n} L ${t-n} ${i} L 0 ${i} Z`},args:{depth:{type:"number",value:20,name:"Depth"}}}}},7972:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_note",menuItems:[{group:"UML",name:"Note",iconUrl:"/assets/images/items/uml-note.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,Math.min(t/2,i/2));return`M ${t} ${r} L ${t} ${i} L 0 ${i} L 0 0 L ${t-r} 0 L ${t} ${r} L ${t-r} ${r} L ${t-r} 0`}(e),computeOutline:e=>function(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,Math.min(t/2,i/2));return`M ${t} ${r} L ${t} ${i} L 0 ${i} L 0 0 L ${t-r} 0 Z`}(e),controlPoints:{make(e){const t=n.A.clamp(e.shapeProps.skew,0,Math.min(e.area.w/2,e.area.h/2));return{skew:{x:e.area.w-t,y:t}}},handleDrag(e,t,i,r,s,o){const a=e.area.w-i-s,l=r+o;"skew"===t&&(e.shapeProps.skew=n.A.clamp(Math.max(a,l),0,Math.min(e.area.w/2,e.area.h/2)))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},3971:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_object",menuItems:[{group:"UML",name:"Object",iconUrl:"/assets/images/items/uml-object.svg",item:{textSlots:{title:{text:"Object",bold:!0,fontSize:16,halign:"center",valign:"middle",paddingLeft:0,paddingTop:0,paddingRight:0,paddingBottom:0},body:{text:"",fontSize:14,font:"Courier New",halign:"left",valign:"top",paddingLeft:5,paddingTop:5,paddingRight:5,paddingBottom:5}}},size:{w:140,h:100}}],getPins:e=>(0,r.aO)(e),computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} ZM 0 ${Math.min(e.area.h,Math.max(e.shapeProps.headerHeight,e.shapeProps.cornerRadius))} l ${t} 0`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}  L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:e.shapeProps.headerHeight}},{name:"body",area:{x:0,y:e.shapeProps.headerHeight,w:e.area.w,h:Math.max(10,e.area.h-e.shapeProps.headerHeight)}}],controlPoints:{make:e=>({headerHeight:{x:e.area.w/2,y:e.shapeProps.headerHeight},cornerRadius:{x:e.area.w-e.shapeProps.cornerRadius,y:0}}),handleDrag(e,t,i,r,s,o){"headerHeight"===t?e.shapeProps.headerHeight=n.A.clamp(r+o,0,e.area.h):"cornerRadius"===t&&(e.shapeProps.cornerRadius=n.A.clamp(e.area.w-i-s,0,Math.min(e.area.w/4,e.area.h/4)))}},args:{cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header Height",min:0}}}}},6502:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});var n=i(1570);const r={shapeConfig:{shapeType:"standard",id:"uml_package",menuItems:[{group:"UML",name:"Package",iconUrl:"/assets/images/items/uml-package.svg",size:{w:140,h:100}}],controlPoints:{make:e=>({brick:{x:Math.min(e.shapeProps.brickWidth,e.area.w/2),y:n.A.clamp(e.shapeProps.brickHeight,0,e.area.h/2)}}),handleDrag(e,t,i,r,s,o){"brick"===t&&(e.shapeProps.brickWidth=n.A.clamp(i+s,0,e.area.w/2),e.shapeProps.brickHeight=n.A.clamp(r+o,0,e.area.h/2))}},getPins(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2),r=i-n;return{c:{x:t/2,y:n+r/2},t:{x:t/2,y:n,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:n+r/2,nx:-1,ny:0},r:{x:t,y:n+r/2,nx:1,ny:0}}},computePath(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${n} 0 L ${n} ${r} L 0 ${r} ZM 0 ${r} L ${t} ${r} L ${t} ${i} L 0 ${i} Z`},computeOutline(e){const t=e.area.w,i=e.area.h,n=Math.min(Math.max(0,e.shapeProps.brickWidth),e.area.w/2),r=Math.min(Math.max(0,e.shapeProps.brickHeight),e.area.h/2);return`M 0 0  L ${n} 0 L ${n} ${r}  L ${t} ${r} L ${t} ${i} L 0 ${i} Z`},args:{brickWidth:{type:"number",value:60,name:"Brick width",min:0},brickHeight:{type:"number",value:20,name:"Brick height",min:0}}}}},9711:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_preparation",menuItems:[{group:"UML",name:"Preparation",iconUrl:"/assets/images/items/uml-preparation.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,t/3),s=i/2;return`M ${r} 0 L ${t-r} 0 L ${t} ${s} L ${t-r} ${i} L ${r} ${i} L 0 ${s} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.A.clamp(e.shapeProps.skew,0,e.area.w/3),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp(e.area.w-i-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},3763:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570),r=i(4912);const s={shapeConfig:{shapeType:"standard",id:"uml_process",menuItems:[{group:"UML",name:"Process",iconUrl:"/assets/images/items/uml-process.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>function(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,t/4);return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} Z  M ${r} 0 L ${r} ${i} M ${t-r} 0 L ${t-r} ${i}`}(e),computeOutline:e=>function(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} Z`}(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.A.clamp(e.shapeProps.skew,0,e.area.w/4),y:0}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp(e.area.w-i-s,0,e.area.w/4))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},5159:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570);function r(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0 L ${t} ${i} L 0 ${i} L ${n.A.clamp(i/2,0,t)} ${i/2} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_receive_signal",menuItems:[{group:"UML",name:"Receive Signal",iconUrl:"/assets/images/items/uml-receive-signal.svg"}],getPins(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:n.A.clamp(i/2,0,t),y:i/2,nx:-1,ny:0},r:{x:t,y:i/2,nx:1,ny:0}}},computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},9294:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(1570),r=i(4912);function s(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(i/2,0,t);return`M 0 0 L ${t-r} 0 L ${t} ${i/2} L ${t-r} ${i} L 0 ${i} Z`}const o={shapeConfig:{shapeType:"standard",id:"uml_send_signal",menuItems:[{group:"UML",name:"Send Signal",iconUrl:"/assets/images/items/uml-send-signal.svg"}],getPins:e=>(0,r.aO)(e),computePath:e=>s(e),computeOutline:e=>s(e),args:{}}}},3704:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={group:"UML",shapes:[{name:"User",shapeConfig:{shapeType:"templated",pins:[],textSlots:[{name:"body",area:{x:{"$-expr":"width * 0"},y:{"$-expr":"height * 0"},w:{"$-expr":"width * 1"},h:{"$-expr":"height * 1"},r:0}}],primitives:[{type:"ellipse",area:{x:{"$-expr":"width * 0.5 - height * 0.4/2"},y:0,w:{"$-expr":"height*0.4"},h:{"$-expr":"height*0.4"}},strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}},{type:"path",transformType:"relative",paths:[{points:[{t:"L",x:0,y:100},{t:"B",x:50,y:40,x1:-50,y1:0,x2:50,y2:0},{t:"L",x:100,y:100}],closed:!0}],strokeColor:{"$-expr":"args.strokeColor"},strokeSize:{"$-expr":"1*args.strokeSize"},strokePattern:{"$-expr":"args.strokePattern"},fill:{"$-expr":"args.fill"}}],outlines:[{type:"ellipse",area:{x:{"$-expr":"width * 0.5 - height * 0.4/2"},y:0,w:{"$-expr":"height*0.4"},h:{"$-expr":"height*0.4"}}},{type:"path",transformType:"relative",paths:[{points:[{t:"L",x:0,y:100},{t:"B",x:50,y:40,x1:-50,y1:0,x2:50,y2:0},{t:"L",x:100,y:100}],closed:!0}]}],includeStandardArgs:!0,id:"uml_user",menuItems:[{group:"UML",name:"User",iconUrl:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMzIgMzIiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMsIDMpIj48cGF0aCBkPSJNIDcuOCA1LjIgQSA1LjIgNS4yIDAgMSAxIDE4LjIgNS4yICBBIDUuMiA1LjIgMCAxIDEgNy44IDUuMiBaIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTSAwIDI2IFEgMCAxMC40IDEzIDEwLjQgUSAyNiAxMC40IDI2IDI2IEwgMCAyNiAgWiAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+",size:{w:80,h:80},previewArea:{x:0,y:0,w:150,h:150,r:0},item:{textSlots:{body:{valign:"bottom",paddingBottom:10}}}}]}}],preview:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSItMTAgLTEwIDEyMCAxMjAiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSIxMzBweCIgaGVpZ2h0PSIxMzBweCI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwgMCkiPjxwYXRoIGQ9Ik0gMjQgMTYgQSAxNiAxNiAwIDEgMSA1NiAxNiAgQSAxNiAxNiAwIDEgMSAyNCAxNiBaIiBmaWxsPSIjZmZmZmZmIiBzdHJva2U9IiMxMTExMTEiIHN0cm9rZS13aWR0aD0iMnB4IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+PHBhdGggZD0iTSAwIDgwIFEgMCAzMiA0MCAzMiBRIDgwIDMyIDgwIDgwIEwgMCA4MCAgWiAiIGZpbGw9IiNmZmZmZmYiIHN0cm9rZT0iIzExMTExMSIgc3Ryb2tlLXdpZHRoPSIycHgiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz48L2c+PC9zdmc+"}},1750:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(4912);function r(e){const t=e.area.w,i=e.area.h,n=Math.min(t,i)/2;return`M ${n} 0 L ${t-n} 0 A ${n} ${n} 0 0 1 ${t-n} ${i} L ${n} ${i} A ${n} ${n} 0 0 1 ${n} 0 Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_start",menuItems:[{group:"UML",name:"Start/End",iconUrl:"/assets/images/items/uml-start.svg"}],getPins:e=>(0,n.aO)(e),computePath:e=>r(e),computeOutline:e=>r(e),args:{}}}},8523:(e,t,i)=>{"use strict";i.d(t,{A:()=>s});var n=i(1570);function r(e){const t=e.area.w,i=e.area.h,r=n.A.clamp(e.shapeProps.skew,0,e.area.w/3),s=e.area.h/4,o=i/2;return`M ${t} ${i} L ${r} ${i}  Q 0 ${i-s} 0 ${o}  Q 0 ${s} ${r} 0 L ${t} 0 Q ${t-r} ${s} ${t-r} ${o} Q ${t-r} ${i-s} ${t} ${i} Z`}const s={shapeConfig:{shapeType:"standard",id:"uml_storage",menuItems:[{group:"UML",name:"Storage",iconUrl:"/assets/images/items/uml-storage.svg"}],getPins(e){const t=e.area.w,i=e.area.h;return{c:{x:t/2,y:i/2},t:{x:t/2,y:0,nx:0,ny:-1},b:{x:t/2,y:i,nx:0,ny:1},l:{x:0,y:i/2,nx:-1,ny:0},r:{x:t-n.A.clamp(e.shapeProps.skew,0,e.area.w/3),y:i/2,nx:1,ny:0}}},computePath:e=>r(e),computeOutline:e=>r(e),controlPoints:{make:e=>({skew:{x:e.area.w-n.A.clamp(e.shapeProps.skew,0,e.area.w/3),y:e.area.h/2}}),handleDrag(e,t,i,r,s,o){"skew"===t&&(e.shapeProps.skew=n.A.clamp(e.area.w-i-s,0,e.area.w/3))}},args:{skew:{type:"number",value:20,name:"Skew"}}}}},6814:(e,t,i)=>{"use strict";i.d(t,{A:()=>u});var n=i(1570),r=i(6403),s=i(8176);function o(e){return e.shapeProps.vertical?e.area.w:e.area.h}function a(e){return e.shapeProps.vertical?e.area.h:e.area.w}function l(e){return`M 0 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h} Z`}function c(e,t){let i=0;for(let n=1;n<=t;n++)i+=e.shapeProps[`colw${n}`]*o(e)/100;return e.shapeProps.vertical?{x:n.A.clamp(i,0,o(e)),y:0}:{x:0,y:n.A.clamp(i,0,o(e))}}function h(e,t,i){const n=t.shapeProps.columns;t.shapeProps.columns=i,d(0,t,i,n),s.A.item.changed.specific.$emit(e,t.id,"shapeProps.column"),s.A.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.columns`)}function d(e,t,i,s){const a=[];let l=0,c=o(t);for(let e=1;e<s;e++){const i=t.shapeProps[`colw${e}`]*c/100;a.push(i),l+=i}if(i>s&&i>1&&!n.A.tooSmall(c)){const e=c/(i-1);t.shapeProps.vertical?t.area.w+=e:t.area.h+=e,c=o(t),t.shapeProps["colw"+(i-1)]=100*e/c;for(let e=1;e<s;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c;t.textSlots[`col${i}`]||(t.textSlots[`col${i}`]={text:`Title ${i}`,bold:!0},(0,r.AG)(t.textSlots[`col${i}`]))}if(i<s&&i>0&&!n.A.tooSmall(c)&&(t.shapeProps.vertical?t.area.w=l:t.area.h=l,c=o(t),!n.A.tooSmall(c)))for(let e=1;e<i;e++)t.shapeProps[`colw${e}`]=100*a[e-1]/c}const u={shapeConfig:{shapeType:"standard",id:"uml_swim_lane",menuItems:[{group:"Tables",name:"Swim Lane",iconUrl:"/assets/images/items/uml-swim-lane.svg",item:{shapeProps:{columns:3,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"Todo",bold:!0},col2:{text:"In Progress",bold:!0},col3:{text:"Done",bold:!0}}},previewArea:{x:5,y:5,w:200,h:100},size:{w:800,h:400}},{group:"Tables",name:"Swim Lane (Horizontal)",iconUrl:"/assets/images/items/uml-swim-lane-horizontal.svg",item:{shapeProps:{columns:3,vertical:!1,headerHeight:110,colw1:33.33333,colw2:33.33333,colw3:33.33333},textSlots:{col1:{text:"Todo",bold:!0},col2:{text:"In Progress",bold:!0},col3:{text:"Done",bold:!0}}},previewArea:{x:5,y:5,w:200,h:100},size:{w:800,h:400}}],computePath:function(e){const t=n.A.clamp(e.shapeProps.headerHeight,0,a(e));let i=l(e);e.shapeProps.vertical?i+=` M 0 ${t} L ${e.area.w} ${t}`:i+=` M ${t} 0 L ${t} ${e.area.h}`;let r=0;for(let t=1;t<e.shapeProps.columns;t++){let s=n.A.clamp(r+Math.abs(e.shapeProps[`colw${t}`]),0,100);const l=s*o(e)/100;e.shapeProps.vertical?i+=` M ${l} 0 L ${l} ${a(e)}`:i+=` M 0 ${l} L ${a(e)} ${l}`,r=s}return i},computeOutline:l,getTextSlots:function(e){const t=[],i=o(e);let r=0,s=0;for(let o=1;o<=e.shapeProps.columns;o++){let a=n.A.clamp(r+Math.abs(e.shapeProps[`colw${o}`]),0,100);const l=a*i/100;let c=l-s;o===e.shapeProps.columns&&(c=i-s),e.shapeProps.vertical?t.push({name:`col${o}`,area:{x:s,y:0,w:c,h:e.shapeProps.headerHeight}}):t.push({name:`col${o}`,area:{x:0,y:s,w:e.shapeProps.headerHeight,h:c}}),r=a,s=l}return t},beforeCreate(e,t){const i=n.A.clamp(t.shapeProps.columns,1,12),r=100/i;for(let e=0;e<i;e++)t.shapeProps[`colw${e}`]=r},editorProps:{textSlotTabsDisabled:!0,editBoxControls:(e,t)=>{const i=t.shapeProps.vertical,n=[];return t.shapeProps.columns<100&&n.push({name:"Add Column",type:"button",hPlace:i?"right":"center",vPlace:i?"center":"bottom",iconClass:"fa-solid fa-plus",position:i?{x:30,y:0}:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.columns>=100||h(e,t,t.shapeProps.columns+1)}(e,t)}}),t.shapeProps.columns>1&&n.push({name:"Remove Column",type:"button",hPlace:i?"right":"left",vPlace:i?"top":"bottom",iconClass:"fa-solid fa-minus",position:i?{x:0,y:30}:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.columns<=1||h(e,t,t.shapeProps.columns-1)}(e,t)}}),n}},controlPoints:{make(e){const t={};e.shapeProps.vertical?t.headerHeight={x:0,y:n.A.clamp(e.shapeProps.headerHeight,0,e.area.h)}:t.headerHeight={x:n.A.clamp(e.shapeProps.headerHeight,0,e.area.w),y:0};for(let i=e.shapeProps.columns-1;i>0;i--)t[`colw${i}`]=c(e,i);return t},handleDrag(e,t,i,r,s,l){if(0===t.indexOf("colw")){let a=i+s;e.shapeProps.vertical||(a=r+l);const c=o(e),h=Math.max(1,e.shapeProps.columns);if(n.A.tooSmall(c))return;const d=parseInt(t.substr(4));let u=0;for(let t=1;t<d;t++)u+=e.shapeProps[`colw${t}`]*c/100;const p=Math.max(0,a-u),f=5/h,m=100-5/h;e.shapeProps[`colw${d}`]=n.A.clamp(100*p/c,f,m)}else if("headerHeight"===t){let t=r+l;e.shapeProps.vertical||(t=i+s),e.shapeProps.headerHeight=n.A.clamp(t,0,a(e))}}},args:{columns:{type:"number",value:3,name:"Columns",min:1,max:100,onUpdate:d},headerHeight:{type:"number",value:50,name:"Header Height",min:0,hidden:!0},vertical:{type:"boolean",value:!0,name:"Vertical"},colw1:{type:"number",value:20,name:"Column Width 1",min:0,max:100,hidden:!0},colw2:{type:"number",value:20,name:"Column Width 2",min:0,max:100,hidden:!0},colw3:{type:"number",value:20,name:"Column Width 3",min:0,max:100,hidden:!0},colw4:{type:"number",value:20,name:"Column Width 4",min:0,max:100,hidden:!0},colw5:{type:"number",value:20,name:"Column Width 5",min:0,max:100,hidden:!0},colw6:{type:"number",value:20,name:"Column Width 6",min:0,max:100,hidden:!0},colw7:{type:"number",value:20,name:"Column Width 7",min:0,max:100,hidden:!0},colw8:{type:"number",value:20,name:"Column Width 8",min:0,max:100,hidden:!0},colw9:{type:"number",value:20,name:"Column Width 9",min:0,max:100,hidden:!0},colw10:{type:"number",value:20,name:"Column Width 10",min:0,max:100,hidden:!0},colw11:{type:"number",value:20,name:"Column Width 11",min:0,max:100,hidden:!0},colw12:{type:"number",value:20,name:"Column Width 12",min:0,max:100,hidden:!0}}}}},5999:(e,t,i)=>{"use strict";i.d(t,{E:()=>r});var n=i(8800);function r(e){const t={color:e.color,"font-size":e.fontSize+"px","font-family":(0,n.vH)(e.font),"padding-left":e.paddingLeft+"px","padding-right":e.paddingRight+"px","padding-top":e.paddingTop+"px","padding-bottom":e.paddingBottom+"px","text-align":e.halign,"vertical-align":e.valign,"white-space":e.whiteSpace,display:"table-cell","box-sizing":"border-box","line-height":""+e.lineHeight};return e.letterSpacing>0&&(t["letter-spacing"]=e.letterSpacing+"px"),e.bold&&(t["font-weight"]="bold"),t}},1867:(e,t,i)=>{"use strict";i.d(t,{nC:()=>v,DA:()=>y}),i(2063);var n=i(5894),r=i(1570);function s(e,t,i){const n=document.createElementNS("http://www.w3.org/2000/svg",e);if(t)for(let e in t)t.hasOwnProperty(e)&&n.setAttribute(e,t[e]);if(Array.isArray(i))for(let e=0;e<i.length;e++)n.appendChild(i[e]);return n}const o=s,a={name:"Drop Shadow",supportsCascade:!0,args:{color:{type:"color",value:"rgba(0,0,0,1.0)",name:"Color"},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:10,name:"Offset Y"},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100},inside:{type:"boolean",value:!1,name:"Inside"}},applyEffect(e,t,i){const s=r.A.clamp(i.opacity,0,100)/100;if(i.inside)return{kind:"svg-filter",html:o("g",{},[o("feComponentTransfer",{in:"SourceAlpha"},[o("feFuncA",{type:"table",tableValues:"1 0"})]),o("feGaussianBlur",{stdDeviation:i.blur}),o("feOffset",{dx:i.dx,dy:i.dy,result:"offsetblur"}),o("feFlood",{"flood-color":i.color,result:"color","flood-opacity":s}),o("feComposite",{in2:"offsetblur",operator:"in"}),o("feComposite",{in2:"SourceAlpha",operator:"in"}),o("feMerge",{},[o("feMergeNode",{in:"SourceGraphic"}),o("feMergeNode")])]).innerHTML};{let{r:e,g:t,b:r,a:o}=(0,n.H0)(i.color);return o*=s,{kind:"css-filter",value:`drop-shadow(${i.dx}px ${i.dy}px ${i.blur}px rgba(${e},${t},${r},${o}))`}}}};var l=i(8728);const c=s,h={name:"Glow",supportsCascade:!1,description:"Some shapes do not support this effect",args:{color:{type:"color",value:"rgba(126,237,255,1.0)",name:"Color"},size:{type:"number",value:3,name:"Size",min:0,max:100},blur:{type:"number",value:5,name:"Blur",min:0,max:100},opacity:{type:"number",value:50,name:"Opacity (%)",min:0,max:100}},applyEffect(e,t,i){const n=l.A.find(e.shape);if(!n)return null;const r=n.computeOutline(e);if(!r)return null;const s=`item-effect-glow-${e.id}-${t}`;let o=i.size;const a=l.A.getShapePropDescriptor(n,"strokeSize");return a&&"number"===a.type&&(o=i.size+e.shapeProps.strokeSize),{kind:"front",html:c("g",{},[c("defs",{},[c("filter",{id:s,x:"-500%",y:"-500%",width:"2000%",height:"2000%"},[c("feGaussianBlur",{in:"SourceGraphic",stdDeviation:i.blur})])]),c("path",{d:r,"data-item-id":e.id,stroke:i.color,"stroke-width":`${o}px`,fill:"none",style:"opacity: "+i.opacity/100,filter:`url(#${s})`})]).innerHTML}}};var d=i(7550),u=i(4286);const p=s,f=s,m=s,g={"drop-shadow":a,blur:{name:"Blur",supportsCascade:!0,args:{size:{type:"number",value:5,name:"Size"}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`blur(${i.size}px)`})},glow:h,repeat:{name:"Repeat",description:"Some shapes do not support this effect",args:{repeat:{type:"number",value:3,name:"Repeat",min:1,max:20},dx:{type:"number",value:10,name:"Offset X"},dy:{type:"number",value:-10,name:"Offset Y"},fade:{type:"number",value:0,name:"Fade (%)",min:0,max:100}},applyEffect(e,t,i){const n=l.A.find(e.shape);if(!n||!n.computeOutline)return null;const r=n.computeOutline(e);if(!r)return null;const s=l.A.getShapeArgs(n);let o="none";"image"===e.shape?o=(0,d.fD)({type:"image",image:e.shapeProps.image,stretch:e.shapeProps.stretch,imageBox:{x:0,y:0,w:1,h:1}},`effect-fill-${e.id}`):s.fill&&"advanced-color"===s.fill.type?o=(0,d.fD)(e.shapeProps.fill,`effect-fill-${e.id}`):s.fill&&"color"===s.fill.type&&(o=e.shapeProps.fill);const a=s.strokeColor&&"color"===s.strokeColor.type?e.shapeProps.strokeColor:"#111111",c=s.strokeSize&&"number"===s.strokeSize.type?e.shapeProps.strokeSize:1;let h="";s.strokePattern&&"stroke-pattern"===s.strokePattern.type&&(h=u.A.createDashArray(e.shapeProps.strokePattern,c));const f=p("g",{});for(let t=0;t<i.repeat;t++){const n=(i.repeat-t)*i.dx,s=(i.repeat-t)*i.dy;let l=100,d=100-i.fade,u=(t+1)/i.repeat;const m=p("g",{transform:`translate(${n}, ${s})`,style:"opacity: "+(l*u+d*(1-u))/100});m.appendChild(p("path",{d:r,fill:o,stroke:a,"stroke-width":`${c}px`,"stroke-dasharray":h,"stroke-linejoin":"round","data-item-id":e.id})),f.appendChild(m)}return{kind:"back",html:f.innerHTML}}},invert:{name:"Invert",supportsCascade:!0,args:{level:{type:"number",name:"Level (%)",value:100,min:0,max:100}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`invert(${i.level/100})`})},brightness:{name:"Brightness",supportsCascade:!0,args:{level:{type:"number",name:"Level (%)",value:100,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`brightness(${i.level/100})`})},contrast:{name:"Contrast",supportsCascade:!0,args:{level:{type:"number",name:"Level (%)",value:100,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`contrast(${i.level/100})`})},"hue-rotate":{name:"Hue rotate",supportsCascade:!0,args:{degree:{type:"number",name:"Degrees",value:0,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`hue-rotate(${i.degree}deg)`})},grayscale:{name:"Grayscale",supportsCascade:!0,args:{level:{type:"number",name:"Level (%)",value:100,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`grayscale(${i.level/100})`})},saturate:{name:"Saturate",supportsCascade:!0,args:{level:{type:"number",name:"Level (%)",value:100,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`saturate(${i.level/100})`})},sepia:{supportsCascade:!0,name:"Sepia",args:{level:{type:"number",name:"Level (%)",value:100,min:0}},applyEffect:(e,t,i)=>({kind:"css-filter",value:`sepia(${i.level/100})`})},"adjust-color":{name:"Adjust Color",supportsCascade:!0,args:{matrix:{type:"color-matrix",name:"Color matrix",value:[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0]]}},applyEffect(e,t,i){let n="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0";return Array.isArray(i.matrix)&&(n="",i.matrix.forEach((e=>{Array.isArray(e)?n+=e.join(" "):n+="0 0 0 0 0",n+=" "}))),{kind:"svg-filter",html:f("feColorMatrix",{type:"matrix",values:n}).outerHTML}}},sketch:{name:"Sketch",supportsCascade:!0,args:{wave:{type:"number",value:18,name:"Wave",min:0},scale:{type:"number",value:120,name:"Scale"}},applyEffect:(e,t,i)=>({kind:"svg-filter",html:m("g",{},[m("feTurbulence",{type:"turbulence",baseFrequency:""+i.wave/100,numOctaves:"2",result:"turbulence"}),m("feDisplacementMap",{in2:"turbulence",in:"SourceGraphic",scale:""+i.scale/100,xChannelSelector:"R",yChannelSelector:"G"})]).innerHTML})}};function y(){return g}function v(e){return g[e]}},6354:(e,t,i)=>{"use strict";i.d(t,{Vy:()=>l,su:()=>c});var n=i(269);function r(e){let t=0;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}function s(){const e=new Date;return e.toLocaleTimeString()+"."+e.getMilliseconds()}const o={loggers:{},filterRegex:null,registerLogger(e){const t=Math.abs(r(e))%360;let i=!1;this.loggers.hasOwnProperty(e)&&(i=this.loggers[e].enabled),this.loggers[e]={enabled:i,background:`hsl(${t}, 75%, 35%)`}},showLoggers(){console.log("%cSchemio Log Config!","color: white; display: inline-block; padding: 5px 10px; background: #00aaff; font-family: Helvetica; font-size: 20px; font-weight: bold"),(0,n.jJ)(this.loggers,((e,t)=>{console.log(t)}))},enable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!0,d()},disable(e){this.loggers[e]||console.error("Unknown logger: "+e),this.loggers[e].enabled=!1,d()},filter(e){this.filterRegex=e?new RegExp(e):null,d()}};function a(e,t){if(e){let i="";for(let e=0;e<t.length;e++){const n=t[e];"string"==typeof n&&(i=i+" "+n)}return e.test(i)}return!0}class l{constructor(e){this.name=e,this.timers={},o.registerLogger(e)}info(...e){const t=o.loggers[this.name];if(t&&t.enabled&&a(o.filterRegex,e)){const i=s();console.log.apply(console,[`${i} %c${this.name}`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,...e])}}time(e){this.timers[e]=performance.now()}timeEnd(e){const t=o.loggers[this.name];if(t&&t.enabled)if(this.timers[e]){if(a(o.filterRegex,`${this.name} ${e}`)){const i=performance.now()-this.timers[e],n=s();console.log.apply(console,[`${n} %c${this.name}%c Timer: %c${e}%c took ${i} ms`,`display: inline-block; font-weight: bold; background: ${t.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5); padding: 2px 5px; border-radius: 2px; color: white`,"","display: inline-block; font-weight: bold; background: hsl(142, 45%, 30%); padding: 2px 5px; border-radius: 2px; color: white",""])}}else console.error(`Could not measure time in ${this.name}. Missing timer ${e} initialisation`)}infoEvent(e,t){const i=o.loggers[this.name];if(i&&i.enabled&&a(o.filterRegex,t)){const n=Math.abs(r(e))%360,o=s();console.log.apply(console,[`${o} %c${this.name} %c${e}`,`display: inline-block; font-weight: bold; background: ${i.background}; text-shadow: 0 0 4px rgba(0, 0, 0, 0.5) padding: 2px 5px; padding: 2px 5px; border-radius: 2px; color: white; margin-right: 10px`,`display: inline-block; font-weight: bold; background: hsl(${n}, 70%, 30%); padding: 2px 5px; border-radius: 2px; color: white;`,...t])}}}const c={objects:[],register(e,t){this.objects.push({type:e,obj:t})}},h="SchemioLogConfig";function d(){"undefined"==typeof window&&window.localStorage&&window.localStorage.setItem(h,JSON.stringify(o))}!function(){if(!window||!window.localStorage)return;const e=window.localStorage.getItem(h);if(e)try{const t=JSON.parse(e);if(!t.loggers)return;(0,n.jJ)(t.loggers,((e,t)=>{o.loggers[t]={enabled:e.enabled||!1}}))}catch(e){}}();"undefined"!=typeof window&&(window.SchemioDebugger=c,window.SchemioLogConfig=()=>{})},1570:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});const n=1e-5;function r(e){return Math.abs(e)<n}function s(e,t,i,n){const s=e*e+t*t;if(!r(s)){const o=i*i+n*n;if(!r(o)){const r=Math.sqrt(s),a=Math.sqrt(o);return Math.asin((e*n-t*i)/(r*a))}}return 0}function o(e,t){return t>=0?Math.acos(e):-Math.acos(e)}function a(e,t,i,n){return{a:t-n,b:i-e,c:e*n-i*t}}function l(e,t,{a:i,b:n,c:s}){return r(i)&&r(n)?0:Math.abs(i*e+n*t+s)/Math.sqrt(i*i+n*n)}function c(e,t,i,n){if(n-i<2)return[e[i],e[n]];const r=a(e[i].x,e[i].y,e[n].x,e[n].y);let s=i+1,o=0;for(let t=i+1;t<n;t++){const i=l(e[t].x,e[t].y,r);i>o&&(o=i,s=t)}if(o>t){const r=c(e,t,i,s),o=c(e,t,s,n);return o.splice(0,1),r.concat(o)}return[e[i],e[n]]}const h={sameFloatingValue:(e,t,i)=>(null==i&&(i=1e-4),Math.abs(e-t)<i),tooSmall:r,roundPrecise(e,t){if(t>0){const i=Math.pow(10,t);return Math.round(e*i)/i}return Math.round(e)},roundPrecise1(e){return this.roundPrecise(e,1)},roundPrecise2(e){return this.roundPrecise(e,2)},clamp:(e,t,i)=>e<t?t:e>i?i:e,vectorLength:(e,t)=>Math.sqrt(e*e+t*t),vectorPlusVector:(e,t)=>({x:e.x+t.x,y:e.y+t.y}),vectorMinusVector:(e,t)=>({x:e.x-t.x,y:e.y-t.y}),distanceBetweenPoints:(e,t,i,n)=>Math.sqrt((i-e)*(i-e)+(n-t)*(n-t)),normalizedVector(e,t){const i=e*e+t*t;if(this.tooSmall(i))return null;const n=Math.sqrt(i);return{x:e/n,y:t/n}},angleBetweenVectors:s,cosineAngleBetweenVectors:function(e,t,i,n){const r=e*e+t*t;if(r>.001){const s=i*i+n*n;if(s>.001){const o=Math.sqrt(r),a=Math.sqrt(s);return Math.acos((e*i+t*n)/(o*a))}}return 0},fullAngleForNormalizedVector:o,fullAngleForVector:function(e,t){const i=e*e+t*t;if(!r(i)){const n=Math.sqrt(i);return o(e/n,t/n)}return 0},createLineEquation:a,distanceFromPointToLine:l,linesIntersection(e,t){const i=e.a*t.b-t.a*e.b;if(this.tooSmall(i))return null;const n=(t.a*e.c-e.a*t.c)/i;let r=0;if(this.tooSmall(e.a)){if(this.tooSmall(t.a))return null;r=(-t.b*n-t.c)/t.a}else r=(-e.b*n-e.c)/e.a;return{x:r,y:n}},identifyPointSideAgainstLine:(e,t,{a:i,b:n,c:r})=>i*e+n*t+r>=0?1:-1,isPointInArea:(e,t,i)=>e>=i.x&&e<=i.x+i.w&&t>=i.y&&t<=i.y+i.h,isAreaInArea:(e,t)=>e.x>=t.x&&e.y>=t.y&&e.x+e.w<t.x+t.w&&e.y+e.h<t.y+t.h,overlappingArea(e,t){const i=e.x,n=e.y,r=e.x+e.w,s=e.y+e.h,o=t.x,a=t.y,l=t.x+t.w,c=t.y+t.h;let h=0,d=0,u=0,p=0;return u=o>=i?o:i,p=l>=r?r:l,h=a>=n?a:n,d=c>=s?s:c,d>=h&&p>=u?{x:u,y:h,w:p-u,h:d-h}:null},isPointWithinLineSegment(e,t,i){var n=t.x-e.x,r=t.y-e.y,s=i.x-e.x,o=i.y-e.y,a=i.x-t.x,l=i.y-t.y;return a*a+l*l>(n+s)*(n+s)+(r+o)*(r+o)},worldPointInArea(e,t,i,n){if(!i)return{x:0,y:0};n||(n=this.identityMatrix());const r=this.standardTransformWithArea(n,i);return this.transformPoint(r,e,t)},localPointInArea(e,t,i,n){if(!i)return{x:0,y:0};n||(n=this.identityMatrix());const r=this.standardTransformWithArea(n,i),s=this.inverseMatrix3x3(r);return s?this.transformPoint(s,e,t):{x:0,y:0}},closestPointOnPath(e,t,i,n){let r,s,o=2,a=.5;n&&void 0!==n.startDistance&&(r=n.startDistance),n&&void 0!==n.stopDistance&&(s=n.stopDistance),n&&void 0!==n.precision&&(o=n.precision),a=1/Math.max(o,2);const l=i.getTotalLength();if(l<1e-7){const e=i.getPointAtLength(0);return e.distance=0,e}let c=0,h=0;if(void 0===r||void 0===s){const n=Math.max(8,Math.min(l/40,20)),r=l/n;let s=0,o=0;for(let a=0;a<n;a++){const n=i.getPointAtLength(a*r+r/2),l=(e-n.x)*(e-n.x)+(t-n.y)*(t-n.y);0===a?(s=a,o=l):o>l&&(o=l,s=a)}c=s*r,h=(s+1)*r}else c=Math.min(r,l),h=Math.min(s,l);const d=(c+h)/2,u=[c,d],p=[d,h];let f=(h-c)/2,m=i.getPointAtLength(c);for(m.distance=c;f>a;){const n=f/2;let r=i.getPointAtLength(u[0]+n);r.distance=u[0]+n;let s=i.getPointAtLength(p[0]+n);s.distance=p[0]+n,f=n,(e-r.x)*(e-r.x)+(t-r.y)*(t-r.y)<(e-s.x)*(e-s.x)+(t-s.y)*(t-s.y)?(m=r,u[1]=u[0]+f):(m=s,u[0]=p[0],u[1]=u[0]+f),p[0]=u[1],p[1]=p[0]+f}return m},worldPointToViewport:(e,t,i)=>({x:(t+e.x)/e.scale,y:(i+e.y)/e.scale}),viewportPointToWorld:(e,t,i)=>({x:t*e.scale-e.x,y:i*e.scale-e.y}),_snapScales:[500,100,20,5,1,.2,.04,.008],getSnappingWidthForScale(e){const t=Math.round(Math.log(e)/Math.log(5))+2;return t>0&&t<this._snapScales.length?this._snapScales[t]:t>this._snapScales.length?this._snapScales[this._snapScales.length-1]:this._snapScales[0]},simplifyPathPointsUsingRDP:(e,t)=>c(e,t,0,e.length-1),smoothPathPoints(e){if(e.length<=2)return e;const t=[e[0]];for(let i=1;i<e.length-1;i++){let n=e[i-1],r=e[i],o=e[i+1];const a=(r.x-n.x)*(r.x-n.x)+(r.y-n.y)*(r.y-n.y),l=(r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y),c=s(n.x-r.x,n.y-r.y,o.x-r.x,o.y-r.y);if(a<1e4&&l<1e4||Math.abs(c)<.1){const e=o.x-n.x,i=o.y-n.y;t.push({t:"B",x:r.x,y:r.y,x1:-e/8,y1:-i/8,x2:e/8,y2:i/8})}else t.push(r)}return t.push(e[e.length-1]),t},multiplyMatrices(...e){if(0===e.length)return this.identityMatrix();let t=e[0];for(let i=1;i<e.length;i++)t=this.multiplyTwoMatrices(t,e[i]);return t},multiplyTwoMatrices(e,t){let i=e.length,n=e[0].length,r=t[0].length,s=new Array(i);for(let o=0;o<i;o++){s[o]=new Array(r);for(let i=0;i<r;i++){s[o][i]=0;for(let r=0;r<n;r++)s[o][i]+=e[o][r]*t[r][i]}}return s},translationMatrix:(e,t)=>[[1,0,e],[0,1,t],[0,0,1]],rotationMatrixInDegrees(e){return this.rotationMatrixInRadians(e*Math.PI/180)},rotationMatrixInRadians:e=>[[Math.cos(e),-Math.sin(e),0],[Math.sin(e),Math.cos(e),0],[0,0,1]],scaleMatrix(e,t){if(isNaN(e))throw new Error("nan");return[[e,0,0],[0,t,0],[0,0,1]]},identityMatrix:()=>[[1,0,0],[0,1,0],[0,0,1]],pointMatrix:(e,t)=>[[e],[t],[1]],standardTransformWithArea(e,t){const i=t.w*t.px,n=t.h*t.py,r=Math.cos(t.r*Math.PI/180),s=Math.sin(t.r*Math.PI/180),o=[[0,0,0],[0,0,0],[0,0,0]],a=t.x+i,l=t.y+n,c=-i,h=-n,d=e;for(let e=0;e<3;e++)o[e][0]=t.sx*(d[e][0]*r+d[e][1]*s),o[e][1]=t.sy*(d[e][1]*r-d[e][0]*s),o[e][2]=o[e][0]*c+o[e][1]*h+d[e][0]*a+d[e][1]*l+d[e][2];return o},transformPoint(e,t,i){const n=this.multiplyMatrices(e,[[t],[i],[1]]);return{x:n[0][0],y:n[1][0]}},transformVector(e,t,i){const n=this.transformPoint(e,0,0),r=this.transformPoint(e,t,i);return{x:r.x-n.x,y:r.y-n.y}},inverseMatrix3x3(e){const t=(t,i)=>{const n=[0,1,2],r=[0,1,2];return n.splice(t,1),r.splice(i,1),e[n[0]][r[0]]*e[n[1]][r[1]]-e[n[0]][r[1]]*e[n[1]][r[0]]},i=e[0][0]*t(0,0)-e[0][1]*t(0,1)+e[0][2]*t(0,2);if(this.tooSmall(i))return null;const n=[[0,0,0],[0,0,0],[0,0,0]];let r=2;for(let e=0;e<3;e++)for(let s=0;s<3;s++){const o=r%2==0?1:-1;n[s][e]=o*t(e,s)/i,r++}return n},findTranslationMatchingWorldPoint(e,t,i,n,r,s){let o=this.identityMatrix();if(s&&(o=this.inverseMatrix3x3(s)),o){const s=r.px*r.w,a=r.py*r.h,l=o,c=this.multiplyMatrices(this.translationMatrix(s,a),this.rotationMatrixInDegrees(r.r),this.scaleMatrix(r.sx,r.sy),this.translationMatrix(-s,-a),[[i],[n],[1]]);if(!this.tooSmall(c[2][0]))return{x:(l[0][0]*e+l[0][1]*t+l[0][2]-c[0][0])/c[2][0],y:(l[1][0]*e+l[1][1]*t+l[1][2]-c[1][0])/c[2][0]}}return null},nonNullNumber:e=>null==e?0:e,averagePoint(...e){let t=0,i=0;return e.forEach((e=>{t+=e.x,i+=e.y})),e.length>0?{x:t/e.length,y:i/e.length}:{x:t,y:i}},calculateRotationOffsetForSameCenter(e,t,i,n,r){const s=e-i,o=t-n,a=Math.cos(r),l=Math.sin(r);return{x:i+(s*a-o*l),y:n+(s*l+o*a)}},rotateVector90Clockwise:(e,t)=>({x:-t,y:e}),rotateVector90CounterClockwise:(e,t)=>({x:t,y:-e}),projectVectorToVector(e,t,i,n){const r=i*i+n*n;return this.tooSmall(r)?0:(e*i+t*n)/Math.sqrt(r)},stringHash(e,t=0){let i=3735928559^t,n=1103547991^t;for(let t,r=0;r<e.length;r++)t=e.charCodeAt(r),i=Math.imul(i^t,2654435761),n=Math.imul(n^t,1597334677);return i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(i^i>>>13,3266489909),4294967296*(2097151&n)+(i>>>0)},stringHash(e){var t=2166136261;for(let i=0;i<e.length;++i)t^=e.charCodeAt(i),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0},solveQuadratic(e,t,i){const n=t*t-4*e*i;if(n<=0)return null;const r=Math.sqrt(n);return{v1:(-t-r)/(2*e),v2:(r-t)/(2*e)}}}},8800:(e,t,i)=>{"use strict";i.d(t,{Ld:()=>o,a:()=>l,vH:()=>a});const n=["Arial, Helvetica, sans-serif",'"Arial Black", Gadget, sans-serif','"Book Antiqua", Palatino, serif','"Comic Sans MS", cursive, sans-serif','"Courier New", Courier, monospace',"Georgia, serif","Helvetica, sans-serif","Impact, Charcoal, sans-serif",'"Lucida Grande", sans-serif','"Lucida Sans Unicode", "Lucida Grande", sans-serif','"Lucida Console", Monaco, monospace',"Monaco, monospace",'"Palatino Linotype", "Book Antiqua", Palatino, serif',"Tahoma, Geneva, sans-serif",'"Times New Roman", Times, serif','"Trebuchet MS", Helvetica, sans-serif',"Verdana, Geneva, sans-serif","Alfa Slab One","Cherry Swash","Caveat Brush","Heebo","Carter One","Permanent Marker","Josefin Sans","Cherry Swash","Josefin Sans","Knewave","Nunito","Caveat","Indie-Flower","Single-Day"],r=function(){const e={};for(let t=0;t<n.length;t++){let i=n[t].indexOf(","),r=n[t].trim();i>0&&(r=n[t].substring(0,i).trim()),'"'===r.charAt(0)&&'"'===r.charAt(r.length-1)&&(r=r.substring(1,r.length-1)),e[r]=n[t]}return e}(),s=function(e){const t=[];for(let i in e)e.hasOwnProperty(i)&&t.push({name:i,family:e[i]});return t.sort(((e,t)=>e.name<t.name?-1:e.name>t.name?1:0)),t}(r);function o(){return"Arial"}function a(e){return r[e]||"Arial, Helvetica, sans-serif"}function l(){return s}},3627:(e,t,i)=>{"use strict";i.d(t,{Dt:()=>a,I$:()=>y,Po:()=>O,RA:()=>w,TE:()=>x,XA:()=>d,Xq:()=>c,_2:()=>f,f7:()=>m,gE:()=>S,lM:()=>h,sS:()=>b,zD:()=>g});var n=i(2063),r=i(8728),s=i(8800),o=i(269);i(5396);const a={NONE:"none",SIDE_PANEL:"side-panel",TOOLTIP:"tooltip",values(){return n.A.enumerateConstants(this)}},l=[{field:"color",name:"Color",type:"color"},{field:"bold",name:"Bold",type:"boolean"},{field:"halign",name:"Horizontal Align",type:"choice",options:["left","center","right"]},{field:"valign",name:"Vertical Align",type:"choice",options:["top","middle","bottom"]},{field:"fontSize",name:"Font Size",type:"number"},{field:"whiteSpace",name:"White Space",type:"choice",options:[{name:"Wrap",value:"normal"},{name:"No Wrap",value:"nowrap"},{name:"Preserved",value:"pre"},{name:"Preserved + Wrap",value:"pre-wrap"}].map((e=>e.value))},{field:"font",name:"Font",type:"choice",options:(0,o.kH)((0,s.a)(),(e=>e.name))},{field:"paddingLeft",name:"Padding Left",type:"number"},{field:"paddingRight",name:"Padding Right",type:"number"},{field:"paddingTop",name:"Padding Top",type:"number"},{field:"paddingBottom",name:"Padding Bottom",type:"number"},{field:"letterSpacing",name:"Letter spacing",type:"number",min:0},{field:"lineHeight",name:"Line height",type:"number",min:0}],c={none:{id:"none",name:"None",description:"Cannot be dragged"},free:{id:"free",name:"Free",description:"Can be dragged and dropped anywhere on the scene"},path:{id:"path",name:"Path",description:"Can be dragged only along specified path"},dragndrop:{id:"dragndrop",name:"Drag-n-drop",description:"Can be dragged but has to be dropped to designated drop area, otherwise the item will return to its original position"}},h={text:"",bold:!1,color:"rgba(0,0,0,1.0)",halign:"center",valign:"middle",fontSize:14,whiteSpace:"normal",font:(0,s.Ld)(),paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,letterSpacing:0,lineHeight:1},d={fill:{type:"solid",color:"rgba(240,240,240,1.0)"},strokeColor:"rgba(30,30,30,1.0)",strokeSize:2,strokePattern:"solid"},u={x:0,y:0,w:0,h:0,r:0,px:.5,py:.5,sx:1,sy:1},p={opacity:{type:"number",name:"Opacity"},selfOpacity:{type:"number",name:"Self opacity"},visible:{type:"boolean",name:"Visible"},clip:{type:"boolean",name:"Clip"},cursor:{type:"choice",name:"Cursor",options:["default","pointer","grab","crosshair","not-allowed","zoom-in","help","wait","text"]},"behavior.dragging":{type:"choice",name:"Dragging",options:["none","free","path","dragndrop"]}},f={area:u,opacity:100,selfOpacity:100,visible:!0,tags:[],links:[],blendMode:"normal",cursor:"default",shape:"none",clip:!1,mount:!0,effects:[],textSlots:{"*":h},description:"",interactionMode:a.TOOLTIP,autoLayout:{on:!1,rules:{}},behavior:{events:[],dragging:"none",dropTo:"",dragPath:"",dragPathAlign:!1,dragPathRotation:0},shapeProps:{},tooltipBackground:"rgba(230,230,230,1.0)",tooltipColor:"rgba(30,30,30,1.0)",classes:[{id:"sdada",args:{}}]},m={cursor:"default",area:u,shape:"empty",opacity:100,blendMode:"normal",name:"",description:"",links:[],textSlots:{},autoLayout:{on:!1},behavior:{events:[],dragging:"none",dropTo:"",dragPath:""}};function g(e,t){v(e,null,t)}function y(e,t){v(e,null,t,!0)}function v(e,t,i,n){Array.isArray(e)&&e.forEach(((e,r)=>{const s=i(e,t,r);n&&!s||(e.childItems&&v(e.childItems,e,i,n),e._childItems&&v(e._childItems,e,i,n))}))}function x(e,t){let i=[].concat(e);for(;i.length>0;){const e=i.shift();if(t(e))return e;e.childItems&&e.childItems.length>0&&(i=i.concat(e.childItems)),e._childItems&&e._childItems.length>0&&(i=i.concat(e._childItems))}return null}function b(e){return e.description.trim().length>8}function w(e,t){const i=p[t];if(i)return i;if(e&&0===t.indexOf("shapeProps.")){const i=t.substr(11);if("standard"===e.shapeType&&r.A.standardShapeProps.hasOwnProperty(i))return r.A.standardShapeProps[i];if(e.args.hasOwnProperty(i))return e.args[i]}else if(0===t.indexOf("textSlots.")){const e=t.indexOf(".",11),i=t.substr(e+1),n=(0,o.I6)(l,(e=>e.field===i));if(n)return n}return null}function O(e){const t=e.area.w,i=e.area.h;return`M ${t} ${i}  L 0 ${i} L 0 0  L ${t} 0  L ${t} ${i} Z`}function S(e){const t=e.area.w,i=e.area.h;return`M 0 0 L ${t} 0  M ${t} 0 L ${t} ${i} M ${t} ${i} L 0 ${i} M 0 ${i} L 0 0`}new Set(["color","advanced-color","stroke-pattern","path-cap","number"])},6403:(e,t,i)=>{"use strict";i.d(t,{AG:()=>m,V_:()=>f});var n=i(3627),r=i(8728),s=i(5824),o=i.n(s),a=i(5396),l=i(7298),c=i(3710),h=i(269),d=i(2063);function u(e){e.id||(e.id=o().generate())}function p(e){u(e),e.hasOwnProperty("on")||(e.on=!0);const t=c.A.main[e.method];return!!t&&(e.args||(e.args={}),(0,h.jJ)(t.args,((t,i)=>{e.args.hasOwnProperty(i)||(e.args[i]=t.value)})),(0,h.jJ)(e.args,((i,n)=>{t.args.hasOwnProperty(n)||delete e.args[n]})),!0)}function f(e){var t;e.textSlots||(e.textSlots={}),e.shape||(e.shape="none"),e.meta||(e.meta={strokeOffset:0}),"curve"===e.shape&&function(e){e.shape="path",!Array.isArray(e.shapeProps.paths)&&Array.isArray(e.shapeProps.points)&&(e.shapeProps.paths=[{points:e.shapeProps.points,closed:e.shapeProps.closed}],delete e.shapeProps.points,delete e.shapeProps.closed)}(e),"connector"===e.shape&&function(e){e.shapeProps&&Array.isArray(e.shapeProps.points)&&e.shapeProps.points.forEach((e=>{e.hasOwnProperty("id")||(e.id=o().generate()),(e.hasOwnProperty("bx")||e.hasOwnProperty("by"))&&(e.nx=e.bx,e.ny=e.by,delete e.bx,delete e.by)}))}(e),"path"===e.shape&&function(e){Array.isArray(e.shapeProps.paths)&&e.shapeProps.paths.forEach((t=>{t.id||(t.id=o().generate()),Array.isArray(t.points)||(t.points=[]),"relative"!==t.pos&&(t.pos="relative",t.points=t.points.map((t=>(0,l.Sn)(t,e.area.w,e.area.h)))),t.points.forEach((e=>{e.hasOwnProperty("id")||(e.id=o().generate())}))}))}(e),"frame_player"===e.shape&&function(e){e.shapeProps||(e.shapeProps={}),Array.isArray(e.shapeProps.animations)||(e.shapeProps.animations=[]),e.shapeProps.animations.forEach((e=>{"item"===e.kind?(e.hasOwnProperty("itemId")||(e.itemId=e.id,e.id=o().generate()),e.hasOwnProperty("id")||(e.id=o().generate())):"function"===e.kind&&(e.hasOwnProperty("funcId")||(e.funcId=e.id,e.id=o().generate()),e.hasOwnProperty("id")||(e.id=o().generate()))}))}(e),(0,a.O)(e,n._2),function(e){if(Array.isArray(e.groups)){const t=new Set(e.groups);Array.isArray(e.tags)&&e.tags.forEach((e=>t.add(e))),e.tags=Array.from(t),delete e.groups}}(e),t=e.behavior,(0,h.jJ)(t.events,(e=>{u(e),(0,h.jJ)(e.actions,p);for(let t=e.actions.length-1;t>=0;t--)(e.actions[t].method||"").startsWith("function:")||p(e.actions[t])||e.actions.splice(t,1)})),(0,h.jJ)(e.links,u);let i=r.A.find(e.shape);if(!i)return;e.shapeProps||(e.shapeProps={}),i.fixItem&&i.fixItem(e),(0,h.jJ)(e.shapeProps,((t,n)=>{i.args&&i.args.hasOwnProperty(n)||delete e.shapeProps[n]})),(0,h.jJ)(i.args,((t,n)=>{e.shapeProps.hasOwnProperty(n)?"object"==typeof e.shapeProps[n]&&(0,a.O)(e.shapeProps[n],i.args[n].value):e.shapeProps[n]=d.A.clone(t.value)})),"standard"===i.shapeType&&function(e){(0,a.O)(e.shapeProps,n.XA)}(e);const s=i.getTextSlots(e);s&&(0,h.jJ)(s,(t=>{e.textSlots.hasOwnProperty(t.name)||(e.textSlots[t.name]={},m(e.textSlots[t.name]))}))}function m(e){return(0,a.O)(e,n.lM)}},869:(e,t,i)=>{"use strict";i.d(t,{Mt:()=>c,NM:()=>h,O9:()=>f,Qb:()=>u,XL:()=>g,_0:()=>p,bS:()=>v,bw:()=>m,nI:()=>y,xG:()=>l,xS:()=>d});var n=i(269),r=i(8728),s=i(6354),o=i(1570);const a=new s.Vy("ItemMath");function l(e){return(0,n.pb)(e,(e=>"hud"!==e.shape&&!e.meta.isInHUD))}function c(e,t){if("view"===t&&(e=l(e)),!e||0===e.length)return null;let i=(0,n.pb)(e,(e=>("view"!==t||"dummy"!==e.shape)&&e.visible&&e.meta.calculatedVisibility));return 0===i.length&&e.length>0&&(i=e),m(i)}function h(e,t,i){let n=1;return e.w>0&&e.h>0&&t>0&&i>0&&(n=Math.floor(100*Math.min(t/e.w,i/e.h))/100,n=Math.max(1e-4,n)),{x:t/2-(e.x+e.w/2)*n,y:i/2-(e.y+e.h/2)*n,scale:n}}function d(e,t,i,n=null){return n?i.meta&&i.meta.transformMatrix&&(n=o.A.multiplyMatrices(n,i.meta.transformMatrix)):n=i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null,o.A.worldPointInArea(e,t,i.area,n)}function u(e,t,i,n=null){return n?i.meta&&i.meta.transformMatrix&&(n=o.A.multiplyMatrices(n,i.meta.transformMatrix)):n=i.meta&&i.meta.transformMatrix?i.meta.transformMatrix:null,o.A.localPointInArea(e,t,i.area,n)}function p(e){const t=f(e.area.w,0,e);return 180*o.A.fullAngleForVector(t.x,t.y)/Math.PI}function f(e,t,i,n=null){const r=d(0,0,i,n),s=d(e,t,i,n);return{x:s.x-r.x,y:s.y-r.y}}function m(e,t){if(!e||0===e.length)return{x:0,y:0,w:0,h:0};let i=null;return(0,n.jJ)(e,(e=>{const r=[d(0,0,e,t),d(e.area.w,0,e,t),d(e.area.w,e.area.h,e,t),d(0,e.area.h,e,t)];(0,n.jJ)(r,(e=>{i?(i.x1>e.x&&(i.x1=e.x),i.x2<e.x&&(i.x2=e.x),i.y1>e.y&&(i.y1=e.y),i.y2<e.y&&(i.y2=e.y)):i={x1:e.x,x2:e.x,y1:e.y,y2:e.y}}))})),{x:i.x1,y:i.y1,w:i.x2-i.x1,h:i.y2-i.y1}}function g(e,t=null){const i=f(1,0,e,t),n=f(0,1,e,t);return{x:o.A.vectorLength(i.x,i.y),y:o.A.vectorLength(n.x,n.y)}}function y(e,t=null){return t?e.meta&&e.meta.transformMatrix&&(t=o.A.multiplyMatrices(t,e.meta.transformMatrix)):t=e.meta&&e.meta.transformMatrix?e.meta.transformMatrix:o.A.identityMatrix(),o.A.standardTransformWithArea(t,e.area)}function v(e){a.info("Computing shape outline for item",e.id,e.name);const t=r.A.find(e.shape);if(t){const i=t.computeOutline(e);if(i){const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",i),e}}return null}},7234:(e,t,i)=>{"use strict";i.d(t,{by:()=>Oe,Ay:()=>Ce,_z:()=>xe,U0:()=>ve});var n=i(269);class r{constructor(e,t,i){this.point={x:e,y:t},this.value=i,this.nw=null,this.ne=null,this.sw=null,this.se=null}addPoint(e,t,i){const n=new r(e,t,i);e>=this.point.x&&t>=this.point.y?this.se?this.se.addPoint(e,t,i):this.se=n:e<=this.point.x&&t>=this.point.y?this.sw?this.sw.addPoint(e,t,i):this.sw=n:e>=this.point.x&&t<=this.point.y?this.ne?this.ne.addPoint(e,t,i):this.ne=n:this.nw?this.nw.addPoint(e,t,i):this.nw=n}forEachInRange(e,t,i,n,r){e<=this.point.x&&this.point.x<=i&&t<=this.point.y&&this.point.y<=n&&r(this.value,this.point),this.se&&(e>=this.point.x||i>=this.point.x)&&(t>=this.point.y||n>=this.point.y)&&this.se.forEachInRange(e,t,i,n,r),this.sw&&(e<=this.point.x||i<=this.point.x)&&(t>=this.point.y||n>=this.point.y)&&this.sw.forEachInRange(e,t,i,n,r),this.ne&&(e>=this.point.x||i>=this.point.x)&&(t<=this.point.y||n<=this.point.y)&&this.ne.forEachInRange(e,t,i,n,r),this.nw&&(e<=this.point.x||i<=this.point.x)&&(t<=this.point.y||n<=this.point.y)&&this.nw.forEachInRange(e,t,i,n,r)}}class s{constructor(){this.root=null}addPoint(e,t,i){this.root?this.root.addPoint(e,t,i):this.root=new r(e,t,i)}forEachInRange(e,t,i,n,r){if(!this.root)return[];this.root.forEachInRange(e,t,i,n,r)}}var o=i(1570),a=i(2063),l=i(5824),c=i.n(l),h=i(8728),d=i(3627),u=i(6403),p=i(5396);const f={name:"",description:"",tags:[],items:[],scripts:{main:{source:""},functions:[],classes:[]},settings:{screen:{draggable:!0}},style:{backgroundColor:"rgba(240, 240, 240, 1.0)",gridColor:"rgba(128 ,128, 128, 0.2)",boundaryBoxColor:"rgba(36, 182, 255, 1)",controlPointsColor:"rgba(4,177,23, 1.0)"}};var m=i(6354),g=i(3710),y=i(1953),v=i(5894),x=i(176);const b={moveAlongPath:i(4535).A};var w=i(8176);const O=!0,S="number",k="color",P="boolean",C="string",A=new Set([S,k,C,P,"choice"]),I=new Map([["area.x",{type:S,name:"Position X"}],["area.y",{type:S,name:"Position Y"}],["area.w",{type:S,name:"Width"}],["area.h",{type:S,name:"Height"}],["area.r",{type:S,name:"Rotation"}],["area.sx",{type:S,name:"Scale X"}],["area.sy",{type:S,name:"Scale Y"}],["opacity",{type:S,name:"Opacity"}],["selfOpacity",{type:S,name:"Self opacity"}],["visible",{type:P,name:"Visible"}],["blendMode",{type:C,options:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","difference","exclusion","hue","saturation","color","luminosity"],name:"Blend mode"}]]),T=new Map([["style.backgroundColor",{type:k,name:"Background color"}]]);function $(e,t){e.sort(((e,t)=>e.frame-t.frame));const i=[],r=(e,t,n)=>{const r={prevIdx:t,nextIdx:n};for(let t=0;t<e;t++)i.push(r)};let s=-1;return(0,n.jJ)(e,(e=>{if(s>=0&&i[s].frame.frame===e.frame)return;const t={frame:e,prevIdx:s,nextIdx:-1};e.frame-1>i.length&&r(e.frame-1-i.length,s,e.frame-1),i.push(t),s>=0&&(i[s].nextIdx=e.frame-1),s=e.frame-1})),i.length<t&&r(t-i.length,s,-1),i}function M(e,t,i,n){if(t.kind===y.Uq.STEP)return t.value;if(n===S||n===k){let r=i.frame-t.frame;if(r>0&&e>=t.frame&&e<=i.frame){const s=(0,y.t)((e-t.frame)/r,t.kind);return function(e,t,i,n){if(e===S)return t*(1-n)+n*i;if(e===k){const e=(0,v.H0)(t),r=(0,v.H0)(i),s={r:e.r*(1-n)+n*r.r,g:e.g*(1-n)+n*r.g,b:e.b*(1-n)+n*r.b,a:e.a*(1-n)+n*r.a};return(0,v._T)(s)}return t}(n,t.value,i.value,s)}}return t.value}function E(e,t,i,n,r,s,o){if(!n)return null;const l=i.split("."),c=$(r,s);return{toggleFrame(i){if(i<1)return;const r=Math.floor(i);let s=null;s=r<=c.length?c[r-1]:c[c.length-1];let h=s;if(!s.frame){if(s.prevIdx<0)return;h=c[s.prevIdx]}let d=null;s.nextIdx>=0&&(d=c[s.nextIdx]);let u=h.frame.value;d&&(u=M(i,h.frame,d.frame,n.type)),a.A.setObjectProperty(t,l,u),o&&"area"===l[0]&&e.readjustItemAndDescendants(t.id,O),o&&"visible"===l[0]&&e.updateVisibility(t),o&&w.A.item.changed.specific.$emit(e.editorId,t.id)}}}function _(e,t){const i=[],r={};return(0,n.jJ)(e.shapeProps.animations,(n=>{if("item"===n.kind){const r=t.findItemById(n.itemId);if(r){const s=function(e,t){const i=I.get(t);if(i)return i;if(t.startsWith("shapeProps.")){const i=t.split(".");if(i.length<=1)return null;const n=h.A.find(e.shape);if(!n)return null;const r=h.A.getShapePropDescriptor(n,i[1]);if(!r)return null;if(r.type===k||"advanced-color"===r.type&&3===i.length&&i[2]===k)return{type:k,name:r.name};if(A.has(r.type))return r}return null}(r,n.property),o=E(t,r,n.property,s,n.frames,e.shapeProps.totalFrames,!0);o&&i.push(o)}}else if("function"===n.kind)r.hasOwnProperty(n.funcId)||(r[n.funcId]={}),r[n.funcId][n.property]=n;else if("scheme"===n.kind){const r=(s=n.property,T.get(s)),o=E(t,t.scheme,n.property,r,n.frames,e.shapeProps.totalFrames,!1);o&&i.push(o)}var s})),i.concat(function(e,t,i){const r=[];return(0,n.jJ)(e.shapeProps.animations,(s=>{if("function"!==s.kind||!s.funcId)return;const o=e.shapeProps.functions[s.funcId];if(!o)return;if(!t[s.funcId])return;const a=b[o.functionId];if(!a)return;const l=a.create(o.args,i),c={};(0,n.jJ)(a.inputs,((e,i)=>{t[s.funcId][i]?c[i]=t[s.funcId][i]:c[i]={kind:"function",functionId:s.funcId,property:i,frames:[{frame:0,kind:"linear",value:e.value}]}}));const h=function(e,t,i,r){const s={};return(0,n.jJ)(i,((e,t)=>{s[t]=$(e.frames,r)})),{toggleFrame(i){if(i<1)return;const r=Math.floor(i),o={};let a=!1;(0,n.jJ)(s,((t,n)=>{let s=null;s=r<=t.length?t[r-1]:t[t.length-1];let l=s;if(!s.frame){if(s.prevIdx<0)return void(a=!0);l=t[s.prevIdx]}let c=null;s.nextIdx>=0&&(c=t[s.nextIdx]);let h=l.frame.value;c&&(h=M(i,l.frame,c.frame,e.inputs[n].type)),o[n]=h})),a||e.execute(t,o)}}}(a,l,c,e.shapeProps.totalFrames);h&&r.push(h)})),r}(e,r,t))}class D extends x.A{constructor(e,t,i){super(),this.totalTimePassed=0,this.currentFrame=0,this.startFrame=1,this.fps=e,this.totalFrames=t,this.compiledAnimations=i,this.onFrame=null,this.onFinish=null,this.stopFrame=-1}setFrame(e){this.startFrame=e,this.currentFrame=Math.floor(e)-1}setStopFrame(e){this.stopFrame=e}init(){return this.totalTimePassed=0,!0}setCallbacks({onFrame:e,onFinish:t}){this.onFrame=e,this.onFinish=t}play(e){this.totalTimePassed+=e;let t=this.startFrame+this.totalTimePassed*Math.max(this.fps,.01)/1e3,i=Math.floor(t);i>this.currentFrame&&(this.currentFrame=i,this.onFrame&&this.onFrame(this.currentFrame));const n=Math.floor(t);return this.stopFrame>0&&n===this.stopFrame?(this.onFrame&&this.onFrame(this.stopFrame),this.toggleFrame(this.stopFrame),!1):(this.toggleFrame(t),i<this.totalFrames)}toggleFrame(e){this.startFrame=e,this.totalTimePassed=0,this.currentFrame=e,(0,n.jJ)(this.compiledAnimations,(t=>{t.toggleFrame(e)}))}destroy(){this.onFinish&&this.onFinish()}}var L=i(9135);function B(e,t){return{findItemByTemplatedId:F(t),moveNativeChildren:Q(t),copyNativeChildren:U(t),swapNativeChildren:q(t),duplicateItem:z(t),updateItem:j(e,t),calculateTextSize:N,clone:e=>a.A.clone(e),log:(...e)=>console.log(...e)}}const R={"Lucida Sans Unicode":1.4,"Lucida Console":1.47};function N(e,t,i){const n=(N.canvas||(N.canvas=document.createElement("canvas"))).getContext("2d");n.font=`${i}px ${t}`;const r=n.measureText(e);let s=1;return R.hasOwnProperty(t)&&(s=R[t]),{w:r.width*s,h:Math.abs(r.actualBoundingBoxAscent)+Math.abs(r.actualBoundingBoxDescent)}}function F(e){return t=>H(e,t)}function j(e,t){return(i,n)=>{const r=H(t,i);r&&(n(r),(0,u.V_)(r),w.A.item.changed.specific.$emit(e,r.id),w.A.schemeChangeCommitted.$emit(e))}}function z(e){return(t,i,n)=>{const r=V(e,t);if(!r)return;const s=r.item,o=r.parentItem,l={id:c().generate(),name:n,args:{templated:!0,templatedId:i}};for(let e in s)s.hasOwnProperty(e)&&"childItems"!==e&&"meta"!==e&&"args"!==e&&"id"!==e&&"name"!==e&&(l[e]=a.A.clone(s[e]));o.childItems.push(l)}}function Q(e){return(t,i)=>{const n=H(e,t),r=H(e,i);n&&r&&(r.childItems=n.childItems||[],n.childItems=[])}}function U(e){return(t,i)=>{const n=H(e,t),r=H(e,i);n&&r&&Array.isArray(n.childItems)&&(Array.isArray(r.childItems)||(r.childItems=[]),n.childItems.forEach((e=>{e.args&&e.args.templatedId&&!e.args.templateRef||r.childItems.push(function(e){const t=a.A.clone(e);return(0,d.zD)([t],(e=>{e.id=c().generate(),e.meta={}})),t}(e))})))}}function q(e){return(t,i)=>{const n=H(e,t),r=H(e,i);if(!n||!r)return;const s=r.childItems;r.childItems=n.childItems||[],n.childItems=s}}function H(e,t){if(e.args&&e.args.templatedId===t)return e;if(!Array.isArray(e.childItems))return null;let i=[].concat(e.childItems);for(;i.length>0;){const e=i.shift();if(e.args&&e.args.templatedId===t)return e;e.args&&e.args.templatedId&&!e.args.templateRef&&Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return null}function V(e,t){if(!Array.isArray(e.childItems))return null;for(let i=0;i<e.childItems.length;i++){const n=e.childItems[i];if(n.args&&n.args.templated&&!n.args.templateRef){if(n.args.templatedId===t)return{item:n,parentItem:e};const i=V(n,t);if(i)return i}}return null}var W=i(9719),X=i(6583),G=i(5107);function Y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach((function(t){K(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function K(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(2659);const J={BUILD:"build",POST_BUILD:"post-build",EVENT:"event"};class ee{constructor(e,t,i){this.phase=e,this.eventName=t,this.eventId=i}}const te={panels:[]};function ie(e){(0,u.V_)(e),Array.isArray(e.childItems)&&e.childItems.forEach(ie)}function ne(e){const t=e.join("\n");return(0,X.YK)(t)}function re(e,t,i){const r=ae(t.init),s=(0,L.On)({"$-eval":r,controls:t.controls||[]}),o=(0,L.On)({"$-eval":r,item:t.item}),a=(0,L.On)({item:t.item}),l=(0,L.On)({"$-eval":r,editor:t.editor||te}),c=ne(r),h={};t.handlers&&(0,n.iV)(t.handlers,((e,t)=>{const i=ae(e);h[t]=ne(i)}));const d={};(0,n.iV)(t.args,((e,t)=>{d[t]=e}));const u=new Map;return{name:t.name,description:t.description,preview:t.preview,defaultArea:t.defaultArea||{x:0,y:0,w:350,h:200,px:.5,py:.5,sx:1,sy:1},templateRef:i,args:t.args||{},argsDef:t.args,defaultArgs:d,hasHandler:e=>h.hasOwnProperty(e),triggerTemplateEvent(i,r,s,o){if(!h.hasOwnProperty(r))return;const a=Z(Z(Z(Z({},d),i.args.templateArgs),B(e,i)),{},{width:i.area.w,height:i.area.h,context:new ee(J.EVENT,r,i.id)}),l=new G.H(a);c.evalNode(l),(0,n.iV)(s,((e,t)=>{l.set(t,e)})),h[r].evalNode(l);const u=l.getData(),p={};(0,n.iV)(t.args,((e,t)=>{p[t]=u[t]})),u.hasOwnProperty("width")&&(p.width=u.width),u.hasOwnProperty("height")&&(p.height=u.height),i.args.templateArgs=p,o&&o(u)},onDeleteItem(e,t,i,n){this.triggerTemplateEvent(e,"delete",{itemId:t,item:i},n)},onAreaUpdate(e,t,i,n,r){this.triggerTemplateEvent(e,"area",{itemId:t,item:i,area:n},r)},onCopyItem(e,t,i){this.triggerTemplateEvent(e,"copy",{itemId:t,item:i})},onPasteItemInto(e,t,i,n){this.triggerTemplateEvent(e,"paste",{itemId:t,items:i},n)},onTextUpdate(e,t,i,n,r){this.triggerTemplateEvent(e,"text",{itemId:t,item:i,text:n},r)},onShapePropsUpdate(e,t,i,n,r,s){this.triggerTemplateEvent(e,"shapeProps",{itemId:t,item:i,name:n,value:r},s)},buildItem:(t,i,n,r)=>r?a(Z(Z(Z({},B(e,null)),t),{},{width:i,height:n,context:new ee(J.POST_BUILD,null,"")})).item:o(Z(Z(Z({},B(e,null)),t),{},{width:i,height:n,context:new ee(J.BUILD,null,"")})).item,buildEditor:(t,i,n,s,o)=>function(e,t,i,n,r,s,o){const a=Z({selectedItemIds:new W.B(...s)},B(e,n)),l=Z(Z(Z({},r),a),{},{context:new ee(J.EVENT,"editor","")}),c=t(l).editor;return c&&Array.isArray(c.panels)?{panels:c.panels.map((e=>{let t=()=>!0;e.condition&&(t=(0,L.UR)(e.condition,l));let r=null;if(e.click){const t=i.concat([e.click]).join("\n");let s=o.get(t);s||(s=(0,L.t5)(t),o.set(t,s)),r=t=>{const i=Z(Z(Z({},n.args&&n.args.templateArgs?n.args.templateArgs:{}),{},{width:n.area.w,height:n.area.h},a),{},{panelItem:t,context:new ee(J.EVENT,"panel-click",e.id)});return s(i)}}const s=(e.items||[]).map((e=>(ie(e),e)));return Z(Z({},e),{},{slotSize:e.slotSize||{width:100,height:60},items:s,condition:t,click:r})})).filter((e=>e.condition()))}:te}(e,l,r,t,Z(Z({},i),{},{width:n,height:s}),o,u),buildControls:(t,i,n)=>s(Z(Z(Z({},B(e,null)),t),{},{width:i,height:n,context:new ee(J.EVENT,"control","")})).controls.map((s=>{let o="click";"textfield"===s.type&&(o="input");const a=(e=>{let t=u.get(e);if(t)return t;const i=(0,L.t5)(e);return u.set(e,i),i})([].concat(r).concat(ae(s[o])).join("\n"));let l=null;l="textfield"===s.type?(r,o)=>a(Z(Z(Z({},B(e,r)),t),{},{width:i,height:n,context:new ee(J.EVENT,"control",s.id),control:s,value:o})):"choice"===s.type?(r,o)=>a(Z(Z(Z({},B(e,r)),t),{},{width:i,height:n,context:new ee(J.EVENT,"control",s.id),control:s,option:o})):r=>a(Z(Z(Z({},B(e,r)),t),{},{width:i,height:n,context:new ee(J.EVENT,"control",s.id),control:s}));const c=Z({},s);if(c[o]=l,"choice"===s.type&&s.optionsProvider){const o=[].concat(r).concat(ae(s.optionsProvider)).join("\n"),a=(0,L.Rc)(o);c.optionsProvider=r=>{const o=a(Z(Z(Z({},B(e,r)),t),{},{width:i,height:n,context:new ee(J.EVENT,"control",s.id),control:s}));return o instanceof W.B?o.items:[]}}return c})),getDefaultArgs(){const e={};return(0,n.iV)(t.args||{},((t,i)=>{e[i]=t.value})),e}}}function se(e,t,i,r,s=!1){const o=e.buildItem(t,i,r,s);return(0,d.zD)([o],((e,t)=>{e.args||(e.args={}),null===t||e.hasOwnProperty("locked")||(e.locked=!0),e.args.templatedId=e.id,e.args.templated=!0,(0,u.V_)(e)})),o.area.w=i,o.area.h=r,o.args.templateRef=e.templateRef,o.args.templateArgs={},(0,n.iV)(e.args,((e,i)=>{t.hasOwnProperty(i)&&(o.args.templateArgs[i]=t[i])})),o}function oe(e,t,i,r,s,o=!1){i||(i={}),i.hasOwnProperty("width")&&(r=i.width,e.area.w=r),i.hasOwnProperty("height")&&(s=i.height,e.area.h=s);const a=Z(Z({},t.getDefaultArgs()),i),l=se(t,a,r,s,o),h=new Map,u=new Map;(0,d.I$)([e],((e,t,i)=>!t||e.args&&e.args.templatedId&&!e.args.templateRef?(h.set(e.args.templatedId,e),!0):(u.has(t.args.templatedId)?u.get(t.args.templatedId).push(e):u.set(t.args.templatedId,[e]),!1)));const p=[],f=new Map;(0,d.zD)([l],((e,t,i)=>{const r=h.get(e.args.templatedId);if(!r){const t=c().generate();return f.set(e.id,t),e.id=t,void p.push(e)}const s=function(e){if(!Array.isArray(e))return()=>!1;const t=e.map((e=>new RegExp(e)));return e=>{for(let i=0;i<t.length;i++)if(t[i].test(e))return!0;return!1}}(e.args&&e.args.templateIgnoredProps||[]);r.childItems=e.childItems;const o=e;for(let i in o){let a=o.hasOwnProperty(i)&&"id"!==i&&"meta"!==i&&"description"!==i&&"childItems"!==i&&"_childItems"!==i&&"textSlots"!==i;a&&!t&&(a="name"!==i&&"description"!==i&&"tags"!==i&&"area"!==i&&"autoLayout"!==i),"textSlots"===i&&e.args.templateForceText&&(a=!0),"description"===i&&e.args.tplForceDescription&&(a=!0),a&&("shapeProps"===i&&o.shapeProps?(r.shapeProps||(r.shapeProps={}),(0,n.iV)(o.shapeProps,((e,t)=>{s(`shapeProps.${t}`)||(r.shapeProps[t]=e)}))):s(i)||("behavior"===i?r.behavior=le(o.behavior,r.behavior):r[i]=o[i]))}f.set(e.args.templatedId,r.id),t&&(t.childItems[i]=r,p.push(r))}));const m=e=>{const t=u.get(e.args.templatedId);t&&t.length>0&&(e.childItems||(e.childItems=[]),e.childItems=e.childItems.concat(t))};m(e);for(let e=0;e<p.length;e++)m(p[e]);return f}function ae(e){return Array.isArray(e)?[e.join("\n")]:"string"==typeof e?[e]:[]}function le(e,t){const i=[],n=new Map;t.events.forEach((e=>{n.has(e.event)?n.get(e.event).push(e):n.set(e.event,[e])}));const r=new Set,s=e=>{const t=r.has(e.id)?c().generate():e.id;i.push(Z(Z({},e),{},{id:t}))};return e.events.forEach((e=>{const t=n.get(e.event);t&&t.shift(),s(e)})),n.forEach((e=>{0!==e.length&&e.forEach((e=>{s(e)}))})),Z(Z({},e),{},{events:i})}var ce=i(869),he=i(2958),de=i(1210);function ue(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(i),!0).forEach((function(t){fe(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ue(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function fe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const me=new m.Vy("SchemeContainer"),ge={x:0,y:0,w:1,h:1,r:0,sx:1,sy:1,px:0,py:0},ye={id:"",moved:!0,rotated:!1,resized:!1};function ve(e){return"hud"===e.shape||e.meta.isInHUD}function xe(e){const t=(0,d.TE)(e,(e=>"dummy"===e.shape&&e.shapeProps.screenBounds)),i=t?[t]:e;if(!i||0===i.length)return{x:0,y:0,w:0,h:0};let r=null;return(0,n.jJ)(i,(e=>{const t=[{x:e.area.x,y:e.area.y},{x:e.area.x+e.area.w,y:e.area.y},{x:e.area.x+e.area.w,y:e.area.y+e.area.h},{x:e.area.x,y:e.area.y+e.area.h}];(0,n.jJ)(t,(e=>{r?(r.x1>e.x&&(r.x1=e.x),r.x2<e.x&&(r.x2=e.x),r.y1>e.y&&(r.y1=e.y),r.y2<e.y&&(r.y2=e.y)):r={x1:e.x,x2:e.x,y1:e.y,y2:e.y}}))})),{x:r.x1,y:r.y1,w:r.x2-r.x1,h:r.y2-r.y1}}function be(e,t){!e.args||!e.args.templated||e.args.templateRef&&e.args.templateRef!==t||we([e],t,e.id)}function we(e,t,i){e.forEach((e=>{!e.args||!e.args.templated||e.args.templateRef&&e.args.templateRef!==t||(e.meta||(e.meta={}),e.meta.templated=!0,e.meta.templateRef=t,e.meta.templateRootId=i,Array.isArray(e.childItems)&&we(e.childItems,t,i),Array.isArray(e._childItems)&&we(e._childItems,t,i))}))}function Oe(){const e=a.A.clone(d.f7);return e.shape="rect",(0,u.V_)(e),e}function Se(e){e.meta.revision=((e.meta.revision||0)+1)%1e3}function ke(e,t,i,n,r,s){if(e){i||(i=o.A.identityMatrix()),r||(r=[]),void 0===s&&(s=!0);for(let a=0;a<e.length;a++){(0,p.O)(e[a].area,d._2.area),t(e[a],i,n,r,s);const l=o.A.standardTransformWithArea(i,e[a].area);e[a].childItems&&ke(e[a].childItems,t,l,e[a],r.concat([e[a].id]),s),e[a]._childItems&&ke(e[a]._childItems,t,l,e[a],r.concat([e[a].id]),!1)}}}class Pe{constructor(e){this.itemPaths=new Map,this.cacheMissFallback=e}get(e){const t=this.itemPaths.get(e.id);return t&&t.revision===e.meta.revision?t.value:this.forceUpdate(e)}forceUpdate(e){const t=this.cacheMissFallback(e);return this.itemPaths.set(e.id,{revision:e.meta.revision,value:t}),t}}const Ce=class{constructor(e,t,i,n,r){m.su.register("SchemioContainer",this),this.id=c().generate(),this.scheme=e,this.editorId=t,this.mode=i,this.apiClient=n,this.listener=r,this.screenTransform={x:0,y:0,scale:1},this.screenSettings={width:700,height:400,x1:-1e6,y1:-1e6,x2:1e6,y2:1e6},this.selectedItems=[],this.selectedConnectorPoints=[],this.compiledTemplates=new Map,this.selectedItemsMap={},this.activeBoundaryBox=null,this.itemMap={},this._itemArray=[],this.revision=0,this.hudItems=[],this.worldItems=[],this.worldItemAreas=new Map,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this._itemTagsToIds={},this.itemTags=[],this.framePlayers=[],this.spatialIndex=new s,this.pinSpatialIndex=new s,this.connectorSpatialIndex=new s,this.framesAnimations={},this.componentItems=[],this.mainScopeData=null,this.svgOutlinePathCache=new Pe(ce.bS),this.shadowTransform=null,this.relativeSnappers={horizontal:[],vertical:[]},this.editBox=null,function(e){(0,p.O)(e,f)}(this.scheme),this.reindexTimeoutId=null,this.reindexItems()}getItemNames(){const e=Array.from(new Set(this._itemArray.map((e=>e.name))));return e.sort(),e}setShadowTransform(e){this.shadowTransform=e}hasDependencyOnItem(e,t){const i=this.dependencyItemMap[e];if(!i||0===i.length)return!1;for(let e=0;e<i.length;e++)if(i[e]===t)return!0;return!1}updateVisibility(e){const t=e.meta&&e.meta.parentId?this.findItemById(e.meta.parentId):null,i=!t||t.visible,n=t?t.opacity:100;(0,d.zD)([e],((t,r)=>{t.id===e.id?t.meta.calculatedVisibility=i&&n>0&&t.visible&&t.opacity>0:t.meta.calculatedVisibility=r.visible&&r.opacity>0&&t.visible&&t.opacity>0}))}updateChildTransforms(e){if(!e.childItems)return;let t=o.A.identityMatrix();if(e.meta&&e.meta.parentId){const i=this.findItemById(e.meta.parentId);i&&(t=(0,ce.nI)(i))}const i=o.A.standardTransformWithArea(t,e.area);ke(e.childItems,((e,t,i,n)=>{e.meta||(e.meta={}),e.meta.transformMatrix=t}),i,e,e.meta.ancestorIds)}indexUserEvents(e,t){return this.indexUserEventsForItems(this.scheme.items,e,t)}indexUserEventsForItems(e,t,i){const n=new Set;return(0,d.zD)(e,(e=>{Array.isArray(e.classes)&&e.classes.forEach((r=>{const s=this.findClassById(r.id);if(!s)return;if(s.shape&&"all"!==s.shape&&s.shape!==e.shape)return!1;const o=pe({},r.args),a={};Array.isArray(s.args)&&s.args.forEach((e=>{a[e.name]=e,o.hasOwnProperty(e.name)||(o[e.name]=e.value)})),s.events.forEach((r=>{const s=(0,de.V)(this,t,e,r.actions,o,a,i);r.event===he.A.standardEvents.init.id&&n.add(e.id),t.subscribeItemEvent(e.id,e.name,r.event,s)}))}));const r={},s={};e.behavior&&Array.isArray(e.behavior.events)&&e.behavior.events.forEach((o=>{const a=(0,de.V)(this,t,e,o.actions,r,s,i);o.event===he.A.standardEvents.init.id&&n.add(e.id),t.subscribeItemEvent(e.id,e.name,o.event,a)}))})),n}findClassById(e){if(!Array.isArray(this.scheme.scripts.classes))return null;for(let t=0;t<this.scheme.scripts.classes.length;t++)if(this.scheme.scripts.classes[t].id===e)return this.scheme.scripts.classes[t];return null}delayFullReindex(){this.reindexTimeoutId&&clearTimeout(this.reindexTimeoutId),this.reindexTimeoutId=setTimeout((()=>{this.reindexItems(),this.reindexTimeoutId=null}),1e3)}reindexItems(){me.info("reindexItems()",this),me.time("reindexItems"),this.itemMap={},this.itemsByName=new Map,this._itemArray=[],this.itemsByName=new Map,this.worldItems=[],this._itemTagsToIds={},this.worldItemAreas=new Map,this.relativeSnappers.horizontal=[],this.relativeSnappers.vertical=[],this.spatialIndex=new s,this.pinSpatialIndex=new s,this.connectorSpatialIndex=new s,this.dependencyItemMap={},this.itemCloneIds=new Map,this.itemCloneReferenceIds=new Map,this.framePlayers=[],this.componentItems=[],this.scheme.items&&(this.reindexSpecifiedItems(this.scheme.items),this.reindexComponents(),this.fixComponentCyclicDependencies(),this.itemTags=Object.keys(this._itemTagsToIds),this.itemTags.sort(),me.timeEnd("reindexItems"))}reindexComponents(){(0,n.jJ)(this.componentItems,(e=>this.reindexEmbeddedComponent(e)))}reindexEmbeddedComponent(e){if(e.meta.referenceItemId=null,"embedded"===e.shapeProps.kind&&e.shapeProps.referenceItem){const t=this.findFirstElementBySelector(e.shapeProps.referenceItem);if(t){e.meta.referenceItemId=t.id;const i=pe(pe({},t),{},{meta:pe(pe({},t.meta),{},{componentRoot:!0}),visible:!0});this.attachItemsToComponentItem(e,[i]),w.A.item.changed.specific.$emit(this.editorId,e.id)}}}fixComponentCyclicDependencies(){this.componentItems.forEach((e=>e.meta.cyclicComponent=!1)),this.componentItems.forEach((e=>{"embedded"===e.shapeProps.kind&&this.checkComponentForCyclicDependencies(e)}))}checkComponentForCyclicDependencies(e){if("embedded"!==e.shapeProps.kind)return;const t=this.findItemById(e.meta.referenceItemId);if(!t)return;const i=[e],r=e=>{(0,n.jJ)(e,(e=>{i.push(e)}))};let s=!0;for(;i.length>0;){const n=i.shift();if(n.meta.referenceItemId===t.id){if(!s)return e.meta.cyclicComponent=!0,void(e._childItems=[]);s=!1}if("component"===n.shape&&"embedded"===n.shapeProps.kind){const e=this.findItemById(n.meta.referenceItemId);e&&i.push(e)}r(n.childItems),r(n._childItems)}}attachItemsToComponentItem(e,t){if(!t)return;const i=this.cloneItems(t,!0,!0),r=xe(t);(0,n.jJ)(i,(e=>{e.area.x-=r.x,e.area.y-=r.y,e.opacity=100,e.selfOpacity=100,e.visible=!0}));let s=1,a=0,l=0,h=Math.max(r.w,1e-5),d=Math.max(r.h,1e-5),u=e.area.w/h,p=e.area.h/d;"centered"===e.shapeProps.placement&&(s=Math.min(u,p),u=s,p=s,a=(e.area.w-h*u)/2,l=(e.area.h-d*p)/2);const f=Oe();f.id=c().generate(),f.area.x=0,f.area.y=0,f.area.w=e.area.w,f.area.h=e.area.h,f.selfOpacity=0,f.name="Overlay container";const m=Oe();m.shape="dummy",m.selfOpacity=0,m.id=c().generate(),m.name="Scaled container",m.area.x=a,m.area.y=l,m.area.w=h,m.area.h=d,m.area.px=0,m.area.py=0,m.area.sx=u,m.area.sy=p,m._childItems=i,f._childItems=[m],e._childItems=[f];const g=o.A.standardTransformWithArea(e.meta.transformMatrix,e.area);this.reindexSpecifiedItems(e._childItems,g,e,e.meta.ancestorIds.concat([e.id]),!1)}readjustComponentContainerRect(e){if(!e._childItems||0===e._childItems.length)return;if(!e._childItems[0]._childItems||0===e._childItems[0]._childItems.length)return;const t=e._childItems[0]._childItems[0];if(0===t._childItems.length)return;const i=[];t._childItems.forEach((e=>{const t=this.itemCloneReferenceIds.get(e.id);t&&i.push(this.findItemById(t))}));const n=xe(i);let r=1,s=0,o=0,a=Math.max(n.w,1e-5),l=Math.max(n.h,1e-5),c=e.area.w/a,h=e.area.h/l;"centered"===e.shapeProps.placement&&(r=Math.min(c,h),c=r,h=r,s=(e.area.w-a*c)/2,o=(e.area.h-l*h)/2),t.area.x=s,t.area.y=o,t.area.w=a,t.area.h=l,t.area.sx=c,t.area.sy=h}reindexChildItems(e){this.reindexSpecifiedItemsWithParent(e.childItem,e)}reindexSpecifiedItemsWithParent(e,t){const i=o.A.standardTransformWithArea(t.meta.transformMatrix,t.area);this.reindexSpecifiedItems(t.childItems,i,t,t.meta.ancestorIds.concat([t.id]))}reindexSpecifiedItems(e,t,i,r,s){void 0===s&&(s=!0);const o={},a=(e,t)=>{let i=o[e]||[];i.push(t),o[e]=i},l=this.revision+1;ke(e,((e,t,i,r,s)=>{s&&this._itemArray.push(e),this.itemsByName.set(e.name,e),e.args&&e.args.templateRef&&e.args.templated&&(be(e,e.args.templateRef),"edit"===this.mode&&this.fetchAndCompileTemplate(e.args.templateRef)),(0,u.V_)(e),this.enrichItemMeta(e,t,i,r),e.tags&&this.indexItemTags(e.id,e.tags),i&&(i.meta.isInHUD||"hud"===i.shape)&&(e.meta.isInHUD=!0),"none"!==e.behavior.dragging?(e.cursor="grab",e.meta.ancestorDraggableId=null):i&&("none"!==i.behavior.dragging?(e.meta.ancestorDraggableId=i.id,e.cursor="grab"):i.meta.ancestorDraggableId&&(e.meta.ancestorDraggableId=i.meta.ancestorDraggableId,e.cursor="grab")),"component"===e.shape&&this.componentItems.push(e),"frame_player"===e.shape&&this.framePlayers.push(e),i||this.worldItems.push(e),"hud"===e.shape&&this.hudItems.push(e),e.id&&(this.itemMap[e.id]=e),"connector"===e.shape&&e.shapeProps.autoAttach&&(e.shapeProps.sourceItem&&a(e.shapeProps.sourceItem,e.id),e.shapeProps.destinationItem&&a(e.shapeProps.destinationItem,e.id));let o=!0;i&&(o=i.meta.calculatedVisibility),e.meta.calculatedVisibility=o&&e.visible&&e.opacity>0;const l=this.generateItemSnappers(e);if(l&&(0,n.jJ)(l,(e=>{"horizontal"===e.snapperType?this.relativeSnappers.horizontal.push(e):"vertical"===e.snapperType&&this.relativeSnappers.vertical.push(e)})),s&&"edit"===this.mode){const t=h.A.find(e.shape);t&&this.indexItemPins(e,t),this.indexItemOutlinePoints(e)}"connector"===e.shape&&"edit"===this.mode&&this.indexConnectorPoints(e),this.worldItemAreas.set(e.id,this.calculateItemWorldArea(e))}),t,i,r,s),s&&this.buildDependencyItemMapFromElementSelectors(this.dependencyItemMap,o),this.revision=l}reindexTags(){this._itemTagsToIds={},ke(this.scheme.items,((e,t,i,n)=>{e.tags&&this.indexItemTags(e.id,e.tags)})),this.itemTags=Object.keys(this._itemTagsToIds),this.itemTags.sort()}fetchAndCompileTemplate(e){this.compiledTemplates.has(e)||this.getTemplate(e).then((t=>{this.compiledTemplates.set(e,t)})).catch((t=>{console.error(`Failed to compile template: ${e}`,t)}))}getTemplate(e){if(this.compiledTemplates.has(e))return Promise.resolve(this.compiledTemplates.get(e));{let t=null;if(e.startsWith("#doc:")){const i=e.substring(5);t=this.apiClient.getScheme(i).then((e=>function(e,t,i){const n=function(e){const t=a.A.clone(e);return(0,d.zD)([t],(e=>{"component"===e.shape&&(e.args||(e.args={}),e.args.templateIgnoredProps=["shapeProps.kind","shapeProps.schemeId","shapeProps.referenceItem"]);const t="template-ignore-";Array.isArray(e.tags)&&e.tags.forEach((i=>{if(i.startsWith(t)){const i=t.substring(16);e.args||(e.args={}),Array.isArray(e.args.templateIgnoredProps)||(e.args.templateIgnoredProps=[]),e.args.templateIgnoredProps.push(i)}}))})),t}(e.items[0]);return re(i,{name:e.name,args:{},defaultArea:{x:0,y:0,w:100,h:100},item:n},"#doc:"+t)}(e.scheme,i,this.editorId)))}else t=this.apiClient.getTemplate(e).then((t=>re(this.editorId,t,e)));return t.then((t=>(this.compiledTemplates.set(e,t),t))).catch((t=>{throw console.error(`Failed to compile template: ${e}`,t),t}))}}indexSingleCloneItem(e,t){let i=null;this.itemCloneIds.has(e)?i=this.itemCloneIds.get(e):(i=new Set,this.itemCloneIds.set(e,i)),this.itemCloneReferenceIds.set(t,e),i.add(t)}getItemCloneIds(e){return this.itemCloneIds.get(e)}calculateItemWorldArea(e){const t=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}],i=(0,n.kH)(t,(t=>(0,ce.xS)(t.x,t.y,e))),r={x:i[0].x,y:i[0].y,w:0,h:0};return(0,n.jJ)(i,(e=>{if(r.x>e.x){const t=r.x;r.x=e.x,r.w=t+r.w-e.x}else e.x>r.x+r.w&&(r.w=e.x-r.x);if(r.y>e.y){const t=r.y;r.y=e.y,r.h=t+r.h-e.y}else e.y>r.y+r.h&&(r.h=e.y-r.y)})),r}getItemWorldPinPoint(e,t){const i=h.A.find(e.shape);if(!i)return null;const n=i.getPins(e);if(!n)return null;const r=n[t];if(!r)return null;const s=(0,ce.xS)(r.x,r.y,e);if(r.nx||r.ny){const t=(0,ce.xS)(0,0,e),i=(0,ce.xS)(r.nx,r.ny,e);s.nx=i.x-t.x,s.ny=i.y-t.y}return s}indexConnectorPoints(e){Array.isArray(e.shapeProps.points)&&e.shapeProps.points.forEach(((t,i)=>{const n=(0,ce.xS)(t.x,t.y,e);this.connectorSpatialIndex.addPoint(n.x,n.y,{itemId:e.id,pointIdx:i})}))}selectByBoundaryBox(e,t){t||this.deselectAllItems();const i=[],r=new Map;(0,n.jJ)(this.getItems(),(t=>{const n=[{x:0,y:0},{x:t.area.w,y:0},{x:t.area.w,y:t.area.h},{x:0,y:t.area.h}];let s=!0;for(let i=0;i<n.length&&s;i++){const r=(0,ce.xS)(n[i].x,n[i].y,t);s=o.A.isPointInArea(r.x,r.y,e)}s&&(i.push(t),r.set(t.id))})),this.connectorSpatialIndex.forEachInRange(e.x,e.y,e.x+e.w,e.y+e.h,(e=>{r.has(e.itemId)||this.selectConnectorPoint(e.itemId,e.pointIdx)}));const s=new Set,a=new Map;this.selectedConnectorPoints.forEach((e=>{if(!a.has(e.itemId)){const t=this.findItemById(e.itemId);a.set(e.itemId,t.shapeProps.points.length*(t.shapeProps.points.length+1)/2)}const t=a.get(e.itemId)-e.pointIdx-1;t<=0&&s.add(e.itemId),a.set(e.itemId,t)})),s.forEach((e=>{const t=this.findItemById(e);i.push(t)}));for(let e=this.selectedConnectorPoints.length-1;e>=0;e--){const t=this.selectedConnectorPoints[e];s.has(t.itemId)&&(this.selectedConnectorPoints.splice(e,1),delete this.selectedItemsMap[`${t.itemId}.points.${t.pointIdx}`])}this.selectMultipleItems(i,!0)}selectConnectorPoint(e,t){if(t<0)return;const i=`${e}.points.${t}`;if(this.selectedItemsMap[i]||this.selectedItemsMap[e])return;const n=this.findItemById(e);n&&"connector"===n.shape&&(t>=n.shapeProps.points.length||(this.selectedConnectorPoints.push({itemId:e,pointIdx:t}),this.selectedItemsMap[i]=!0))}indexItemPins(e,t){t&&(0,n.jJ)(t.getPins(e),((t,i)=>{const n=(0,ce.xS)(t.x,t.y,e);if(t.hasOwnProperty("nx")){const i=(0,ce.xS)(0,0,e),r=(0,ce.xS)(t.nx,t.ny,e);n.nx=r.x-i.x,n.ny=r.y-i.y}this.pinSpatialIndex.addPoint(n.x,n.y,{itemId:e.id,pinId:i,worldPinPoint:n})}))}indexItemOutlinePoints(e){const t=this.getSvgOutlineOfItem(e);if(!t)return;const i=t.getTotalLength();let n=[[0,Math.max(1,Math.ceil(i/20))]];for(;n.length>0;){const i=[];for(let r=0;r<n.length;r++){const s=n[r][0],o=n[r][1];let a=-1,l=o-s;if(l>=2){const e=Math.floor((s+o)/2);a=20*e,e>s&&i.push([s,e-1]),e<o&&i.push([e+1,o])}else l>=1?(a=20*o,i.push([s,s])):l>=0&&(a=20*s);if(a>=0){const i=t.getPointAtLength(a),n=(0,ce.xS)(i.x,i.y,e);this.spatialIndex.addPoint(n.x,n.y,{itemId:e.id,pathDistance:a})}}n=i}}buildDependencyItemMapFromElementSelectors(e,t){(0,n.jJ)(t,((t,i)=>{const n=this.findFirstElementBySelector(i);n&&((t,i)=>{let n=e[t]||[];n=n.concat(i),e[t]=n})(n.id,t)}))}indexItemTags(e,t){(0,n.jJ)(t,(t=>{this._itemTagsToIds.hasOwnProperty(t)||(this._itemTagsToIds[t]=[]),this._itemTagsToIds[t].push(e)}))}enrichItemMeta(e,t,i,n){e.meta||(e.meta={strokeOffset:0,collapsed:!1,collapseBitMask:0}),e.meta.transformMatrix=t,e.meta.ancestorIds=n,e.meta.collapseBitMask=i?i.meta.collapseBitMask<<n.length|(i.meta.collapsed?1:0):0,e.meta.parentId=i?i.id:null}worldPointOnItem(e,t,i){return(0,ce.xS)(e,t,i)}localPointOnItem(e,t,i){return(0,ce.Qb)(e,t,i,this.shadowTransform)}relativePointForItem(e,t,i){if(i.meta.parentId){const n=this.findItemById(i.meta.parentId);if(n)return(0,ce.Qb)(e,t,n,this.shadowTransform)}return this.shadowTransform?o.A.localPointInArea(e,t,ge,this.shadowTransform):{x:e,y:t}}findClosestPointToItems(e,t,i,n,r){let s=null;if(this.pinSpatialIndex.forEachInRange(e-i,t-i,e+i,t+i,(({itemId:i,pinId:r,worldPinPoint:o},a)=>{if(i===n)return;const l=(e-a.x)*(e-a.x)+(t-a.y)*(t-a.y);(!s||s.distance>l)&&(s={itemId:i,pinId:r,point:o,distance:l})})),s){const e={x:s.point.x,y:s.point.y,distanceOnPath:0,itemId:s.itemId,pinId:s.pinId};return s.point.hasOwnProperty("nx")&&(e.nx=s.point.nx,e.ny=s.point.ny),e}const o=new Map,a=Math.max(i,40);this.spatialIndex.forEachInRange(e-a,t-a,e+a,t+a,(({itemId:i,pathDistance:r},s)=>{if(n===i)return;const a=(e-s.x)*(e-s.x)+(t-s.y)*(t-s.y);o.has(i)?o.get(i).squaredDistanceToPoint>a&&o.set(i,{pathDistance:r,squaredDistanceToPoint:a}):o.set(i,{pathDistance:r,squaredDistanceToPoint:a})}));let l={x:e,y:t},c=null,h=1e5;return o.forEach(((e,t)=>{const s=this.findItemById(t);if(s.id===n)return;if(r&&!s.meta.calculatedVisibility)return;const o=this.closestPointToItemOutline(s,l,{startDistance:Math.max(0,e.pathDistance-a),stopDistance:e.pathDistance+a,precision:Math.min(i/2,.5),withNormal:!0});if(!o)return;const d=(o.x-l.x)*(o.x-l.x)+(o.y-l.y)*(o.y-l.y);if(d<i*i){const e={x:o.x,y:o.y,distanceOnPath:o.distanceOnPath,itemId:s.id};o.hasOwnProperty("nx")&&(e.nx=o.nx,e.ny=o.ny),(!c||h>d)&&(c=e,h=d)}})),c}getBoundingBoxOfItems(e){return(0,ce.bw)(e)}readjustItemAndDescendants(e,t=!1,i=ye,n=1){this._readjustItemAndDescendants(e,{},t,i,n)}_readjustItemAndDescendants(e,t,i,r,s){this._readjustItem(e,t,i,r,s);const o=this.findItemById(e);o&&(0,n.jJ)(o.childItems,(e=>{this._readjustItemAndDescendants(e.id,t,i,r,s)}))}readjustItem(e,t=!1,i=ye,n=4){isNaN(n)&&(n=4),this._readjustItem(e,{},t,i,n)}_readjustItem(e,t,i,r,s){if(isNaN(s)&&(s=4),t[e])return;t[e]=!0;const o=this.findItemById(e);o&&(this._readjustSingleItem(o,t,i,r,s),this.dependencyItemMap[e]&&(0,n.jJ)(this.dependencyItemMap[e],(e=>{this._readjustItem(e,t,i,r,s)})),(0,n.jJ)(o.childItems,(e=>{if(e.autoLayout&&e.autoLayout.on&&e.args&&e.args.templated&&e.args.templateRef){const n=this.compiledTemplates.get(e.meta.templateRef);n?(t[e.id]=!0,this._readjustSingleItem(e,t,i,r,s),this.regenerateTemplatedItem(e,n,e.args.templateArgs,e.area.w,e.area.h)):this._readjustItem(e.id,t,i,r,s)}else this._readjustItem(e.id,t,i,r,s)})),o.meta.revision=(o.meta.revision||1)+1)}_readjustSingleItem(e,t,i,n,r){me.info("Readjusting item",e.id,e.name),"connector"===e.shape&&this._readjustConnectorItem(e,n,r);const s=h.A.find(e.shape);let a=!1;s&&s.readjustItem&&(s.readjustItem(e,this,i,n,r),a=!0);const l=e.meta&&e.meta.parentId?this.findItemById(e.meta.parentId):null;l&&e.autoLayout&&e.autoLayout.on&&e.autoLayout.rules&&(e.area=function(e,t,i){const n={x:0,y:0,w:10,h:10,r:0,px:.5,py:.5,sx:1,sy:1};if(i.hasOwnProperty("width")?n.w=o.A.roundPrecise1(i.width):i.hasOwnProperty("relWidth")&&(n.w=o.A.roundPrecise1(i.relWidth*t.area.w/100)),i.hasOwnProperty("height")?n.h=o.A.roundPrecise1(i.height):i.hasOwnProperty("relHeight")&&(n.h=o.A.roundPrecise1(i.relHeight*t.area.h/100)),i.hcenter)n.x=o.A.roundPrecise1(t.area.w/2-n.w/2);else{let e=!1;if(i.hasOwnProperty("left")?(e=!0,n.x=o.A.roundPrecise1(i.left)):i.hasOwnProperty("relLeft")&&(e=!0,n.x=o.A.roundPrecise1(i.relLeft*t.area.w/100)),i.hasOwnProperty("right"))e?n.w=o.A.roundPrecise1(t.area.w-i.right-n.x):n.x=o.A.roundPrecise1(t.area.w-i.right-n.w);else if(i.hasOwnProperty("relRight")){const r=i.relRight*t.area.w/100;e?n.w=o.A.roundPrecise1(t.area.w-r-n.x):n.x=o.A.roundPrecise1(t.area.w-r-n.w)}}if(i.vcenter)n.y=o.A.roundPrecise1(t.area.h/2-n.h/2);else{let e=!1;if(i.hasOwnProperty("top")?(e=!0,n.y=o.A.roundPrecise1(i.top)):i.hasOwnProperty("relTop")&&(e=!0,n.y=o.A.roundPrecise1(i.relTop*t.area.h/100)),i.hasOwnProperty("bottom"))e?n.h=o.A.roundPrecise1(t.area.h-i.bottom-n.y):n.y=o.A.roundPrecise1(t.area.h-i.bottom-n.h);else if(i.hasOwnProperty("relBottom")){const r=i.relBottom*t.area.h/100;e?n.h=o.A.roundPrecise1(t.area.h-r-n.y):n.y=o.A.roundPrecise1(t.area.h-r-n.h)}}return n.w<0&&(n.w=0),n.h<0&&(n.h=0),n}(0,l,e.autoLayout.rules),a=!0),a&&(Se(e),w.A.item.changed.specific.$emit(this.editorId,e.id),this.svgOutlinePathCache.forceUpdate(e))}_readjustConnectorItem(e,t,i){me.info("readjusting connector item",e.id);const n=(n,r,s,a)=>{const l=e.shapeProps.points[a],c=this.findFirstElementBySelector(n);if(!c)return null;if(s){const t=h.A.find(c.shape);if(!t||!t.getPins)return null;const i=this.getItemWorldPinPoint(c,s);if(!i)return null;const n=(0,ce.Qb)(i.x,i.y,e),r={x:n.x,y:n.y};return i.hasOwnProperty("nx")&&(r.nx=i.nx,r.ny=i.ny),r}const d=this.getSvgOutlineOfItem(c);if(!d)return null;if(t.itemId!==e.id&&(t.resized||t.controlPoint||"connector"===c.shape||"path"===c.shape)){const t=`${e.id}-points-${a}`;let n=l;this.editBox&&(this.editBox.cache.has(t)?n=this.editBox.cache.get(t):this.editBox.itemIds.has(e.id)||this.editBox.cache.set(t,l));const r=(0,ce.xS)(n.x,n.y,e),s=this.closestPointToItemOutline(c,r,{withNormal:!0,precision:i});if(!s)return;const h=(0,ce.Qb)(s.x,s.y,e);return o.A.distanceBetweenPoints(r.x,r.y,s.x,s.y)<.8&&(h.x=n.x,h.y=n.y),{x:h.x,y:h.y,nx:s.nx,ny:s.ny}}const u=d.getPointAtLength(r),p=(0,ce.xS)(u.x,u.y,c),f=(0,ce.Qb)(p.x,p.y,e),m=this.calculateNormalOnPointInItemOutline(c,r,d);return{x:f.x,y:f.y,nx:m.x,ny:m.y}};if(!e.shapeProps.autoAttach)return;const r=n(e.shapeProps.sourceItem,e.shapeProps.sourceItemPosition,e.shapeProps.sourcePin,0);r&&(e.shapeProps.points[0]=r);const s=n(e.shapeProps.destinationItem,e.shapeProps.destinationItemPosition,e.shapeProps.destinationPin,e.shapeProps.points.length-1);s&&(e.shapeProps.points[e.shapeProps.points.length-1]=s)}doesItemDependOn(e,t){const i=this.dependencyItemMap[t];return!!i&&(0,n.qh)(i,e)>=0}remountItemToRoot(e){const t=this.scheme.items.length;this.remountItemInsideOtherItem(e,null,t)}remountItemInsideOtherItemAtTheBottom(e,t){if(!t)return;const i=this.findItemById(t);if(!i)return;let n=0;i.childItems&&(n=i.childItems.length),this.remountItemInsideOtherItem(e,t,n)}remountItemInsideOtherItem(e,t,i){const r=this.findItemById(e);if(!r)return;let s=null;if(t&&(s=this.findItemById(t),!s))return;if(isNaN(i)&&(i=0,s.childItems&&(i=s.childItems.length)),s&&(0,n.qh)(s.meta.ancestorIds,r.id)>=0)return;const a=(0,ce.xS)(0,0,r);let l=0,c=0,h=o.A.identityMatrix();s&&(h=(0,ce.nI)(s),c=(0,ce._0)(s));let d=null,u=null,p=this.scheme.items;if(r.meta.parentId){if(d=this.findItemById(r.meta.parentId),!d)return;u=d.id,p=d.childItems,l=(0,ce._0)(d)}const f=(0,n.SL)(p,(t=>t.id===e));if(f<0)return;r.autoLayout&&r.autoLayout.on&&u!==t&&(r.autoLayout.on=!1,r.autoLayout.rules={}),p.splice(f,1);let m=this.scheme.items,g=null;s?(s.childItems||(s.childItems=[]),m=s.childItems,g=s.id,r.meta.parentId=s.id,r.meta.ancestorIds=s.meta.ancestorIds.concat([s.id])):(r.meta.ancestorIds=[],r.meta.parentId=null);let y=0;if(u===g&&f<i&&(y=-1),m.splice(i+y,0,r),u!==t){r.area.r+=l-c;const e=o.A.findTranslationMatchingWorldPoint(a.x,a.y,0,0,r.area,h);e&&(r.area.x=e.x,r.area.y=e.y)}u&&w.A.item.changed.specific.$emit(this.editorId,u),g&&w.A.item.changed.specific.$emit(this.editorId,g)}remountItemAfterOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,1)}remountItemBeforeOtherItem(e,t){this.remountItemWithOffsetToOtherItem(e,t,0)}remountItemWithOffsetToOtherItem(e,t,i){const r=this.findItemById(t);if(!r)return;let s=this.scheme.items,o=null;if(r.meta.parentId){if(o=this.findItemById(r.meta.parentId),!o)return;o.childItems||(o.childItems=[]),s=o.childItems}const a=(0,n.SL)(s,(e=>e.id===t));if(a<0)return;let l=null;o&&(l=o.id),this.remountItemInsideOtherItem(e,l,a+i)}getSvgOutlineOfItem(e){return this.svgOutlinePathCache.get(e)}closestPointToItemOutline(e,t,{withNormal:i,startDistance:n,stopDistance:r,precision:s}){const a=(0,ce.Qb)(t.x,t.y,e),l=this.svgOutlinePathCache.get(e);if(!l)return null;const c=o.A.closestPointOnPath(a.x,a.y,l,{startDistance:n,stopDistance:r,precision:s}),h=(0,ce.xS)(c.x,c.y,e);if(h.distanceOnPath=c.distance,i){const t=this.calculateNormalOnPointInItemOutline(e,c.distance,l);h.nx=t.x,h.ny=t.y}return h}calculateNormalOnPointInItemOutline(e,t,i){if(!i&&!(i=this.svgOutlinePathCache.get(e)))return{x:1,y:0};let n=t-2;n<0&&(n=i.getTotalLength()-n);const r=i.getPointAtLength(n),s=i.getPointAtLength((t+2)%Math.max(1,i.getTotalLength()));let a=s.x-r.x,l=s.y-r.y,c=a;a=l,l=-c;const h=(0,ce.xS)(0,0,e),d=(0,ce.xS)(a,l,e);let u=d.x-h.x,p=d.y-h.y;const f=Math.sqrt(u*u+p*p);return f>1e-4&&(u/=f,p/=f),{x:o.A.roundPrecise(u,4),y:o.A.roundPrecise(p,4)}}getSelectedItems(){return this.selectedItems}deleteItem(e){this._deleteItem(e),this.reindexItems()}deleteItems(e){(0,n.jJ)(e,(e=>{this._deleteItem(e)})),this.reindexItems()}_deleteItem(e){let t=this.scheme.items,i=null;if(e.meta.parentId){if(i=this.findItemById(e.meta.parentId),!i||!i.childItems)return;t=i.childItems}const r=(0,n.SL)(t,(t=>t.id===e.id));r<0||(t.splice(r,1),i&&w.A.item.changed.specific.$emit(this.editorId,i.id))}deleteNonIndexableItems(e){const t=new Set;(0,n.jJ)(e,(e=>t.add(e.id)));for(let e=this.scheme.items.length-1;e>=0&&t.size>0;e--){const i=this.scheme.items[e];t.has(i.id)&&(delete this.itemMap[i.id],this.worldItemAreas.delete(i.id),t.delete(i.id),this.scheme.items.splice(e,1))}}deleteSelectedItems(){if(this.selectedItems&&this.selectedItems.length>0)for(let e=this.selectedItems.length-1;e>=0;e--){const t=this.selectedItems[e];if(t.meta.templated&&t.meta.templateRootId&&t.meta.templateRootId!==t.id){const e=this.findItemById(t.meta.templateRootId);e&&e.args.templateRef&&this.getTemplate(e.args.templateRef).then((i=>{i.onDeleteItem(e,t.args.templatedId,t,(t=>{this.regenerateTemplatedItem(e,i,t,e.area.w,e.area.h)}))}))}else delete this.selectedItemsMap[t.id],this._deleteItem(t),this.selectedItems.splice(e,1)}const e=new Map;this.selectedConnectorPoints.sort(((e,t)=>t.pointIdx-e.pointIdx)).forEach((t=>{const i=this.findItemById(t.itemId);i&&"connector"===i.shape&&(i.shapeProps.points.splice(t.pointIdx,1),i.shapeProps.points.length<2?(this._deleteItem(i),e.delete(i.id)):e.set(i.id,i))})),e.forEach((e=>{Se(e),w.A.item.changed.specific.$emit(this.editorId,e.id)})),this.selectedConnectorPoints=[],this.reindexItems(),this.editBox=null,w.A.item.deselected.any.$emit(this.editorId)}enrichItem(e){(0,u.V_)(e),e.hasOwnProperty("meta")||(e.meta={}),e.id||(e.id=c().generate())}addItem(e,t){if(this.enrichItem(e),t){t.childItems.push(e);const i=o.A.standardTransformWithArea(t.meta.transformMatrix,t.area);this.reindexSpecifiedItems([e],i,t,t.meta.ancestorIds.concat([t.id]),!0)}else this.scheme.items.push(e),this.reindexSpecifiedItems([e]);return"component"===e.shape&&"embedded"===e.shapeProps.kind&&this.reindexEmbeddedComponent(e),e}addNonIndexableItem(e){return this.enrichItem(e),this.scheme.items.push(e),this.reindexSpecifiedItems([e],null,null,[],!1),e}getItems(){return this._itemArray}getTopLevelItems(){return this.worldItems}setActiveBoundaryBox(e){this.activeBoundaryBox=e}isItemSelected(e){return this.selectedItemsMap[e.id]||!1}rebaseScheme(){const e=[];this.selectedItemsMap={},this.selectedItems.forEach((t=>{const i=this.findItemById(t.id);i&&(e.push(i),this.selectedItemsMap[i.id]=!0,i.meta.selected=!0)})),this.selectedItems=e,this.rebaseEditBox()}rebaseEditBox(){if(!this.editBox)return;me.info("rebasing edit box",this.editBox);const e=this.generateEditBox(this.selectedItems,this.selectedConnectorPoints);for(let t in e)e.hasOwnProperty(t)&&"id"!==t&&(this.editBox[t]=e[t])}selectItem(e,t){if(t)this.selectItemInclusive(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0,w.A.item.selected.specific.$emit(this.editorId,e.id);else{this.deselectConnectorPoints();const t=[];(0,n.jJ)(this.selectedItems,(i=>{i.id!==e.id&&t.push(i.id)})),this.selectedItems=[],(0,n.jJ)(t,(t=>{this.selectedItemsMap[t]=!1,e.meta.selected=!1,w.A.item.deselected.specific.$emit(this.editorId,t)})),this.selectItemInclusive(e),w.A.item.selected.specific.$emit(this.editorId,e.id)}this.updateEditBox()}selectMultipleItems(e,t){t||this.deselectAllItems(),(0,n.jJ)(e,(e=>{this.selectedItemsMap[e.id]||(this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0,w.A.item.selected.specific.$emit(this.editorId,e.id))})),this.updateEditBox()}selectAllItems(){this.selectMultipleItems(this._itemArray)}selectItemInclusive(e){for(var t=!1,i=0;i<this.selectedItems.length;i++)if(this.selectedItems[i]===e){t=!0;break}t||(this.selectedItems.push(e),this.selectedItemsMap[e.id]=!0,e.meta.selected=!0),this.sortSelectedItemsByAncestors()}sortSelectedItemsByAncestors(){this.selectedItems&&(this.selectedItems=this.selectedItems.sort(((e,t)=>{let i=0,n=0;return e.meta.ancestorIds&&(i=e.meta.ancestorIds.length),t.meta.ancestorIds&&(n=t.meta.ancestorIds.length),i-n})))}deselectConnectorPoints(){(0,n.jJ)(this.selectedConnectorPoints,(e=>{this.selectedItemsMap[`${e.itemId}.points.${e.pointIdx}`]=!1})),this.selectedConnectorPoints=[]}updateItem(e,t,i){const n=this.findItemById(e);n&&(i(n),w.A.item.changed.specific.$emit(this.editorId,e,t))}deselectItem(e){this.selectedItemsMap[e.id]&&(this.selectedItemsMap[e.id]=!1,e.meta.selected=!1);for(let t=0;t<this.selectedItems.length;t++)if(this.selectedItems[t].id===e.id){this.selectedItems.splice(t,1);break}w.A.item.deselected.specific.$emit(this.editorId,e.id),this.updateEditBox()}deselectAllItems(){this.deselectConnectorPoints();const e=(0,n.kH)(this.selectedItems,(e=>e.id));(0,n.jJ)(this.selectedItems,(e=>{this.selectedItemsMap[e.id]=!1,e.meta.selected=!1})),this.selectedItems=[],(0,n.jJ)(e,(e=>w.A.item.deselected.specific.$emit(this.editorId,e))),this.updateEditBox()}bringSelectedItemsToBack(e){e||(e=this.scheme.items);let t=0,i=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToBack(e[t].childItems),this.isItemSelected(e[t])?(i.push(e[t]),e.splice(t,1)):t++;(0,n.jJ)(i,(t=>{e.splice(0,0,t)}))}bringSelectedItemsToFront(e){e||(e=this.scheme.items);let t=0,i=[];for(;t<e.length;)e[t].childItems&&this.bringSelectedItemsToFront(e[t].childItems),this.isItemSelected(e[t])?(i.push(e[t]),e.splice(t,1)):t++;(0,n.jJ)(i,(t=>{e.push(t)}))}findItemByName(e){return this.itemsByName.get(e)}findItemById(e){return this.itemMap[e]}findItemsByTag(e){const t=this._itemTagsToIds[e],i=[];return t&&(0,n.jJ)(t,(e=>{const t=this.findItemById(e);t&&i.push(t)})),i}findFirstElementBySelector(e,t){const i=this.findElementsBySelector(e,t);return i.length>0?i[0]:null}findElementsBySelector(e,t){if(!e)return[];if("self"===e)return[t];if("#"===e.charAt(0)){const t=e.substring(1),i=this.findItemById(t);if(i)return[i]}else{const t=e.indexOf(":");if(t>0&&"tag"===e.substring(0,t).trim())return this.findItemsByTag(e.substring(t+1).trim())}return[]}copySelectedItems(){const e=[],t=new Set;return(0,n.jJ)(this.selectedItems,(i=>{t.has(i.id)||((0,d.zD)([i],(e=>{t.add(e.id)})),e.push(a.A.clone(i)))})),this.triggerCopyEventForTemplatedItems(e).then((()=>JSON.stringify(e)))}triggerCopyEventForTemplatedItems(e){const t=[];return e.forEach((e=>{if(!e.meta.templated||!e.meta.templateRootId)return;const i=this.findItemById(e.meta.templateRootId);i&&i.args&&i.args.templateRef&&t.push(this.getTemplate(i.args.templateRef).then((t=>{t.onCopyItem(i,e.args.templatedId,e)})).catch((e=>{console.error(e)})))})),Promise.all(t)}decodeItemsFromText(e){let t=null;try{t=JSON.parse(e)}catch(e){return null}if(!Array.isArray(t))return null;for(let e=0;e<t.length;e++){const i=t[e];if("object"!=typeof i.area||null===i.area)return null;if("string"!=typeof i.shape||null===i.shape)return null}return t}setPropertyForItem(e,t){t(e),this.updatePropertyForClones(e,t)}updatePropertyForClones(e,t,i){const n=this.getItemCloneIds(e.id);n&&n.forEach((e=>{const n=this.findItemById(e);n&&(i&&n.meta.componentRoot||(this.setPropertyForItem(n,t),w.A.item.changed.specific.$emit(this.editorId,n.id)))}))}updateItemClones(e){const t=this.getItemCloneIds(e.id);t&&t.forEach((t=>{const i=this.findItemById(t);if(i){this.updateItemClones(i);const t=a.A.clone(e);i.shapeProps=t.shapeProps,i.opacity=t.opacity,i.selfOpacity=t.selfOpacity,i.textSlots=t.textSlots,w.A.item.changed.specific.$emit(this.editorId,i.id)}}))}cloneItemsPreservingNames(e){return this.cloneItems(e,!0,!1)}cloneItems(e,t=!1,i=!1){const r={},s=[];(0,n.jJ)(e,(e=>{if(!(0,n.I6)(e.meta.ancestorIds,(e=>1===r[e]))){r[e.id]=1;const i=(0,ce.xS)(e.area.px*e.area.w,e.area.py*e.area.h,e),n=(0,ce._0)(e),a=this.copyItem(e);a.name=t?e.name:this.copyNameAndMakeUnique(e.name),a.area.r=n;const l=o.A.findTranslationMatchingWorldPoint(i.x,i.y,e.area.px*e.area.w,e.area.py*e.area.h,e.area,e.meta.transformMatrix);if(l)a.area.x=l.x,a.area.y=l.y;else{const t=(0,ce.xS)(0,0,e);a.area.x=t.x,a.area.y=t.y}e.meta.componentRoot&&(a.meta.componentRoot=!0),s.push(a)}}));const a=new Map;return(0,d.zD)(s,(e=>{a.set(e.meta.oldId,e.id),i&&this.indexSingleCloneItem(e.meta.oldId,e.id)})),this.fixItemsReferences(s,a),s}fixItemsReferences(e,t){const i=e=>{if(e&&0===e.indexOf("#")){const i=e.substr(1);if(t.has(i))return"#"+t.get(i)}return e};(0,d.zD)(e,(e=>{"connector"===e.shape&&(e.shapeProps.sourceItem=i(e.shapeProps.sourceItem),e.shapeProps.destinationItem=i(e.shapeProps.destinationItem)),e.behavior.dragPath&&(e.behavior.dragPath=i(e.behavior.dragPath)),"frame_player"===e.shape&&((0,n.jJ)(e.shapeProps.animations,(e=>{"item"===e.kind&&(e.itemId=t.get(e.itemId))})),(0,n.jJ)(e.shapeProps.functions,(e=>{const t=b[e.functionId];t&&(0,n.jJ)(t.args,((t,n)=>{"element"===t.type&&(e.args[n]=i(e.args[n]))}))}))),(0,n.jJ)(e.behavior.events,(e=>{(0,n.jJ)(e.actions,(e=>{if(e.element=i(e.element),g.A.main[e.method])(0,n.jJ)(g.A.main[e.method].args,((t,n)=>{"element"===t.type&&e.args[n]&&(e.args[n]=i(e.args[n]))}));else if(e.method.startsWith("function:")){const t=e.method.substring(9);if(this.scheme.scripts&&Array.isArray(this.scheme.scripts.functions)){const n=this.scheme.scripts.functions.find((e=>e.name===t));n&&Array.isArray(n.args)&&n.args.forEach((t=>{"element"===t.type&&e.args[t.name]&&(e.args[t.name]=i(e.args[t.name]))}))}}}))})),Array.isArray(e.classes)&&e.classes.forEach((e=>{const t=this.findClassById(e.id);t&&Array.isArray(t.args)&&t.args.forEach((t=>{"element"===t.type&&e.args[t.name]&&(e.args[t.name]=i(e.args[t.name]))}))}))}))}pasteItemsInto(e,t){let i=Promise.resolve(!1);if(t.meta.templated&&t.meta.templateRootId&&t.args.templatedId){const n=this.findItemById(t.meta.templateRootId);n&&n.args.templated&&n.args.templateRef&&(i=this.getTemplate(n.args.templateRef).then((i=>!!i.hasHandler("paste")&&(i.onPasteItemInto(n,t.args.templatedId,e,(e=>{this.regenerateTemplatedItemWithExistingScopeData(n,i,e,n.area.w,n.area.h),w.A.schemeChangeCommitted.$emit(this.editorId),w.A.item.templateArgsUpdated.specific.$emit(this.editorId,n.id)})),!0))))}i.then((i=>{i||this._pasteItemsIntoRegularItem(e,t)}))}_pasteItemsIntoRegularItem(e,t){if(!e||0===e.length)return;const i=this.cloneItems(e),n=new Set;let r=e[0].area.x,s=e[0].area.y;for(let t=1;t<e.length;t++){const i={x:e[t].area.x,y:e[t].area.y};r=Math.min(r,i.x),s=Math.min(s,i.y)}const o=Math.min(10,t.area.w)-r,a=Math.min(10,t.area.h)-s;i.forEach((e=>{n.add(e.id),e.locked=!1,this.itemMap[e.id]=e,e.area.x+=o,e.area.y+=a,t.childItems||(t.childItems=[]),t.childItems.push(e),this.itemMap[e.id]=e})),this.fixPastedConnectors(i,n),this.reindexItems(),this.selectMultipleItems(i,!1),w.A.schemeChangeCommitted.$emit(this.editorId)}pasteItems(e,t,i){if(!e||0===e.length)return;const r=this.cloneItems(e),s=new Set;if((0,n.jJ)(r,(e=>{s.add(e.id),e.locked=!1,this.scheme.items.push(e),this.itemMap[e.id]=e})),this.fixPastedConnectors(r,s),this.selectMultipleItems(r,!1),this.editBox){const e=this.editBox.area,n=t-(e.x+e.w/2),r=i-(e.y+e.h/2);e.x+=n,e.y+=r,this.updateEditBoxItems(this.editBox,!1,ye)}this.reindexItems(),w.A.schemeChangeCommitted.$emit(this.editorId)}fixPastedConnectors(e,t){(0,n.jJ)(e,(e=>{if("connector"===e.shape){const i=e=>{if("#"===e[0]){const i=e.substring(1);return t.has(i)}return!0};e.shapeProps.sourceItem&&!i(e.shapeProps.sourceItem)&&(e.shapeProps.sourceItem=null),e.shapeProps.destinationItem&&!i(e.shapeProps.destinationItem)&&(e.shapeProps.destinationItem=null)}}))}copyItem(e){const t={id:c().generate(),meta:{oldId:e.id}};return(0,n.jJ)(e,((e,i)=>{"childItems"===i||"_childItems"===i?t[i]=(0,n.kH)(e,(e=>this.copyItem(e))):"id"!==i&&"meta"!==i&&(t[i]=a.A.clone(e))})),t}updateEditBoxItems(e,t,i,r){me.info("updateEditBoxItems","isSoft:",t,"precision:",r),void 0===r&&(r=4),i||(i=ye);const s=new Map;Array.isArray(e.items)&&e.items.forEach((e=>{s.set(e.id,e)}));const a=new Set,l=t=>o.A.worldPointInArea(t.x*e.area.w,t.y*e.area.h,e.area),c=new Map;e.connectorPoints.forEach((e=>{const t=s.has(e.itemId)?s.get(e.itemId):this.findItemById(e.itemId);if(a.add(t.id),0!==e.pointIdx&&e.pointIdx!==t.shapeProps.points.length-1||c.set(`${t.id}.points.${e.pointIdx}`,{item:t,pointIdx:e.pointIdx}),i.controlPoint)return;const n=l(e.projection),r=(0,ce.Qb)(n.x,n.y,t);t.shapeProps.points[e.pointIdx].x=r.x,t.shapeProps.points[e.pointIdx].y=r.y})),(0,n.jJ)(e.items,(t=>{if("connector"===t.shape)return;a.add(t.id);const r=t.meta&&t.meta.ancestorIds&&(0,n.I6)(t.meta.ancestorIds,(e=>a.has(e))),c=r&&(i.moved||i.rotated)&&!i.resized;if(!t.locked&&!c){const n=e.itemProjections[t.id];r||(t.area.r=n.r+e.area.r);let a=o.A.identityMatrix();const c=s.has(t.meta.parentId)?s.get(t.meta.parentId):this.findItemById(t.meta.parentId);c&&(a=(0,ce.nI)(c));const h=l(n.topLeft),d=o.A.findTranslationMatchingWorldPoint(h.x,h.y,0,0,t.area,a),u={x:t.area.x,y:t.area.y,w:t.area.w,h:t.area.h};if(d&&(u.x=d.x,u.y=d.y),i.resized){const e=l(n.bottomRight),i=o.A.localPointInArea(e.x,e.y,pe(pe({},t.area),u),t.meta&&t.meta.transformMatrix?t.meta.transformMatrix:null);u.w=Math.max(0,i.x),u.h=Math.max(0,i.y)}if(t.meta&&t.meta.templated&&t.meta.templateRootId&&t.meta.templateRootId!==t.id&&t.args&&t.args.templatedId){if(t.args&&("controlled"===t.args.tplArea||"movable"===t.args.tplArea)){const e=this.findItemById(t.meta.templateRootId);if(!e||!e.args||!e.args.templateRef)return;this.getTemplate(e.args.templateRef).then((i=>{i.onAreaUpdate(e,t.args.templatedId,t,u,(t=>{this.regenerateTemplatedItem(e,i,t,e.area.w,e.area.h)})),t.area.x=u.x,t.area.y=u.y,t.area.w=u.w,t.area.h=u.h,w.A.item.templateArgsUpdated.specific.$emit(this.editorId,e.id)}))}}else t.area.x=u.x,t.area.y=u.y,t.area.w=u.w,t.area.h=u.h;i.resized&&"component"===t.shape&&"embedded"===t.shapeProps.kind&&this.readjustComponentContainerRect(t)}})),i.controlPoint||c.forEach((e=>{this.tryReattachingConnector(e.item,this.editBox,e.pointIdx)})),a.forEach((e=>{const n=this.findItemById(e);n&&(this.updateChildTransforms(n),Se(n),this.readjustItemAndDescendants(n.id,t,i,r),w.A.item.changed.specific.$emit(this.editorId,n.id,"area"),this.updatePropertyForClones(n,(e=>{e.area.x=n.area.x,e.area.y=n.area.y,e.area.w=n.area.w,e.area.h=n.area.h,e.area.r=n.area.r,e.area.px=n.area.px,e.area.py=n.area.py}),!0))})),w.A.editBox.updated.$emit(this.editorId)}tryReattachingConnector(e,t,i){if(me.info("trying to reattach connector","pointIdx:",i),!e.shapeProps.autoAttach)return;const n=t.connectorOriginalAttachments.get(e.id);if(!n||e.shapeProps.points.length<2)return;const r=0===i?"source":"destination",s=0===i?n.sourceItem:n.destinationItem,a=0===i?n.sourceProjection:n.destinationProjection,l=((e,i)=>{const n=this.findFirstElementBySelector(e);if(!n)return null;const r=o.A.worldPointInArea(i.x*t.area.w,i.y*t.area.h,t.area),s=this.closestPointToItemOutline(n,r,{precision:4});if(!s)return null;const a=o.A.tooSmall(this.screenTransform.scale)?50:50/this.screenTransform.scale;return o.A.distanceBetweenPoints(r.x,r.y,s.x,s.y)>a?null:s})(s,a);if(l){e.shapeProps[`${r}Item`]=s,e.shapeProps[`${r}ItemPosition`]=l.distanceOnPath;const t=(0,ce.Qb)(l.x,l.y,e);e.shapeProps.points[i].x=t.x,e.shapeProps.points[i].y=t.y}else if(e.shapeProps[`${r}Item`]=null,delete e.shapeProps.points[i].nx,delete e.shapeProps.points[i].ny,a){const n=o.A.worldPointInArea(a.x*t.area.w,a.y*t.area.h,t.area),r=(0,ce.Qb)(n.x,n.y,e);e.shapeProps.points[i].x=r.x,e.shapeProps.points[i].y=r.y}}generateUniqueName(e){const t=(0,n.kH)(this.getItems(),(e=>e.name));return(0,n.mA)(e,t)}copyNameAndMakeUnique(e){for(let t=e.length-1;t>=0;t--){const i=e.charCodeAt(t);if(i<48||i>=57)return this.generateUniqueName(e.substring(0,t+1))}return this.generateUniqueName("")}updateEditBoxConnectorPoints(){this.editBox&&this.editBox.connectorPoints.forEach((e=>{const t=this.findItemById(e.itemId),i=t.shapeProps.points[e.pointIdx],n=(0,ce.xS)(i.x,i.y,t),r=o.A.localPointInArea(n.x,n.y,this.editBox.area);e.x=r.x,e.y=r.y}))}updateEditBox(){me.info("updateEditBox");const e=this.selectedItems.map((e=>this.findItemById(e.id))).filter((e=>e));e.length>0||this.selectedConnectorPoints.length>0?this.editBox=this.generateEditBox(e,this.selectedConnectorPoints):this.editBox=null}updateEditBoxAreaOnly(){if(this.editBox&&this.selectedItems.length>0){const e=this.generateEditBox(this.selectedItems,this.selectedConnectorPoints);this.editBox.area.x=e.area.x,this.editBox.area.y=e.area.y,this.editBox.area.w=e.area.w,this.editBox.area.h=e.area.h,this.editBox.area.r=e.area.r,this.editBox.area.sx=e.area.sx,this.editBox.area.sy=e.area.sy}}generateEditBox(e,t){me.info("generating edit box","items:",e.length,"connectorPointRefs:",t.length);let i=null,r=!0;const s={x:.5,y:.5},l=new Map,h=[].concat(t);if(e.forEach((e=>{l.set(e.id,e),"connector"===e.shape&&Array.isArray(e.shapeProps.points)&&!e.locked&&e.shapeProps.points.forEach(((t,i)=>{h.push({itemId:e.id,pointIdx:i})}))})),1!==e.length||e[0].meta.templated&&e[0].meta.templateRootId!==e[0].id)e.length>0&&(i=function(e){let t=null,i=null;const r=[e=>({x:0,y:0}),e=>({x:e.area.w,y:0}),e=>({x:e.area.w,y:e.area.h}),e=>({x:0,y:e.area.h})];return(0,n.jJ)(e,(e=>{(0,n.jJ)(r,(n=>{const r=n(e),s=(0,ce.xS)(r.x,r.y,e);t?(t.x=Math.min(t.x,s.x),t.y=Math.min(t.y,s.y)):t={x:s.x,y:s.y},i?(i.x=Math.max(i.x,s.x),i.y=Math.max(i.y,s.y)):i={x:s.x,y:s.y}}))})),{x:t.x,y:t.y,w:i.x-t.x,h:i.y-t.y,r:0,px:0,py:0,sx:1,sy:1}}(e));else{const t=(0,ce.xS)(0,0,e[0]),n=(0,ce.xS)(e[0].area.w,0,e[0]),r=(0,ce.xS)(0,e[0].area.h,e[0]);let a=0;a=o.A.tooSmall(e[0].area.w)?180*o.A.fullAngleForVector(r.x-t.x,r.y-t.y)/Math.PI-90:180*o.A.fullAngleForVector(n.x-t.x,n.y-t.y)/Math.PI,i={x:t.x,y:t.y,r:a,w:o.A.distanceBetweenPoints(t.x,t.y,n.x,n.y),h:o.A.distanceBetweenPoints(t.x,t.y,r.x,r.y),px:0,py:0,sx:1,sy:1},s.x=e[0].area.px,s.y=e[0].area.py}const d=[];if(h.forEach((e=>{const t=l.has(e.itemId)?l.get(e.itemId):this.findItemById(e.itemId);if(!t||"connector"!==t.shape)return;if(e.pointIdx<0||e.pointIdx>=t.shapeProps.points.length)return;const n=t.shapeProps.points[e.pointIdx],r=(0,ce.xS)(n.x,n.y,t);i?(i.x>r.x?(i.w+=i.x-r.x,i.x=r.x):i.x+i.w<r.x&&(i.w=r.x-i.x),i.y>r.y?(i.h+=i.y-r.y,i.y=r.y):i.y+i.h<r.y&&(i.h=r.y-i.y)):i=pe(pe({},r),{},{r:0,w:0,h:0,px:.5,py:.5,sx:1,sy:1}),d.push(pe(pe({},r),e))})),!i)throw new Error("Could not calculate edit box area");const u={},p={},f=new Set,m=(e,t)=>{const n=o.A.localPointInArea(e,t,i);return i.w>0&&(n.x=n.x/i.w),i.h>0&&(n.y=n.y/i.h),n},g=new Map;d.forEach((e=>{e.projection=m(e.x,e.y);const t=o.A.localPointInArea(e.x,e.y,i);e.x=t.x,e.y=t.y,(e=>{if(g.has(e.id))return;if(e.shapeProps.points.length<2)return;const t=e.shapeProps.points[0],i=e.shapeProps.points[e.shapeProps.points.length-1],n=(0,ce.xS)(t.x,t.y,e),r=(0,ce.xS)(i.x,i.y,e);g.set(e.id,{sourceItem:e.shapeProps.sourceItem,sourceItemPosition:e.shapeProps.sourceItemPosition,destinationItem:e.shapeProps.destinationItem,destinationItemPosition:e.shapeProps.destinationItemPosition,sourceProjection:m(n.x,n.y),destinationProjection:m(r.x,r.y)})})(l.has(e.itemId)?l.get(e.itemId):this.findItemById(e.itemId)),f.add(e.itemId)})),(0,n.jJ)(e,(e=>{p[e.id]={originalArea:a.A.clone(e.area)},f.add(e.id),e.locked||e.autoLayout&&e.autoLayout.on||(r=!1);const t=(0,ce.xS)(0,0,e),n=(0,ce.xS)(e.area.w,e.area.h,e);o.A.tooSmall(t.x-n.x)&&(n.x+=1),o.A.tooSmall(t.y-n.y)&&(n.y+=1),u[e.id]={topLeft:m(t.x,t.y),bottomRight:m(n.x,n.y),r:e.area.r-i.r},"path"===e.shape&&(p[e.id].originalCurvePaths=a.A.clone(e.shapeProps.paths))})),d.length>0&&(r=!1);let y=null,v=null,x=!0,b=!0;if(1===e.length){const t=e[0];if(t.args&&t.args.templated){if(t.args.templateRef)v=t,y=t.args.templateRef;else{const e=this.findAncestor(t,(e=>e.args&&e.args.templateRef));e&&(y=e.args.templateRef,v=e)}y&&"off"===t.args.tplRotation&&(x=!1),y&&"off"===t.args.tplConnector&&(b=!1)}}let w=[];if(1===e.length&&e[0].meta.parentId){const t=this.findItemById(e[0].meta.parentId);t&&(w=function(e,t){if(!e.autoLayout||!e.autoLayout.on||!e.autoLayout.rules)return[];const i=[],n=(0,ce.xS)(e.area.w/2,0,e),r=(0,ce.xS)(e.area.x+e.area.w/2,0,t),s=(0,ce.xS)(e.area.w,e.area.h/2,e),a=(0,ce.xS)(t.area.w,e.area.y+e.area.h/2,t),l=(0,ce.xS)(e.area.w/2,e.area.h,e),c=(0,ce.xS)(e.area.x+e.area.w/2,t.area.h,t),h=(0,ce.xS)(0,e.area.h/2,e),d=(0,ce.xS)(0,e.area.y+e.area.h/2,t),u=e.autoLayout.rules;return u.hcenter?(i.push({t:"line",p1:h,p2:d}),i.push({t:"line",p1:s,p2:a}),i.push({t:"label",text:"center",x:(h.x+d.x)/2,y:(h.y+d.y)/2,limit:o.A.distanceBetweenPoints(h.x,h.y,d.x,d.y)}),i.push({t:"label",text:"center",x:(s.x+a.x)/2,y:(s.y+a.y)/2,limit:o.A.distanceBetweenPoints(s.x,s.y,a.x,a.y)})):((u.hasOwnProperty("left")||u.hasOwnProperty("relLeft"))&&(i.push({t:"line",p1:h,p2:d}),u.hasOwnProperty("relLeft")?i.push({t:"label",text:o.A.roundPrecise1(u.relLeft)+" %",x:(h.x+d.x)/2,y:(h.y+d.y)/2,limit:o.A.distanceBetweenPoints(h.x,h.y,d.x,d.y)}):i.push({t:"label",text:""+o.A.roundPrecise1(u.left),x:(h.x+d.x)/2,y:(h.y+d.y)/2,limit:o.A.distanceBetweenPoints(h.x,h.y,d.x,d.y)})),(u.hasOwnProperty("right")||u.hasOwnProperty("relRight"))&&(i.push({t:"line",p1:s,p2:a}),u.hasOwnProperty("relRight")?i.push({t:"label",text:o.A.roundPrecise1(u.relRight)+" %",x:(s.x+a.x)/2,y:(s.y+a.y)/2,limit:o.A.distanceBetweenPoints(s.x,s.y,a.x,a.y)}):i.push({t:"label",text:""+o.A.roundPrecise1(u.right),x:(s.x+a.x)/2,y:(s.y+a.y)/2,limit:o.A.distanceBetweenPoints(s.x,s.y,a.x,a.y)}))),u.vcenter?(i.push({t:"line",p1:n,p2:r}),i.push({t:"line",p1:l,p2:c}),i.push({t:"label",text:"center",x:(n.x+r.x)/2,y:(n.y+r.y)/2,limit:o.A.distanceBetweenPoints(n.x,n.y,r.x,r.y)}),i.push({t:"label",text:"center",x:(l.x+c.x)/2,y:(l.y+c.y)/2,limit:o.A.distanceBetweenPoints(l.x,l.y,c.x,c.y)})):((u.hasOwnProperty("top")||u.hasOwnProperty("relTop"))&&(i.push({t:"line",p1:n,p2:r}),u.hasOwnProperty("relTop")?i.push({t:"label",text:o.A.roundPrecise1(u.relTop)+" %",x:(n.x+r.x)/2,y:(n.y+r.y)/2,limit:o.A.distanceBetweenPoints(n.x,n.y,r.x,r.y)}):i.push({t:"label",text:""+o.A.roundPrecise1(u.top),x:(n.x+r.x)/2,y:(n.y+r.y)/2,limit:o.A.distanceBetweenPoints(n.x,n.y,r.x,r.y)})),(u.hasOwnProperty("bottom")||u.hasOwnProperty("relBottom"))&&(i.push({t:"line",p1:l,p2:c}),u.hasOwnProperty("relBottom")?i.push({t:"label",text:o.A.roundPrecise1(u.relBottom)+" %",x:(l.x+c.x)/2,y:(l.y+c.y)/2,limit:o.A.distanceBetweenPoints(l.x,l.y,c.x,c.y)}):i.push({t:"label",text:""+o.A.roundPrecise1(u.bottom),x:(l.x+c.x)/2,y:(l.y+c.y)/2,limit:o.A.distanceBetweenPoints(l.x,l.y,c.x,c.y)}))),i}(e[0],t))}return{id:c().generate(),locked:r,items:e,itemIds:f,itemData:p,area:i,itemProjections:u,pivotPoint:s,rotationEnabled:x,connectorStarterEnabled:b,connectorPoints:d,connectorOriginalAttachments:g,cache:new Map,templateRef:y,templateItemRoot:v,ruleGuides:w,worldPivotPoint:o.A.worldPointInArea(s.x*i.w,s.y*i.h,i)}}findAncestor(e,t){if(!e.meta.parentId)return null;const i=this.findItemById(e.meta.parentId);return i?t(i)?i:this.findAncestor(i,t):null}generateItemSnappers(e){const t=h.A.find(e.shape);return t?t.getSnappers(e):null}findItemSuitableForParent(e,t){const i=this.calculateItemWorldArea(e),n=this.getItems();for(let r=n.length-1;r>=0;r--){const s=n[r];if(s.id!==e.id&&s.mount&&s.visible&&"connector"!==s.shape&&(!t||t(s))){const e=this.worldItemAreas.get(s.id);if(e&&i.w+i.h<e.w+e.h){const t=o.A.overlappingArea(e,i),n=i.w*i.h;if(t&&!o.A.tooSmall(n)&&t.w*t.h/n>=.5)return s}}}return null}prepareFrameAnimations(){this.prepareFrameAnimationsForItems()}prepareFrameAnimationsForItems(){this.frameAnimations={},(0,n.jJ)(this.framePlayers,(e=>{const t=_(e,this);this.frameAnimations[e.id]=new D(e.shapeProps.fps,e.shapeProps.totalFrames,t)}))}getFrameAnimation(e){return this.frameAnimations[e]}alignItemsHorizontally(e){if(e.length<2)return;let t=0;const i=[];(0,n.jJ)(e,(e=>{const n=this.getBoundingBoxOfItems([e]);i.push({bbox:n,item:e}),t+=n.y+n.h/2}));const r=t/i.length;i.sort(((e,t)=>e.bbox.x-t.bbox.x));let s=0,a=0;for(let e=0;e<i.length-1;e++){const t=i[e+1].bbox.x-(i[e].bbox.x+i[e].bbox.w);t>0&&(s+=t,a++)}const l=s/Math.max(1,a);let c=i[0].bbox.x;for(let e=0;e<i.length;e++){const t=i[e].item;let n=0;e>0&&(n=c+l-i[e].bbox.x);const s=r-i[e].bbox.y-i[e].bbox.h/2;let a=o.A.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(a=(0,ce.nI)(e))}const h=o.A.transformVector(a,n,s);c=n+i[e].bbox.x+i[e].bbox.w,t.area.x+=h.x,t.area.y+=h.y,w.A.item.changed.specific.$emit(this.editorId,t.id,"area")}this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}alignItemsVertically(e){if(e.length<2)return;let t=0;const i=[];(0,n.jJ)(e,(e=>{const n=this.getBoundingBoxOfItems([e]);i.push({bbox:n,item:e}),t+=n.x+n.w/2}));const r=t/i.length;i.sort(((e,t)=>e.bbox.y-t.bbox.y));let s=0,a=0;for(let e=0;e<i.length-1;e++){const t=i[e+1].bbox.y-(i[e].bbox.y+i[e].bbox.h);t>0&&(s+=t,a++)}const l=s/Math.max(1,a);let c=i[0].bbox.y;for(let e=0;e<i.length;e++){const t=i[e].item;let n=0;e>0&&(n=c+l-i[e].bbox.y);const s=r-i[e].bbox.x-i[e].bbox.w/2;let a=o.A.identityMatrix();if(t.meta.parentId){const e=this.findItemById(t.meta.parentId);e&&(a=(0,ce.nI)(e))}const h=o.A.transformVector(a,s,n);c=n+i[e].bbox.y+i[e].bbox.h,t.area.x+=h.x,t.area.y+=h.y,w.A.item.changed.specific.$emit(this.editorId,t.id,"area")}this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}alignItemsHorizontallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x}))}alignItemsVerticallyInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.y+=t.y}))}alignItemsCenteredInParent(e){this._alignItemsWith(e,((e,t)=>{e.area.x+=t.x,e.area.y+=t.y}))}generateItemFromTemplate(e,t,i,n){const r=se(e,t,i,n),[s]=this.cloneItems([r],!0,!1);return s.args.templateRef=e.templateRef,s.args.templateArgs=t,s}regenerateTemplatedItem(e,t,i,n,r){me.info("regenerateTemplatedItem",e.id,e.name,t.templateRef,i);const s=e.meta.parentId?this.findItemById(e.meta.parentId):null,o=oe(e,t,i,n,r);this.fixItemsReferences([e],o),this.updateChildTransforms(e),this._reindexRegeneratedTemplatedItem(e,s),this.readjustItem(e.id),(0,d.zD)([e],(e=>{w.A.item.changed.specific.$emit(this.editorId,e.id)}))}regenerateTemplatedItemWithExistingScopeData(e,t,i,n,r){me.info("regenerateTemplatedItemWithExistingScopeData",e.id,e.name,t.templateRef,i);const s=e.meta.parentId?this.findItemById(e.meta.parentId):null,o=function(e,t,i,n,r){return oe(e,t,i,n,r,!0)}(e,t,i,n,r);this.fixItemsReferences([e],o),this.updateChildTransforms(e),this._reindexRegeneratedTemplatedItem(e,s),this.readjustItem(e.id),(0,d.zD)([e],(e=>{w.A.item.changed.specific.$emit(this.editorId,e.id)}))}_reindexRegeneratedTemplatedItem(e,t){this.itemMap[e.id]=e,e.meta.ancestorIds=t?t.meta.ancestorIds.concat([t.id]):[],e.meta.parentId=t?t.id:null,(0,d.zD)([e],((t,i)=>{t.id!==e.id&&(this.itemMap[t.id]=t,t.meta.ancestorIds=i?i.meta.ancestorIds.concat([i.id]):[],t.meta.parentId=i?i.id:null)}))}_alignItemsWith(e,t){this._breakItemsByParents(e).forEach(((e,i)=>{const r=this._findCenteringCorrection(e,i);(0,n.jJ)(e,(e=>{t(e,r),w.A.item.changed.specific.$emit(this.editorId,e.id,"area")}))})),this.listener&&this.listener.onSchemeChangeCommitted(this.editorId),this.updateEditBox()}_findCenteringCorrection(e,t){if(0===e.length)return{x:0,y:0};const i=this.findItemById(t);if(!i)return;let r=e[0].area.x,s=e[0].area.x,o=e[0].area.y,a=e[0].area.y;(0,n.jJ)(e,(e=>{r=Math.min(r,e.area.x),s=Math.max(s,e.area.x+e.area.w),o=Math.min(o,e.area.y),a=Math.max(a,e.area.y+e.area.h)}));const l=r,c=i.area.w-s,h=o;return{x:(c-l)/2,y:(i.area.h-a-h)/2}}_breakItemsByParents(e){const t=new Map;return(0,n.jJ)(e,(e=>{const i=e.meta.parentId;i&&(t.has(i)||t.set(i,[]),t.get(i).push(e))})),t}}},3550:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(269),r=i(8728),s=i(869);const o={setItemControlPoints(e,t){if(t.meta.templated&&t.meta.templateRootId)return void this.clearItemControlPoints(e);const i=r.A.find(t.shape);if(i&&i.controlPoints){const r=i.controlPoints.make(t),o=(0,s.XL)(t);(0,n.jJ)(r,(e=>{e.x=e.x*o.x,e.y=e.y*o.y})),e.dispatch("setItemControlPoints",r)}else this.clearItemControlPoints(e)},clearItemControlPoints(e){e.dispatch("clearItemControlPoints")},setMultiSelectBox(e,t){e.dispatch("setMultiSelectBox",t)},setSelectedConnector(e,t){const i=t?r.A.find(t.shape).computeOutline(t):null;e.dispatch("setSelectedConnectorWithPath",{item:t,path:i})},setItemSnapper(e,t){e.dispatch("setItemSnapper",t)},clearItemSnappers(e){e.dispatch("clearItemSnappers")},toggleAutoRemount(e){e.dispatch("toggleAutoRemount")},togglePivot(e){e.dispatch("togglePivot")},toggleItemDetailMarkers(e){e.dispatch("toggleItemDetailMarkers")},proposeConnectorDestinationItems(e,t,i,n){e.dispatch("proposeConnectorDestinationItems",{connectorItemId:t,mx:i,my:n})},disableProposeConnectorDestinationItems(e){e.dispatch("disableProposeConnectorDestinationItems")},addInfoSystemMessage(e,t,i,n=null){e.dispatch("addSystemMessage",{status:"info",message:t,id:i,iconClass:n})},addErrorSystemMessage(e,t,i,n=null){e.dispatch("addSystemMessage",{status:"error",message:t,id:i,iconClass:n})},removeSystemMessage(e,t){e.dispatch("removeSystemMessage",t)},setDefaultConnectorSmoothing(e,t){e.dispatch("setDefaultConnectorSmoothing",t)},copyItemStyle(e,t){e.dispatch("copyItemStyle",t)},setCurrentConnector(e,t){e.dispatch("setCurrentConnector",t)},addArtPack(e,t,i){e.dispatch("addArtPack",{artPack:i,artPackId:t})},removeArtPack(e,t){e.dispatch("removeArtPack",t)},registerShapeGroupId(e,t){e.dispatch("registerShapeGroupId",t)}}},6583:(e,t,i)=>{"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,{YK:()=>D});const o={START_BRACKET:1,END_BRACKET:2,TERM:3,STRING:4,STRING_TEMPLATE:5,NUMBER:6,OPERATOR:7,WHITESPACE:8,NEWLINE:9,DELIMITER:10,COMMA:11,NOT:12,COMMENT:13,START_CURLY:14,END_CURLY:15,RESERVED:16,TOKEN_GROUP:17,COLON:18,FIELD_ACCESSOR:19,AT_SYMBOL:20},a={IF:"if",ELSE:"else",WHILE:"while",TRUE:"true",FALSE:"false",FOR:"for",NULL:"null",STRUCT:"struct",FUNC:"func",LOCAL:"local"},l=new Set(Object.values(a));function c(e){return l.has(e)}function h(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e}function d(e){return"0"<=e&&e<="9"}function u(e){return" "===e||"\t"===e}const p=new Map(Object.entries({",":{t:o.COMMA},"(":{t:o.START_BRACKET},")":{t:o.END_BRACKET},"+":{t:o.OPERATOR,v:"+"},"-":{t:o.OPERATOR,v:"-"},"*":{t:o.OPERATOR,v:"*"},"/":{t:o.OPERATOR,v:"/"},"%":{t:o.OPERATOR,v:"%"},"<":{t:o.OPERATOR,v:"<"},">":{t:o.OPERATOR,v:">"},"=":{t:o.OPERATOR,v:"="},"^":{t:o.OPERATOR,v:"^"},"&":{t:o.OPERATOR,v:"&"},"|":{t:o.OPERATOR,v:"|"},"~":{t:o.OPERATOR,v:"~"},";":{t:o.DELIMITER,v:";"},":":{t:o.COLON,v:":"},"!":{t:o.NOT,v:"!"},"{":{t:o.START_CURLY,v:"{"},"}":{t:o.END_CURLY,v:"}"},".":{t:o.FIELD_ACCESSOR,v:"."},"@":{t:o.AT_SYMBOL,v:"@"}})),f=new Map(Object.entries({"==":{t:o.OPERATOR,v:"=="},"!=":{t:o.OPERATOR,v:"!="},"||":{t:o.OPERATOR,v:"||"},"&&":{t:o.OPERATOR,v:"&&"},"<=":{t:o.OPERATOR,v:"<="},">=":{t:o.OPERATOR,v:">="},"+=":{t:o.OPERATOR,v:"+="},"-=":{t:o.OPERATOR,v:"-="},"*=":{t:o.OPERATOR,v:"*="},"/=":{t:o.OPERATOR,v:"/="},"=>":{t:o.OPERATOR,v:"=>"},"++":{t:o.OPERATOR,v:"++"},"--":{t:o.OPERATOR,v:"--"},">>":{t:o.OPERATOR,v:">>"},"<<":{t:o.OPERATOR,v:"<<"}})),m=new Map(Object.entries({"\\":"\\",t:"\t",n:"\n",'"':'"',"'":"'"}));class g extends Error{constructor(e,t){super(`Failed to parse script:\n${t}\n\n${e}`)}}class y{constructor(e){this.idx=0,this.text=e,this.currentLine=0}processedText(){return this.text.substring(0,this.idx+1)}scanToken(){if(this.idx>=this.text.length)return null;const e=this.text[this.idx];if("\n"===e)return this.idx++,this.currentLine++,{t:o.NEWLINE,idx:this.idx-1,line:this.currentLine-1,text:""};if(h(e))return this.scanTerm();if(function(e){return d(e)||"."===e}(e))return this.scanNumber();if(u(e))return this.scanWhitespace();if('"'===e||"'"===e)return this.idx++,this.scanString(e);if("`"===e)return this.idx++,r(r({},this.scanString(e)),{},{t:o.STRING_TEMPLATE});if(this.idx<this.text.length-1){const e=this.text.substring(this.idx,this.idx+2);if("//"===e)return this.idx+=2,this.scanComment("\n");if("/*"===e)return this.idx+=2,this.scanComment("*/");if(f.has(e))return this.idx+=2,r(r({},f.get(e)),{},{text:e,idx:this.idx-2,line:this.currentLine})}if(p.has(e))return this.idx++,r(r({},p.get(e)),{},{text:e,idx:this.idx-1,line:this.currentLine});throw new g("Invalid symbol: "+e,this.processedText())}scanComment(e){let t="";const i=this.idx;for(;this.idx<=this.text.length;){if(this.text.substring(this.idx,this.idx+e.length)===e){this.idx+=e.length,"\n"===e&&(this.idx-=1);break}t+=this.text[this.idx],this.idx++}return{t:o.COMMENT,text:t,idx:i,line:this.currentLine}}scanTerm(){let e="",t=this.idx;for(let t=this.idx;t<this.text.length;t++){const i=this.text[t];if(!h(i)&&!d(i))break;e+=i,this.idx=t+1}return c(e)?{t:o.RESERVED,v:e,text:e,idx:t,line:this.currentLine}:{t:o.TERM,v:e,text:e,idx:t,line:this.currentLine}}scanNumber(){let e="",t=!1;const i=this.idx;if("."===this.text[this.idx]&&this.idx<this.text.length-1&&!d(this.text[this.idx+1]))return this.idx++,{t:o.FIELD_ACCESSOR,v:".",text:"."};for(let i=this.idx;i<this.text.length;i++){const n=this.text[i];if(d(n))e+=n,this.idx=i+1;else{if("."!==n)break;if(t)break;t=!0,e+=n,this.idx=i+1}}return{t:o.NUMBER,v:parseFloat(e),text:e,idx:i,line:this.currentLine}}scanWhitespace(){const e=this.idx;for(let e=this.idx;e<this.text.length&&u(this.text[e]);e++)this.idx=e+1;return{t:o.WHITESPACE,text:" ",idx:e,line:this.currentLine}}scanString(e){let t="";const i=this.idx;for(;this.idx<this.text.length;){const n=this.text[this.idx];if(n===e)return this.idx++,{t:o.STRING,v:t,text:t,idx:i,line:this.currentLine};if("\\"===n){if(!(this.idx<this.text.length-1))throw new g("Invalid use of escape symbol in string",this.processedText());{const e=this.text[this.idx+1];if(!m.has(e))throw new g(`Unknown escape symbol: ${e}`,this.processedText());t+=m.get(e),this.idx++}}else t+=n;this.idx++}throw new g("Unterminated string: "+t,this.processedText())}}function v(e){if(e===o.START_BRACKET)return o.END_BRACKET;if(e===o.START_CURLY)return o.END_CURLY;throw new Error("Don't know inverse token for "+e)}var x=i(8457),b=i(2659);class w{constructor(e){this.tokens=e,this.idx=0,this.line=0}hasMore(){return this.idx<this.tokens.length}scanToken(){if(this.idx>=this.tokens.length)return null;const e=this.tokens[this.idx];return this.idx++,e.t===o.NEWLINE&&this.line++,e}peekToken(){return this.idx>=this.tokens.length?null:this.tokens[this.idx]}peekAfterNewlineToken(){if(this.idx>=this.tokens.length)return null;for(let e=this.idx;e<this.tokens.length;e++)if(this.tokens[e].t!==o.NEWLINE)return this.tokens[e];return null}scanUntilNewLine(){const e=[];for(;this.hasMore();){const t=this.scanToken();if(!t||t.t===o.NEWLINE)break;e.push(t)}return e}skipToken(){this.idx++}skipNewlines(){for(;;){const e=this.peekToken();if(!e||e.t!==o.NEWLINE)return;this.line++,this.skipToken()}}skipNewlinesAndDelimeters(){for(;;){const e=this.peekToken();if(!e||e.t!==o.NEWLINE&&e.t!==o.DELIMITER)return;e.t===o.NEWLINE&&this.line++,this.skipToken()}}}var O=i(3754);function S(e){const t=[],i=new w(e);for(;i.hasMore();){const e=i.scanToken();if(e.t===o.TOKEN_GROUP)t.push({groupCode:e.groupCode,t:e.t,v:e.v,text:e.text,groupTokens:S(e.groupTokens)});else if(k(e)){const n=i.peekToken();n&&n.t===o.NEWLINE&&i.skipNewlines(),t.push(e)}else if(e.t===o.NEWLINE){const n=i.peekAfterNewlineToken();n&&k(n)?i.skipNewlines():t.push(e)}else t.push(e)}return t}function k(e){return e&&(e.t===o.OPERATOR&&"++"!==e.v&&"--"!==e.v||e.t===o.FIELD_ACCESSOR||e.t===o.RESERVED&&e.v===a.ELSE)}const P=["^","*","/","%","-","+","<<",">>","&","|","<",">","<=",">=","!=","==","&&","||","++","--","-=","+=","="].reverse().reduce(((e,t,i)=>(e.set(t,i),e)),new Map);function C(e){return P.has(e)?P.get(e):0}const A=new Map(Object.entries({"+":b.Ek,"^":b.Tu,"-":b.Di,"*":b.xd,"/":b.U8,"%":b.xg,"<":b.jp,">":b.WO,"<=":b.NM,">=":b.YJ,"==":b.y3,"!=":b.A7,"&&":b.kn,"||":b.c,"&":b.Jx,"|":b.lb,"<<":b.X8,">>":b.yc,"=":b.uZ,"+=":b.MN,"-=":b.Ud,"*=":b.rW,"/=":b.CD}));function I(e){if(A.has(e))return A.get(e);throw new Error("Unknown operator: "+e)}function T(e,t,i){return{a:e,opClass:t,precedence:i,make:i=>new t(e,i)}}function $(e,t){const i=[];let n=[];i.push(n),t.forEach((t=>{if(t.t===o.COMMA){if(!n)throw new Error(`Invalid arguments declaration in function: "${e.print()}"`);n=[],i.push(n)}else n.push(t)}));const r=i[i.length-1];(0===r.length||1===r.length&&r[0].t===o.NEWLINE)&&i.pop();for(let e=0;e<i.length;e++){const t=i[e];if(0===t.length||1===t.length&&t[0].t===o.NEWLINE)throw new Error(`Missing argument #${e} in function invocation`)}return new b.rt(e,i.map(_))}class M extends w{constructor(e,t){super(e),this.originalText=t}parse(){if(!this.tokens||0===this.tokens.length)return new b.Y5(null);const e=[];for(;this.hasMore();){const t=this.parseSingleExpression();t&&e.push(t)}return 1===e.length?e[0]:e.length>1?new b.qp(e):new b.Y5(null)}processedTextToToken(e){return e?this.originalText.substring(0,e.idx)+e.text:this.processedText()}processedText(){if(0===this.tokens.length)return"";const e=this.tokens[Math.min(this.idx,this.tokens.length-1)];return this.originalText.substring(0,e.idx)+e.v}parseSingleExpression(){this.skipNewlinesAndDelimeters();let e=this.parseTerm();if(!e)return null;const t=[],i=e=>null===e||e.t===o.COMMA||e.t===o.DELIMITER||e.t===o.NEWLINE;for(;this.hasMore();){let n=this.peekToken();if(i(n))break;if(this.skipToken(),n.t!==o.OPERATOR)throw new g(`Expected operator but got unexpected token (at ${n.idx}, line ${n.line}): (${n.t}) "${n.text}"`,this.processedTextToToken(n));if("++"===n.v||"--"===n.v){if(!(e instanceof b.pK))throw new g(`Unexpected ${n.v} operator after ${e.type}`,this.processedTextToToken(n));e=new b.uM(e,!1,"++"===n.v?1:-1)}else{const i=C(n.v),r=I(n.v),s=this.parseTerm();if(null===s)throw new g(`Missing right term after the "${n.v}" operator at ${n.idx}, line ${n.line}`,this.processedTextToToken(n));const a=this.peekToken(),l=a&&a.t===o.OPERATOR?a.v:null,c=l?C(l):-100;if(i>=c)for(e=new r(e,s);t.length>0;){const i=t[t.length-1];if(i.precedence<c)break;e=i.make(e),t.pop()}else t.push(T(e,r,i)),e=s}}return(()=>{for(;t.length>0;){const i=t.pop();e=i.make(e)}return e})()}parseExternalObjectReference(){let e=this.scanToken();if(!e)throw new g('Missing the name after "@" symbol',this.processedText());if(e.t===o.TERM)return new b.Xp(new b.Y5(e.v));if(e.t===o.STRING)return new b.Xp(new b.Y5(e.v));if(e.t===o.STRING_TEMPLATE)return new b.Xp(new b.Kk((0,x.Z)(e.v)));if(e.t===o.NUMBER)return new b.Xp(new b.Y5(""+e.v));throw new g('Unsupported token after "@"',this.processedTextToToken(e))}parseTermGroup(e){let t=this.peekToken();if(!t)return e;for(;t;)if(t.t===o.TOKEN_GROUP&&t.groupCode===o.START_BRACKET)e=$(e,t.groupTokens),this.skipToken(),t=this.peekToken();else{if(t.t!==o.FIELD_ACCESSOR)break;{if(this.skipToken(),t=this.peekToken(),!t)throw new g("Missing field name definition after '.'",this.processedTextToToken(t));if(t.t!==o.TERM)throw new g(`Expected field name after '.', but got: ${t.text}`,this.processedTextToToken(t));const i=t;this.skipToken(),t=this.peekToken();let n=null;t&&t.t===o.TOKEN_GROUP&&t.groupCode===o.START_BRACKET?(n=$(new b.pK(i.v),t.groupTokens),this.skipToken(),t=this.peekToken()):n=new b.pK(i.v),e=new b.tv(e,n)}}return e}parseTerm(){this.skipNewlines();const e=this.peekToken();if(null===e)return null;if(this.skipToken(),e.t===o.TOKEN_GROUP){if(e.groupCode===o.START_BRACKET){const t=this.peekToken();if(t&&t.t===o.OPERATOR&&"=>"===t.v)return this.skipToken(),this.skipNewlines(),E(e,this.scanToken(),this.originalText);const i=_(e.groupTokens);return this.parseTermGroup(i)}throw new g(`Unexpected token group "${e.v}"`,this.processedTextToToken(e))}if(e.t===o.NUMBER)return new b.Y5(e.v);if(e.t===o.RESERVED){if(e.v===a.IF)return this.parseIfExpression();if(e.v===a.WHILE)return this.parseWhileExpression();if(e.v===a.FOR)return this.parseForLoop();if(e.v===a.TRUE)return new b.Y5(!0);if(e.v===a.FALSE)return new b.Y5(!1);if(e.v===a.NULL)return new b.Y5(null);if(e.v===a.STRUCT)return this.parseStruct();if(e.v===a.FUNC)return this.parseFunctionDeclaration();if(e.v===a.LOCAL)return this.parseLocalVarDeclaration()}else{if(e.t===o.TERM){const t=this.peekToken();return t&&t.t===o.OPERATOR&&"=>"===t.v?(this.skipToken(),this.skipNewlines(),E({t:o.TOKEN_GROUP,groupCode:o.START_BRACKET,groupTokens:[e]},this.scanToken(),this.originalText)):this.parseTermGroup(new b.pK(e.v))}if(e.t===o.AT_SYMBOL){const e=this.parseExternalObjectReference();return this.parseTermGroup(e)}if(e.t===o.STRING)return this.parseTermGroup(new b.ur(e.v));if(e.t===o.OPERATOR&&"~"===e.v){const e=this.parseTerm();if(!e)throw new g('Expected term token after "~"',this.processedText());return new b.tX(e)}if(e.t===o.OPERATOR&&"-"===e.v){const e=this.parseTerm();if(!e)throw new g('Expected term token after "-"',this.processedText());return new b.ZG(e)}if(e.t===o.OPERATOR&&("++"===e.v||"--"===e.v)){const t=this.scanToken();if(!t)throw new g(`Missing term after ${e.v} operator`,this.processedText());if(t.t!==o.TERM||c(t.v))throw new g(`Unexpected token after ${e.v} operator: ${t.text}`,this.processedTextToToken(t));return new b.uM(new b.pK(t.v),!0,"++"===e.v?1:-1)}if(e.t===o.NOT){const e=this.parseTerm();if(!e)throw new g('Expected term token after "!"',this.processedText());return new b.Su(e)}if(e.t===o.STRING_TEMPLATE)return new b.Kk((0,x.Z)(e.v))}throw new g(`Unexpected token: ${e.t} "${e.text}"`,this.processedTextToToken(e))}parseWhileExpression(){this.skipNewlines();let e=this.scanToken();if(!e)throw new g('Expected "(" symbol after "while"',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new g(`Expected "(" symbol after "while" (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));const t=_(e.groupTokens);if(!t)throw new g(`Missing condition expression for while statement (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));if(this.skipNewlines(),e=this.scanToken(),!e)throw new g('Missing "{" symbol after "while" expression',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new g(`Missing "{" symbol after "while" expression (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));const i=_(e.groupTokens);return new b.R(t,i)}parseLocalVarDeclaration(){const e=this.parseSingleExpression();if(!e)throw new g('Expected variable declaration after "local"',this.processedText());if(e instanceof b.pK)return new b.iR(e.varName,null);if(e instanceof b.uZ&&e.a instanceof b.pK)return new b.iR(e.a.varName,e);throw new g("Invalid local variable declaration",this.processedText())}parseFunctionDeclaration(){this.skipNewlines();const e=this.scanToken();if(!e)throw new g('Missing function name after "func"',this.processedText());if(e.t!==o.TERM)throw new g(`Unexpected token after "func": "${e.text}"`,this.processedTextToToken(e));this.skipNewlines();const t=this.scanToken();if(!t)throw new g(`Missing function args declaration for "${e.v}" function`,this.processedText());if(t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_BRACKET)throw new g(`Expected function args declaration for "${e.v}" function, got: "${t.text}"`,this.processedTextToToken(t));this.skipNewlines();const i=this.scanToken();if(!i)throw new g(`Missing function body declaration for "${e.v}" function`,this.processedText());if(i.t!==o.TOKEN_GROUP||i.groupCode!==o.START_CURLY)throw new g(`Expected function body declaration for "${e.v}" function, got: "${i.text}"`,this.processedTextToToken(i));const n=E(t,i,this.originalText,e.v);return new b.uZ(new b.pK(e.v),n)}parseStruct(){this.skipNewlines();const e=this.scanToken();if(!e)throw new g('Missing struct name after "struct"',this.processedText());if(e.t!==o.TERM)throw new g(`Invalid token after "struct" (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));this.skipNewlines();const t=this.scanToken();if(!t)throw new g('Missing "{" symbol for struct',this.processedText());if(t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_CURLY)throw new g(`Missing "{" symbol for struct (at ${t.idx}, line ${t.line})`,this.processedTextToToken(t));return function(e,t,i){const n=[],r=[],s=new w(t);for(;s.hasMore();){s.skipNewlines();const t=s.scanToken();if(!t)break;if(t.t!==o.TERM)throw new g(`Cannot parse struct "${e}". Expected struct field name definition, got: ${t.t} "${t.text}"`,i.substring(0,t.idx)+t.text);let a=s.peekToken();if(!a){n.push({name:t.v,value:new b.Y5(null)});break}if(a.t===o.COLON){s.skipNewlines();const e=a;if(a=s.scanToken(),!a)throw new g(`Missing value definition for struct field "${t.v}"`,i.substring(0,e.idx)+e.text);const r=s.peekToken();if(a.t===o.TOKEN_GROUP&&a.groupCode===o.START_BRACKET&&r&&r.t===o.OPERATOR&&"=>"===r.v){s.skipToken(),s.skipNewlines();const e=a,l=s.scanToken();if(!l)throw new g(`Expected function definition for struct field "${t.v}"`,i.substring(0,r.idx)+r.text);if(l.t!==o.TOKEN_GROUP||l.groupCode!==o.START_CURLY)throw new g(`Expected function definition for struct field "${t.v}", got: ${l.t} ${l.v}`,i.substring(0,l.idx)+l.text);const c=E(e,l,i);n.push({name:t.v,value:c})}else{const e=_(s.scanUntilNewLine());n.push({name:t.v,value:e})}}else if(a.t===o.TOKEN_GROUP&&a.groupCode===o.START_BRACKET){s.skipToken(),s.skipNewlines();const e=s.scanToken();if(!e)throw new g(`Missing function body for "${t.v}" struct function`,i.substring(0,a.idx)+a.text);if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new g(`Unexpected token for function body of "${t.v}" struct function: ${e.t} ${e.text}`,i.substring(0,e.idx)+e.text);const n=a;if(!n)throw new g("Missing function arguments declaration",i.substring(0,e.idx)+e.text);const l=E(n,e,i);r.push({name:t.v,body:l})}else{if(n.push({name:t.v,value:new b.Y5(null)}),a.t!==o.COMMA)throw new g(`Unxpected token after "${t.v}" struct field definition: ${a.t} "${a.text}"`,i.substring(0,a.idx)+a.text);s.skipToken()}}return new O.C(e,n,r)}(e.v,t.groupTokens,this.originalText)}parseForLoop(){this.skipNewlines();let e=this.scanToken();if(!e)throw new g('Expected "(" symbol after for',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new g(`Expected "(" symbol after for (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));const t=[[]];if(e.groupTokens.forEach((e=>{e.t!==o.DELIMITER?t[t.length-1].push(e):t.push([])})),3!==t.length)throw new g(`Invalid for loop declaration. Expected exactly two ";" (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));if(this.skipNewlines(),e=this.scanToken(),!e)throw new g('Missing "{" symbol after "for" expression',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new g(`Missing "{" symbol after "for" expression (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));const i=_(e.groupTokens),n=_(t[0]),r=_(t[1]),s=_(t[2]);return new b.o1(n,r,s,i)}parseIfExpression(){this.skipNewlines();let e=this.scanToken();if(!e)throw new g('Missing "(" symbol after "if"',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new g(`Missing "(" symbol after "if" (at ${e.idx}, line ${e.line})`,this.processedTextToToken(e));const t=_(e.groupTokens);if(this.skipNewlines(),e=this.scanToken(),!e)throw new g('Missing "{" for if statement',this.processedText());if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new g('Missing "{" for if statement',this.processedTextToToken(e));const i=_(e.groupTokens);e=this.peekToken();let n=null;if(e&&e.t===o.RESERVED&&e.v===a.ELSE){if(this.skipToken(),this.skipNewlines(),e=this.scanToken(),!e)throw new g('Missing expression after "else"',this.processedText());if(e.t===o.RESERVED&&e.v===a.IF)n=this.parseIfExpression();else{if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_CURLY)throw new g('Expected "{" after "else"',this.processedTextToToken(e));n=_(e.groupTokens)}}return new b.R6(t,i,n)}}function E(e,t,i,n="< anonymous >"){if(!e)throw new Error("Cannot parse function declaration. Missing arguments definition");if(!t)throw new g('Cannot parse function declaration. Missing "{"',i.substring(0,e.idx));if(e.t!==o.TOKEN_GROUP||e.groupCode!==o.START_BRACKET)throw new g(`Cannot parse function arguments definition. Expected "(", got: "${e.text}"`,i.substring(0,e.idx));if(t.t!==o.TOKEN_GROUP||t.groupCode!==o.START_CURLY)throw new g(`Cannot parse function definition. Expected "{", got: "${t.text}"`,i.substring(0,t.idx));const r=[];let s=!1;e.groupTokens.forEach((e=>{if(e.t===o.TERM){if(s)throw new g(`Cannot parse function arguments. Expected ",", got: "${e.text}"'`,i.substring(0,e.idx)+e.text);r.push(e.v),s=!0}else{if(!s||e.t!==o.COMMA)throw new g(`Cannot parse function arguments. Unexpected token "${e.text}"'`,i.substring(0,e.idx)+e.text);s=!1}}));const a=_(t.groupTokens,i);return new b.Hb(r,a,n)}function _(e,t){return new M(e,t).parse()}function D(e){return _(S(function(e){const t=new y(e),i=[];i.push({originalToken:null,stackExitCode:null,stackStartCode:null,tokens:[]});let n=t.scanToken();for(;n;){if(n.t===o.START_BRACKET||n.t===o.START_CURLY)i.splice(0,0,{originalToken:n,stackExitCode:v(n.t),stackStartCode:n.t,tokens:[]});else if(n.t===o.END_BRACKET||n.t===o.END_CURLY){if(i[0].stackExitCode!==n.t)throw new g(`Invalid token "${n.text}"`,t.processedText());const e=i.shift();i[0].tokens.push(r(r({},e.originalToken),{},{t:o.TOKEN_GROUP,groupCode:e.originalToken.t,groupTokens:e.tokens}))}else n.t!==o.WHITESPACE&&n.t!==o.COMMENT&&i[0].tokens.push(n);n=t.scanToken()}if(1!==i.length)throw new g("Unclosed expression",t.processedText());return i[0].tokens}(e)),e)}},9049:(e,t,i)=>{"use strict";i.d(t,{m:()=>n});class n extends Error{constructor(e,t,i){super(e),this.message=e,this.scope=t,this.error=i}print(){let e=this.message,t=this.scope;for(;t;)e+="\n\tat "+t.stackName,t=t.parent;console.error(e)}}},9719:(e,t,i)=>{"use strict";i.d(t,{B:()=>n});class n{constructor(...e){this.items=Array.isArray(e)?e:[]}add(e){return this.items.push(e),this}remove(e){if(e<0&&e>=this.items.length)throw new Error(`Cannot remove ${e} item from List: index out of bounds`);return this.items.splice(e,1),this}get(e){if(e<0&&e>=this.items.length)throw new Error(`Cannot get ${e} item from List: index out of bounds`);return this.items[e]}first(){if(0===this.items.length)throw new Error("Cannot gert the first item from the List: no items in the list");return this.items[0]}last(){if(0===this.items.length)throw new Error("Cannot gert the last item from the List: no items in the list");return this.items[this.items.length-1]}set(e,t){if(e<0&&e>=this.items.length)throw new Error(`Cannot set ${e} item in List: index out of bounds`);return this.items[e]=t,this}insert(e,t){if(e<0&&e>=this.items.length)throw new Error(`Cannot insert ${e} item in List: index out of bounds`);return this.items.splice(e,0,t),this}pop(){return this.items.pop()}shift(){return this.items.shift()}forEach(e){this.items.forEach(e)}map(e){const t=this.items.map(e);return new n(...t)}filter(e){const t=this.items.filter(e);return new n(...t)}findIndex(e){return this.items.findIndex(e)}find(e){return this.items.find(e)}extendList(e){(e instanceof n||e instanceof Array)&&e.forEach((e=>{this.items.push(e)}))}sort(e){this.items.sort(e)}get size(){return this.items.length}}},2659:(e,t,i)=>{"use strict";i.d(t,{Ek:()=>I,uZ:()=>te,X8:()=>J,yc:()=>ee,Jx:()=>Z,tX:()=>B,lb:()=>K,kn:()=>Y,c:()=>G,Ud:()=>re,U8:()=>E,CD:()=>oe,y3:()=>W,Xp:()=>z,o1:()=>N,Hb:()=>de,rt:()=>ue,WO:()=>q,YJ:()=>V,R6:()=>F,uM:()=>ie,MN:()=>ne,jp:()=>U,NM:()=>H,iR:()=>j,xg:()=>_,qp:()=>pe,xd:()=>M,rW:()=>se,ZG:()=>D,Nh:()=>S,Su:()=>L,A7:()=>X,tv:()=>ae,Tu:()=>T,ur:()=>P,Kk:()=>Q,Di:()=>$,Y5:()=>k,pK:()=>C,R:()=>R});var n=i(9719);class r{constructor(e,t,i){this.id=e,this.data=t||new Map,this.parent=i,this.x=0,this.y=0,this.w=0,this.h=0,this.tempData=new Map,this.siblingIx=0,this.level=0,this.children=new n.B}findById(e){if(this.id==e)return this;for(let t=0;t<this.children.size;t++){const i=this.children.get(t).findById(e);if(i)return i}return null}map(e){const t=new n.B;return this.children.forEach((i=>{t.add(i.map(e))})),e(this,t)}attachTo(e){this.parent=e,this.siblingIdx=e.children.size,e.children.add(this)}attachChildAtIndex(e,t){e.parent=this,this.children.insert(t,e),this.children.forEach(((e,t)=>{e.siblingIdx=t}))}encodeTree(e,t){let i=this.id;return this.data.forEach(((e,n)=>{i=i+t+n+"="+e})),this.children.forEach((n=>{const r=n.encodeTree(e,t);i+=e+r})),i+e+"N"}reindex(e){this.level=this.parent?this.parent.level+1:0,this.children.size>0&&this.children.forEach((t=>{t.reindex(e)})),e&&e(this)}traverse(e){e(this,this.parent),this.children.forEach((t=>{t.traverse(e)}))}}function s(e,t){const i=e.split(t),n=i.shift(),s=new Map;return i.forEach((e=>{const t=e.split("=");2===t.length&&s.set(t[0],t[1])})),new r(n,s)}i(8457);var o=i(5244),a=i(5824),l=i.n(a);function c(e){if(e instanceof Map)return function(e){const t={};return e.forEach(((e,i)=>{t[i]=c(e)})),t}(e);if(e instanceof n.B||Array.isArray(e))return function(e){const t=[];return e.forEach((e=>{t.push(c(e))})),t}(e);if(e instanceof o.M)return function(e){return{x:e.x,y:e.y}}(e);const t=typeof e;return"string"===t||"number"===t||"boolean"===t||"bigint"===t?e:null==e?null:"object"===t?function(e){const t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=c(e[i]));return t}(e):null}function h(e){return null===e?null:Array.isArray(e)?(t=e,new n.B(...t.map(h))):"object"==typeof e?function(e){const t=new Map;for(let i in e)e.hasOwnProperty(i)&&t.set(i,h(e[i]));return t}(e):e;var t}var d=i(269),u=i(1570);const p={PI:Math.PI,createLineEquation:u.A.createLineEquation,distanceFromPointToLine:u.A.distanceFromPointToLine,linesIntersection:u.A.linesIntersection,sideAgainstLine:u.A.identifyPointSideAgainstLine,solveQuadratic:u.A.solveQuadratic};var f=i(5894);class m{constructor(e,t,i,n){this.r=e,this.g=t,this.b=i,this.a=n}encode(){return(0,f._T)(this)}gradient(e,t){return new m(this.r*(1-t)+e.r*t,this.g*(1-t)+e.g*t,this.b*(1-t)+e.b*t,this.a*(1-t)+e.a*t)}}class g{constructor(e,t,i,n){this.x=e,this.y=t,this.w=i,this.h=n}overlaps(e){return!!u.A.overlappingArea(this,e)}expand(e){const t=Math.min(this.x,e.x),i=Math.min(this.y,e.y),n=Math.max(this.x+this.w,e.x+e.w),r=Math.max(this.y+this.h,e.y+e.h);this.x=t,this.y=i,this.w=n-t,this.h=r-i}}const y={solid:e=>({type:"solid",color:e}),none:()=>({type:"none"}),image:(e,t=!1,i=0,n=0,r=1,s=1)=>({type:"image",image:e,stretch:t,imageBox:{x:i,y:n,w:r,h:s}}),radialGradient:(...e)=>({type:"gradient",gradient:{type:"radial",colors:v(e)}}),linearGradient:(e,...t)=>({type:"gradient",gradient:{type:"linear",direction:e,colors:v(t)}})};function v(e){const t=[];for(let i=0;i<e.length;i+=2)i+1<e.length&&t.push({p:e[i],c:e[i+1]});return t}var x=i(9049),b=i(6935);const w="funcInvoke",O="var-ref";class S{constructor(e){this.type=e}evalNode(e){throw new Error("eval function is undefined for type: "+this.type)}print(){return"()"}}class k extends S{constructor(e){super("value",e),this.value=e}evalNode(e){return this.value}print(){return""+this.value}}class P extends S{constructor(e){super("string"),this.str=e}evalNode(e){return this.str}print(){return`"${this.str}"`}}class C extends S{constructor(e){super(O),this.varName=e}evalNode(e){return he.has(this.varName)?he.get(this.varName):e.get(this.varName)}print(){return this.varName}assignValue(e,t){e.set(this.varName,t)}}class A extends S{constructor(e,t,i,n){super(e),this.sign=t,this.a=i,this.b=n}print(){return`(${this.a.print()} ${this.sign} ${this.b.print()})`}evalNode(e){const t=this.a.evalNode(e),i=this.b.evalNode(e);return t instanceof o.M?t._operator(this.sign,i):i instanceof o.M?i._rightOperator(this.sign,t):this.evaluate(t,i)}evaluate(e,t){throw new Error(`operator ${this.sign} is not implemented`)}}class I extends A{constructor(e,t){super("add","+",e,t)}evaluate(e,t){return e+t}}class T extends A{constructor(e,t){super("pow","^",e,t)}evaluate(e,t){return Math.pow(e,t)}}class $ extends A{constructor(e,t){super("subtract","-",e,t)}evaluate(e,t){return e-t}}class M extends A{constructor(e,t){super("multiply","*",e,t)}evaluate(e,t){return e*t}}class E extends A{constructor(e,t){super("divide","/",e,t)}evaluate(e,t){return e/t}}class _ extends A{constructor(e,t){super("mod","%",e,t)}evaluate(e,t){return e%t}}class D extends S{constructor(e){super("negate"),this.node=e}evalNode(e){const t=this.node.evalNode(e);return t instanceof o.M?t.inverse():-t}print(){return`(-${this.node.print()})`}}class L extends S{constructor(e){super("not"),this.node=e}evalNode(e){return!this.node.evalNode(e)}print(){return`(!${this.node.print()})`}}class B extends S{constructor(e){super("bitwiseNot"),this.node=e}evalNode(e){return~this.node.evalNode(e)}print(){return`(~${this.node.print()})`}}class R extends S{constructor(e,t){super("while"),this.whileExpression=e,this.whileBlock=t}evalNode(e){let t=null;for(;this.whileExpression.evalNode(e.newScope("while expression"));)t=this.whileBlock.evalNode(e.newScope("while block"));return t}print(){const e=this.whileBlock?this.whileBlock.print():"";return`while (${this.whileExpression.print()}) {${e}}`}}class N extends S{constructor(e,t,i,n){super("for"),this.init=e,this.condition=t,this.postLoop=i,this.loopBody=n}evalNode(e){for(e=e.newScope("for loop"),this.init.evalNode(e);this.condition.evalNode(e);)this.loopBody.evalNode(e),this.postLoop.evalNode(e)}print(){const e=this.loopBlock?this.loopBody.print():"";return`while (${this.init.print()}; ${this.condition.print()}; ${this.postLoop.print()}) {${e}}`}}class F extends S{constructor(e,t,i){super("if"),this.conditionExpression=e,this.trueBlock=t,this.falseBlock=i}evalNode(e){return this.conditionExpression.evalNode(e.newScope("if statement"))?this.trueBlock?this.trueBlock.evalNode(e.newScope("if block")):null:this.falseBlock?this.falseBlock.evalNode(e.newScope("else block")):null}print(){const e=this.trueBlock?this.trueBlock.print():"",t=this.falseBlock?this.falseBlock.print():"";return`if (${this.conditionExpression.print()}) {${e}} else {${t}}`}}class j extends S{constructor(e,t){super("local"),this.varName=e,this.expression=t}evalNode(e){e.setLocal(this.varName,null),this.expression&&this.expression.evalNode(e)}}class z extends S{constructor(e){super("@"),this.nameProvider=e}evalNode(e){if(!this.nameProvider)return null;const t=this.nameProvider.evalNode(e);return e.getExternalObject(t)}}class Q extends S{constructor(e){super("string-template"),this.stringExpression=e}evalNode(e){return this.stringExpression.render(e)}}class U extends A{constructor(e,t){super("lessThan","<",e,t)}evalNode(e){return this.a.evalNode(e)<this.b.evalNode(e)}}class q extends A{constructor(e,t){super("greaterThan",">",e,t)}evalNode(e){return this.a.evalNode(e)>this.b.evalNode(e)}}class H extends A{constructor(e,t){super("lessThanOrEquals","<=",e,t)}evalNode(e){return this.a.evalNode(e)<=this.b.evalNode(e)}}class V extends A{constructor(e,t){super("greaterThanOrEquals",">=",e,t)}evalNode(e){return this.a.evalNode(e)>=this.b.evalNode(e)}}class W extends A{constructor(e,t){super("equals","==",e,t)}evalNode(e){return this.a.evalNode(e)==this.b.evalNode(e)}}class X extends A{constructor(e,t){super("notEqual","!=",e,t)}evalNode(e){return this.a.evalNode(e)!=this.b.evalNode(e)}}class G extends A{constructor(e,t){super("boolOr","||",e,t)}evalNode(e){return this.a.evalNode(e)||this.b.evalNode(e)}}class Y extends A{constructor(e,t){super("boolAnd","&&",e,t)}evalNode(e){return this.a.evalNode(e)&&this.b.evalNode(e)}}class Z extends A{constructor(e,t){super("bitwiseAnd","&",e,t)}evalNode(e){return this.a.evalNode(e)&this.b.evalNode(e)}}class K extends A{constructor(e,t){super("bitwiseOr","|",e,t)}evalNode(e){return this.a.evalNode(e)|this.b.evalNode(e)}}class J extends A{constructor(e,t){super("bitShiftLeft","<<",e,t)}evalNode(e){return this.a.evalNode(e)<<this.b.evalNode(e)}}class ee extends A{constructor(e,t){super("bitShiftRight",">>",e,t)}evalNode(e){return this.a.evalNode(e)>>this.b.evalNode(e)}}class te extends A{constructor(e,t){super("assign","=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.b.evalNode(e);this.a.assignValue(e,t)}}class ie extends S{constructor(e,t,i=1){if(super("increment"),!(e&&e instanceof C))throw new Error("Invalid use of "+this.operatorToString());this.term=e,this.isPre=t,this.step=i}operatorToString(){return this.step>0?"++":"--"}print(){const e=this.operatorToString();return this.isPre?e+this.term.print():this.term.print()+e}evalNode(e){const t=this.term.evalNode(e),i=t+this.step;return e.set(this.term.varName,i),this.isPre?i:t}}class ne extends A{constructor(e,t){super("incrementWith","+=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.M?t._operator("+",i):t+i,this.a.assignValue(e,n)}}class re extends A{constructor(e,t){super("decrementWith","-=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.M?t._operator("-",i):t-i,this.a.assignValue(e,n)}}class se extends A{constructor(e,t){super("multiplyWith","*=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.M?t._operator("*",i):i instanceof o.M?i._rightOperator("*",t):t*i,this.a.assignValue(e,n)}}class oe extends A{constructor(e,t){super("divideWith","/=",e,t)}evalNode(e){if(!this.a.assignValue)throw new Error("Cannot use assign operator on non-var");const t=this.a.evalNode(e),i=this.b.evalNode(e);let n;n=t instanceof o.M?t._operator("/",i):i instanceof o.M?i._rightOperator("/",t):t/i,this.a.assignValue(e,n)}}class ae extends A{constructor(e,t){super("field",".",e,t)}evalNode(e){const t=this.a.evalNode(e);if(this.b.type===O){const e=this.b.varName;if(null==t)throw new Error(`Cannot get ${e} from ${t}`);return t[e]}if(this.b.type===w)return this.b.evalOnObject(e,t);throw new Error("Invalid use for dot operator. Expected field reference but got: "+this.b.type)}assignValue(e,t){const i=this.a.evalNode(e);if(null==i)throw new Error(`Cannot assign "${n}" on ${i}`);if(this.b.type!==O)throw new Error(`Cannot assign value on object, invalid field reference (${this.b.type})`);const n=this.b.varName;i[n]=t}}function le(e,t){return isNaN(e)?t:e}const ce={hashCode(e){let t=3735928559,i=1103547991;for(let n,r=0;r<e.length;r++)n=e.charCodeAt(r),t=Math.imul(t^n,2654435761),i=Math.imul(i^n,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(i^i>>>13,3266489909),i=Math.imul(i^i>>>16,2246822507),i^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&i)+(t>>>0)},split:(e,t)=>new n.B(...e.split(t)),matchesRegex:(e,t)=>new RegExp(t).test(e)},he=new Map(Object.entries({min:Math.min,max:Math.max,Vector:(e,t)=>new o.M(e,t),List:(...e)=>new n.B(...e),TreeNode:(...e)=>new r(...e),decodeTree:function(e,t,i){const n=e.split(t),r=s(n.shift(),i);let o=r;for(;n.length>0;){const e=n.shift();if("N"===e){let e=o.parent;e||(e=r),o=e}else{const t=s(e,i);t.attachTo(o),o=t}}return r},Area:(e,t,i,n)=>new g(e,t,i,n),Map:(...e)=>function(...e){const t=new Map;for(let i=1;i<e.length;i+=2)t.set(e[i-1],e[i]);return t}(...e),Set:(...e)=>new Set(e),pow:Math.pow,sqrt:Math.sqrt,cos:Math.cos,sin:Math.sin,acos:Math.acos,asin:Math.asin,abs:Math.abs,uid:()=>l().generate(),round:Math.round,ceil:Math.ceil,floor:Math.floor,rnd:Math.random,logn:Math.log,log10:Math.log10,log2:Math.log2,tan:Math.tan,atan:Math.atan,isNumber:e=>Number.isFinite(parseFloat(e))||Number.isFinite(parseInt(e)),parseInt:function(e){return le(parseInt(e),0)},parseFloat:function(e){return le(parseFloat(e),0)},rndInt:(e,t)=>Math.round(Math.random()*(t-e))+e,rgba:(e,t,i,n)=>`rgba(${e},${t},${i},${n})`,PI:()=>Math.PI,ifcond:(e,t,i)=>e?t:i,matchesRegex:ce.matchesRegex,splitString:ce.split,Strings:ce,toJSON:e=>c(e),fromJSON:e=>h(e),forEach:d.jJ,setObjectField:function(e,t,i){"object"==typeof e&&(e[t]=i)},Math:p,Color:(e,t,i,n)=>new m(e,t,i,n),decodeColor:e=>{const t=(0,f.H0)(e);return new m(t.r,t.g,t.b,t.a)},numberToLocaleString:(e,t)=>parseFloat(e).toLocaleString(t,{}),stripHTML:e=>(0,b.V)(e),Fill:y}));class de extends S{constructor(e,t,i){super("function"),this.argNames=e,this.body=t,this.funcName=i}print(){return`(${this.argNames.join(",")}) => {(${this.body.print()})}`}evalNode(e){return(...t)=>{const i=e.newScope("func "+this.funcName);for(let e=0;e<t.length&&e<this.argNames.length;e++)i.setLocal(this.argNames[e],t[e]);try{return this.body.evalNode(i)}catch(e){throw e instanceof x.m?e:new x.m(e.message,i,e)}}}}class ue extends S{constructor(e,t){super(w),this.functionProvider=e,this.args=t}print(){const e=this.args.map((e=>e.print())).join(", ");return`${this.functionProvider.print()}(${e})`}evalNode(e){const t=this.args.map((t=>t.evalNode(e))),i=this.functionProvider.evalNode(e);if(!i||"function"!=typeof i)throw this.functionProvider instanceof C?new Error("Cannot resolve function: ",this.functionProvider.varName):new Error("Cannot resolve function");return i(...t)}evalOnObject(e,t){if(this.functionProvider.type!==O)throw new Error("Invalid function invocation on object: "+t);const i=this.functionProvider.varName,n=this.args.map((t=>t.evalNode(e)));if(null==t)throw new Error(`Cannot invoke "${i}" function on non-object`);if("function"!=typeof t[i])throw new Error(`Function "${i}" is not defined on object `+t);if("function"!=typeof t[i])throw new Error(`"${i}" is not a function`);return t[i](...n)}}class pe extends S{constructor(e){super("multi-expr"),this.nodes=e}print(){return`(${this.nodes.map((e=>e?e.print():""+e)).join("; ")})`}evalNode(e){let t=null;return this.nodes.forEach((i=>{t=i.evalNode(e)})),t}}},5107:(e,t,i)=>{"use strict";i.d(t,{H:()=>n});class n{constructor(e,t,i,n="< unknown >"){this.data=e||{},this.stackName=n,this.parent=t,this.externalObjectProvider=i}hasVar(e){return this.data.hasOwnProperty(e)}getExternalObject(e){return this.externalObjectProvider?this.externalObjectProvider(e):null}get(e){if(this.data.hasOwnProperty(e))return this.data[e];if(this.parent)return this.parent.get(e);throw new Error(`"${e}" was not defined`)}findScopeWithVar(e){return this.data.hasOwnProperty(e)?this:this.parent?this.parent.findScopeWithVar(e):null}set(e,t){let i=this.findScopeWithVar(e);i||(i=this),i.data[e]=t}setLocal(e,t){this.data[e]=t}newScope(e="< unknown >",t={}){return new n(t,this,this.externalObjectProvider,e)}getData(){return this.data}}},8457:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(6583);class r{constructor(e,t){this.text=e,this.isExpression=t,this.expression=null}process(e){this.text=this.text+e}compile(){this.isExpression&&(this.expression=(0,n.YK)(this.text))}render(e){return this.isExpression?this.expression.evalNode(e):this.text}}class s{constructor(e){this.parts=e}compile(){this.parts.forEach((e=>e.compile()))}render(e){let t="";return this.parts.forEach((i=>{t+=i.render(e)})),t}}class o{constructor(e){this.text=e,this.idx=0}parse(){let e=new r("",!1);const t=[e];for(;;){const i=this.scan();if(!i)break;"$"===i&&"{"===this.peekNext()?(this.skip(),e=new r("",!0),t.push(e)):"}"===i&&e.isExpression?(e=new r("",!1),t.push(e)):e.process(i)}const i=new s(t);return i.compile(),i}scan(){if(this.idx>=this.text.length)return null;const e=this.text[this.idx];return this.idx++,e}peekNext(){return this.idx>=this.text.length?null:this.text[this.idx]}skip(){this.idx++}}function a(e){return new o(e).parse()}},3754:(e,t,i)=>{"use strict";i.d(t,{C:()=>r});var n=i(2659);class r extends n.Nh{constructor(e,t,i){super("struct"),this.name=e,this.fieldDefinitions=t,this.functionDefinitions=i}evalNode(e){e.set(this.name,((...t)=>{const i={},n=e.newScope("struct "+this.name,{this:i});return this.fieldDefinitions.forEach(((e,r)=>{r<t.length?i[e.name]=t[r]:i[e.name]=e.value.evalNode(n)})),this.functionDefinitions.forEach((e=>{i[e.name]=e.body.evalNode(n)})),i}))}}},9135:(e,t,i)=>{"use strict";i.d(t,{On:()=>k,Rc:()=>C,UR:()=>A,t5:()=>P});var n=i(6583),r=i(9049),s=i(9719),o=i(5107),a=i(8457);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const d="$-def:",u="$-ref",p="$-expr",f="$-str",m="$-rawstr",g="$-if",y="$-else-if",v="$-else",x="$-for",b="$-foreach",w="$-extend",O="$-recurse",S="$-eval";function k(e){const t=I(e,new Map);return e=>t(new o.H(e))}function P(e,t={}){const i=(0,n.YK)(e);return e=>{const n=new o.H(c(c({},t),e||{}));return i.evalNode(n),n.getData()}}function C(e,t={}){const i=(0,n.YK)(e);return e=>{const n=new o.H(c(c({},t),e||{}));return i.evalNode(n)}}function A(e,t){const i=(0,n.YK)(e);return e=>{const n=new o.H(c(c({},t),e||{}));return i.evalNode(n)}}function I(e,t){if(null===e)return()=>null;if(Array.isArray(e))return M(e,t);if("object"==typeof e){if(e.hasOwnProperty(p))return $(e[p]);if(e.hasOwnProperty(f))return function(e){let t=e;Array.isArray(e)&&(t=e.join("\n"));const i=(0,a.Z)(t);return e=>i.render(e)}(e[f]);if(e.hasOwnProperty(m))return function(e){return Array.isArray(e)?t=>e.join("\n"):t=>e}(e[m]);if(e.hasOwnProperty(O))return D(e,e[O],t).build;if(e.hasOwnProperty(u)){const i=e[u];if(!t.has(i))throw new Error("Unknown reference: "+i);return I(t.get(i),t)}const i=T(e,t);let n=null,r=null;return e.hasOwnProperty(S)&&(r=Array.isArray(e[S])?e[S].join("\n"):e[S],r&&(n=$(r))),e=>{if(n)try{n(e)}catch(e){console.error("Failed to evaluate script:\n"+r),console.error(e)}return i(e)}}return t=>e}function T(e,t){const i=[];let n=null;e.hasOwnProperty(w)&&(n=I(e[w],t));for(let n in e)e.hasOwnProperty(n)&&(n.startsWith(d)&&t.set(n.substring(d.length).trim(),e[n]),n.startsWith("$-")||i.push({key:n,build:I(e[n],t)}));return e=>{const t=n?n(e.newScope()):{};return i.forEach((i=>{t[i.key]=i.build(e.newScope())})),t}}function $(e){const t=(0,n.YK)(e);return i=>{try{return t.evalNode(i)}catch(t){console.error("Failed to evaluate expression:\n"+e),t instanceof r.m?t.print():console.error(t)}}}function M(e,t){const i=[],n=[].concat(e);for(;n.length>0;){const e=n.shift();if(Array.isArray(e)){const n=M(e,t);i.push({build:e=>[n(e.newScope())]})}else if("object"==typeof e){if(e.hasOwnProperty(v))throw new Error(`"${v}" block does not follow "${g}"`);if(e.hasOwnProperty(y))throw new Error(`"${y}" block does not follow "${g}"`);if(e.hasOwnProperty(x))i.push(B(e,e[x],t));else if(e.hasOwnProperty(b))i.push(L(e,e[b],t));else if(e.hasOwnProperty(O))i.push(D(e,e[O],t));else if(e.hasOwnProperty(g)){const r=[e];let s=null;for(;n.length>0&&!Array.isArray(n[0])&&"object"==typeof n[0]&&n[0].hasOwnProperty(y);)r.push(n.shift());n.length>0&&!Array.isArray(n[0])&&"object"==typeof n[0]&&n[0].hasOwnProperty(v)&&(s=n.shift()),i.push(E(r,s,t))}else{const n=I(e,t);i.push({build:e=>n(e.newScope())})}}else i.push({build:t=>[e]})}return e=>i.flatMap((t=>t.build(e.newScope())))}function E(e,t,i){const n=e.map(((e,t)=>_(0===t?e[g]:e[y]))),r=e.map((e=>T(e,i))),s=t?I(t,i):null;return{build:e=>{const t=n.findIndex((t=>t.evalNode(e.newScope())));return t>=0?[r[t](e.newScope())]:s?[s(e.newScope())]:[]}}}function _(e){const t=Array.isArray(e)?e.join("\n"):e;return(0,n.YK)(t)}function D(e,t,i){if(!t.hasOwnProperty("object"))throw new Error('Missing "object" definition for $-recurse statement');if(!t.hasOwnProperty("it"))throw new Error('Missing "it" definition for $-recurse statement');if(!t.hasOwnProperty("children"))throw new Error('Missing "children" definition for $-recurse statement');if(!t.hasOwnProperty("dstChildren"))throw new Error('Missing "dstChildren" definition for $-recurse statement');const r=I(t.object,i),o=(0,n.YK)(t.children),a=t.it,l=t.dstChildren,h=c({},e);delete h[O];const d=T(h);function u(e,t){if(!t)return t;const i={};i[a]=t;const n=e.newScope("buildObject",i),r=d(n),c=o.evalNode(n);if(c instanceof s.B||Array.isArray(c)){const t=[];c.forEach((i=>{t.push(u(e,i))})),r.hasOwnProperty(l)&&Array.isArray(r[l])?r[l]=r[l].concat(t):r[l]=t}return r}return{build:e=>u(e,r(e))}}function L(e,t,i){if(!t.hasOwnProperty("source"))throw new Error("Missing source definition in foreach loop");if(!t.hasOwnProperty("it"))throw new Error("Missing iterator (it) name definition in foreach loop");const n=$(t.source),r=T(e,i);let o=null;return e.hasOwnProperty(g)&&(o=_(e[g])),{build:e=>{const i=n(e);let a=()=>{};(i instanceof s.B||Array.isArray(i))&&(a=e=>{i.forEach(((t,i)=>{e(t,i)}))}),e=e.newScope();const l=[];return a(((i,n)=>{e.set(t.it,i),(!o||o.evalNode(e))&&l.push(r(e))})),l}}}function B(e,t,i){const n=t.start?I(t.start,i):e=>0,r=t.step?I(t.step,i):e=>1;if(!t.hasOwnProperty("until"))throw new Error("Missing until definition in for loop");if(!t.hasOwnProperty("it"))throw new Error("Missing iterator name definition in for loop");const s=I(t.until,i),o=T(e,i);let a=null;return e.hasOwnProperty(g)&&(a=_(e[g])),{build:e=>{const i=n(e.newScope()),l=r(e.newScope()),c=s(e.newScope()),h=e=>l>0?e<c:e>c;e=e.newScope();const d=[];for(let n=i;h(n);n+=l)e.set(t.it,n),(!a||a.evalNode(e))&&d.push(o(e));return d}}}},5244:(e,t,i)=>{"use strict";i.d(t,{M:()=>r});var n=i(1570);class r{constructor(e,t){this.x=e,this.y=t}static fromPoint(e){return new r(e.x,e.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalized(){const e=this.length();return n.A.tooSmall(e)?new r(0,0):new r(this.x/e,this.y/e)}toString(){return`{x: ${this.x}, y: ${this.y}}`}inverse(){return new r(-this.x,-this.y)}projection(e){return n.A.projectVectorToVector(this.x,this.y,e.x,e.y)}_operator(e,t){if("+"===e){if(t instanceof r)return this.plusVector(t);throw new Error("Cannot sum vector and non-vector values")}if("-"===e){if(t instanceof r)return this.minusVector(t);throw new Error("Cannot sum vector and non-vector values")}if("*"===e)return this.multiply(t);if("/"===e)return this.divide(t);throw new Error(`Operator ${e} is not supported on Vector`)}_rightOperator(e,t){if(t instanceof r)return t._operator(e,this);if("*"===e)return this.multiply(t);throw new Error(`Unsupported operator: ${typeof t} ${e} Vector`)}minusVector(e){return new r(this.x-e.x,this.y-e.y)}plusVector(e){return new r(this.x+e.x,this.y+e.y)}multiply(e){if(e instanceof r)return this.x*e.x+this.y*e.y;const t=typeof e;if("number"!==t)throw new Error("Cannot multiply vector by "+t);return new r(this.x*e,this.y*e)}divide(e){const t=typeof e;if("number"!==t)throw new Error("Cannot divide vector by "+t);return new r(this.x/e,this.y/e)}rotate(e){const t=Math.cos(e),i=Math.sin(e);return new r(t*this.x-i*this.y,i*this.x+t*this.y)}}},1210:(e,t,i)=>{"use strict";i.d(t,{V:()=>h});var n=i(269),r=i(6354),s=i(3710),o=i(333);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const c=new r.Vy("Compiler");function h(e,t,i,r,h={},d={},u=null){const p=[];return(0,n.jJ)(r,(r=>{if(r.on&&r.element){const c=e.findElementsBySelector(r.element,i);if(c){let i=s.A.main[r.method];if(!i&&r.method.startsWith("function:")&&(i=(0,o.bR)(e,r.method.substring(9),r.args)),i){const s=function(e,t,i){if(!t.argBinds)return e;const n=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);for(let e in t.argBinds)if(t.argBinds.hasOwnProperty(e)){const r=t.argBinds[e].ref;i.hasOwnProperty(r)&&(n[e]=i[r])}return n}(function(e,t){return(0,n.jJ)(t.args,((t,i)=>{e.hasOwnProperty(i)||(e[i]=t.value)})),e}(r.args,i),r,h);i.multiItem?p.push({func:i,element:c,args:s}):(0,n.jJ)(c,(n=>{if(i.init)try{i.init(n,s,e,t)}catch(e){e&&(console.error(e),u&&u(e))}p.push({func:i,element:n,args:s})}))}}}})),c.info("Compiling functions for item",i?`${i.id}/${i.name}`:""),(t,i,n,r,s)=>{const o=e.findItemById(n);if(p.length<1)return;const a={idx:0,next(){if(this.idx>=p.length)return null;const e=p[this.idx];return this.idx++,e},skip(){this.idx++}},l=()=>{const i=a.next();if(!i)return;if(c.info("Executing",i.func.name,"function"),Array.isArray(i.element)){let t=!1;for(let n=0;n<i.element.length&&!t;n++)e.findItemById(i.element[n].id)&&(t=!0)}else if(!i.element||!e.findItemById(i.element.id))return void l();const n={};if(i.func.execute)i.func.execute(i.element,i.args,e,t,l,o,r,s,n,h,d);else if(i.func.executeWithBranching){const u=e=>{if(c.info("Branch result",e),e.break)return;let t=e.skip;for(;t>0;)t--,a.skip();l()};i.func.executeWithBranching(i.element,i.args,e,t,u,o,r,s,n,h,d)}else l()};l()}}},2958:(e,t,i)=>{"use strict";i.d(t,{A:()=>n});const n={standardEvents:{mousein:{id:"mousein",name:"Mouse In"},mouseout:{id:"mouseout",name:"Mouse Out"},clicked:{id:"clicked",name:"Clicked"},init:{id:"init",name:"Init"},valueChange:{id:"valueChange",name:"Value Change",description:'When the value of the item is changed with "setValue" script function'},dragStart:{id:"dragStart",name:"Dragging: Start",description:"When user starts dragging the object"},dragEnd:{id:"dragEnd",name:"Dragging: End",description:"When user stops dragging the object. It is invoked even if user drops the object in non-designated area and the dragging is canceled"},drag:{id:"drag",name:"Dragging: Move",description:"Invoked every time user moves the dragged item"},drop:{id:"drop",name:"Dragging: Dropped",description:"When user drops the object into a designated area"},receiveDrop:{id:"receiveDrop",name:"Dragging: Receive",description:"When user drops another object into this one"},dragObjectIn:{id:"dragObjectIn",name:"Dragging: Object In",description:"When user drags an object into another designated drop object"},dragObjectOut:{id:"dragObjectOut",name:"Dragging: Object Out",description:"When user drags an object away from another designated drop object"}}}},9898:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(269),r=i(5824),s=i.n(r);const o=new(i(6354).Vy)("UserEventBus");class a{constructor(e){this.editorId=e,this.itemEventSubscribers={},this.revision=s().generate()}subscribeItemEvent(e,t,i,n){this.itemEventSubscribers.hasOwnProperty(e)||(this.itemEventSubscribers[e]={}),this.itemEventSubscribers[e].hasOwnProperty(i)||(this.itemEventSubscribers[e][i]=[]),this.itemEventSubscribers[e][i].push({itemName:t,callback:n})}emitItemEvent(e,t,...i){o.infoEvent(t,[e]);const r=this.itemEventSubscribers[e];r&&r[t]&&(0,n.jJ)(r[t],(n=>{try{r={type:"schemio:item-event",name:n.itemName,event:t,args:i},window.parent!=window&&window.parent.postMessage(r,"*")}catch(e){console.error(e)}var r;n.callback.apply(null,[this,this.revision,e,t,i])}))}clear(){this.itemEventSubscribers={},this.revision=s().generate()}clearEventsForItem(e){this.itemEventSubscribers.hasOwnProperty(e)&&delete this.itemEventSubscribers[e]}isActionAllowed(e){return this.revision===e}}},3710:(e,t,i)=>{"use strict";i.d(t,{A:()=>Ze});var n=i(2063),r=i(955),s=i(1953),o=i(5894),a=i(8176),l=i(8728),c=i(1867),h=i(3627);function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f(e,t,i,n,o){(0,r.N4)(e,new s.Ay({durationMillis:1e3*i.animationDuration,animationType:i.transition,update:o,destroy(){n()}}),t.id,`set-func-${i.field}`)}function m(e){return"number"===e||"color"===e||"advanced-color"===e}function g(e,t,i,n){const{property:r,startValue:s,onUpdate:l,onFinish:c}=n;if("number"===r.type)f(e,t,i,c,(n=>{l(s*(1-n)+i.value*n),a.A.item.changed.specific.$emit(e,t.id)}));else if("color"===r.type){const n=(0,o.H0)(s),r=(0,o.H0)(i.value);f(e,t,i,c,(i=>{l((0,o._T)({r:n.r*(1-i)+r.r*i,g:n.g*(1-i)+r.g*i,b:n.b*(1-i)+r.b*i,a:n.a*(1-i)+r.a*i})),a.A.item.changed.specific.$emit(e,t.id)}))}else"advanced-color"===r.type&&(function(e,t,i,n){const{startValue:r,onUpdate:s,onFinish:l}=n;if("object"!=typeof i.value||"object"!=typeof r)return!1;if("solid"===i.value.type&&"solid"===r.type){const n=(0,o.H0)(r.color),c=(0,o.H0)(i.value.color);return f(e,t,i,l,(i=>{s({type:"solid",color:(0,o._T)({r:n.r*(1-i)+c.r*i,g:n.g*(1-i)+c.g*i,b:n.b*(1-i)+c.b*i,a:n.a*(1-i)+c.a*i})}),a.A.item.changed.specific.$emit(e,t.id)})),!0}return"gradient"===i.value.type&&"gradient"===r.type&&function(e,t,i,n){const{startGradient:r,endGradient:s,onUpdate:l,onFinish:c}=n;if(r.colors.length!==s.colors.length)return!1;l({type:"gradient",gradient:u(u({},r),{},{type:s.type})});const h=r.direction,d=[];for(let e=0;e<s.colors.length;e++)d[e]={start:(0,o.H0)(r.colors[e].c),startPos:r.colors[e].p,end:(0,o.H0)(s.colors[e].c),endPos:s.colors[e].p};return f(e,t,i,c,(i=>{l({type:"gradient",gradient:{direction:h*(1-i)+s.direction*i,colors:d.map(((e,t)=>({c:(0,o._T)({r:e.start.r*(1-i)+e.end.r*i,g:e.start.g*(1-i)+e.end.g*i,b:e.start.b*(1-i)+e.end.b*i,a:e.start.a*(1-i)+e.end.a*i}),p:e.startPos*(1-i)+e.endPos*i}))),type:s.type}}),a.A.item.changed.specific.$emit(e,t.id)})),!0}(e,t,i,{startGradient:r.gradient,endGradient:i.value.gradient,onUpdate:s,onFinish:l})}(e,t,i,n)||(l(i.value),a.A.item.changed.specific.$emit(e,t.id),c()))}const y={name:"Set",args:{field:{name:"Field",type:"text",value:""},value:{name:"Value",type:"any",value:null},animated:{name:"Animated",type:"boolean",value:!1},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,r){e&&t.hasOwnProperty("field")&&t.hasOwnProperty("value")?t.field.startsWith("effects.")?this.executeEffectField(e,t,i,n,r):this.executeRegularField(e,t,i,n,r):r()},executeEffectField(e,t,i,n,r){const s=function(e){if(!e.startsWith("effects."))return null;const t=e.indexOf("."),i=e.indexOf(".",t+1);return{effectId:e.substring(t+1,i),argName:e.substring(i+1)}}(t.field);if(!s)return void r();const o=e.effects.find((e=>e.id===s.effectId));if(!o)return void r();const l=(0,c.DA)()[o.effect];if(!l)return void r();const h=l.args[s.argName];t.animated&&h&&m(h.type)?(t.inBackground&&r(),g(i.editorId,e,t,{property:h,startValue:o.args[s.argName],onUpdate:e=>{o.args[s.argName]=e},onFinish:()=>{t.inBackground||r()}})):(o.args[s.argName]=t.value,a.A.item.changed.specific.$emit(i.editorId,e.id),r())},executeRegularField(e,t,i,r,s){const o=(0,h.RA)(l.A.find(e.shape),t.field);t.animated&&o&&m(o.type)?(t.inBackground&&s(),g(i.editorId,e,t,{property:o,startValue:n.A.getObjectProperty(e,t.field),onUpdate:i=>{n.A.setObjectProperty(e,t.field,i)},onFinish:()=>{t.inBackground||s()}})):(n.A.setObjectProperty(e,t.field,t.value),"visible"===t.field&&i.updateVisibility(e),a.A.item.changed.specific.$emit(i.editorId,e.id),s())}},v={name:"Hide",description:"Hides your item from scene. It also allows to animate this and to perform a slow transition",args:{animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},menuOptions:[{name:"Hide (animated)",args:{animated:!0}},{name:"Hide (instantly)",args:{animated:!1}}],argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,o){if(!e)return void o();const l=e.opacity;t.animated?((0,r.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.animationDuration,animationType:t.transition,update(t){e.opacity=l*(1-t),a.A.item.changed.specific.$emit(i.editorId,e.id)},destroy(){e.visible=!1,e.opacity=0,a.A.item.changed.specific.$emit(i.editorId,e.id),i.updateVisibility(e),t.inBackground||o()}}),e.id,"visibility-animation"),t.inBackground&&o()):(e.visible=!1,e.opacity=0,i.updateVisibility(e),a.A.item.changed.specific.$emit(i.editorId,e.id),o())}},x={name:"Show",description:"Makes your item visible on scene. You can also make it with a slow transition.",args:{targetOpacity:{name:"Target opacity",type:"number",value:100},animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},menuOptions:[{name:"Show (animated)",args:{animated:!0}},{name:"Show (instantly)",args:{animated:!1}}],argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,o){if(e)if(t.animated){const n=e.opacity;(0,r.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){e.visible=!0,a.A.item.changed.specific.$emit(i.editorId,e.id)},update(r){e.visible=!0,e.opacity=n*(1-r)+t.targetOpacity*r,a.A.item.changed.specific.$emit(i.editorId,e.id)},destroy(){e.visible=!0,e.opacity=t.targetOpacity,i.updateVisibility(e),a.A.item.changed.specific.$emit(i.editorId,e.id),t.inBackground||o()}}),e.id,"visibility-animation"),t.inBackground&&o()}else e.visible=!0,e.opacity=t.targetOpacity,i.updateVisibility(e),a.A.item.changed.specific.$emit(i.editorId,e.id),o()}},b={name:"Send event",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,r){n.emitItemEvent(e.id,t.event),r()}};var w=i(1570),O=i(269);function S(e,t,i,n,r,s,o,a,l,c){if(Math.sqrt((a-r)*(a-r)+(l-s)*(l-s))<1)return{x:a,y:l,scale:c};const h=r+(a-r)/2,d=s+(l-s)/2,u=(c+o)/2;return k(e,t,i,n,h,d,u)?S(e,t,i,n,r,s,o,h,d,u):S(e,t,i,n,h,d,u,a,l,c)}function k(e,t,i,n,r,s,o){const a=e.x*o+r,l=e.y*o+s,c=(e.x+e.w)*o+r,h=(e.y+e.h)*o+s;return a>=n&&a<=t-n&&c>=n&&c<=t-n&&l>=n&&l<=i-n&&h>=n&&h<=i-n}function P(e,t){if("hud"===e.shape)return!0;if(e.meta.parentId){const i=t.findItemById(e.meta.parentId);if(i)return P(i,t)}return!1}const C={name:"Zoom To It",description:"Moves scene to bring item into view so that it is centered on the screen",args:{closeEnough:{name:"Close Enough",type:"boolean",value:!1,description:"If checked, then it will only zoom to item just enough for it to appear fully inside the screen. Otherwise it will bring it to the center of the screen"},animated:{name:"Animated",type:"boolean",value:!0},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,min:0,depends:{animated:!0}},minZoom:{name:"Minimum Zoom(%)",type:"number",value:0,min:0},maxZoom:{name:"Maximum Zoom(%)",type:"number",value:100,min:0},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,o){if(!e||!e.area||P(e,i))return void o();const l=function(e,t){const i=[{x:0,y:0},{x:e.area.w,y:0},{x:e.area.w,y:e.area.h},{x:0,y:e.area.h}];let n=null,r=null,s=function(e,t){let i=t.shadowTransform?t.shadowTransform:w.A.identityMatrix();if(e.meta.ancestorIds)for(let n=0;n<e.meta.ancestorIds.length;n++){const r=t.findItemById(e.meta.ancestorIds[n]);r&&(i=w.A.standardTransformWithArea(i,r.area))}return i}(e,t);return(0,O.jJ)(i,(t=>{const i=w.A.worldPointInArea(t.x,t.y,e.area,s);n?(n.x=Math.min(n.x,i.x),n.y=Math.min(n.y,i.y),r.x=Math.max(r.x,i.x),r.y=Math.max(r.y,i.y)):(n={x:i.x,y:i.y},r={x:i.x,y:i.y})})),{x:n.x,y:n.y,w:r.x-n.x,h:r.y-n.y}}(e,i);let c=1;const h=i.screenSettings.width,d=i.screenSettings.height;l.w>0&&l.h>0&&h>0&&d>0&&(c=Math.min(h/l.w,d/l.h),c=Math.max(t.minZoom/100,Math.min(c,t.maxZoom/100)));let u=h/2-(l.x+l.w/2)*c,p=d/2-(l.y+l.h/2)*c;if(t.closeEnough){if(k(l,h,d,0,i.screenTransform.x,i.screenTransform.y,i.screenTransform.scale))return void o();{const e=S(l,h,d,0,i.screenTransform.x,i.screenTransform.y,i.screenTransform.scale,u,p,c);u=e.x,p=e.y,c=e.scale}}if(t.animated){const e=i.screenTransform.x,n=i.screenTransform.y,l=i.screenTransform.scale;(0,r.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.animationDuration,animationType:"ease-in-out",update:t=>{i.screenTransform.scale=l*(1-t)+c*t,i.screenTransform.x=e*(1-t)+u*t,i.screenTransform.y=n*(1-t)+p*t},destroy:()=>{a.A.screenTransformUpdated.$emit(i.editorId,i.screenTransform),t.inBackground||o()}}),"screen","screen-transform"),t.inBackground&&o()}else i.screenTransform.scale=c,i.screenTransform.x=u,i.screenTransform.y=p,a.A.screenTransformUpdated.$emit(i.editorId,i.screenTransform),o()}};var A=i(176);class I extends A.A{constructor(e,t,i){super(),this.item=e,this.args=t,this.resultCallback=i,this.domContainer=null,this.domPath=null,this.time=0,this.backupOpacity=1,this.domAnimationPath=null}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=l.A.find(this.item.shape);if(e){const t=e.computeOutline(this.item);t&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",t))}if(!this.domContainer||!this.domPath)return!1;this.domAnimationPath=this.svg("path",{d:this.domPath.getAttribute("d"),"stroke-dasharray":this.args.length,"stroke-dashoffset":0,"stroke-width":this.args.strokeWidth||1,stroke:this.args.color,fill:"none","stroke-linejoin":"round"}),this.domContainer.appendChild(this.domAnimationPath);let t=window.getComputedStyle(this.domPath).opacity;return t&&t>0&&(this.backupOpacity=t),this.domPath.style.opacity=0,!0}play(e){return this.time+=e,this.domAnimationPath.setAttribute("stroke-dashoffset",Math.floor(-this.time*this.args.speed/1e3)),!(!this.args.infinite&&this.time>1e3*this.args.duration)}destroy(){this.args.inBackground||this.resultCallback(),this.domAnimationPath&&this.domContainer.removeChild(this.domAnimationPath),this.domPath&&(this.domPath.style.opacity=this.backupOpacity)}}const T={name:"Crawl Effect",description:"Animates outline of the item with a dashed stroke",args:{length:{name:"Length",type:"number",value:10},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},strokeWidth:{name:"Stroke Width",type:"number",value:3},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){e&&(0,r.N4)(i.editorId,new I(e,t,s),e.id,this.name),t.inBackground&&s()}},$={name:"Stop All Animations",description:"Stops all animations that were either created in the background or generated by another event",args:{},execute(e,t,i,n,s){e&&e.id&&(0,r.BX)(i.editorId,e.id),s()}};var M=i(869),E=i(5824),_=i.n(E);const D=2*Math.PI;class L{constructor(){this.lifeTime=0,this.position={x:0,y:0},this.angle=0,this.scale=1,this.opacity=0,this.direction={x:0,y:0},this.floatAngle=0,this.floatAngleDirection=0}update(){}destroy(){}}class B extends L{constructor(e,t){super(),this.domParticle=t,this.domContainer=e,e.appendChild(t)}update(){this.domParticle.setAttribute("style",`opacity: ${this.opacity}`),this.domParticle.setAttribute("transform",`translate(${this.position.x} ${this.position.y}) rotate(${this.angle}) scale(${this.scale} ${this.scale})`)}destroy(){this.domContainer.removeChild(this.domParticle)}}class R{constructor(e){this.items=[],this.schemeContainer=e,this.recycledItems=[]}recycleItem(e){this.recycledItems.push(e)}destroy(){this.schemeContainer.deleteNonIndexableItems(this.items)}borrowItem(e){if(this.recycledItems.length>0)return this.recycledItems.pop();const t=this.schemeContainer.findFirstElementBySelector(e);if(t){const[e]=this.schemeContainer.cloneItems([t]);return this.schemeContainer.addNonIndexableItem(e),this.items.push(e),e}return null}}class N extends L{constructor(e,t,i,n){super(),this.item=i,this.particleItem=null,this.schemeContainer=e,this.itemRecycler=n,this.particleItem=this.itemRecycler.borrowItem(t)}update(){if(!this.particleItem)return;const e=(0,M.xS)(this.position.x,this.position.y,this.item);this.particleItem.visible=!0,this.particleItem.area.x=e.x-this.particleItem.area.px*this.particleItem.area.w,this.particleItem.area.y=e.y-this.particleItem.area.py*this.particleItem.area.h,this.particleItem.area.sx=this.scale,this.particleItem.area.sy=this.scale,this.particleItem.area.r=this.angle,this.particleItem.opacity=100*this.opacity,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.particleItem.id)}destroy(){this.particleItem&&this.itemRecycler.recycleItem(this.particleItem)}}class F extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.resultCallback=n,this.domContainer=null,this.domItemPath=null,this.particles=[],this.schemeContainer=i,this.itemRecycler=new R(i),this.generatorCounter=0,this.particlesLeft=this.args.particlesCount,this.cleanupDomElements=[],this.totalPathLength=0,this.singleParticleBirthTime=this.args.birthTime/Math.max(1,this.args.particlesCount)}init(){if(this.domContainer=document.getElementById(`animation-container-${this.item.id}`),!l.A.find(this.item.shape))return!1;if(this.domItemPath=this.schemeContainer.getSvgOutlineOfItem(this.item),!this.domContainer||!this.domItemPath)return!1;this.totalPathLength=this.domItemPath.getTotalLength(),this.center=function(e){const t=e.getTotalLength();let i=0,n=0;for(let r=0;r<10;r++){const s=e.getPointAtLength(t*r/10);i+=s.x,n+=s.y}return{x:i/10,y:n/10}}(this.domItemPath);const e=this.svg("defs",{});return e.innerHTML=`\n            <radialGradient id="animation-particle-effect-gradient-${this.id}" cx="50%" cy="50%" r="50%" fx="50%" fy="50%">\n            <stop offset="0%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="25%" style="stop-color:${this.args.color};stop-opacity:1" />\n            <stop offset="100%" style="stop-color:${this.args.color};stop-opacity:0" />\n            </radialGradient>\n        `,this.domContainer.appendChild(e),this.cleanupDomElements.push(e),!0}play(e){if(0===this.particles.length&&this.particlesLeft<=0)return!1;if(this.particlesLeft>0)if(this.singleParticleBirthTime>1e-4){if(this.generatorCounter+=e/(1e3*this.singleParticleBirthTime),this.generatorCounter>=1){const e=Math.floor(this.generatorCounter),t=Math.min(this.particlesLeft,e);for(let e=0;e<t;e++)this.createParticle();this.generatorCounter-=e}}else for(;this.particlesLeft>0;)this.createParticle();for(let t=0;t<this.particles.length;t++)this.particles[t].lifeTime>this.args.lifeTime?(this.particles[t].destroy(),this.particles.splice(t,1),t-=1):this.playParticle(this.particles[t],e);return!0}createParticle(){let e=0;this.args.travelAlongPath||(e=Math.random()*this.totalPathLength);const t=this.domItemPath.getPointAtLength(e);let i=null;if(i="item"===this.args.particleType?new N(this.schemeContainer,this.args.item,this.item,this.itemRecycler):new B(this.domContainer,this.createParticleDom(this.args.particleType,this.args.particleSize,this.args.color)),i.position=t,this.args.travelAlongPath){this.args.travelFloatRadius>0&&(i.floatAngle=Math.random()*D);let e=1;Math.random()>=.5&&(e=-1),i.floatAngleDirection=e}else{const e={x:0,y:0};e.x=t.x-this.center.x,e.y=t.y-this.center.y;const n=Math.sqrt(e.x*e.x+e.y*e.y);n>1e-4&&(e.x=e.x/n,e.y=e.y/n),i.direction=e}this.particles.push(i),i.update(),this.particlesLeft-=1}playParticle(e,t){if(e.lifeTime+=t/1e3,this.args.travelAlongPath){let i=this.args.lifeTime;i<.1&&(i=1);let n=0;n=this.args.backwards?this.totalPathLength*Math.max(0,1-e.lifeTime/i):this.totalPathLength*e.lifeTime/i;const r=this.domItemPath.getPointAtLength(n);let s=r.x,o=r.y;if(this.args.travelFloatRadius>0&&(e.floatAngle+=e.floatAngleDirection*this.args.travelFloatSpeed*t/(1e3*this.args.lifeTime),e.floatAngle>D&&(e.floatAngle-=D),s=r.x+this.args.travelFloatRadius*Math.cos(e.floatAngle),o=r.y+this.args.travelFloatRadius*Math.sin(e.floatAngle)),e.position.x=s,e.position.y=o,this.args.adjustRotation){const t=this.domItemPath.getPointAtLength(n+2),i=t.x-r.x,s=t.y-r.y,o=i*i+s*s;if(!w.A.tooSmall(o)){const t=Math.sqrt(o),n=i/t,r=s/t,a=180*w.A.fullAngleForNormalizedVector(n,r)/Math.PI;e.angle=a,isFinite(this.args.rotationOffset)&&(e.angle+=this.args.rotationOffset)}}}else e.position.x+=e.direction.x*this.args.speed*t/1e3,e.position.y+=e.direction.y*this.args.speed*t/1e3;let i=1,n=1;if(this.args.lifeTime>0){const t=100*e.lifeTime/this.args.lifeTime;t<this.args.fadeIn?n=t/this.args.fadeIn:t>this.args.fadeOut&&this.args.fadeOut<99.999&&(n=(100-t)/(100-this.args.fadeOut)),t<this.args.growth?i=t/this.args.growth:t>this.args.decline&&this.args.decline<99.999&&(i=(100-t)/(100-this.args.decline))}e.scale=i,e.opacity=n,e.update()}destroy(){this.args.inBackground||this.resultCallback(),(0,O.jJ)(this.particles,(e=>{e.destroy()})),this.itemRecycler.destroy(),(0,O.jJ)(this.cleanupDomElements,(e=>{this.domContainer.removeChild(e)})),this.cleanupDomElements=[]}createParticleDom(e,t,i){return"circle"===e?this.svg("circle",{cx:0,cy:0,r:t/2,fill:i}):"rect"===e?this.svg("rect",{x:-t/2,y:-t/2,width:t,height:t,fill:i,stroke:"none"}):this.svg("circle",{cx:0,cy:0,r:t/2,fill:`url(#animation-particle-effect-gradient-${this.id})`})}}const j={name:"Particle Effect",description:"Generates particles on the outline of the item",args:{particleType:{name:"Particle Type",type:"choice",value:"spot",options:["spot","circle","rect","item"]},item:{name:"Item",type:"element",value:null,depends:{particleType:"item"}},particlesCount:{name:"Particles",type:"number",value:20},particleSize:{name:"Particle size",type:"number",value:20},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)"},speed:{name:"Speed",type:"number",value:60,depends:{travelAlongPath:!1}},lifeTime:{name:"Life time (sec)",type:"number",value:2},birthTime:{name:"Birth time (sec)",type:"number",value:.5,description:"Time in which it should generate all particles"},growth:{name:"Growth to (%)",type:"number",value:10},decline:{name:"Decline from (%)",type:"number",value:90},fadeIn:{name:"Fade in (%)",type:"number",value:5},fadeOut:{name:"Fade out (%)",type:"number",value:95},travelAlongPath:{name:"Travel along path",type:"boolean",value:!0,description:"The particle emits in the beggining of the path and travels along the path"},backwards:{name:"Travel backwards",type:"boolean",value:!1,depends:{travelAlongPath:!0}},adjustRotation:{name:"Adjust rotation",type:"boolean",value:!0,description:"Adjust rotation of particles to path",depends:{travelAlongPath:!0}},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{adjustRotation:!0,travelAlongPath:!0}},travelFloatRadius:{name:"Travel float radius",type:"number",value:5,depends:{travelAlongPath:!0}},travelFloatSpeed:{name:"Travel float speed",type:"number",value:10,depends:{travelAlongPath:!0}},inBackground:{name:"In background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){if(e){const n=this.name+_().generate();(0,r.N4)(i.editorId,new F(e,t,i,s),e.id,n)}t.inBackground&&s()}};class z extends A.A{constructor(e,t,i,n){super(),this.editorId=e,this.item=t,this.args=i,this.resultCallback=n,this.elapsedTime=0,this.domContainer=null,this.domBlinker=null,this.opacity=0,this.itemOriginalOpacity=100,this.phase=0,this.pulsatingTime=0,this.phaseOffset=0}init(){this.domContainer=document.getElementById(`animation-container-${this.item.id}`);const e=l.A.find(this.item.shape);if(!e)return!1;if(this.args.fade){const e=this.args.maxOpacity-this.args.minOpacity;this.phase=1,e>.001&&(this.phaseOffset=Math.asin(2*(this.item.opacity-this.args.minOpacity)/e-2))}else this.domBlinker=this.svg("path",{d:e.computeOutline(this.item),"stroke-width":3,stroke:this.args.color,fill:this.args.color,style:`opacity: ${this.args.minOpacity}`}),this.domContainer.appendChild(this.domBlinker);return!0}play(e){this.elapsedTime+=e,this.t+=this.args.speed*e/1e4;let t=!1;return t=this.args.fade?this.playFade(e):this.playBlinker(e),!!this.args.infinite||t}playFade(e){if(1===this.phase){this.pulsatingTime+=e;const t=Math.sin(this.pulsatingTime*this.args.speed/1e4+this.phaseOffset)/2+.5;this.item.opacity=this.args.minOpacity*(1-t)+this.args.maxOpacity*t,!this.args.infinite&&1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2)}return 2===this.phase&&(this.item.opacity+=this.args.speed*e/100,this.item.opacity>=this.itemOriginalOpacity)?(this.item.opacity=this.itemOriginalOpacity,!1):(a.A.item.changed.specific.$emit(this.editorId,this.item.id),this.elapsedTime<1e3*this.args.duration)}playBlinker(e){if(0===this.phase)this.opacity<this.args.minOpacity/100?this.opacity+=this.args.speed*e/1e4:(this.opacity=this.args.minOpacity/100,this.phase=1);else if(1===this.phase)this.pulsatingTime+=e,this.opacity=((Math.sin(this.pulsatingTime*this.args.speed/1e4)/2+.5)*(this.args.maxOpacity-this.args.minOpacity)+this.args.minOpacity)/100,!this.args.infinite&&1e3*this.args.duration-this.elapsedTime<Math.min(500,1e3*this.args.duration/20)&&(this.phase=2);else if(this.opacity-=this.args.speed*e/1e4,this.opacity<0)return!1;return this.domBlinker.setAttribute("style",`opacity: ${this.opacity}`),this.elapsedTime<1e3*this.args.duration}destroy(){this.item.opacity=this.itemOriginalOpacity,this.args.inBackground||this.resultCallback(),this.domBlinker&&this.domContainer.removeChild(this.domBlinker)}}const Q={name:"Blink Effect",description:"Generates a pulsating effect in which item fades in and out or glows with specified color",args:{fade:{name:"Fade in/out",type:"boolean",value:!0},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)",depends:{fade:!1}},speed:{name:"Speed",type:"number",value:50},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},minOpacity:{name:"Min Opacity (%)",type:"number",value:5},maxOpacity:{name:"Max Opacity (%)",type:"number",value:80},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other acctions"}},execute(e,t,i,n,s){e&&((0,r.N4)(i.editorId,new z(i.editorId,e,t,s),e.id,this.name),t.inBackground&&s())}};i(7234);class U extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition="relative"===t.kind?{x:this.item.area.x+parseFloat(t.x),y:this.item.area.y+parseFloat(t.y)}:{x:parseFloat(t.x),y:parseFloat(t.y)}}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.updateChildTransforms(this.item),!1;const i=(0,s.t)(t,this.args.movement);return this.item.area.x=this.originalPosition.x*(1-i)+this.destinationPosition.x*i,this.item.area.y=this.originalPosition.y*(1-i)+this.destinationPosition.y*i,this.schemeContainer.updateChildTransforms(this.item),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,this.schemeContainer.updateChildTransforms(this.item),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const q={name:"Move",description:"Moves item to specified location in local coords",args:{kind:{name:"Position",type:"choice",value:"absolute",options:["absolute","relative"],description:'Specifies type of movement. "absolute" movement uses "x" and "y" as is, while "relative" movement specifies that item should move by specified "x" and "y"'},x:{name:"X",type:"number",value:50},y:{name:"Y",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},argsToShortString(e){const t="relative"===e.kind?"Δ":"";return`${t}x: ${e.x}, ${t}y: ${e.y} `+(e.animated?"animated":"")},execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.N4)(i.editorId,new U(e,t,i,s),e.id,this.name),void(t.inBackground&&s());"relative"===t.kind?(e.area.x+=t.x,e.area.y+=t.y):(e.area.x=t.x,e.area.y=t.y),i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}s()}};class H extends A.A{constructor(e,t,i,n,r,s,o,a){super(),this.item=e,this.args=t,this.schemeContainer=o,this.resultCallback=a,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.destinationPosition=i,this.originalAngle=e.area.r,this.destinationAngle=n,this.originalWidth=e.area.w,this.destinationWidth=r,this.originalHeight=e.area.h,this.destinationHeight=s}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=!0,n=(0,s.t)(t,this.args.movement);return t>=1&&(n=1,i=!1),this.item.area.x=this.originalPosition.x*(1-n)+this.destinationPosition.x*n,this.item.area.y=this.originalPosition.y*(1-n)+this.destinationPosition.y*n,this.args.rotate&&(this.item.area.r=this.originalAngle*(1-n)+this.destinationAngle*n),this.args.alignWidth&&(this.item.area.w=this.originalWidth*(1-n)+this.destinationWidth*n),this.args.alignHeight&&(this.item.area.h=this.originalHeight*(1-n)+this.destinationHeight*n),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),i}return this.item.area.x=this.destinationPosition.x,this.item.area.y=this.destinationPosition.y,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const V={name:"Move to Item",description:"Moves item into another item. It also lets rotation and scale align to the destination item with a smooth transition",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item to which this item should be moved"},matchPoint:{name:"Match point",type:"choice",value:"center",description:"Match items points",options:["center","pivot","top-left","top-right","bottom-left","bottom-right"]},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},rotate:{name:"Rotate",type:"boolean",value:!1,description:"Align rotation of items"},rotationOffset:{name:"Rotation Offset",type:"number",value:0,depends:{rotate:!0},description:"Rotation angle offset"},alignWidth:{name:"Align Width",type:"boolean",value:!1,description:"Adjust items width so that it fits to the width of its destination item"},alignHeight:{name:"Align Height",type:"boolean",value:!1,description:"Adjust items height so that it fits to the height of its destination item"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},execute(e,t,i,n,s){if(e){const n=i.findFirstElementBySelector(t.destinationItem,e);let o=e.area.r,l=null,c=e.area.w,h=e.area.h;if(n&&n.id!==e.id){l=function(e,t,i,n){const r={x:0,y:0},s={x:0,y:0};"pivot"===i?(r.x=t.area.px*t.area.w,r.y=t.area.py*t.area.h,s.x=e.area.px*e.area.w,s.y=e.area.py*e.area.h):"top-right"===i?(r.x=t.area.w,s.x=e.area.w):"bottom-left"===i?(r.y=t.area.h,s.y=e.area.h):"bottom-right"===i?(r.x=t.area.w,s.x=e.area.w,r.y=t.area.h,s.y=e.area.h):"center"===i&&(r.x=t.area.w/2,s.x=e.area.w/2,r.y=t.area.h/2,s.y=e.area.h/2);const o=(0,M.xS)(r.x,r.y,t);return w.A.findTranslationMatchingWorldPoint(o.x,o.y,s.x,s.y,e.area,e.meta.transformMatrix)||n.relativePointForItem(o.x,o.y,e)}(e,n,t.matchPoint,i);const r=(0,M.O9)(e.area.w,0,e),s=(0,M.O9)(n.area.w,0,n),a=w.A.fullAngleForVector(r.x,r.y);o+=180*(w.A.fullAngleForVector(s.x,s.y)-a)/Math.PI,c=n.area.w,h=n.area.h}if(l){if(t.animated)return(0,r.N4)(i.editorId,new H(e,t,l,o,c,h,i,s),e.id,this.name),void(t.inBackground&&s());e.area.x=l.x,e.area.y=l.y,t.rotate&&(e.area.r=o+t.rotationOffset),t.alignWidth&&(e.area.w=c),t.alignHeight&&(e.area.h=h),a.A.item.changed.specific.$emit(i.editorId,e.id),i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id)}}s()}},W={name:"Replace Item",description:"Hides destination item and moves your item to it. This is usefull in case you want to design mocked interface",args:{destinationItem:{name:"Destination Item",type:"element",value:null,description:"Other item which this item should replace"}},argsToShortString(e,t){if(e.destinationItem){if(e.destinationItem.startsWith("tag:"))return e.destinationItem;const i=t.findFirstElementBySelector(e.destinationItem);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){const n=i.findFirstElementBySelector(t.destinationItem,e);let r=null;n&&n.id!==e.id&&(r=function(e,t,i){const n=(0,M.xS)(0,0,t);return i.relativePointForItem(n.x,n.y,e)}(e,n,i),n.visible=!1,e.visible=!0,e.area.x=r.x,e.area.y=r.y,i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id))}r()}};class X extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalAngle=this.item.area.r,this.destinationAngle=parseFloat(t.angle)}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=(0,s.t)(t,this.args.movement),n=!0;return t>=1?(n=!1,i=1,!1):(this.item.area.r=this.originalAngle*(1-i)+this.destinationAngle*i,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),n)}return this.item.area.r=this.destinationAngle,this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const G={name:"Rotate",description:"Rotates item by specified angle",args:{angle:{name:"Angle",type:"number",value:0},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.N4)(i.editorId,new X(e,t,i,s),e.id,this.name),void(t.inBackground&&s());e.area.r=parseFloat(t.angle),i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}s()}};class Y extends A.A{constructor(e,t,i,r){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=r,this.elapsedTime=0,this.originalArea=n.A.clone(e.area),this.destinationScale={sx:parseFloat(t.scaleX),sy:parseFloat(t.scaleY)}}init(){return!0}play(e){if(this.args.animated&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));let i=(0,s.t)(t,this.args.movement),n=!0;return t>=1&&(n=!1,i=1),this.item.area.sx=this.originalArea.sx*(1-i)+this.destinationScale.sx*i,this.item.area.sy=this.originalArea.sy*(1-i)+this.destinationScale.sy*i,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),n}return this.item.area.sx=this.destinationScale.sx,this.item.area.sy=this.destinationScale.sy,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.args.inBackground||this.resultCallback()}}const Z={name:"Scale",description:"Changes width and height of the item",args:{scaleX:{name:"Scale X",type:"number",value:1.5},scaleY:{name:"Scale Y",type:"number",value:1.5},animated:{name:"Animated",type:"boolean",value:!0},duration:{name:"Duration (sec)",type:"number",value:2,depends:{animated:!0}},movement:{name:"Movement",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},argsToShortString:e=>`x: ${e.scaleX}, y: ${e.scaleY}`+(e.animated?", animated":""),execute(e,t,i,n,s){if(e){if(t.animated)return(0,r.N4)(i.editorId,new Y(e,t,i,s),e.id,this.name),void(t.inBackground&&s());e.area.sx=parseFloat(t.scaleX),e.area.sy=parseFloat(t.scaleY),a.A.item.changed.specific.$emit(i.editorId,e.id),i.updateChildTransforms(e),i.readjustItemAndDescendants(e.id)}s()}};var K=i(4535);class J extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.originalPosition={x:this.item.area.x,y:this.item.area.y},this.domPath=null,this.pathItem=null,this.pathTotalLength=1}init(){if(this.args.path){const e=this.schemeContainer.findFirstElementBySelector(this.args.path,this.item);if(e){const t=l.A.find(e.shape);if(t){const i=t.computeOutline(e);i&&(this.domPath=document.createElementNS("http://www.w3.org/2000/svg","path"),this.domPath.setAttribute("d",i),this.pathItem=e)}}this.domPath&&(this.pathTotalLength=this.domPath.getTotalLength())}return!0}play(e){if(this.domPath&&this.args.duration>1e-5){this.elapsedTime+=e;const t=Math.min(1,this.elapsedTime/(1e3*this.args.duration));if(t>=1)return this.moveToPathLength(this.pathTotalLength*this.args.endPosition/100),!1;const i=(0,s.t)(t,this.args.movement);return this.moveToPathLength(this.pathTotalLength*(this.args.startPosition*(1-i)+this.args.endPosition*i)/100),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return!1}moveToPathLength(e){K.A.execute({path:this.domPath,item:this.item,pathItem:this.pathItem,schemeContainer:this.schemeContainer,totalLength:this.pathTotalLength,rotateItem:this.args.rotateItem,rotationOffset:this.args.rotationOffset},{distance:100*e/Math.max(1,this.pathTotalLength),rotation:0})}destroy(){this.args.inBackground||this.resultCallback()}}const ee={name:"Move Along Path",description:"Moves item along the outline of the other item. It is best to use this effect when moving item along the custom curve",args:{path:{name:"Path",type:"element",value:null},movement:{name:"Movement",type:"choice",value:"ease-in-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"]},duration:{name:"Duration (sec)",type:"number",value:2,min:0},startPosition:{name:"Start position (%)",type:"number",value:0,description:"Initial position on the path in percentage to its total length"},endPosition:{name:"End position (%)",type:"number",value:100,description:"Final position on the path in percentage to its total length"},rotateItem:{name:"Rotate item",type:"boolean",value:!1,description:"Adjust rotation of the item to path"},rotationOffset:{name:"Rotation offset",type:"number",value:0,description:"Rotation angle offset",depends:{rotateItem:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){if(e)return(0,r.N4)(i.editorId,new J(e,t,i,s),e.id,this.name),void(t.inBackground&&s());s()}};class te extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.elapsedTime=0,this.itemInitialPosition={x:this.item.area.x,y:this.item.area.y},this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition(),this._t=0}init(){return!0}pickRandomPosition(){const e=Math.random()*Math.PI*2,t=Math.random()*this.args.radius;return{x:t*Math.cos(e)+this.itemInitialPosition.x,y:t*Math.sin(e)+this.itemInitialPosition.y}}play(e){if(this.args.duration>1e-5&&this.elapsedTime<1e3*this.args.duration){this.elapsedTime+=e,this._t+=e*this.args.speed/1e3,this._t>=1&&(this._t=0,this.point1={x:this.item.area.x,y:this.item.area.y},this.point2=this.pickRandomPosition(),this.point3=this.pickRandomPosition());const t=(0,s.t)(this._t,"ease-in-out");return this.item.area.x=Math.pow(1-t,2)*this.point1.x+2*(1-t)*t*this.point2.x+t*t*this.point3.x,this.item.area.y=Math.pow(1-t,2)*this.point1.y+2*(1-t)*t*this.point2.y+t*t*this.point3.y,this.schemeContainer.updateChildTransforms(this.item),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!0}return this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.updateChildTransforms(this.item),a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),this.schemeContainer.readjustItemAndDescendants(this.item.id),!1}destroy(){this.item.area.x=this.itemInitialPosition.x,this.item.area.y=this.itemInitialPosition.y,this.schemeContainer.updateChildTransforms(this.item),this.schemeContainer.readjustItemAndDescendants(this.item.id),this.args.inBackground||this.resultCallback()}}const ie={name:"Move Randomly",description:"Moves item in a chaotic manner around its original location",args:{radius:{name:"Moving Radius",type:"number",value:20,description:"Radius within which it will perform random movements"},speed:{name:"Moving Speed",type:"number",value:1,description:"Speed of each random movements"},duration:{name:"Duration (sec)",type:"number",value:2},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){if(e)return(0,r.N4)(i.editorId,new te(e,t,i,s),e.id,this.name),void(t.inBackground&&s());s()}},ne={name:"Wait",description:"Waits for specified amount of time until the next function",multiItem:!0,args:{time:{type:"number",value:.1,name:"Time (s)",description:"Number of seconds for which it should wait until executing next action in the list"}},argsToShortString:e=>""+e.time,execute(e,t,i,n,r){setTimeout(r,1e3*t.time)}},re=[],se={name:"Toggle",description:"Hides all other items on screen, leaving only the selected item visible",args:{},execute(e,t,i,n,r){const s={itemId:e.id,allItems:{}};(0,O.jJ)(i.getTopLevelItems(),(t=>{s.allItems[t.id]=t.visible,t.id!==e.id&&(t.visible=!1,a.A.item.changed.specific.$emit(i.editorId,t.id))})),0!==re.length&&re[re.length-1].itemId===e.id||re.push(s),e.visible=!0,0===e.opacity&&(e.opacity=100),a.A.item.changed.specific.$emit(i.editorId,e.id),r()}},oe={name:"Untoggle",description:'Restores previous state of items before using "Toggle" function',args:{},execute(e,t,i,n,r){const s=re.length>0?re.pop():null;s&&(0,O.jJ)(i.getTopLevelItems(),(e=>{e.visible=s.allItems[e.id],a.A.item.changed.specific.$emit(i.editorId,e.id)})),r()}},ae={name:"Play Frames",description:"Triggers animations in specified frame player",supportedShapes:["frame_player"],args:{startFrame:{type:"number",value:1,min:1,name:"Starting frame"},partial:{type:"boolean",value:!1,name:"Play partial",description:"Play only until specified stop frame"},stopFrame:{type:"number",value:1,min:1,name:"Stop frame",depends:{partial:!0}}},argsToShortString:e=>`from ${e.startFrame} `+(e.partial?`till ${e.stopFrame}`:"till end"),execute(e,t,i,n,s){if(!e)return void s();const o=i.getFrameAnimation(e.id);o?(o.setFrame(t.startFrame),t.partial?o.setStopFrame(t.stopFrame):o.setStopFrame(-1),(0,r.N4)(i.editorId,o,e.id,"frame-player"),s()):s()}},le={name:"Stop Frame Player",description:"Stops currently running animation in specified frame player",supportedShapes:["frame_player"],execute(e,t,i,n,r){if(!e)return void r();const s=i.getFrameAnimation(e.id);s?(s.enabled=!1,r()):r()}},ce={name:"Load component",description:'Triggers loading of component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,i,n,r){setTimeout((()=>{e&&"component"!==!e.shape?(a.A.component.loadRequested.specific.$emit(i.editorId,e.id,e,i,n),r()):r()}))}};var he=i(711);const de={name:"Destroy component",description:'Removes all the loaded items of the component. Applicable to "component" shapes only',args:{},supportedShapes:["component"],execute(e,t,i,n,r){try{(0,h.zD)(e._childItems,(e=>{n.clearEventsForItem(e.id)})),e._childItems=[],n.emitItemEvent(e.id,he.C),a.A.item.changed.specific.$emit(i.editorId,e.id)}catch(e){console.error(e)}r()}},ue={name:"Toggle in group",description:"Hides all other items by specified tag, leaving only the specified item visible",args:{group:{name:"Tag",type:"element",description:"Tag representing a group of items that will be hidden instead of the toggled item"}},argsToShortString:e=>e.group?e.group:"...",multiItem:!0,execute(e,t,i,n,r){const s=i.findElementsBySelector(t.group);(0,O.jJ)(s,(t=>{(0,O.I6)(e,(e=>e.id===t.id))||(t.visible=!1,a.A.item.changed.specific.$emit(i.editorId,t.id))})),(0,O.jJ)(e,(e=>{e.visible=!0,0===e.opacity&&(e.opacity=100),a.A.item.changed.specific.$emit(i.editorId,e.id)})),r()}};var pe=i(7540),fe=i(465),me=i(2958),ge=i(1210);const ye={name:"Copy events",description:"Copies all events except init from the source item to destination items",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy events from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const r=i.findElementsBySelector(t.destination);e.behavior&&Array.isArray(e.behavior.events)&&r.forEach((t=>{e.behavior.events.forEach((e=>{if(e.event!==me.A.standardEvents.init.id){const r=(0,ge.V)(i,n,t,e.actions);n.subscribeItemEvent(t.id,t.name,e.event,r)}}))}))}catch(e){console.error(e)}r()}else r()}},ve={name:"Repeat",args:{name:{name:"Name",type:"string",value:"",description:'Unique name of the repeater, with which it can be identified in the "Stop repeater" function'},forever:{name:"Run forever",type:"boolean",value:!0},count:{name:"Number of repeatitions",type:"number",value:10,min:0,depends:{forever:!1}}},argsToShortString:e=>e.forever?"forever":`${e.count} times`,execute(e,t,i,n,r,s,o){if(!s)return void r();const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`,h=`repeaterCounter_${a}`,d=`repeaterStartTime_${a}`,u=()=>{delete s.meta[h],delete s.meta[d],delete s.meta[l],delete s.meta[c]};if(s.meta.hasOwnProperty(h)||(t.forever?s.meta[h]=-1:s.meta[h]=t.count,s.meta[d]=Date.now()),0===s.meta[h]||s.meta[c])u();else{const e=t.forever?Math.abs(s.meta[h]):Math.abs(t.count-s.meta[h]),i=Date.now()-s.meta[d];if(i>0&&1e3*e/i>30)return u(),void r();s.meta[h]-=1,s.meta[l]=!0,setTimeout((()=>{n.emitItemEvent(s.id,o)}))}r()}},xe={name:"Stop repeater",args:{name:{name:"Name",type:"string",value:"",description:"Unique name of the repeater, which should be stopped"}},argsToShortString:e=>e.name?e.name:"...",execute(e,t,i,n,r,s,o){const a=t.name?t.name:o,l=`repeaterStarted_${a}`,c=`repeaterStopped_${a}`;e.meta[l]&&(e.meta[c]=!0),r()}},be={name:"Copy links",description:"Copies all links from the source item to destination items. It does not replace exsiting links, but adds new links from the source item",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy links from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const n=i.findElementsBySelector(t.destination);if(!Array.isArray(e.links)||0===e.links.length)return void r();n.forEach((t=>{Array.isArray(t.links)||(t.links=[]),t.links=t.links.concat(e.links)}))}catch(e){console.error(e)}r()}else r()}},we={name:"Copy description",description:"Copies description from the source item to destination items. It does not replace exsiting description, but adds to the existing one",args:{destination:{name:"Destination",type:"element",value:null,description:"Other item or an item group to which you want to copy description from the source"}},argsToShortString(e,t){if(e.destination){if(e.destination.startsWith("tag:"))return e.destination;const i=t.findFirstElementBySelector(e.destination);if(i)return i.name}return"..."},execute(e,t,i,n,r){if(e){try{const n=i.findElementsBySelector(t.destination);if(!e.description)return void r();n.forEach((t=>{t.description+=e.description}))}catch(e){console.error(e)}r()}else r()}},Oe={name:"Transform Screen (Hidden)",description:"Animates changing screen transform",args:{x:{name:"x",type:"number",value:0},y:{name:"y",type:"number",value:0},scale:{name:"scale",type:"number",value:0},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},argsToShortString:e=>e.animated?`animated, ${e.animationDuration} sec`:"instant",execute(e,t,i,n,o){t.inBackground&&o();const l=i.screenTransform.x,c=i.screenTransform.y,h=i.screenTransform.scale;(0,r.N4)(i.editorId,new s.Ay({durationMillis:500,animationType:"ease-in-out",update:e=>{i.screenTransform.scale=h*(1-e)+t.scale*e,i.screenTransform.x=l*(1-e)+t.x*e,i.screenTransform.y=c*(1-e)+t.y*e},destroy:()=>{a.A.screenTransformUpdated.$emit(i.editorId,i.screenTransform),t.inBackground||o()}}),"screen","screen-transform")}};class Se extends A.A{constructor(e,t,i,n,r,s,o,a){super(),this.item=e,this.args=o,this.resultCallback=a,this.domContainer=t,this.editorId=i,this.time=0,this.color=r,this.strokeSize=s,this.supportsStrokeShapeProps=n,this.paths=[],this.totalPathsLength=0,this.srcSelfOpacity=this.item.selfOpacity,this.targetSelfOpacity=this.item.selfOpacity,this.targetStrokeSize=1,n&&(this.targetStrokeSize=this.item.shapeProps.strokeSize)}init(){if(!this.domContainer)return!1;const e=l.A.find(this.item.shape);if(!e)return!1;this.args.revealItem&&this.item.selfOpacity<1&&(this.targetSelfOpacity=100,this.supportsStrokeShapeProps&&(this.item.shapeProps.strokeSize=0,a.A.item.changed.specific.$emit(this.editorId,this.item.id)));const t=e.computePath(this.item);if(!t)return!1;this.paths=[],this.totalPathsLength=0;let i=0;return function(e){const t=e.split("M"),i=[];return t.forEach((e=>{(e=e.trim())&&i.push("M "+e)})),i}(t).forEach((e=>{const t=this.svg("path",{d:e,"stroke-width":this.strokeSize||1,stroke:this.color,fill:"none","stroke-linejoin":"round"}),n=t.getTotalLength();this.paths.push({domPath:t,length:n,offset:i}),this.totalPathsLength+=n,this.domContainer.appendChild(t),t.setAttribute("stroke-dasharray",n),t.setAttribute("stroke-dashoffset",n),i+=n})),!0}play(e){this.time+=e;let t=1;if(w.A.tooSmall(this.args.duration)||(t=this.time/(1e3*this.args.duration)),.5<=t<=1){const e=2*(t-.5);this.item.selfOpacity=this.srcSelfOpacity*(1-e)+this.targetSelfOpacity*e}const i=t<1;let n=i?this.totalPathsLength*t:this.totalPathsLength*(t-1);for(let e=0;e<this.paths.length;e++){const t=this.paths[e].offset+this.paths[e].length-n;if(t>0){this.paths[e].domPath.setAttribute("stroke-dashoffset",Math.floor(i?t:this.paths[e].length+t)),e>0&&this.paths[e-1].domPath.setAttribute("stroke-dashoffset",i?0:this.paths[e-1].length);break}}if(this.args.twoWay){if(t>2)return!1}else if(t>1)return!1;return!0}destroy(){this.item.shapeProps.selfOpacity=this.targetSelfOpacity,this.supportsStrokeShapeProps&&(this.item.shapeProps.strokeSize=this.targetStrokeSize,a.A.item.changed.specific.$emit(this.editorId,this.item.id)),this.args.inBackground||this.resultCallback(),this.paths.forEach((e=>{this.domContainer.removeChild(e.domPath)}))}}const ke={name:"Draw Effect",description:"Animates outline by simulating a drawing effect",args:{customStroke:{name:"Override stroke",type:"boolean",value:!1,description:"Allows to override the stroke of the item and use custom color and stroke size"},color:{name:"Color",type:"color",value:"rgba(255,0,0,1.0)",depends:{customStroke:!0}},strokeSize:{name:"Stroke size",type:"number",value:2,depends:{customStroke:!0}},duration:{name:"Duration (sec)",type:"number",value:2},twoWay:{name:"Two way",type:"boolean",value:!1},revealItem:{name:"Reveal item",type:"boolean",value:!0,description:"If item was hidden it will slowly reveal it while drawing its outline. Only works if the item was hidden before calling this function"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){e.visible||(e.visible=!0),e.opacity<1&&(e.selfOpacity=e.opacity,e.opacity=100),a.A.item.changed.specific.$emit(i.editorId,e.id,"visible");let o=t.color,c=t.strokeSize;const h=l.A.find(e.shape),d=l.A.getShapeArgs(h),u=d.strokeColor&&d.strokeSize&&"color"===d.strokeColor.type&&"number"===d.strokeSize.type;!t.customStroke&&u&&(o=e.shapeProps.strokeColor,c=e.shapeProps.strokeSize),e&&function(e,t,i=500){const n=`animation-container-${e}`;let r=document.getElementById(n);if(r)t(r);else{const e=performance.now(),s=setInterval((()=>{performance.now()-e>i&&(clearInterval(s),t(null)),r=document.getElementById(n),r&&(clearInterval(s),t(r))}),10)}}(e.id,(n=>{const a=new Se(e,n,i.editorId,u,o,c,t,s);(0,r.N4)(i.editorId,a,e.id,this.name)})),t.inBackground&&s()}},Pe={name:"Size (Width)",description:"Changes width of an item",args:{width:{name:"Width",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:1,depends:{animated:!0}},animationType:{name:"Animation Type",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},execute(e,t,i,n,o){if(e){if(t.animated){const n=e.area.w;return(0,r.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.duration,animationType:t.animationType,update:r=>{e.area.w=n*(1-r)+t.width*r,i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)},destroy:()=>{t.inBackground||o()}}),e.id,this.name),void(t.inBackground&&o())}e.area.w=t.width,i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}o()}},Ce={name:"Size (Height)",description:"Changes height of an item",args:{height:{name:"Height",type:"number",value:50},animated:{name:"Animated",type:"boolean",value:!1},duration:{name:"Duration (sec)",type:"number",value:1,depends:{animated:!0}},animationType:{name:"Animation Type",type:"choice",value:"linear",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0}},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions",depends:{animated:!0}}},execute(e,t,i,n,o){if(e){if(t.animated){const n=e.area.h;return(0,r.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.duration,animationType:t.animationType,update:r=>{e.area.h=n*(1-r)+t.height*r,i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)},destroy:()=>{t.inBackground||o()}}),e.id,this.name),void(t.inBackground&&o())}e.area.h=t.height,i.updateChildTransforms(e),a.A.item.changed.specific.$emit(i.editorId,e.id),i.readjustItemAndDescendants(e.id)}o()}};var Ae=i(333),Ie=i(6635);const Te={props:{options:{type:Array,required:!0},value:{type:String,default:null},hoverEffect:{type:Boolean,default:!0},searchEnabled:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},autoFocusSearch:{type:Boolean,default:!0},inline:{type:Boolean,default:!1},width:{type:Number,default:0},borderless:{type:Boolean,default:!1}},mounted(){document.body.addEventListener("click",this.onBodyClick),document.body.addEventListener("keydown",this.onGlobalKeydown)},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick),document.body.removeEventListener("keydown",this.onGlobalKeydown)},data(){let e=null;return this.value&&(e=(0,O.I6)(this.options,(e=>e.name===this.value))),{shown:!1,lastTimeClicked:0,searchKeyword:"",x:0,y:0,maxHeight:300,searchTextfieldHeight:30,maxWidth:400,elementRect:null,selectedOption:e,isAbove:!1,filteredOptions:[],hoveredOption:{shown:!1,title:"",text:"",x:0,y:0,w:200,h:200,idx:-1}}},methods:{updateFilteredOptions(){this.hoveredOption.idx=-1,this.filteredOptions=this.filterOptions()},filterOptions(){return(0,O.pb)(this.options,(e=>e.name.toLowerCase().indexOf(this.searchKeyword.toLowerCase())>=0))},onKeyArrowDown(){this.hoveredOption.idx=Math.min(this.hoveredOption.idx+1,this.filteredOptions.length),this.toggleHoverOptionByKeyboard()},onKeyArrowUp(){this.hoveredOption.idx=Math.max(0,this.hoveredOption.idx-1),this.toggleHoverOptionByKeyboard()},toggleHoverOptionByKeyboard(){if(this.hoveredOption.idx>=0&&this.hoveredOption.idx<this.filteredOptions.length){this.toggleHoverOption(this.filteredOptions[this.hoveredOption.idx]);const e=this.$refs.container.querySelectorAll("ul.__options li");e&&this.hoveredOption.idx>=0&&this.hoveredOption.idx<e.length&&e[this.hoveredOption.idx].scrollIntoView()}},toggleDropdown(e){if(this.updateFilteredOptions(),this.searchKeyword="",this.disabled)return;const t=this.$refs.container.getBoundingClientRect();this.elementRect=t,this.lastTimeClicked=(new Date).getTime(),this.shown=!this.shown,this.shown?(this.emitToggled(),this.$nextTick((()=>{this.readjustDropdownPopup(),this.$refs.searchTextfield&&this.autoFocusSearch&&this.$refs.searchTextfield.focus()}))):this.emitHidden()},emitToggled(){this.$emit("dropdown-toggled")},emitHidden(){this.$emit("dropdown-hidden")},readjustDropdownPopup(){const e=this.$refs.dropdownPopup;if(!e||!this.elementRect)return;const t=e.getBoundingClientRect().width,i=e.getBoundingClientRect().height;let n=Math.max(0,this.elementRect.x),r=Math.max(0,this.elementRect.bottom),s=n+t,o=r+i+this.searchTextfieldHeight;s>window.innerWidth?this.x=n+window.innerWidth-s:this.x=n,o>window.innerHeight?window.innerHeight-r-this.searchTextfieldHeight>r?(this.y=r,this.maxHeight=window.innerHeight-r-this.searchTextfieldHeight,this.isAbove=!1):(this.y=Math.max(5,r-i-this.elementRect.height),this.maxHeight=Math.max(100,Math.min(300,r-this.y-this.searchTextfieldHeight-5)),this.isAbove=!0):(this.y=r,this.isAbove=!1)},updateYPosition(){if(!this.isAbove)return;const e=this.$refs.dropdownPopup.getBoundingClientRect().height,t=this.$refs.container.getBoundingClientRect().y;this.y=Math.max(5,t-e)},onOptionClicked(e){this.$emit("selected",e)},onBodyClick(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},onGlobalKeydown(e){if(!0===this.shown&&(new Date).getTime()-this.lastTimeClicked>200){if(e.srcElement&&"dropdown-search"===e.srcElement.getAttribute("data-input-type"))return;this.cancelPopup()}},cancelPopup(){this.shown&&this.emitHidden(),this.shown=!1},onEnterDown(){this.hoveredOption.idx>=0&&this.hoveredOption.idx<this.filteredOptions.length?this.onOptionClicked(this.filteredOptions[this.hoveredOption.idx]):this.filteredOptions.length>0&&this.onOptionClicked(this.filteredOptions[0]),this.cancelPopup()},onOptionMouseOver(e,t){this.hoveredOption.idx=t,this.toggleHoverOption(e)},toggleHoverOption(e){if(e.description){if(this.hoveredOption.title!==e.name||!this.hoveredOption.shown){this.hoveredOption.shown=!0,this.hoveredOption.title=e.name,this.hoveredOption.iconClass=e.iconClass,this.hoveredOption.text=e.description;const t=this.$refs.dropdownPopup;if(t){const e=t.getBoundingClientRect();let i=e.left-this.hoveredOption.w,n=e.top;i<0&&(i=e.right);let r=n+this.hoveredOption.h-window.innerHeight;r>0&&(n-=r),this.hoveredOption.x=i,this.hoveredOption.y=n}}}else this.hoveredOption.shown=!1},onOptionMouseLeave(){this.hoveredOption.shown=!1}},computed:{dropwonClickAreaStyle(){const e={};return this.inline&&this.width>0&&(e["min-width"]=`${this.width}px`),e}},watch:{value(e){this.selectedOption=(0,O.I6)(this.options,(t=>t.name===e))},searchKeyword(){this.updateFilteredOptions(),this.$nextTick((()=>{this.updateYPosition()}))}}};var $e=i(4486);const Me=(0,$e.A)(Te,(function(){var e=this,t=e._self._c;return t("div",{ref:"container",staticClass:"dropdown-container",class:{inline:e.inline,borderless:e.borderless}},[t("div",{staticClass:"dropdown-click-area",class:{"hover-effect":e.hoverEffect&&!e.disabled},style:e.dropwonClickAreaStyle,on:{click:e.toggleDropdown}},[null===e.value?e._t("default"):t("div",[e.selectedOption?t("div",[e.selectedOption.iconClass?t("i",{class:e.selectedOption.iconClass}):e._e(),e._v(" "),t("span",{style:e.selectedOption.style||{}},[e._v(" "+e._s(e.selectedOption.name)+" ")])]):t("span",[e._v("Unknown Value")])])],2),e._v(" "),e.shown?t("div",{ref:"dropdownPopup",staticClass:"dropdown-popup",style:{top:`${e.y}px`,left:`${e.x}px`,"max-width":`${e.maxWidth}px`}},[e.searchEnabled?t("input",{directives:[{name:"model",rawName:"v-model",value:e.searchKeyword,expression:"searchKeyword"}],ref:"searchTextfield",staticClass:"dropdown-search",attrs:{placeholder:"Search...","data-input-type":"dropdown-search"},domProps:{value:e.searchKeyword},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.cancelPopup()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnterDown()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onKeyArrowDown()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onKeyArrowUp()}],input:function(t){t.target.composing||(e.searchKeyword=t.target.value)}}}):e._e(),e._v(" "),t("div",{style:{"max-width":`${e.maxWidth}px`,"max-height":`${e.maxHeight}px`,overflow:"auto"}},[t("ul",{staticClass:"__options"},e._l(e.filteredOptions,(function(i,n){return t("li",{class:{hovered:n===e.hoveredOption.idx},on:{click:function(t){return e.onOptionClicked(i)},mouseover:function(t){return e.onOptionMouseOver(i,n)},mouseleave:function(t){return e.onOptionMouseLeave()}}},[i.iconClass?t("i",{class:i.iconClass}):e._e(),e._v(" "),i.html?t("div",{domProps:{innerHTML:e._s(i.html)}}):t("span",{style:i.style||{}},[e._v(" "+e._s(i.name)+" ")])])})),0)])]):e._e(),e._v(" "),e.shown&&e.hoveredOption.shown?t("div",{staticClass:"dropdown-option-tooltip",style:{top:`${e.hoveredOption.y}px`,left:`${e.hoveredOption.x}px`,width:`${e.hoveredOption.w}px`,height:`${e.hoveredOption.h}px`}},[t("h3",[e.hoveredOption.iconClass?t("i",{class:e.hoveredOption.iconClass}):e._e(),e._v("\n            "+e._s(e.hoveredOption.title)+"\n        ")]),e._v("\n        "+e._s(e.hoveredOption.text)+"\n    ")]):e._e()])}),[],!1,null,null,null).exports;function Ee(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _e(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(i),!0).forEach((function(t){De(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ee(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function De(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Le={pass:"Pass","skip-next":"Skip next","break-event":"Break event","send-event":"Send event"},Be={pass:"fa-solid fa-check","skip-next":"fa-solid fa-forward-step","break-event":"fa-solid fa-xmark","send-event":"fas fa-bell"},Re={props:{editorId:{type:String},args:{type:Object},schemeContainer:{type:Object}},components:{ScriptEditor:Ie.A,Dropdown:Me},data:()=>({conditionBranchOptions:[{id:"pass",description:"Proceeds to next action in the current event"},{id:"skip-next",description:"Skips next action in the current event"},{id:"break-event",description:"Stops execution of remaining actions for the current event"},{id:"send-event",description:"Sends event to the same item"}].map((e=>_e(_e({},e),{},{name:Le[e.id],iconClass:Be[e.id]})))}),methods:{emitArgChange(e,t){this.$emit("argument-changed",e,t)},toIcon:e=>Be[e],onSuccessSelected(e){this.$emit("argument-changed","success",e.id),"send-event"===e.id&&this.$nextTick((()=>{this.$refs.sendEventInputSuccess.focus()}))},onFailSelected(e){this.$emit("argument-changed","fail",e.id),"send-event"===e.id&&this.$nextTick((()=>{this.$refs.sendEventInputFail.focus()}))}},filters:{toPrettyName:e=>Le[e]}},Ne=(0,$e.A)(Re,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"condition-function-editor"},[e._m(0),e._v(" "),t("ScriptEditor",{attrs:{value:e.args.expression,height:100,schemeContainer:e.schemeContainer,previousScripts:[e.schemeContainer.scheme.scripts.main.source]},on:{changed:function(t){return e.emitArgChange("expression",arguments[0])}}}),e._v(" "),t("table",[t("tr",[t("td",[e._v("If true:")]),e._v(" "),t("td",[t("Dropdown",{attrs:{options:e.conditionBranchOptions,"auto-focus-search":"send-event"!==e.args.success,inline:!0,borderless:!1},on:{selected:e.onSuccessSelected}},[t("i",{class:e.toIcon(e.args.success)}),e._v(" "),t("span",[e._v(" "+e._s(e._f("toPrettyName")(e.args.success))+" ")])]),e._v(" "),"send-event"===e.args.success?t("input",{ref:"sendEventInputSuccess",staticClass:"condition-function-send-event",attrs:{type:"text"},domProps:{value:e.args.successEvent}}):e._e()],1)]),e._v(" "),t("tr",[t("td",[e._v("Else:")]),e._v(" "),t("td",[t("Dropdown",{attrs:{options:e.conditionBranchOptions,"auto-focus-search":"send-event"!==e.args.fail,inline:!0,borderless:!1},on:{selected:e.onFailSelected}},[t("i",{class:e.toIcon(e.args.fail)}),e._v(" "),t("span",[e._v(" "+e._s(e._f("toPrettyName")(e.args.fail))+" ")])]),e._v(" "),"send-event"===e.args.fail?t("input",{ref:"sendEventInputFail",staticClass:"condition-function-send-event",attrs:{type:"text"},domProps:{value:e.args.failEvent}}):e._e()],1)])])],1)}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[e._v("\n        Runs a script using SchemioScript language "),t("a",{staticClass:"link",attrs:{target:"_blank",href:"https://github.com/ishubin/schemio/blob/master/docs/Scripting.md"}},[e._v("(documentation)")]),e._v("\n        and evaluates the last executed operation as part of condition\n    ")])}],!1,null,null,null).exports;var Fe=i(6583),je=i(9719);const ze=["pass","skip-next","break-event","send-event"],Qe={name:"Condition",description:"Checkes whether user defined expressions returns true and executes specified command",args:{expression:{name:"Expression",type:"script",value:"",description:"A Schemio script expression that is executed as part of condition"},success:{name:"If true",type:"choice",value:"pass",options:ze},successEvent:{name:"Success event",type:"string",value:"",depends:{success:"send-event"},description:"Sends an event to itself if condition is true"},fail:{name:"Else",type:"choice",value:"skip-next",options:ze},failEvent:{name:"Else event",type:"string",value:"",depends:{success:"send-event"},description:"Sends an event to itself if condition is false"}},editorComponent:Ne,argsToShortString(e){const t="send-event"===e.success?`send-event "${e.successEvent}"`:e.success,i="send-event"===e.fail?`send-event "${e.failEvent}"`:e.fail;return`${t} if ${e.expression} else ${i}`},executeWithBranching(e,t,i,n,r,s,o,l,c={},h={},d={}){let u=null;try{u=(0,Fe.YK)(t.expression)}catch(e){return a.A.scriptLog.$emit(i.editorId,"error",`Error in script: ${e.message}\n${t.expression}`),void r({skip:0,break:!1})}if(!u)return void r({skip:0,break:!1});const p=(t,i)=>{"pass"===t?r({skip:0,break:!1}):"skip-next"===t?r({skip:1,break:!1}):"break-event"===t?r({skip:0,break:!0}):"send-event"===t?(n.emitItemEvent(e.id,i),r({skip:0,break:!1})):r({skip:0,break:!1})},f=(0,Ae.bW)(e,i,n);if(f.set("getEventName",(()=>o)),f.set("getEventArg",(e=>Array.isArray(l)&&e<l.length?l[e]:null)),c)for(let e in c)c.hasOwnProperty(e)&&f.set(e,c[e]);if(h)for(let t in h)if(h.hasOwnProperty(t)){let r=h[t];if(d.hasOwnProperty(t)&&"element"===d[t].type&&"string"==typeof r){const t=i.findElementsBySelector(r,e).map((e=>(0,Ae.KG)(e,i,n)));r=new je.B(...t)}f.set(t,r)}try{u.evalNode(f)?p(t.success,t.successEvent):p(t.fail,t.failEvent)}catch(e){return console.error(e),void r({skip:0,break:!1})}}};var Ue=i(7298);const qe={name:"Morph",description:"Morphs item into a destination item",args:{referenceItem:{name:"Reference Item",type:"element",value:null,description:"The item to which it should morph"},alignItems:{name:"Align items",type:"boolean",value:!1,description:"Aligns item position with reference item"},recursive:{name:"Morph child items",type:"boolean",value:!0,description:"Identify items with the same name and hierarchy and apply morphing to them as well"},ignoreVisibility:{name:"Ignore visibility",type:"boolean",value:!1,description:"Ignores the opacity and visibility in reference item. This allows you to hide the reference item"},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"]},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},argsToShortString(e,t){if(e.referenceItem){const i=t.findFirstElementBySelector(e.referenceItem);if(i)return i.name}return"..."},execute(e,t,i,n,o){const a=i.findFirstElementBySelector(t.referenceItem);if(!a)return void o();t.inBackground&&o();let l=[Ve(e,null,a,null,i.editorId,t)];t.recursive&&Array.isArray(e.childItems)&&Array.isArray(a.childItems)&&(l=l.concat(He(e.childItems,e,a.childItems,a,i.editorId,t)));const c=new s.Ay({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){},update(e){l.forEach((t=>{t(e)}))},destroy(){t.inBackground||o()}});(0,r.N4)(i.editorId,c,e.id,this.name)}};function He(e,t,i,n,r,s){const o=new Map,a=new Map;e.forEach((e=>{const t=o.has(e.name)?o.get(e.name)+1:1;o.set(e.name,t),a.set(e.name+"-"+t,e)}));const l=new Map,c=new Map;i.forEach((e=>{const t=l.has(e.name)?l.get(e.name)+1:1;l.set(e.name,t),c.set(e.name+"-"+t,e)}));let h=[];return a.forEach(((e,i)=>{if(!c.has(i))return;const o=c.get(i);h.push(Ve(e,t,o,n,r,s)),Array.isArray(e.childItems)&&Array.isArray(o.childItems)&&(h=h.concat(He(e.childItems,t,o.childItems,n,r,s)))})),h}function Ve(e,t,i,n,r,s){const c=l.A.find(e.shape),h=l.A.find(i.shape);if(!c||!h)return()=>{};const d=l.A.getShapeArgs(c),u=l.A.getShapeArgs(h),p=[];return(0,O.iV)(d,((t,n)=>{if(!u.hasOwnProperty(n)||u[n].type!==t.type)return;const r=function(e,t,i,n){const r=e.shapeProps[i],s=t.shapeProps[i];if("number"===n.type)return t=>{e.shapeProps[i]=r*(1-t)+s*t};if("color"===n.type){const t=(0,o.H0)(r),n=(0,o.H0)(s);return r=>{e.shapeProps[i]=(0,o._T)({r:t.r*(1-r)+n.r*r,g:t.g*(1-r)+n.g*r,b:t.b*(1-r)+n.b*r,a:t.a*(1-r)+n.a*r})}}if("advanced-color"===n.type&&"solid"===r.type&&r.type===s.type){const t=(0,o.H0)(r.color),n=(0,o.H0)(s.color);return r=>{e.shapeProps[i]={type:"solid",color:(0,o._T)({r:t.r*(1-r)+n.r*r,g:t.g*(1-r)+n.g*r,b:t.b*(1-r)+n.b*r,a:t.a*(1-r)+n.a*r})}}}return null}(e,i,n,t);r&&p.push(r)})),s.ignoreVisibility||(p.push(Ge(e.opacity,i.opacity,(t=>e.opacity=t))),p.push(Ge(e.selfOpacity,i.selfOpacity,(t=>e.selfOpacity=t)))),"path"===e.shape&&"path"===i.shape&&p.push(function(e,t,i,n){t||(t=We),n||(n=We);const r=[];return i.shapeProps.paths.forEach(((s,o)=>{if(o>=e.shapeProps.paths.length)return;const a=e.shapeProps.paths[o];s.points.forEach(((s,l)=>{l>=a.points.length||r.push(function(e,t,i,n,r,s,o,a){const l=Xe(e,o,t),c=Xe(i,a,n);return i=>{const n=l.x*(1-i)+c.x*i,o=l.y*(1-i)+c.y*i,a=(0,M.xS)(n,o,t),h=(0,M.Qb)(a.x,a.y,e);h.t=l.t,h.x1=l.x1,h.y1=l.y1,h.x2=l.x2,h.y2=l.y2,h.h=l.h;let d=0,u=0,p=0,f=0;"B"===l.t&&(d=l.x1,u=l.y1,p=l.x2,f=l.y2);let m=0,g=0,y=0,v=0;"B"===c.t&&(m=c.x1,g=c.y1,y=c.x2,v=c.y2),"L"===h.t&&"B"===c.t&&(h.t="B"),"B"===h.t?(h.t="B",h.x1=d*(1-i)+m*i,h.y1=u*(1-i)+g*i,h.x2=p*(1-i)+y*i,h.y2=f*(1-i)+v*i):"A"===l.t&&"A"===c.t&&(h.h=l.h*(1-i)+c.h*i);const x=(0,Ue.Sn)(h,e.area.w,e.area.h);e.shapeProps.paths[r].points[s].x=x.x,e.shapeProps.paths[r].points[s].y=x.y,e.shapeProps.paths[r].points[s].t=x.t,"B"===x.t?(e.shapeProps.paths[r].points[s].x1=x.x1,e.shapeProps.paths[r].points[s].y1=x.y1,e.shapeProps.paths[r].points[s].x2=x.x2,e.shapeProps.paths[r].points[s].y2=x.y2):"A"===x.t&&(e.shapeProps.paths[r].points[s].h=x.h)}}(e,t,i,n,o,l,a.points[l],s))}))})),e=>{r.forEach((t=>t(e)))}}(e,t,i,n)),"path"!==e.shape&&(t&&n||s.alignItems)&&(p.push(Ge(e.area.w,i.area.w,(t=>e.area.w=t))),p.push(Ge(e.area.h,i.area.h,(t=>e.area.h=t))),p.push(Ge(e.area.x,i.area.x,(t=>e.area.x=t))),p.push(Ge(e.area.y,i.area.y,(t=>e.area.y=t))),p.push(Ge(e.area.r,i.area.r,(t=>e.area.r=t)))),t=>{p.forEach((e=>e(t))),a.A.item.changed.specific.$emit(r,e.id)}}const We={area:{x:0,y:0,w:100,h:100,r:0,px:.5,py:.5,sx:1,sy:1},meta:{parentId:null,ancestorIds:[]}};function Xe(e,t,i){const n=(0,Ue.rt)(t,e.area.w,e.area.h),r=(0,M.xS)(n.x,n.y,e),s=(0,M.Qb)(r.x,r.y,i);if(s.t=n.t,"B"===n.t){const t=(0,M.xS)(n.x+n.x1,n.y+n.y1,e),r=(0,M.xS)(n.x+n.x2,n.y+n.y2,e),o=(0,M.Qb)(t.x,t.y,i),a=(0,M.Qb)(r.x,r.y,i);s.x1=o.x-s.x,s.y1=o.y-s.y,s.x2=a.x-s.x,s.y2=a.y-s.y}else"A"===n.t&&(s.h=n.h);return s}function Ge(e,t,i){return n=>{i(e*(1-n)+t*n)}}class Ye extends A.A{constructor(e,t,i,n){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.offset=0,this.time=0}init(){return!0}play(e){return this.time+=e,this.offset-=this.args.speed*e/1e3,this.item.meta.strokeOffset=this.offset,a.A.item.changed.specific.$emit(this.schemeContainer.editorId,this.item.id),!(!this.args.infinite&&this.time>1e3*this.args.duration)}destroy(){this.args.inBackground||this.resultCallback()}}const Ze={main:{hide:v,show:x,set:y,zoomToIt:C,_transformScreen:Oe,particleEffect:j,crawlEffect:T,flowEffect:{name:"Flow Animation",description:"Animates displacement of a stroke and simulates a flow animation",args:{speed:{name:"Speed",type:"number",value:30,description:"Use negative value if you want the animation to be performed backwards"},duration:{name:"Duration (sec)",type:"number",value:2,depends:{infinite:!1}},infinite:{name:"Infinite animation",type:"boolean",value:!1,description:"Plays animation indefinitely"},inBackground:{name:"In Background",type:"boolean",value:!1,description:"Play animation in background without blocking invocation of other actions"}},execute(e,t,i,n,s){e&&(0,r.N4)(i.editorId,new Ye(e,t,i,s),e.id,this.name),t.inBackground&&s()}},drawEffect:ke,blinkEffect:Q,loadComponent:ce,destroyComponent:de,move:q,moveAlongPath:ee,moveToItem:V,moveRandomly:ie,playFrames:ae,rotate:G,scale:Z,replaceItem:W,stopFramePlayer:le,stopAllAnimations:$,sendEvent:b,sendEventToParent:pe.A,sendEventToChildren:fe.A,wait:ne,toggle:se,untoggle:oe,toggleGroup:ue,copyEvents:ye,copyLinks:be,copyDescription:we,morph:qe,repeater:ve,stopRepeater:xe,sizeWidth:Pe,sizeHeight:Ce,script:Ae._b,condition:Qe}}},333:(e,t,i)=>{"use strict";i.d(t,{_b:()=>F,bW:()=>Q,KG:()=>j,rp:()=>U,bR:()=>N});var n=i(955),r=i(176),s=i(1953),o=i(8176),a=i(6583),l=i(5107),c=i(6935),h=i(465),d=i(7540),u=(i(7234),i(869)),p=i(1570),f=i(5244),m=i(2958),g=i(8728),y=i(6635),v=i(5824),x=i.n(v);const b={props:{disabled:{type:Boolean,default:!1}},data:()=>({id:x().generate(),x:0,y:0}),methods:{onMouseOver(e){this.x=e.x+10;let t=e.y+20;const i=document.getElementById(`tooltip-wrapper-${this.id}`);if(i){const n=i.getBoundingClientRect();n.height+t>window.innerHeight&&(t=e.y-n.height)}this.y=t}}};var w=i(4486);const O=(0,w.A)(b,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"tooltip",class:{disabled:e.disabled},on:{mouseover:e.onMouseOver}},[t("i",{staticClass:"tooltip-icon fas fa-info-circle"}),e._v(" "),e.disabled?e._e():t("div",{staticClass:"tooltip-wrapper",style:{left:e.x+"px",top:e.y+"px"},attrs:{id:`tooltip-wrapper-${e.id}`}},[t("div",{staticClass:"tooltip-text"},[e._t("default")],2)])])}),[],!1,null,null,null).exports;var S=i(3651);const k={props:{editorId:{type:String},args:{type:Object},schemeContainer:{type:Object},scopeArgs:{type:Array,default:()=>[]}},components:{ScriptEditor:y.A,Tooltip:O,NumberTextfield:S.A,Tooltip:O},data(){const e=this.detectScriptOptionIdx();return{knownTransitions:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],tabs:[{name:"Init",disabled:0===e,description:"Run only once before the animation starts. You can use it to set up some variables. Any variables defined in this script will be accessible in the Main script"},{name:"Main",disabled:!1,description:""},{name:"On Finish",disabled:0===e,description:"Runs at the end of animation"}],selectedTabIdx:1,scriptTypeOptions:[{name:"One time",icon:"fa-solid fa-person-running",description:"Runs script only once"},{name:"Animation",icon:"fa-solid fa-play",description:'Script is called multiple times for the duration of the animation. It has access to "t" variable (start from 0, ends at 1) which represents the relative animation time'},{name:"Infinite Loop",icon:"fa-solid fa-infinity",description:'Script is executed forever until stopped from the script itself or until the "Stop all animations" item function is called. The script has access to "deltaTime" variable which represents time in seconds between frames'}],selectedOptionIdx:e}},methods:{selectScriptTab(e){this.selectedTabIdx=e,this.$forceUpdate()},emitArgChange(e,t){this.$emit("argument-changed",e,t)},detectScriptOptionIdx(){return this.args.animated?"infinite-loop"===this.args.animationType?2:1:0},selectScriptOption(e){this.selectedOptionIdx=e,0===e?(this.emitArgChange("animated",!1),this.tabs[0].disabled=!0,this.tabs[2].disabled=!0,this.selectedTabIdx=1):1===e?(this.tabs[0].disabled=!1,this.tabs[2].disabled=!1,this.emitArgChange("animated",!0),this.emitArgChange("animationType","animation")):2===e&&(this.tabs[0].disabled=!1,this.tabs[2].disabled=!1,this.emitArgChange("animated",!0),this.emitArgChange("animationType","infinite-loop"))}}},P=(0,w.A)(k,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"script-function-editor"},[e._m(0),e._v(" "),t("ul",{staticClass:"script-options"},e._l(e.scriptTypeOptions,(function(i,n){return t("li",{staticClass:"script-option",class:{selected:n===e.selectedOptionIdx},on:{click:function(t){return e.selectScriptOption(n)}}},[t("i",{staticClass:"icon",class:i.icon}),e._v(" "),t("span",{staticClass:"name"},[e._v(e._s(i.name))]),e._v(" "),t("Tooltip",[e._v(e._s(i.description))])],1)})),0),e._v(" "),e.selectedOptionIdx>0?t("div",{staticClass:"script-parameters"},[1===e.selectedOptionIdx?t("div",{staticClass:"script-parameter"},[t("span",[e._v("Duration")]),e._v(" "),t("NumberTextfield",{attrs:{value:e.args.animationDuration},on:{changed:function(t){return e.emitArgChange("animationDuration",arguments[0])}}})],1):e._e(),e._v(" "),1===e.selectedOptionIdx?t("div",{staticClass:"script-parameter"},[t("span",[e._v("Transition")]),e._v(" "),t("select",{domProps:{value:e.args.transition},on:{input:function(t){return e.emitArgChange("transition",arguments[0].target.value)}}},e._l(e.knownTransitions,(function(i){return t("option",{domProps:{value:i}},[e._v(e._s(i))])})),0)]):e._e(),e._v(" "),t("div",{staticClass:"script-parameter"},[t("input",{attrs:{id:"chk-script-animation-in-background",type:"checkbox"},domProps:{checked:e.args.inBackground},on:{input:function(t){return e.emitArgChange("inBackground",arguments[0].target.checked)}}}),e._v(" "),t("label",{attrs:{for:"chk-script-animation-in-background"}},[e._v("In background")]),e._v(" "),t("Tooltip",[e._v("Play animation in background without blocking invocation of other actions")])],1)]):e._e(),e._v(" "),t("ul",{staticClass:"tabs tabs-file"},e._l(e.tabs,(function(i,n){return i.disabled?e._e():t("li",[t("span",{staticClass:"tab",class:{active:n===e.selectedTabIdx},on:{click:function(t){return e.selectScriptTab(n)}}},[t("i",{staticClass:"fa-solid fa-code"}),e._v("\n                "+e._s(i.name)+"\n                "),i.description?t("Tooltip",[e._v(e._s(i.description))]):e._e()],1)])})),0),e._v(" "),t("div",{staticClass:"tabs-body"},[0===e.selectedTabIdx?t("ScriptEditor",{key:"script-tab-0",attrs:{value:e.args.initScript,schemeContainer:e.schemeContainer,previousScripts:[e.schemeContainer.scheme.scripts.main.source],scopeArgs:e.scopeArgs},on:{changed:function(t){return e.emitArgChange("initScript",arguments[0])}}}):e._e(),e._v(" "),1===e.selectedTabIdx?t("ScriptEditor",{key:"script-tab-1",attrs:{value:e.args.script,schemeContainer:e.schemeContainer,previousScripts:[e.schemeContainer.scheme.scripts.main.source,e.args.initScript],scopeArgs:e.scopeArgs},on:{changed:function(t){return e.emitArgChange("script",arguments[0])}}}):e._e(),e._v(" "),2===e.selectedTabIdx?t("ScriptEditor",{key:"script-tab-2",attrs:{value:e.args.endScript,schemeContainer:e.schemeContainer,previousScripts:[e.schemeContainer.scheme.scripts.main.source,e.args.initScript],scopeArgs:e.scopeArgs},on:{changed:function(t){return e.emitArgChange("endScript",arguments[0])}}}):e._e()],1)])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"label"},[e._v("\n        Runs a script using SchemioScript language "),t("a",{staticClass:"link",attrs:{target:"_blank",href:"https://github.com/ishubin/schemio/blob/master/docs/Scripting.md"}},[e._v("(documentation)")])])}],!1,null,null,null).exports;var C=i(9719),A=i(269);function I(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function T(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?I(Object(i),!0).forEach((function(t){$(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):I(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function $(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const M=Symbol("compiledScripts"),E=!0,_="infinite-loop",D="A Schemio script expression. In animation mode this script is being executed on every animation frame";function L(e,t){const i=(0,a.YK)(t);i&&(e.args||(e.args={}),e.args[M]||(e.args[M]={}),e.args[M][t]=i)}function B(e,t,i,n){L(e,t.script),t.initScript&&L(e,t.initScript),t.endScript&&L(e,t.endScript)}function R(e,t,i,r,a,l,c,h,d={},u={},f={}){if(!e.args||!e.args[M])return void a();const m=e.args[M][t.script];if(!m)return void a();const g=e.args[M][t.initScript],y=e.args[M][t.endScript];let v=!0;const x=Q(e,i,r);for(let e in d)d.hasOwnProperty(e)&&x.set(e,d[e]);if(u)for(let t in u)if(u.hasOwnProperty(t)){let n=u[t];if(f.hasOwnProperty(t)&&"element"===f[t].type&&"string"==typeof n){const t=i.findElementsBySelector(n,e).map((e=>j(e,i,r)));n=new C.B(...t)}x.set(t,n)}x.set("getEventName",(()=>c)),x.set("getEventArg",(e=>Array.isArray(h)&&e<h.length?h[e]:null)),x.set("stop",(()=>{v=!1})),t.animationType===_?x.set("deltaTime",0):x.set("t",0),g&&g.evalNode(x);const b=()=>v,w=e=>{t.animationType===_?x.set("deltaTime",Math.min(.1,e)):x.set("t",e),m.evalNode(x)},O=()=>{y&&y.evalNode(x)};if(t.animated){if(t.animationType===_){const r=new H(e,t,i,a,w,O,b);(0,n.N4)(i.editorId,r,e.id,"script-infinite-loop-"+p.A.stringHash(t.script))}else(0,n.N4)(i.editorId,new s.Ay({durationMillis:1e3*t.animationDuration,animationType:t.transition,init(){},update(e){w(e)},destroy(){try{O()}catch(e){console.error(e)}t.inBackground||a()}}),e.id,"script_"+p.A.stringHash(t.script));t.inBackground&&a()}else{try{w(0)}catch(e){o.A.scriptLog.$emit(i.editorId,"error",e.message),console.error(`Failed executing item script: ${t.script}`,e)}a()}}function N(e,t){let i=null;return i||(i=e.scheme.scripts.functions.find((e=>e.name===t))),i?{init(e,t,n,r){B(e,i.props)},execute(e,t,n,r,s,o,a,l,c={},h={}){const d=T({},t);i.args.forEach((t=>{if("element"===t.type&&d.hasOwnProperty(t.name)&&"string"==typeof d[t.name]){const i=d[t.name],s=n.findElementsBySelector(i,e).map((e=>j(e,n,r)));d[t.name]=new C.B(...s)}})),R(e,i.props,n,r,s,0,a,l,d,c,h)}}:null}const F={name:"Script",description:"Runs user defined script using SchemioScript language.",args:{initScript:{name:"Init script",type:"script",value:"",description:"\nA script that runs before the start of animation. It is only invoked in animation mode.\n",depends:{animated:!0}},script:{name:"Script",type:"script",value:"",description:D},endScript:{name:"End Script",type:"script",value:"",description:D,depends:{animated:!0}},animated:{name:"Animated",type:"boolean",value:!1,description:'Script is called multiple times for the duration of the animation. It has access to "t" variable (start from 0, ends at 1) which represents the relative animation time'},animationType:{name:"Animation type",type:"choice",value:"animation",options:["animation",_],depends:{animated:!0}},animationDuration:{name:"Animation duration (sec)",type:"number",value:.5,depends:{animated:!0,animationType:"animation"}},transition:{name:"Transition",type:"choice",value:"ease-out",options:["linear","smooth","ease-in","ease-out","ease-in-out","bounce"],depends:{animated:!0,animationType:"animation"}},inBackground:{name:"In Background",type:"boolean",value:!1,depends:{animated:!0},description:"Play animation in background without blocking invocation of other actions"}},editorComponent:P,argsToShortString:e=>((e.initScript||"")+(e.script||"")).trim()||"edit script...",init(e,t,i,n){B(e,t)},execute(e,t,i,n,r,s,o,a,l={},c={},h={}){R(e,t,i,n,r,0,o,a,l,c,h)}};function j(e,t,i){if(!e)return null;const n=()=>{o.A.item.changed.specific.$emit(t.editorId,e.id)},r=e=>t=>{const i=parseFloat(t);isNaN(i)||(e(i),n())},s=i=>r=>{const s=parseFloat(r);isNaN(s)||(i(s),n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,E))},a=(t,i)=>{e&&e.textSlots&&e.textSlots.hasOwnProperty(t)&&(i(e.textSlots[t]),n())},l=g.A.find(e.shape),y=T({findParent:()=>{let n=null;return e&&e.meta&&(n=e.meta.parentId),j(t.findItemById(n),t,i)},getId:()=>e.id,getName:()=>e.name,getTags(){const t=Array.isArray(e.tags)?e.tags:[];return new C.B(...t)},setVar(t,i){e.args||(e.args={}),e.args.customVars||(e.args.customVars={}),e.args.customVars[t]=i},getVar:(t,i)=>e.args&&e.args.customVars&&e.args.customVars.hasOwnProperty(t)?e.args.customVars[t]:i,getPosX:()=>e.area.x,getPosY:()=>e.area.y,getPos:()=>new f.M(e.area.x,e.area.y),getWidth:()=>e.area.w,getHeight:()=>e.area.h,getAngle:()=>e.area.r,getScaleX:()=>e.area.sx,getScaleY:()=>e.area.sy,getShape:()=>e.shape,worldPoint:(t,i)=>f.M.fromPoint((0,u.xS)(t,i,e)),localPoint:(t,i)=>f.M.fromPoint((0,u.Qb)(t,i,e)),getArg:(t,i)=>e.args&&e.args.hasOwnProperty(t)?e.args[t]:i,setArg:(t,i)=>{e.args||(e.args={}),e.args[t]=i},matchWorld:(i,r,s,o)=>{const a=p.A.findTranslationMatchingWorldPoint(s,o,i,r,e.area,e.meta.transformMatrix);a&&(e.area.x=a.x,e.area.y=a.y,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,E))},getWorldPos:()=>f.M.fromPoint((0,u.xS)(e.area.px*e.area.w,e.area.py*e.area.h,e)),setWorldPos:(i,r)=>{let s=i,o=r;if(i instanceof f.M){const e=i;s=e.x,o=e.y}const a=p.A.findTranslationMatchingWorldPoint(s,o,e.area.px*e.area.w,e.area.py*e.area.h,e.area,e.meta.transformMatrix);a&&(e.area.x=a.x,e.area.y=a.y,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,E))},setAngle:s((t=>e.area.r=t)),setPosX:s((t=>e.area.x=t)),setPosY:s((t=>e.area.y=t)),setPos:(i,r)=>{let s=i,o=r;if(i instanceof f.M){const e=i;s=e.x,o=e.y}e.area.x=s,e.area.y=o,n(),t.updateChildTransforms(e),t.readjustItemAndDescendants(e.id,E)},setWidth:s((t=>e.area.w=t)),setHeight:s((t=>e.area.h=t)),setScaleX:s((t=>e.area.sx=t)),setScaleY:s((t=>e.area.sy=t)),getOpacity:()=>e.opacity,getSelfOpacity:()=>e.selfOpacity,isVisible:()=>e.visible&&0!==e.opacity,setOpacity:r((t=>e.opacity=t)),setSelfOpacity:r((t=>e.SelfOpacity=t)),getText:t=>{if(!e.textSlots||!e.textSlots[t])return"";const i=e.textSlots[t].text||"";return(0,c.V)(i.trim())},setText:(e,t)=>a(e,(e=>e.text=(0,c.A)(""+t))),setTextColor:(e,t)=>a(e,(e=>e.color=""+t)),setTextSize:(e,t)=>{isNaN(t)||a(e,(e=>e.fontSize=t))},show(){e.visible||0!==e.opacity||(e.opacity=100),e.visible=!0,n()},hide(){e.visible=!1,n()},sendEvent(t,...n){i.emitItemEvent(e.id,t,...n)},sendEventToChildren(t,...n){(0,h.B)(e,t,i,n)},sendEventToParent(n,...r){(0,d.O)(e,n,i,t,r)},findChildItemByName:n=>j(function(e,t){if(!e||!Array.isArray(e.childItems))return null;let i=[].concat(e.childItems);for(;i.length>0;){const e=i.shift();if(!e)return null;if(e.name===t)return e;Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return null}(e,n),t,i),tag(i){Array.isArray(e.tags)||(e.tags=[]),e.tags.indexOf(i)>=0||(e.tags.push(i),t.indexItemTags(e.id,[i]))},findChildItemsByTag(n){const r=z(e,n);return new C.B(...r.map((e=>j(e,t,i))))},distanceToItem:t=>function(e,t){const i=(0,u.xS)(e.area.px*e.area.w,e.area.py*e.area.h,e),n=(0,u.xS)(t.area.px*t.area.w,t.area.py*t.area.h,t);return p.A.distanceBetweenPoints(i.x,i.y,n.x,n.y)}(e,t),getValue:()=>e.args&&e.args.hasOwnProperty("value")?e.args.value:0,setValue(i){e.args||(e.args={}),e.args.value=i,o.A.item.userEvent.$emit(t.editorId,e.id,m.A.standardEvents.valueChange.id,i),n()},duplicate(n){const r=t.cloneItems([e],!0,!1)[0];n&&(r.name=n);const s=e.meta.parentId?t.findItemById(e.meta.parentId):null;return t.addItem(r,s),t.indexUserEventsForItems([r],i,(()=>{})),j(r,t,i)},remove(){t.deleteItem(e),i.clearEventsForItem(e.id)},removeChildItemsByTag(i){const n=z(e,i);t.deleteItems(n)},mount(i){i?t.remountItemInsideOtherItemAtTheBottom(e.id,i.getId()):t.remountItemToRoot(e.id),t.reindexItems()},mountChild(i){i&&(t.remountItemInsideOtherItemAtTheBottom(i.getId(),e.id),t.reindexItems())},mountRoot:()=>{t.remountItemToRoot(e.id),t.reindexItems()},getOutline:()=>function(e,t){const i=t.getSvgOutlineOfItem(e);return i?{getLength:()=>i.getTotalLength(),getWorldPointAtLength(t){const n=i.getPointAtLength(t);return f.M.fromPoint((0,u.xS)(n.x,n.y,e))}}:null}(e,t)},function(e,t,i){if(!t)return{};const n=g.A.getShapeArgs(t),r={};return(0,A.iV)(n,((t,n)=>{const s=n.substring(0,1).toUpperCase()+n.substring(1);r["set"+s]=function(e,t,i,n){return i=>{e.shapeProps[t]=i,o.A.item.changed.specific.$emit(n.editorId,e.id,"shapeProps."+t)}}(e,n,0,i),r["get"+s]=function(e,t){return()=>e.shapeProps[t]}(e,n)})),"math_block"===e.shape&&r.hasOwnProperty("setExpression")&&(r.setExpression=function(e,t,i){return n=>{if(e.meta.hasOwnProperty("delayedPropSetterTimers")||(e.meta.delayedPropSetterTimers={}),!e.meta.delayedPropSetterTimers.hasOwnProperty(t))return e.meta.delayedPropSetterTimers[t]={time:performance.now(),timerId:null,targetValue:n},void i(n);const r=e.meta.delayedPropSetterTimers[t],s=performance.now(),o=s-r.time;o>80?(r.time=s,r.timerId&&(clearTimeout(r.timerId),r.timerId=null),r.targetValue=n,i(n)):(r.value=n,r.timerId||(r.timerId=setTimeout((()=>{i(e.meta.delayedPropSetterTimers[t].value),clearTimeout(e.meta.delayedPropSetterTimers[t].timerId),e.meta.delayedPropSetterTimers[t].timerId=null}),80-o)))}}(e,"expression",r.setExpression)),r}(e,l,t));if(l&&l.scriptFunctions){const i=T(T({},y),l.scriptFunctions(t.editorId,t,e));return i.debugItem=V(i,e,t.editorId),i}return y.debugItem=V(y,e,t.editorId),y}function z(e,t){if(!e||!Array.isArray(e.childItems))return[];let i=[].concat(e.childItems);const n=[];for(;i.length>0;){const e=i.shift();if(!e)return n;Array.isArray(e.tags)&&e.tags.findIndex((e=>e===t))>=0&&n.push(e),Array.isArray(e.childItems)&&(i=i.concat(e.childItems))}return n}function Q(e,t,i){const n=j(e,t,i),r=new Map,s=t.mainScopeData||{};return new l.H(T(T(T({},s),n),{},{findItemById:e=>j(t.findItemById(e),t,i),findItemByName:e=>j(t.findItemByName(e),t,i),log:W(t.editorId)}),null,q(t,i,r))}function U(e,t){const i=new Map,n=e.mainScopeData||{};return new l.H(T(T({},n),{},{findItemById:i=>j(e.findItemById(i),e,t),findItemByName:i=>j(e.findItemByName(i),e,t),log:W(e.editorId)}),null,q(e,t,i))}function q(e,t,i){return n=>{const r=i.get(n);if(r)return r;const s=e.findItemByName(n);if(!s)return null;const o=j(s,e,t);return i.set(n,o),o}}class H extends r.A{constructor(e,t,i,n,r,s,o){super(),this.item=e,this.args=t,this.schemeContainer=i,this.resultCallback=n,this.scriptExecutor=r,this.onDestroy=s,this.shouldPlayCallback=o}init(){return this.shouldPlayCallback()}play(e){try{this.scriptExecutor(Math.min(100,e)/1e3)}catch(e){return console.error(e),!1}return this.shouldPlayCallback()}destroy(){if(this.onDestroy)try{this.onDestroy()}catch(e){console.error(e)}this.args.inBackground||this.resultCallback()}}function V(e,t,i){return()=>{let n=`Item "${t.name}"\nx = ${t.area.x} y = ${t.area.y} width = ${t.area.w} height = ${t.area.h}`;const r=(0,u.xS)(0,0,t);n+=`\nWorld: x = ${r.x} y = ${r.x}`,n+=`\nRotation: ${t.area.r}`,n+=`\nShape: ${t.shape}`,n+="\nFunctions:";for(let t in e)n+=`\n    - ${t}`;o.A.scriptLog.$emit(i,"info",n),console.log(n)}}function W(e){return(...t)=>{o.A.scriptLog.$emit(e,"info",t.join(" ")),console.log(...t)}}},465:(e,t,i)=>{"use strict";i.d(t,{A:()=>r,B:()=>s});var n=i(4804);const r={name:"Send event to children",description:"Sends specified event to all children of an item.\nThis can be used for cross-component communication.\nUsing this function you can send event into dynamic component",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,r){s(e,t.event,n,[]),r()}};function s(e,t,i,r){if("component"===e.shape&&"external"===e.shapeProps.kind){const i=(0,n.X)(e);i&&i.schemeContainer&&i.userEventBus&&o(i.schemeContainer.scheme.items,t,i.userEventBus,r)}o(e.childItems,t,i,r),o(e._childItems,t,i,r)}function o(e,t,i,n){Array.isArray(e)&&e.forEach((e=>{let r=[];Array.isArray(n)&&(r=n),i.emitItemEvent(e.id,t,...r)}))}},7540:(e,t,i)=>{"use strict";i.d(t,{A:()=>n,O:()=>r});const n={name:"Send to parent",description:"Sends custom events to parent of this item.\nIt can be used for cross-component communication",args:{event:{name:"Event",type:"string",value:"Unknown event..."}},argsToShortString:e=>e.event,execute(e,t,i,n,s){if(e.meta&&e.meta.parentId&&r(e,t.event,n),e.meta.getParentEnvironment){const i=e.meta.getParentEnvironment();i&&i.item&&i.userEventBus&&i.userEventBus.emitItemEvent(i.item.id,t.event)}s()}};function r(e,t,i,n,r){let s=[];Array.isArray(r)&&(s=r),i.emitItemEvent(e.meta.parentId,t,...s)}},2063:(e,t,i)=>{"use strict";i.d(t,{A:()=>w});var n=i(269);const r="function"==typeof btoa,s="function"==typeof Buffer,o=("function"==typeof TextDecoder&&new TextDecoder,"function"==typeof TextEncoder?new TextEncoder:void 0),a=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),l=((e=>{let t={};e.forEach(((e,i)=>t[e]=i))})(a),String.fromCharCode.bind(String)),c=("function"==typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_"))),h=r?e=>btoa(e):s?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,i,n,r,s="";const o=e.length%3;for(let o=0;o<e.length;){if((i=e.charCodeAt(o++))>255||(n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=i<<16|n<<8|r,s+=a[t>>18&63]+a[t>>12&63]+a[t>>6&63]+a[63&t]}return o?s.slice(0,o-3)+"===".substring(o):s},d=s?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let i=0,n=e.length;i<n;i+=4096)t.push(l.apply(null,e.subarray(i,i+4096)));return h(t.join(""))},u=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?l(192|t>>>6)+l(128|63&t):l(224|t>>>12&15)+l(128|t>>>6&63)+l(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return l(240|t>>>18&7)+l(128|t>>>12&63)+l(128|t>>>6&63)+l(128|63&t)},p=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,f=s?e=>Buffer.from(e,"utf8").toString("base64"):o?e=>d(o.encode(e)):e=>h(e.replace(p,u));function m(e){return e<10?"0"+e:""+e}function g(e){let t={};return(0,n.jJ)(e,((e,i)=>{"childItems"===i?t[i]=(0,n.kH)(e,g):"meta"!==i&&"_childItems"!==i&&(t[i]=e)})),t}const y={main:{source:""},functions:[]};function v(e){return null==e?null:JSON.parse(JSON.stringify(e))}function x(e,t,i,n){let r=null;r=Array.isArray(t)?t:t.split(".");let s=e,o=0;for(;o<r.length;){const e=r[o].trim();if(!e)return;if(!(o<r.length-1))return void(n&&s.hasOwnProperty(e)?delete s[e]:s[e]=i);if(s.hasOwnProperty(e)||(s[e]={}),s=s[e],"object"!=typeof s)return;o+=1}}function b(e,t,i){const n=Math.cos(i*Math.PI/180),r=Math.sin(i*Math.PI/180);return{x:e*n-t*r,y:e*r+t*n}}const w={formatDateAndTime:function(e){var t=new Date(e);return`${m(t.getFullYear())}.${m(t.getMonth())}.${m(t.getDate())} ${m(t.getHours())}:${m(t.getMinutes())}`},clone:v,extendObject:function e(t,i){return(0,n.jJ)(i,((i,n)=>{t.hasOwnProperty(n)?"object"==typeof i&&e(t[n],i):t[n]=v(i)})),t},sanitizeScheme:function(e){const t=(0,n.kH)(e.items,g);return{id:e.id,name:e.name,description:e.description,tags:e.tags,modifiedTime:e.modifiedTime,scripts:e.scripts||y,items:t,style:e.style||{}}},getObjectProperty:function(e,t){if(e){let i=null;i=Array.isArray(t)?t:t.split(".");let n=e,r=0;for(;r<i.length;){const e=i[r].trim();if(!e)return;if(r<i.length-1){if(n=n[e],"object"!=typeof n)return}else if(n.hasOwnProperty(e))return n[e];r+=1}}},setObjectProperty:function(e,t,i){x(e,t,i,!1)},deleteObjectProperty:function(e,t){x(e,t,null,!0)},rotateVector:b,rotatePointAroundCenter:function(e,t,i,n,r){const s=b(e-n,t-r,i);return{x:n+s.x,y:r+s.y}},enumerateConstants:function(e){const t=[];for(let i in e)e.hasOwnProperty(i)&&i===i.toUpperCase()&&t.push(e[i]);return t},domHasParentNode:function e(t,i){return!!i(t)||!!t.parentElement&&e(t.parentElement,i)},domFindAncestorByClassUntil:function e(t,i,n){return t.classList.contains(i)?t:n&&n(t)?null:t.parentElement?e(t.parentElement,i,n):null},forceDownload:function(e,t,i){const n=`data:${t};base64,${((e,t=!1)=>t?c(f(e)):f(e))(i)}`,r=document.createElement("a");document.body.appendChild(r);try{r.href=n,r.download=e,r.click()}catch(e){console.error(e)}setTimeout((()=>document.body.removeChild(r)),100)},equals:function e(t,i){const n=typeof t;if(n!==typeof i)return!1;if(Array.isArray(t)){if(t.length!==i.length)return!1;for(let n=0;n<t.length;n++)if(!e(t[n],i[n]))return!1;return!0}if("object"===n){for(let n in t)if(t.hasOwnProperty(n)&&!e(t[n],i[n]))return!1;for(let e in i)if(!t.hasOwnProperty(e))return!1;return!0}return t===i},hashString:function(e){let t=0;if(0==e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t&=t;return t}}},4744:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===i}(e)}(e)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(e,t){return!1!==t.clone&&t.isMergeableObject(e)?a((i=e,Array.isArray(i)?[]:{}),e,t):e;var i}function r(e,t,i){return e.concat(t).map((function(e){return n(e,i)}))}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function o(e,t){try{return t in e}catch(e){return!1}}function a(e,i,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||t,l.cloneUnlessOtherwiseSpecified=n;var c=Array.isArray(i);return c===Array.isArray(e)?c?l.arrayMerge(e,i,l):function(e,t,i){var r={};return i.isMergeableObject(e)&&s(e).forEach((function(t){r[t]=n(e[t],i)})),s(t).forEach((function(s){(function(e,t){return o(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(o(e,s)&&i.isMergeableObject(t[s])?r[s]=function(e,t){if(!t.customMerge)return a;var i=t.customMerge(e);return"function"==typeof i?i:a}(s,i)(e[s],t[s],i):r[s]=n(t[s],i))})),r}(e,i,l):n(i,l)}a.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,i){return a(e,i,t)}),{})};var l=a;e.exports=l},5413:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0,function(e){e.Root="root",e.Text="text",e.Directive="directive",e.Comment="comment",e.Script="script",e.Style="style",e.Tag="tag",e.CDATA="cdata",e.Doctype="doctype"}(i=t.ElementType||(t.ElementType={})),t.isTag=function(e){return e.type===i.Tag||e.type===i.Script||e.type===i.Style},t.Root=i.Root,t.Text=i.Text,t.Directive=i.Directive,t.Comment=i.Comment,t.Script=i.Script,t.Style=i.Style,t.Tag=i.Tag,t.CDATA=i.CDATA,t.Doctype=i.Doctype},9466:function(e,t){var i,n;void 0===(n="function"==typeof(i=function(){return function(e){function t(e){return" "===e||"\t"===e||"\n"===e||"\f"===e||"\r"===e}function i(t){var i,n=t.exec(e.substring(m));if(n)return i=n[0],m+=i.length,i}for(var n,r,s,o,a,l=e.length,c=/^[ \t\n\r\u000c]+/,h=/^[, \t\n\r\u000c]+/,d=/^[^ \t\n\r\u000c]+/,u=/[,]+$/,p=/^\d+$/,f=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,m=0,g=[];;){if(i(h),m>=l)return g;n=i(d),r=[],","===n.slice(-1)?(n=n.replace(u,""),v()):y()}function y(){for(i(c),s="",o="in descriptor";;){if(a=e.charAt(m),"in descriptor"===o)if(t(a))s&&(r.push(s),s="",o="after descriptor");else{if(","===a)return m+=1,s&&r.push(s),void v();if("("===a)s+=a,o="in parens";else{if(""===a)return s&&r.push(s),void v();s+=a}}else if("in parens"===o)if(")"===a)s+=a,o="in descriptor";else{if(""===a)return r.push(s),void v();s+=a}else if("after descriptor"===o)if(t(a));else{if(""===a)return void v();o="in descriptor",m-=1}m+=1}}function v(){var t,i,s,o,a,l,c,h,d,u=!1,m={};for(o=0;o<r.length;o++)l=(a=r[o])[a.length-1],c=a.substring(0,a.length-1),h=parseInt(c,10),d=parseFloat(c),p.test(c)&&"w"===l?((t||i)&&(u=!0),0===h?u=!0:t=h):f.test(c)&&"x"===l?((t||i||s)&&(u=!0),d<0?u=!0:i=d):p.test(c)&&"h"===l?((s||i)&&(u=!0),0===h?u=!0:s=h):u=!0;u?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+a+"'."):(m.url=n,t&&(m.w=t),i&&(m.d=i),s&&(m.h=s),g.push(m))}}})?i.apply(t,[]):i)||(e.exports=n)},8633:e=>{var t=String,i=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t,blackBright:t,redBright:t,greenBright:t,yellowBright:t,blueBright:t,magentaBright:t,cyanBright:t,whiteBright:t,bgBlackBright:t,bgRedBright:t,bgGreenBright:t,bgYellowBright:t,bgBlueBright:t,bgMagentaBright:t,bgCyanBright:t,bgWhiteBright:t}};e.exports=i(),e.exports.createColors=i},396:(e,t,i)=>{"use strict";let n=i(7793);class r extends n{constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}}e.exports=r,r.default=r,n.registerAtRule(r)},9371:(e,t,i)=>{"use strict";let n=i(3152);class r extends n{constructor(e){super(e),this.type="comment"}}e.exports=r,r.default=r},7793:(e,t,i)=>{"use strict";let n,r,s,o,{isClean:a,my:l}=i(4151),c=i(5238),h=i(9371),d=i(3152);function u(e){return e.map((e=>(e.nodes&&(e.nodes=u(e.nodes)),delete e.source,e)))}function p(e){if(e[a]=!1,e.proxyOf.nodes)for(let t of e.proxyOf.nodes)p(t)}class f extends d{append(...e){for(let t of e){let e=this.normalize(t,this.last);for(let t of e)this.proxyOf.nodes.push(t)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t,i,n=this.getIterator();for(;this.indexes[n]<this.proxyOf.nodes.length&&(t=this.indexes[n],i=e(this.proxyOf.nodes[t],t),!1!==i);)this.indexes[n]+=1;return delete this.indexes[n],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:e[t]?"each"===t||"string"==typeof t&&t.startsWith("walk")?(...i)=>e[t](...i.map((e=>"function"==typeof e?(t,i)=>e(t.toProxy(),i):e))):"every"===t||"some"===t?i=>e[t](((e,...t)=>i(e.toProxy(),...t))):"root"===t?()=>e.root().toProxy():"nodes"===t?e.nodes.map((e=>e.toProxy())):"first"===t||"last"===t?e[t].toProxy():e[t]:e[t],set:(e,t,i)=>(e[t]===i||(e[t]=i,"name"!==t&&"params"!==t&&"selector"!==t||e.markDirty()),!0)}}index(e){return"number"==typeof e?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let i,n=this.index(e),r=this.normalize(t,this.proxyOf.nodes[n]).reverse();n=this.index(e);for(let e of r)this.proxyOf.nodes.splice(n+1,0,e);for(let e in this.indexes)i=this.indexes[e],n<i&&(this.indexes[e]=i+r.length);return this.markDirty(),this}insertBefore(e,t){let i,n=this.index(e),r=0===n&&"prepend",s=this.normalize(t,this.proxyOf.nodes[n],r).reverse();n=this.index(e);for(let e of s)this.proxyOf.nodes.splice(n,0,e);for(let e in this.indexes)i=this.indexes[e],n<=i&&(this.indexes[e]=i+s.length);return this.markDirty(),this}normalize(e,t){if("string"==typeof e)e=u(n(e).nodes);else if(Array.isArray(e)){e=e.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if("root"===e.type&&"document"!==this.type){e=e.nodes.slice(0);for(let t of e)t.parent&&t.parent.removeChild(t,"ignore")}else if(e.type)e=[e];else if(e.prop){if(void 0===e.value)throw new Error("Value field is missed in node creation");"string"!=typeof e.value&&(e.value=String(e.value)),e=[new c(e)]}else if(e.selector)e=[new r(e)];else if(e.name)e=[new s(e)];else{if(!e.text)throw new Error("Unknown node type in node creation");e=[new h(e)]}return e.map((e=>(e[l]||f.rebuild(e),(e=e.proxyOf).parent&&e.parent.removeChild(e),e[a]&&p(e),void 0===e.raws.before&&t&&void 0!==t.raws.before&&(e.raws.before=t.raws.before.replace(/\S/g,"")),e.parent=this.proxyOf,e)))}prepend(...e){e=e.reverse();for(let t of e){let e=this.normalize(t,this.first,"prepend").reverse();for(let t of e)this.proxyOf.nodes.unshift(t);for(let t in this.indexes)this.indexes[t]=this.indexes[t]+e.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){let t;e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);for(let i in this.indexes)t=this.indexes[i],t>=e&&(this.indexes[i]=t-1);return this.markDirty(),this}replaceValues(e,t,i){return i||(i=t,t={}),this.walkDecls((n=>{t.props&&!t.props.includes(n.prop)||t.fast&&!n.value.includes(t.fast)||(n.value=n.value.replace(e,i))})),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each(((t,i)=>{let n;try{n=e(t,i)}catch(e){throw t.addToError(e)}return!1!==n&&t.walk&&(n=t.walk(e)),n}))}walkAtRules(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("atrule"===i.type&&e.test(i.name))return t(i,n)})):this.walk(((i,n)=>{if("atrule"===i.type&&i.name===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("atrule"===e.type)return t(e,i)})))}walkComments(e){return this.walk(((t,i)=>{if("comment"===t.type)return e(t,i)}))}walkDecls(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("decl"===i.type&&e.test(i.prop))return t(i,n)})):this.walk(((i,n)=>{if("decl"===i.type&&i.prop===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("decl"===e.type)return t(e,i)})))}walkRules(e,t){return t?e instanceof RegExp?this.walk(((i,n)=>{if("rule"===i.type&&e.test(i.selector))return t(i,n)})):this.walk(((i,n)=>{if("rule"===i.type&&i.selector===e)return t(i,n)})):(t=e,this.walk(((e,i)=>{if("rule"===e.type)return t(e,i)})))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}}f.registerParse=e=>{n=e},f.registerRule=e=>{r=e},f.registerAtRule=e=>{s=e},f.registerRoot=e=>{o=e},e.exports=f,f.default=f,f.rebuild=e=>{"atrule"===e.type?Object.setPrototypeOf(e,s.prototype):"rule"===e.type?Object.setPrototypeOf(e,r.prototype):"decl"===e.type?Object.setPrototypeOf(e,c.prototype):"comment"===e.type?Object.setPrototypeOf(e,h.prototype):"root"===e.type&&Object.setPrototypeOf(e,o.prototype),e[l]=!0,e.nodes&&e.nodes.forEach((e=>{f.rebuild(e)}))}},3614:(e,t,i)=>{"use strict";let n=i(8633),r=i(9746);class s extends Error{constructor(e,t,i,n,r,o){super(e),this.name="CssSyntaxError",this.reason=e,r&&(this.file=r),n&&(this.source=n),o&&(this.plugin=o),void 0!==t&&void 0!==i&&("number"==typeof t?(this.line=t,this.column=i):(this.line=t.line,this.column=t.column,this.endLine=i.line,this.endColumn=i.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,s)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",void 0!==this.line&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;null==e&&(e=n.isColorSupported),r&&e&&(t=r(t));let i,s,o=t.split(/\r?\n/),a=Math.max(this.line-3,0),l=Math.min(this.line+2,o.length),c=String(l).length;if(e){let{bold:e,gray:t,red:r}=n.createColors(!0);i=t=>e(r(t)),s=e=>t(e)}else i=s=e=>e;return o.slice(a,l).map(((e,t)=>{let n=a+1+t,r=" "+(" "+n).slice(-c)+" | ";if(n===this.line){let t=s(r.replace(/\d/g," "))+e.slice(0,this.column-1).replace(/[^\t]/g," ");return i(">")+s(r)+e+"\n "+t+i("^")}return" "+s(r)+e})).join("\n")}toString(){let e=this.showSourceCode();return e&&(e="\n\n"+e+"\n"),this.name+": "+this.message+e}}e.exports=s,s.default=s},5238:(e,t,i)=>{"use strict";let n=i(3152);class r extends n{constructor(e){e&&void 0!==e.value&&"string"!=typeof e.value&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||"$"===this.prop[0]}}e.exports=r,r.default=r},145:(e,t,i)=>{"use strict";let n,r,s=i(7793);class o extends s{constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new n(new r,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o},3438:(e,t,i)=>{"use strict";let n=i(5238),r=i(3878),s=i(9371),o=i(396),a=i(1106),l=i(5644),c=i(1534);function h(e,t){if(Array.isArray(e))return e.map((e=>h(e)));let{inputs:i,...d}=e;if(i){t=[];for(let e of i){let i={...e,__proto__:a.prototype};i.map&&(i.map={...i.map,__proto__:r.prototype}),t.push(i)}}if(d.nodes&&(d.nodes=e.nodes.map((e=>h(e,t)))),d.source){let{inputId:e,...i}=d.source;d.source=i,null!=e&&(d.source.input=t[e])}if("root"===d.type)return new l(d);if("decl"===d.type)return new n(d);if("rule"===d.type)return new c(d);if("comment"===d.type)return new s(d);if("atrule"===d.type)return new o(d);throw new Error("Unknown node type: "+e.type)}e.exports=h,h.default=h},1106:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(1866),{fileURLToPath:s,pathToFileURL:o}=i(2739),{isAbsolute:a,resolve:l}=i(197),{nanoid:c}=i(5463),h=i(9746),d=i(3614),u=i(3878),p=Symbol("fromOffsetCache"),f=Boolean(n&&r),m=Boolean(l&&a);class g{constructor(e,t={}){if(null==e||"object"==typeof e&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),"\ufeff"===this.css[0]||"￾"===this.css[0]?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!m||/^\w+:\/\//.test(t.from)||a(t.from)?this.file=t.from:this.file=l(t.from)),m&&f){let e=new u(this.css,t);if(e.text){this.map=e;let t=e.consumer().file;!this.file&&t&&(this.file=this.mapResolve(t))}}this.file||(this.id="<input css "+c(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,i,n={}){let r,s,a;if(t&&"object"==typeof t){let e=t,n=i;if("number"==typeof e.offset){let n=this.fromOffset(e.offset);t=n.line,i=n.col}else t=e.line,i=e.column;if("number"==typeof n.offset){let e=this.fromOffset(n.offset);s=e.line,a=e.col}else s=n.line,a=n.column}else if(!i){let e=this.fromOffset(t);t=e.line,i=e.col}let l=this.origin(t,i,s,a);return r=l?new d(e,void 0===l.endLine?l.line:{column:l.column,line:l.line},void 0===l.endLine?l.column:{column:l.endColumn,line:l.endLine},l.source,l.file,n.plugin):new d(e,void 0===s?t:{column:i,line:t},void 0===s?i:{column:a,line:s},this.css,this.file,n.plugin),r.input={column:i,endColumn:a,endLine:s,line:t,source:this.css},this.file&&(o&&(r.input.url=o(this.file).toString()),r.input.file=this.file),r}fromOffset(e){let t,i;if(this[p])i=this[p];else{let e=this.css.split("\n");i=new Array(e.length);let t=0;for(let n=0,r=e.length;n<r;n++)i[n]=t,t+=e[n].length+1;this[p]=i}t=i[i.length-1];let n=0;if(e>=t)n=i.length-1;else{let t,r=i.length-2;for(;n<r;)if(t=n+(r-n>>1),e<i[t])r=t-1;else{if(!(e>=i[t+1])){n=t;break}n=t+1}}return{col:e-i[n]+1,line:n+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:l(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,i,n){if(!this.map)return!1;let r,l,c=this.map.consumer(),h=c.originalPositionFor({column:t,line:e});if(!h.source)return!1;"number"==typeof i&&(r=c.originalPositionFor({column:n,line:i})),l=a(h.source)?o(h.source):new URL(h.source,this.map.consumer().sourceRoot||o(this.map.mapFile));let d={column:h.column,endColumn:r&&r.column,endLine:r&&r.line,line:h.line,url:l.toString()};if("file:"===l.protocol){if(!s)throw new Error("file: protocol is not available in this PostCSS build");d.file=s(l)}let u=c.sourceContentFor(h.source);return u&&(d.source=u),d}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])null!=this[t]&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}}e.exports=g,g.default=g,h&&h.registerInput&&h.registerInput(g)},6966:(e,t,i)=>{"use strict";let{isClean:n,my:r}=i(4151),s=i(3604),o=i(3303),a=i(7793),l=i(145),c=(i(6156),i(3717)),h=i(9577),d=i(5644);const u={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},p={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},f={Once:!0,postcssPlugin:!0,prepare:!0},m=0;function g(e){return"object"==typeof e&&"function"==typeof e.then}function y(e){let t=!1,i=u[e.type];return"decl"===e.type?t=e.prop.toLowerCase():"atrule"===e.type&&(t=e.name.toLowerCase()),t&&e.append?[i,i+"-"+t,m,i+"Exit",i+"Exit-"+t]:t?[i,i+"-"+t,i+"Exit",i+"Exit-"+t]:e.append?[i,m,i+"Exit"]:[i,i+"Exit"]}function v(e){let t;return t="document"===e.type?["Document",m,"DocumentExit"]:"root"===e.type?["Root",m,"RootExit"]:y(e),{eventIndex:0,events:t,iterator:0,node:e,visitorIndex:0,visitors:[]}}function x(e){return e[n]=!1,e.nodes&&e.nodes.forEach((e=>x(e))),e}let b={};class w{constructor(e,t,i){let n;if(this.stringified=!1,this.processed=!1,"object"!=typeof t||null===t||"root"!==t.type&&"document"!==t.type)if(t instanceof w||t instanceof c)n=x(t.root),t.map&&(void 0===i.map&&(i.map={}),i.map.inline||(i.map.inline=!1),i.map.prev=t.map);else{let e=h;i.syntax&&(e=i.syntax.parse),i.parser&&(e=i.parser),e.parse&&(e=e.parse);try{n=e(t,i)}catch(e){this.processed=!0,this.error=e}n&&!n[r]&&a.rebuild(n)}else n=x(t);this.result=new c(e,n,i),this.helpers={...b,postcss:b,result:this.result},this.plugins=this.processor.plugins.map((e=>"object"==typeof e&&e.prepare?{...e,...e.prepare(this.result)}:e))}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let i=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,"CssSyntaxError"!==e.name||e.plugin?i.postcssVersion:(e.plugin=i.postcssPlugin,e.setMessage())}catch(e){console&&console.error&&console.error(e)}return e}prepareVisitors(){this.listeners={};let e=(e,t,i)=>{this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push([e,i])};for(let t of this.plugins)if("object"==typeof t)for(let i in t){if(!p[i]&&/^[A-Z]/.test(i))throw new Error(`Unknown event ${i} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!f[i])if("object"==typeof t[i])for(let n in t[i])e(t,"*"===n?i:i+"-"+n.toLowerCase(),t[i][n]);else"function"==typeof t[i]&&e(t,i,t[i])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],i=this.runOnRoot(t);if(g(i))try{await i}catch(e){throw this.handleError(e)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];){e[n]=!0;let t=[v(e)];for(;t.length>0;){let e=this.visitTick(t);if(g(e))try{await e}catch(e){let i=t[t.length-1].node;throw this.handleError(e,i)}}}if(this.listeners.OnceExit)for(let[t,i]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if("document"===e.type){let t=e.nodes.map((e=>i(e,this.helpers)));await Promise.all(t)}else await i(e,this.helpers)}catch(e){throw this.handleError(e)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if("object"==typeof e&&e.Once){if("document"===this.result.root.type){let t=this.result.root.nodes.map((t=>e.Once(t,this.helpers)));return g(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}if("function"==typeof e)return e(this.result.root,this.result)}catch(e){throw this.handleError(e)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=o;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new s(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins)if(g(this.runOnRoot(e)))throw this.getAsyncError();if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[n];)e[n]=!0,this.walkSync(e);if(this.listeners.OnceExit)if("document"===e.type)for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[i,n]of e){let e;this.result.lastPlugin=i;try{e=n(t,this.helpers)}catch(e){throw this.handleError(e,t.proxyOf)}if("root"!==t.type&&"document"!==t.type&&!t.parent)return!0;if(g(e))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:i,visitors:r}=t;if("root"!==i.type&&"document"!==i.type&&!i.parent)return void e.pop();if(r.length>0&&t.visitorIndex<r.length){let[e,n]=r[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===r.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=e;try{return n(i.toProxy(),this.helpers)}catch(e){throw this.handleError(e,i)}}if(0!==t.iterator){let r,s=t.iterator;for(;r=i.nodes[i.indexes[s]];)if(i.indexes[s]+=1,!r[n])return r[n]=!0,void e.push(v(r));t.iterator=0,delete i.indexes[s]}let s=t.events;for(;t.eventIndex<s.length;){let e=s[t.eventIndex];if(t.eventIndex+=1,e===m)return void(i.nodes&&i.nodes.length&&(i[n]=!0,t.iterator=i.getIterator()));if(this.listeners[e])return void(t.visitors=this.listeners[e])}e.pop()}walkSync(e){e[n]=!0;let t=y(e);for(let i of t)if(i===m)e.nodes&&e.each((e=>{e[n]||this.walkSync(e)}));else{let t=this.listeners[i];if(t&&this.visitSync(t,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}}w.registerPostcss=e=>{b=e},e.exports=w,w.default=w,d.registerLazyResult(w),l.registerLazyResult(w)},1752:e=>{"use strict";let t={comma:e=>t.split(e,[","],!0),space:e=>t.split(e,[" ","\n","\t"]),split(e,t,i){let n=[],r="",s=!1,o=0,a=!1,l="",c=!1;for(let i of e)c?c=!1:"\\"===i?c=!0:a?i===l&&(a=!1):'"'===i||"'"===i?(a=!0,l=i):"("===i?o+=1:")"===i?o>0&&(o-=1):0===o&&t.includes(i)&&(s=!0),s?(""!==r&&n.push(r.trim()),r="",s=!1):r+=i;return(i||""!==r)&&n.push(r.trim()),n}};e.exports=t,t.default=t},3604:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(1866),{dirname:s,relative:o,resolve:a,sep:l}=i(197),{pathToFileURL:c}=i(2739),h=i(1106),d=Boolean(n&&r),u=Boolean(s&&a&&o&&l);e.exports=class{constructor(e,t,i,n){this.stringify=e,this.mapOpts=i.map||{},this.root=t,this.opts=i,this.css=n,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;e=this.isInline()?"data:application/json;base64,"+this.toBase64(this.map.toString()):"string"==typeof this.mapOpts.annotation?this.mapOpts.annotation:"function"==typeof this.mapOpts.annotation?this.mapOpts.annotation(this.opts.to,this.root):this.outputFile()+".map";let t="\n";this.css.includes("\r\n")&&(t="\r\n"),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t,i=this.toUrl(this.path(e.file)),r=e.root||s(e.file);!1===this.mapOpts.sourcesContent?(t=new n(e.text),t.sourcesContent&&(t.sourcesContent=t.sourcesContent.map((()=>null)))):t=e.consumer(),this.map.applySourceMap(t,i,this.toUrl(this.path(r)))}}clearAnnotation(){if(!1!==this.mapOpts.annotation)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],"comment"===e.type&&0===e.text.indexOf("# sourceMappingURL=")&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/(\n)?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),u&&d&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,(t=>{e+=t})),[e]}}generateMap(){if(this.root)this.generateString();else if(1===this.previous().length){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=r.fromSourceMap(e)}else this.map=new r({file:this.outputFile()}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new r({file:this.outputFile()});let e,t,i=1,n=1,s="<no source>",o={generated:{column:0,line:0},original:{column:0,line:0},source:""};this.stringify(this.root,((r,a,l)=>{if(this.css+=r,a&&"end"!==l&&(o.generated.line=i,o.generated.column=n-1,a.source&&a.source.start?(o.source=this.sourcePath(a),o.original.line=a.source.start.line,o.original.column=a.source.start.column-1,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,this.map.addMapping(o))),e=r.match(/\n/g),e?(i+=e.length,t=r.lastIndexOf("\n"),n=r.length-t):n+=r.length,a&&"start"!==l){let e=a.parent||{raws:{}};("decl"===a.type||"atrule"===a.type&&!a.nodes)&&a===e.last&&!e.raws.semicolon||(a.source&&a.source.end?(o.source=this.sourcePath(a),o.original.line=a.source.end.line,o.original.column=a.source.end.column-1,o.generated.line=i,o.generated.column=n-2,this.map.addMapping(o)):(o.source=s,o.original.line=1,o.original.column=0,o.generated.line=i,o.generated.column=n-1,this.map.addMapping(o)))}}))}isAnnotation(){return!!this.isInline()||(void 0!==this.mapOpts.annotation?this.mapOpts.annotation:!this.previous().length||this.previous().some((e=>e.annotation)))}isInline(){if(void 0!==this.mapOpts.inline)return this.mapOpts.inline;let e=this.mapOpts.annotation;return(void 0===e||!0===e)&&(!this.previous().length||this.previous().some((e=>e.inline)))}isMap(){return void 0!==this.opts.map?!!this.opts.map:this.previous().length>0}isSourcesContent(){return void 0!==this.mapOpts.sourcesContent?this.mapOpts.sourcesContent:!this.previous().length||this.previous().some((e=>e.withContent()))}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute)return e;if(60===e.charCodeAt(0))return e;if(/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let i=this.opts.to?s(this.opts.to):".";"string"==typeof this.mapOpts.annotation&&(i=s(a(i,this.mapOpts.annotation)));let n=o(i,e);return this.memoizedPaths.set(e,n),n}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk((e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}}));else{let e=new h(this.css,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk((t=>{if(t.source){let i=t.source.input.from;if(i&&!e[i]){e[i]=!0;let n=this.usesFileUrls?this.toFileUrl(i):this.toUrl(this.path(i));this.map.setSourceContent(n,t.source.input.css)}}}));else if(this.css){let e=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(e,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(c){let t=c(e).toString();return this.memoizedFileURLs.set(e,t),t}throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;"\\"===l&&(e=e.replace(/\\/g,"/"));let i=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,i),i}}},4211:(e,t,i)=>{"use strict";let n=i(3604),r=i(3303),s=(i(6156),i(9577));const o=i(3717);class a{constructor(e,t,i){let s;t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=i,this._map=void 0;let a=r;this.result=new o(this._processor,s,this._opts),this.result.css=t;let l=this;Object.defineProperty(this.result,"root",{get:()=>l.root});let c=new n(a,s,this._opts,t);if(c.isMap()){let[e,t]=c.generate();e&&(this.result.css=e),t&&(this.result.map=t)}}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=s;try{e=t(this._css,this._opts)}catch(e){this.error=e}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}}e.exports=a,a.default=a},3152:(e,t,i)=>{"use strict";let{isClean:n,my:r}=i(4151),s=i(3614),o=i(7668),a=i(3303);function l(e,t){let i=new e.constructor;for(let n in e){if(!Object.prototype.hasOwnProperty.call(e,n))continue;if("proxyCache"===n)continue;let r=e[n],s=typeof r;"parent"===n&&"object"===s?t&&(i[n]=t):"source"===n?i[n]=r:Array.isArray(r)?i[n]=r.map((e=>l(e,i))):("object"===s&&null!==r&&(r=l(r)),i[n]=r)}return i}class c{constructor(e={}){this.raws={},this[n]=!1,this[r]=!0;for(let t in e)if("nodes"===t){this.nodes=[];for(let i of e[t])"function"==typeof i.clone?this.append(i.clone()):this.append(i)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=l(this);for(let i in e)t[i]=e[i];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:i,start:n}=this.rangeBy(t);return this.source.input.error(e,{column:n.column,line:n.line},{column:i.column,line:i.line},t)}return new s(e)}getProxyProcessor(){return{get:(e,t)=>"proxyOf"===t?e:"root"===t?()=>e.root().toProxy():e[t],set:(e,t,i)=>(e[t]===i||(e[t]=i,"prop"!==t&&"value"!==t&&"name"!==t&&"params"!==t&&"important"!==t&&"text"!==t||e.markDirty()),!0)}}markDirty(){if(this[n]){this[n]=!1;let e=this;for(;e=e.parent;)e[n]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let i=this.source.start;if(e.index)i=this.positionInside(e.index,t);else if(e.word){let n=(t=this.toString()).indexOf(e.word);-1!==n&&(i=this.positionInside(n,t))}return i}positionInside(e,t){let i=t||this.toString(),n=this.source.start.column,r=this.source.start.line;for(let t=0;t<e;t++)"\n"===i[t]?(n=1,r+=1):n+=1;return{column:n,line:r}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},i=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let n=this.toString(),r=n.indexOf(e.word);-1!==r&&(t=this.positionInside(r,n),i=this.positionInside(r+e.word.length,n))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?i={column:e.end.column,line:e.end.line}:e.endIndex?i=this.positionInside(e.endIndex):e.index&&(i=this.positionInside(e.index+1));return(i.line<t.line||i.line===t.line&&i.column<=t.column)&&(i={column:t.column+1,line:t.line}),{end:i,start:t}}raw(e,t){return(new o).raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,i=!1;for(let n of e)n===this?i=!0:i?(this.parent.insertAfter(t,n),t=n):this.parent.insertBefore(t,n);i||this.remove()}return this}root(){let e=this;for(;e.parent&&"document"!==e.parent.type;)e=e.parent;return e}toJSON(e,t){let i={},n=null==t;t=t||new Map;let r=0;for(let e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if("parent"===e||"proxyCache"===e)continue;let n=this[e];if(Array.isArray(n))i[e]=n.map((e=>"object"==typeof e&&e.toJSON?e.toJSON(null,t):e));else if("object"==typeof n&&n.toJSON)i[e]=n.toJSON(null,t);else if("source"===e){let s=t.get(n.input);null==s&&(s=r,t.set(n.input,r),r++),i[e]={end:n.end,inputId:s,start:n.start}}else i[e]=n}return n&&(i.inputs=[...t.keys()].map((e=>e.toJSON()))),i}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=a){e.stringify&&(e=e.stringify);let t="";return e(this,(e=>{t+=e})),t}warn(e,t,i){let n={node:this};for(let e in i)n[e]=i[e];return e.warn(t,n)}get proxyOf(){return this}}e.exports=c,c.default=c},9577:(e,t,i)=>{"use strict";let n=i(7793),r=i(8339),s=i(1106);function o(e,t){let i=new s(e,t),n=new r(i);try{n.parse()}catch(e){throw e}return n.root}e.exports=o,o.default=o,n.registerParse(o)},8339:(e,t,i)=>{"use strict";let n=i(5238),r=i(5781),s=i(9371),o=i(396),a=i(5644),l=i(1534);const c={empty:!0,space:!0};e.exports=class{constructor(e){this.input=e,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t,i,n,r=new o;r.name=e[1].slice(1),""===r.name&&this.unnamedAtrule(r,e),this.init(r,e[2]);let s=!1,a=!1,l=[],c=[];for(;!this.tokenizer.endOfFile();){if(t=(e=this.tokenizer.nextToken())[0],"("===t||"["===t?c.push("("===t?")":"]"):"{"===t&&c.length>0?c.push("}"):t===c[c.length-1]&&c.pop(),0===c.length){if(";"===t){r.source.end=this.getPosition(e[2]),r.source.end.offset++,this.semicolon=!0;break}if("{"===t){a=!0;break}if("}"===t){if(l.length>0){for(n=l.length-1,i=l[n];i&&"space"===i[0];)i=l[--n];i&&(r.source.end=this.getPosition(i[3]||i[2]),r.source.end.offset++)}this.end(e);break}l.push(e)}else l.push(e);if(this.tokenizer.endOfFile()){s=!0;break}}r.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(r.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(r,"params",l),s&&(e=l[l.length-1],r.source.end=this.getPosition(e[3]||e[2]),r.source.end.offset++,this.spaces=r.raws.between,r.raws.between="")):(r.raws.afterName="",r.params=""),a&&(r.nodes=[],this.current=r)}checkMissedSemicolon(e){let t=this.colon(e);if(!1===t)return;let i,n=0;for(let r=t-1;r>=0&&(i=e[r],"space"===i[0]||(n+=1,2!==n));r--);throw this.input.error("Missed semicolon","word"===i[0]?i[3]+1:i[2])}colon(e){let t,i,n,r=0;for(let[s,o]of e.entries()){if(t=o,i=t[0],"("===i&&(r+=1),")"===i&&(r-=1),0===r&&":"===i){if(n){if("word"===n[0]&&"progid"===n[1])continue;return s}this.doubleColon(t)}n=t}return!1}comment(e){let t=new s;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let i=e[1].slice(2,-2);if(/^\s*$/.test(i))t.text="",t.raws.left=i,t.raws.right="";else{let e=i.match(/^(\s*)([^]*\S)(\s*)$/);t.text=e[2],t.raws.left=e[1],t.raws.right=e[3]}}createTokenizer(){this.tokenizer=r(this.input)}decl(e,t){let i=new n;this.init(i,e[0][2]);let r,s=e[e.length-1];for(";"===s[0]&&(this.semicolon=!0,e.pop()),i.source.end=this.getPosition(s[3]||s[2]||function(e){for(let t=e.length-1;t>=0;t--){let i=e[t],n=i[3]||i[2];if(n)return n}}(e)),i.source.end.offset++;"word"!==e[0][0];)1===e.length&&this.unknownWord(e),i.raws.before+=e.shift()[1];for(i.source.start=this.getPosition(e[0][2]),i.prop="";e.length;){let t=e[0][0];if(":"===t||"space"===t||"comment"===t)break;i.prop+=e.shift()[1]}for(i.raws.between="";e.length;){if(r=e.shift(),":"===r[0]){i.raws.between+=r[1];break}"word"===r[0]&&/\w/.test(r[1])&&this.unknownWord([r]),i.raws.between+=r[1]}"_"!==i.prop[0]&&"*"!==i.prop[0]||(i.raws.before+=i.prop[0],i.prop=i.prop.slice(1));let o,a=[];for(;e.length&&(o=e[0][0],"space"===o||"comment"===o);)a.push(e.shift());this.precheckMissedSemicolon(e);for(let t=e.length-1;t>=0;t--){if(r=e[t],"!important"===r[1].toLowerCase()){i.important=!0;let n=this.stringFrom(e,t);n=this.spacesFromEnd(e)+n," !important"!==n&&(i.raws.important=n);break}if("important"===r[1].toLowerCase()){let n=e.slice(0),r="";for(let e=t;e>0;e--){let t=n[e][0];if(0===r.trim().indexOf("!")&&"space"!==t)break;r=n.pop()[1]+r}0===r.trim().indexOf("!")&&(i.important=!0,i.raws.important=r,e=n)}if("space"!==r[0]&&"comment"!==r[0])break}e.some((e=>"space"!==e[0]&&"comment"!==e[0]))&&(i.raws.between+=a.map((e=>e[1])).join(""),a=[]),this.raw(i,"value",a.concat(e),t),i.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new l;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let e=this.current.nodes[this.current.nodes.length-1];e&&"rule"===e.type&&!e.raws.ownSemicolon&&(e.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="","comment"!==e.type&&(this.semicolon=!1)}other(e){let t=!1,i=null,n=!1,r=null,s=[],o=e[1].startsWith("--"),a=[],l=e;for(;l;){if(i=l[0],a.push(l),"("===i||"["===i)r||(r=l),s.push("("===i?")":"]");else if(o&&n&&"{"===i)r||(r=l),s.push("}");else if(0===s.length){if(";"===i){if(n)return void this.decl(a,o);break}if("{"===i)return void this.rule(a);if("}"===i){this.tokenizer.back(a.pop()),t=!0;break}":"===i&&(n=!0)}else i===s[s.length-1]&&(s.pop(),0===s.length&&(r=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),s.length>0&&this.unclosedBracket(r),t&&n){if(!o)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e)}this.endFile()}precheckMissedSemicolon(){}raw(e,t,i,n){let r,s,o,a,l=i.length,h="",d=!0;for(let e=0;e<l;e+=1)r=i[e],s=r[0],"space"!==s||e!==l-1||n?"comment"===s?(a=i[e-1]?i[e-1][0]:"empty",o=i[e+1]?i[e+1][0]:"empty",c[a]||c[o]||","===h.slice(-1)?d=!1:h+=r[1]):h+=r[1]:d=!1;if(!d){let n=i.reduce(((e,t)=>e+t[1]),"");e.raws[t]={raw:n,value:h}}e[t]=h}rule(e){e.pop();let t=new l;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t||"comment"===t);)i=e.pop()[1]+i;return i}spacesAndCommentsFromStart(e){let t,i="";for(;e.length&&(t=e[0][0],"space"===t||"comment"===t);)i+=e.shift()[1];return i}spacesFromEnd(e){let t,i="";for(;e.length&&(t=e[e.length-1][0],"space"===t);)i=e.pop()[1]+i;return i}stringFrom(e,t){let i="";for(let n=t;n<e.length;n++)i+=e[n][1];return e.splice(t,e.length-t),i}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}}},2895:(e,t,i)=>{"use strict";let n=i(3614),r=i(5238),s=i(6966),o=i(7793),a=i(6846),l=i(3303),c=i(3438),h=i(145),d=i(38),u=i(9371),p=i(396),f=i(3717),m=i(1106),g=i(9577),y=i(1752),v=i(1534),x=i(5644),b=i(3152);function w(...e){return 1===e.length&&Array.isArray(e[0])&&(e=e[0]),new a(e)}w.plugin=function(e,t){let i,n=!1;function r(...i){console&&console.warn&&!n&&(n=!0,console.warn(e+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let r=t(...i);return r.postcssPlugin=e,r.postcssVersion=(new a).version,r}return Object.defineProperty(r,"postcss",{get:()=>(i||(i=r()),i)}),r.process=function(e,t,i){return w([r(i)]).process(e,t)},r},w.stringify=l,w.parse=g,w.fromJSON=c,w.list=y,w.comment=e=>new u(e),w.atRule=e=>new p(e),w.decl=e=>new r(e),w.rule=e=>new v(e),w.root=e=>new x(e),w.document=e=>new h(e),w.CssSyntaxError=n,w.Declaration=r,w.Container=o,w.Processor=a,w.Document=h,w.Comment=u,w.Warning=d,w.AtRule=p,w.Result=f,w.Input=m,w.Rule=v,w.Root=x,w.Node=b,s.registerPostcss(w),e.exports=w,w.default=w},3878:(e,t,i)=>{"use strict";let{SourceMapConsumer:n,SourceMapGenerator:r}=i(1866),{existsSync:s,readFileSync:o}=i(9977),{dirname:a,join:l}=i(197);class c{constructor(e,t){if(!1===t.map)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let i=t.map?t.map.prev:void 0,n=this.loadMap(t.from,i);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=a(this.mapFile)),n&&(this.text=n)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}decodeInline(e){if(/^data:application\/json;charset=utf-?8,/.test(e)||/^data:application\/json,/.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(/^data:application\/json;charset=utf-?8;base64,/.test(e)||/^data:application\/json;base64,/.test(e))return t=e.substr(RegExp.lastMatch.length),Buffer?Buffer.from(t,"base64").toString():window.atob(t);var t;let i=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+i)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return"object"==typeof e&&("string"==typeof e.mappings||"string"==typeof e._mappings||Array.isArray(e.sections))}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let i=e.lastIndexOf(t.pop()),n=e.indexOf("*/",i);i>-1&&n>-1&&(this.annotation=this.getAnnotationURL(e.substring(i,n)))}loadFile(e){if(this.root=a(e),s(e))return this.mapFile=e,o(e,"utf-8").toString().trim()}loadMap(e,t){if(!1===t)return!1;if(t){if("string"==typeof t)return t;if("function"!=typeof t){if(t instanceof n)return r.fromSourceMap(t).toString();if(t instanceof r)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}{let i=t(e);if(i){let e=this.loadFile(i);if(!e)throw new Error("Unable to load previous source map: "+i.toString());return e}}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let t=this.annotation;return e&&(t=l(a(e),t)),this.loadFile(t)}}}startWith(e,t){return!!e&&e.substr(0,t.length)===t}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}e.exports=c,c.default=c},6846:(e,t,i)=>{"use strict";let n=i(4211),r=i(6966),s=i(145),o=i(5644);class a{constructor(e=[]){this.version="8.4.32",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let i of e)if(!0===i.postcss?i=i():i.postcss&&(i=i.postcss),"object"==typeof i&&Array.isArray(i.plugins))t=t.concat(i.plugins);else if("object"==typeof i&&i.postcssPlugin)t.push(i);else if("function"==typeof i)t.push(i);else if("object"!=typeof i||!i.parse&&!i.stringify)throw new Error(i+" is not a PostCSS plugin");return t}process(e,t={}){return 0===this.plugins.length&&void 0===t.parser&&void 0===t.stringifier&&void 0===t.syntax?new n(this,e,t):new r(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}}e.exports=a,a.default=a,o.registerProcessor(a),s.registerProcessor(a)},3717:(e,t,i)=>{"use strict";let n=i(38);class r{constructor(e,t,i){this.processor=e,this.messages=[],this.root=t,this.opts=i,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let i=new n(e,t);return this.messages.push(i),i}warnings(){return this.messages.filter((e=>"warning"===e.type))}get content(){return this.css}}e.exports=r,r.default=r},5644:(e,t,i)=>{"use strict";let n,r,s=i(7793);class o extends s{constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,i){let n=super.normalize(e);if(t)if("prepend"===i)this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let e of n)e.raws.before=t.raws.before;return n}removeChild(e,t){let i=this.index(e);return!t&&0===i&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[i].raws.before),super.removeChild(e)}toResult(e={}){return new n(new r,this,e).stringify()}}o.registerLazyResult=e=>{n=e},o.registerProcessor=e=>{r=e},e.exports=o,o.default=o,s.registerRoot(o)},1534:(e,t,i)=>{"use strict";let n=i(7793),r=i(1752);class s extends n{constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return r.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,i=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(i)}}e.exports=s,s.default=s,n.registerRule(s)},7668:e=>{"use strict";const t={after:"\n",beforeClose:"\n",beforeComment:"\n",beforeDecl:"\n",beforeOpen:" ",beforeRule:"\n",colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};class i{constructor(e){this.builder=e}atrule(e,t){let i="@"+e.name,n=e.params?this.rawValue(e,"params"):"";if(void 0!==e.raws.afterName?i+=e.raws.afterName:n&&(i+=" "),e.nodes)this.block(e,i+n);else{let r=(e.raws.between||"")+(t?";":"");this.builder(i+n+r,e)}}beforeAfter(e,t){let i;i="decl"===e.type?this.raw(e,null,"beforeDecl"):"comment"===e.type?this.raw(e,null,"beforeComment"):"before"===t?this.raw(e,null,"beforeRule"):this.raw(e,null,"beforeClose");let n=e.parent,r=0;for(;n&&"root"!==n.type;)r+=1,n=n.parent;if(i.includes("\n")){let t=this.raw(e,null,"indent");if(t.length)for(let e=0;e<r;e++)i+=t}return i}block(e,t){let i,n=this.raw(e,"between","beforeOpen");this.builder(t+n+"{",e,"start"),e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&"comment"===e.nodes[t].type;)t-=1;let i=this.raw(e,"semicolon");for(let n=0;n<e.nodes.length;n++){let r=e.nodes[n],s=this.raw(r,"before");s&&this.builder(s),this.stringify(r,t!==n||i)}}comment(e){let t=this.raw(e,"left","commentLeft"),i=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+i+"*/",e)}decl(e,t){let i=this.raw(e,"between","colon"),n=e.prop+i+this.rawValue(e,"value");e.important&&(n+=e.raws.important||" !important"),t&&(n+=";"),this.builder(n,e)}document(e){this.body(e)}raw(e,i,n){let r;if(n||(n=i),i&&(r=e.raws[i],void 0!==r))return r;let s=e.parent;if("before"===n){if(!s||"root"===s.type&&s.first===e)return"";if(s&&"document"===s.type)return""}if(!s)return t[n];let o=e.root();if(o.rawCache||(o.rawCache={}),void 0!==o.rawCache[n])return o.rawCache[n];if("before"===n||"after"===n)return this.beforeAfter(e,n);{let t="raw"+((a=n)[0].toUpperCase()+a.slice(1));this[t]?r=this[t](o,e):o.walk((e=>{if(r=e.raws[i],void 0!==r)return!1}))}var a;return void 0===r&&(r=t[n]),o.rawCache[n]=r,r}rawBeforeClose(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length>0&&void 0!==e.raws.after)return t=e.raws.after,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let i;return e.walkComments((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeDecl"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeDecl(e,t){let i;return e.walkDecls((e=>{if(void 0!==e.raws.before)return i=e.raws.before,i.includes("\n")&&(i=i.replace(/[^\n]+$/,"")),!1})),void 0===i?i=this.raw(t,null,"beforeRule"):i&&(i=i.replace(/\S/g,"")),i}rawBeforeOpen(e){let t;return e.walk((e=>{if("decl"!==e.type&&(t=e.raws.between,void 0!==t))return!1})),t}rawBeforeRule(e){let t;return e.walk((i=>{if(i.nodes&&(i.parent!==e||e.first!==i)&&void 0!==i.raws.before)return t=i.raws.before,t.includes("\n")&&(t=t.replace(/[^\n]+$/,"")),!1})),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls((e=>{if(void 0!==e.raws.between)return t=e.raws.between.replace(/[^\s:]/g,""),!1})),t}rawEmptyBody(e){let t;return e.walk((e=>{if(e.nodes&&0===e.nodes.length&&(t=e.raws.after,void 0!==t))return!1})),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk((i=>{let n=i.parent;if(n&&n!==e&&n.parent&&n.parent===e&&void 0!==i.raws.before){let e=i.raws.before.split("\n");return t=e[e.length-1],t=t.replace(/\S/g,""),!1}})),t}rawSemicolon(e){let t;return e.walk((e=>{if(e.nodes&&e.nodes.length&&"decl"===e.last.type&&(t=e.raws.semicolon,void 0!==t))return!1})),t}rawValue(e,t){let i=e[t],n=e.raws[t];return n&&n.value===i?n.raw:i}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}}e.exports=i,i.default=i},3303:(e,t,i)=>{"use strict";let n=i(7668);function r(e,t){new n(t).stringify(e)}e.exports=r,r.default=r},4151:e=>{"use strict";e.exports.isClean=Symbol("isClean"),e.exports.my=Symbol("my")},5781:e=>{"use strict";const t="'".charCodeAt(0),i='"'.charCodeAt(0),n="\\".charCodeAt(0),r="/".charCodeAt(0),s="\n".charCodeAt(0),o=" ".charCodeAt(0),a="\f".charCodeAt(0),l="\t".charCodeAt(0),c="\r".charCodeAt(0),h="[".charCodeAt(0),d="]".charCodeAt(0),u="(".charCodeAt(0),p=")".charCodeAt(0),f="{".charCodeAt(0),m="}".charCodeAt(0),g=";".charCodeAt(0),y="*".charCodeAt(0),v=":".charCodeAt(0),x="@".charCodeAt(0),b=/[\t\n\f\r "#'()/;[\\\]{}]/g,w=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,O=/.[\r\n"'(/\\]/,S=/[\da-f]/i;e.exports=function(e,k={}){let P,C,A,I,T,$,M,E,_,D,L=e.css.valueOf(),B=k.ignoreErrors,R=L.length,N=0,F=[],j=[];function z(t){throw e.error("Unclosed "+t,N)}return{back:function(e){j.push(e)},endOfFile:function(){return 0===j.length&&N>=R},nextToken:function(e){if(j.length)return j.pop();if(N>=R)return;let k=!!e&&e.ignoreUnclosed;switch(P=L.charCodeAt(N),P){case s:case o:case l:case c:case a:C=N;do{C+=1,P=L.charCodeAt(C)}while(P===o||P===s||P===l||P===c||P===a);D=["space",L.slice(N,C)],N=C-1;break;case h:case d:case f:case m:case v:case g:case p:{let e=String.fromCharCode(P);D=[e,e,N];break}case u:if(E=F.length?F.pop()[1]:"",_=L.charCodeAt(N+1),"url"===E&&_!==t&&_!==i&&_!==o&&_!==s&&_!==l&&_!==a&&_!==c){C=N;do{if($=!1,C=L.indexOf(")",C+1),-1===C){if(B||k){C=N;break}z("bracket")}for(M=C;L.charCodeAt(M-1)===n;)M-=1,$=!$}while($);D=["brackets",L.slice(N,C+1),N,C],N=C}else C=L.indexOf(")",N+1),I=L.slice(N,C+1),-1===C||O.test(I)?D=["(","(",N]:(D=["brackets",I,N,C],N=C);break;case t:case i:A=P===t?"'":'"',C=N;do{if($=!1,C=L.indexOf(A,C+1),-1===C){if(B||k){C=N+1;break}z("string")}for(M=C;L.charCodeAt(M-1)===n;)M-=1,$=!$}while($);D=["string",L.slice(N,C+1),N,C],N=C;break;case x:b.lastIndex=N+1,b.test(L),C=0===b.lastIndex?L.length-1:b.lastIndex-2,D=["at-word",L.slice(N,C+1),N,C],N=C;break;case n:for(C=N,T=!0;L.charCodeAt(C+1)===n;)C+=1,T=!T;if(P=L.charCodeAt(C+1),T&&P!==r&&P!==o&&P!==s&&P!==l&&P!==c&&P!==a&&(C+=1,S.test(L.charAt(C)))){for(;S.test(L.charAt(C+1));)C+=1;L.charCodeAt(C+1)===o&&(C+=1)}D=["word",L.slice(N,C+1),N,C],N=C;break;default:P===r&&L.charCodeAt(N+1)===y?(C=L.indexOf("*/",N+2)+1,0===C&&(B||k?C=L.length:z("comment")),D=["comment",L.slice(N,C+1),N,C],N=C):(w.lastIndex=N+1,w.test(L),C=0===w.lastIndex?L.length-1:w.lastIndex-2,D=["word",L.slice(N,C+1),N,C],F.push(D),N=C)}return N++,D},position:function(){return N}}}},6156:e=>{"use strict";let t={};e.exports=function(e){t[e]||(t[e]=!0,"undefined"!=typeof console&&console.warn&&console.warn(e))}},38:e=>{"use strict";class t{constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let e=t.node.rangeBy(t);this.line=e.start.line,this.column=e.start.column,this.endLine=e.end.line,this.endColumn=e.end.column}for(let e in t)this[e]=t[e]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}e.exports=t,t.default=t},4728:(e,t,i)=>{const n=i(6808),r=i(7151),{isPlainObject:s}=i(6191),o=i(4744),a=i(9466),{parse:l}=i(2895),c=["img","audio","video","picture","svg","object","map","iframe","embed"],h=["script","style"];function d(e,t){e&&Object.keys(e).forEach((function(i){t(e[i],i)}))}function u(e,t){return{}.hasOwnProperty.call(e,t)}function p(e,t){const i=[];return d(e,(function(e){t(e)&&i.push(e)})),i}e.exports=m;const f=/^[^\0\t\n\f\r /<=>]+$/;function m(e,t,i){if(null==e)return"";"number"==typeof e&&(e=e.toString());let y="",v="";function x(e,t){const i=this;this.tag=e,this.attribs=t||{},this.tagPosition=y.length,this.text="",this.mediaChildren=[],this.updateParentNodeText=function(){$.length&&($[$.length-1].text+=i.text)},this.updateParentNodeMediaChildren=function(){$.length&&c.includes(this.tag)&&$[$.length-1].mediaChildren.push(this.tag)}}(t=Object.assign({},m.defaults,t)).parser=Object.assign({},g,t.parser);const b=function(e){return!1===t.allowedTags||(t.allowedTags||[]).indexOf(e)>-1};h.forEach((function(e){b(e)&&!t.allowVulnerableTags&&console.warn(`\n\n⚠️ Your \`allowedTags\` option includes, \`${e}\`, which is inherently\nvulnerable to XSS attacks. Please remove it from \`allowedTags\`.\nOr, to disable this warning, add the \`allowVulnerableTags\` option\nand ensure you are accounting for this risk.\n\n`)}));const w=t.nonTextTags||["script","style","textarea","option"];let O,S;t.allowedAttributes&&(O={},S={},d(t.allowedAttributes,(function(e,t){O[t]=[];const i=[];e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(r(e).replace(/\\\*/g,".*")):O[t].push(e)})),i.length&&(S[t]=new RegExp("^("+i.join("|")+")$"))})));const k={},P={},C={};d(t.allowedClasses,(function(e,t){if(O&&(u(O,t)||(O[t]=[]),O[t].push("class")),k[t]=e,Array.isArray(e)){const i=[];k[t]=[],C[t]=[],e.forEach((function(e){"string"==typeof e&&e.indexOf("*")>=0?i.push(r(e).replace(/\\\*/g,".*")):e instanceof RegExp?C[t].push(e):k[t].push(e)})),i.length&&(P[t]=new RegExp("^("+i.join("|")+")$"))}}));const A={};let I,T,$,M,E,_,D;d(t.transformTags,(function(e,t){let i;"function"==typeof e?i=e:"string"==typeof e&&(i=m.simpleTransform(e)),"*"===t?I=i:A[t]=i}));let L=!1;R();const B=new n.Parser({onopentag:function(e,i){if(t.enforceHtmlBoundary&&"html"===e&&R(),_)return void D++;const n=new x(e,i);$.push(n);let r=!1;const c=!!n.text;let h;if(u(A,e)&&(h=A[e](e,i),n.attribs=i=h.attribs,void 0!==h.text&&(n.innerText=h.text),e!==h.tagName&&(n.name=e=h.tagName,E[T]=h.tagName)),I&&(h=I(e,i),n.attribs=i=h.attribs,e!==h.tagName&&(n.name=e=h.tagName,E[T]=h.tagName)),(!b(e)||"recursiveEscape"===t.disallowedTagsMode&&!function(e){for(const t in e)if(u(e,t))return!1;return!0}(M)||null!=t.nestingLimit&&T>=t.nestingLimit)&&(r=!0,M[T]=!0,"discard"===t.disallowedTagsMode&&-1!==w.indexOf(e)&&(_=!0,D=1),M[T]=!0),T++,r){if("discard"===t.disallowedTagsMode)return;v=y,y=""}y+="<"+e,"script"===e&&(t.allowedScriptHostnames||t.allowedScriptDomains)&&(n.innerText=""),(!O||u(O,e)||O["*"])&&d(i,(function(i,r){if(!f.test(r))return void delete n.attribs[r];if(""===i&&!t.allowedEmptyAttributes.includes(r)&&(t.nonBooleanAttributes.includes(r)||t.nonBooleanAttributes.includes("*")))return void delete n.attribs[r];let c=!1;if(!O||u(O,e)&&-1!==O[e].indexOf(r)||O["*"]&&-1!==O["*"].indexOf(r)||u(S,e)&&S[e].test(r)||S["*"]&&S["*"].test(r))c=!0;else if(O&&O[e])for(const t of O[e])if(s(t)&&t.name&&t.name===r){c=!0;let e="";if(!0===t.multiple){const n=i.split(" ");for(const i of n)-1!==t.values.indexOf(i)&&(""===e?e=i:e+=" "+i)}else t.values.indexOf(i)>=0&&(e=i);i=e}if(c){if(-1!==t.allowedSchemesAppliedToAttributes.indexOf(r)&&F(e,i))return void delete n.attribs[r];if("script"===e&&"src"===r){let e=!0;try{const n=j(i);if(t.allowedScriptHostnames||t.allowedScriptDomains){const i=(t.allowedScriptHostnames||[]).find((function(e){return e===n.url.hostname})),r=(t.allowedScriptDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=i||r}}catch(t){e=!1}if(!e)return void delete n.attribs[r]}if("iframe"===e&&"src"===r){let e=!0;try{const n=j(i);if(n.isRelativeUrl)e=u(t,"allowIframeRelativeUrls")?t.allowIframeRelativeUrls:!t.allowedIframeHostnames&&!t.allowedIframeDomains;else if(t.allowedIframeHostnames||t.allowedIframeDomains){const i=(t.allowedIframeHostnames||[]).find((function(e){return e===n.url.hostname})),r=(t.allowedIframeDomains||[]).find((function(e){return n.url.hostname===e||n.url.hostname.endsWith(`.${e}`)}));e=i||r}}catch(t){e=!1}if(!e)return void delete n.attribs[r]}if("srcset"===r)try{let e=a(i);if(e.forEach((function(e){F("srcset",e.url)&&(e.evil=!0)})),e=p(e,(function(e){return!e.evil})),!e.length)return void delete n.attribs[r];i=p(e,(function(e){return!e.evil})).map((function(e){if(!e.url)throw new Error("URL missing");return e.url+(e.w?` ${e.w}w`:"")+(e.h?` ${e.h}h`:"")+(e.d?` ${e.d}x`:"")})).join(", "),n.attribs[r]=i}catch(e){return void delete n.attribs[r]}if("class"===r){const t=k[e],s=k["*"],a=P[e],l=C[e],c=[a,P["*"]].concat(l).filter((function(e){return e}));if(!(h=i,d=t&&s?o(t,s):t||s,m=c,i=d?(h=h.split(/\s+/)).filter((function(e){return-1!==d.indexOf(e)||m.some((function(t){return t.test(e)}))})).join(" "):h).length)return void delete n.attribs[r]}if("style"===r)if(t.parseStyleAttributes)try{if(i=function(e){return e.nodes[0].nodes.reduce((function(e,t){return e.push(`${t.prop}:${t.value}${t.important?" !important":""}`),e}),[]).join(";")}(function(e,t){if(!t)return e;const i=e.nodes[0];let n;return n=t[i.selector]&&t["*"]?o(t[i.selector],t["*"]):t[i.selector]||t["*"],n&&(e.nodes[0].nodes=i.nodes.reduce(function(e){return function(t,i){return u(e,i.prop)&&e[i.prop].some((function(e){return e.test(i.value)}))&&t.push(i),t}}(n),[])),e}(l(e+" {"+i+"}",{map:!1}),t.allowedStyles)),0===i.length)return void delete n.attribs[r]}catch(t){return"undefined"!=typeof window&&console.warn('Failed to parse "'+e+" {"+i+"}\", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547"),void delete n.attribs[r]}else if(t.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.");y+=" "+r,i&&i.length?y+='="'+N(i,!0)+'"':t.allowedEmptyAttributes.includes(r)&&(y+='=""')}else delete n.attribs[r];var h,d,m})),-1!==t.selfClosing.indexOf(e)?y+=" />":(y+=">",!n.innerText||c||t.textFilter||(y+=N(n.innerText),L=!0)),r&&(y=v+N(y),v="")},ontext:function(e){if(_)return;const i=$[$.length-1];let n;if(i&&(n=i.tag,e=void 0!==i.innerText?i.innerText:e),"discard"!==t.disallowedTagsMode||"script"!==n&&"style"!==n){const i=N(e,!1);t.textFilter&&!L?y+=t.textFilter(i,n):L||(y+=i)}else y+=e;$.length&&($[$.length-1].text+=e)},onclosetag:function(e,i){if(_){if(D--,D)return;_=!1}const n=$.pop();if(!n)return;if(n.tag!==e)return void $.push(n);_=!!t.enforceHtmlBoundary&&"html"===e,T--;const r=M[T];if(r){if(delete M[T],"discard"===t.disallowedTagsMode)return void n.updateParentNodeText();v=y,y=""}E[T]&&(e=E[T],delete E[T]),t.exclusiveFilter&&t.exclusiveFilter(n)?y=y.substr(0,n.tagPosition):(n.updateParentNodeMediaChildren(),n.updateParentNodeText(),-1!==t.selfClosing.indexOf(e)||i&&!b(e)&&["escape","recursiveEscape"].indexOf(t.disallowedTagsMode)>=0?r&&(y=v,v=""):(y+="</"+e+">",r&&(y=v+N(y),v=""),L=!1))}},t.parser);return B.write(e),B.end(),y;function R(){y="",T=0,$=[],M={},E={},_=!1,D=0}function N(e,i){return"string"!=typeof e&&(e+=""),t.parser.decodeEntities&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;"))),e=e.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),i&&(e=e.replace(/"/g,"&quot;")),e}function F(e,i){for(i=i.replace(/[\x00-\x20]+/g,"");;){const e=i.indexOf("\x3c!--");if(-1===e)break;const t=i.indexOf("--\x3e",e+4);if(-1===t)break;i=i.substring(0,e)+i.substring(t+3)}const n=i.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!n)return!!i.match(/^[/\\]{2}/)&&!t.allowProtocolRelative;const r=n[1].toLowerCase();return u(t.allowedSchemesByTag,e)?-1===t.allowedSchemesByTag[e].indexOf(r):!t.allowedSchemes||-1===t.allowedSchemes.indexOf(r)}function j(e){if((e=e.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//")).startsWith("relative:"))throw new Error("relative: exploit attempt");let t="relative://relative-site";for(let e=0;e<100;e++)t+=`/${e}`;const i=new URL(e,t);return{isRelativeUrl:i&&"relative-site"===i.hostname&&"relative:"===i.protocol,url:i}}}const g={decodeEntities:!0};m.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","main","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0},m.simpleTransform=function(e,t,i){return i=void 0===i||i,t=t||{},function(n,r){let s;if(i)for(s in t)r[s]=t[s];else r=t;return{tagName:e,attribs:r}}}},1019:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.attributeNames=t.elementNames=void 0,t.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map((function(e){return[e.toLowerCase(),e]}))),t.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((function(e){return[e.toLowerCase(),e]})))},9079:function(e,t,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;var a=o(i(5413)),l=i(6835),c=i(1019),h=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function d(e){return e.replace(/"/g,"&quot;")}var u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p(e,t){void 0===t&&(t={});for(var i=("length"in e?e:[e]),n="",r=0;r<i.length;r++)n+=f(i[r],t);return n}function f(e,t){switch(e.type){case a.Root:return p(e.children,t);case a.Doctype:case a.Directive:return"<".concat(e.data,">");case a.Comment:return"\x3c!--".concat(e.data,"--\x3e");case a.CDATA:return function(e){return"<![CDATA[".concat(e.children[0].data,"]]>")}(e);case a.Script:case a.Style:case a.Tag:return function(e,t){var i;"foreign"===t.xmlMode&&(e.name=null!==(i=c.elementNames.get(e.name))&&void 0!==i?i:e.name,e.parent&&m.has(e.parent.name)&&(t=n(n({},t),{xmlMode:!1}))),!t.xmlMode&&g.has(e.name)&&(t=n(n({},t),{xmlMode:"foreign"}));var r="<".concat(e.name),s=function(e,t){var i;if(e){var n=!1===(null!==(i=t.encodeEntities)&&void 0!==i?i:t.decodeEntities)?d:t.xmlMode||"utf8"!==t.encodeEntities?l.encodeXML:l.escapeAttribute;return Object.keys(e).map((function(i){var r,s,o=null!==(r=e[i])&&void 0!==r?r:"";return"foreign"===t.xmlMode&&(i=null!==(s=c.attributeNames.get(i))&&void 0!==s?s:i),t.emptyAttrs||t.xmlMode||""!==o?"".concat(i,'="').concat(n(o),'"'):i})).join(" ")}}(e.attribs,t);return s&&(r+=" ".concat(s)),0===e.children.length&&(t.xmlMode?!1!==t.selfClosingTags:t.selfClosingTags&&u.has(e.name))?(t.xmlMode||(r+=" "),r+="/>"):(r+=">",e.children.length>0&&(r+=p(e.children,t)),!t.xmlMode&&u.has(e.name)||(r+="</".concat(e.name,">"))),r}(e,t);case a.Text:return function(e,t){var i,n=e.data||"";return!1===(null!==(i=t.encodeEntities)&&void 0!==i?i:t.decodeEntities)||!t.xmlMode&&e.parent&&h.has(e.parent.name)||(n=t.xmlMode||"utf8"!==t.encodeEntities?(0,l.encodeXML)(n):(0,l.escapeText)(n)),n}(e,t)}}t.render=p,t.default=p;var m=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"])},4128:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var s=i(5413),o=i(430);r(i(430),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},l=function(){function e(e,t,i){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,"function"==typeof t&&(i=t,t=a),"object"==typeof e&&(t=e,e=void 0),this.callback=null!=e?e:null,this.options=null!=t?t:a,this.elementCB=null!=i?i:null}return e.prototype.onparserinit=function(e){this.parser=e},e.prototype.onreset=function(){this.dom=[],this.root=new o.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},e.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},e.prototype.onerror=function(e){this.handleCallback(e)},e.prototype.onclosetag=function(){this.lastNode=null;var e=this.tagStack.pop();this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(e)},e.prototype.onopentag=function(e,t){var i=this.options.xmlMode?s.ElementType.Tag:void 0,n=new o.Element(e,t,void 0,i);this.addNode(n),this.tagStack.push(n)},e.prototype.ontext=function(e){var t=this.lastNode;if(t&&t.type===s.ElementType.Text)t.data+=e,this.options.withEndIndices&&(t.endIndex=this.parser.endIndex);else{var i=new o.Text(e);this.addNode(i),this.lastNode=i}},e.prototype.oncomment=function(e){if(this.lastNode&&this.lastNode.type===s.ElementType.Comment)this.lastNode.data+=e;else{var t=new o.Comment(e);this.addNode(t),this.lastNode=t}},e.prototype.oncommentend=function(){this.lastNode=null},e.prototype.oncdatastart=function(){var e=new o.Text(""),t=new o.CDATA([e]);this.addNode(t),e.parent=t,this.lastNode=e},e.prototype.oncdataend=function(){this.lastNode=null},e.prototype.onprocessinginstruction=function(e,t){var i=new o.ProcessingInstruction(e,t);this.addNode(i)},e.prototype.handleCallback=function(e){if("function"==typeof this.callback)this.callback(e,this.dom);else if(e)throw e},e.prototype.addNode=function(e){var t=this.tagStack[this.tagStack.length-1],i=t.children[t.children.length-1];this.options.withStartIndices&&(e.startIndex=this.parser.startIndex),this.options.withEndIndices&&(e.endIndex=this.parser.endIndex),t.children.push(e),i&&(e.prev=i,i.next=e),e.parent=t,this.lastNode=null},e}();t.DomHandler=l,t.default=l},430:function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}),s=this&&this.__assign||function(){return s=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},s.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.cloneNode=t.hasChildren=t.isDocument=t.isDirective=t.isComment=t.isText=t.isCDATA=t.isTag=t.Element=t.Document=t.CDATA=t.NodeWithChildren=t.ProcessingInstruction=t.Comment=t.Text=t.DataNode=t.Node=void 0;var o=i(5413),a=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(e){this.parent=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(e){this.prev=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(e){this.next=e},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(e){return void 0===e&&(e=!1),O(this,e)},e}();t.Node=a;var l=function(e){function t(t){var i=e.call(this)||this;return i.data=t,i}return r(t,e),Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(e){this.data=e},enumerable:!1,configurable:!0}),t}(a);t.DataNode=l;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Text,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(l);t.Text=c;var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Comment,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(l);t.Comment=h;var d=function(e){function t(t,i){var n=e.call(this,i)||this;return n.name=t,n.type=o.ElementType.Directive,n}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(l);t.ProcessingInstruction=d;var u=function(e){function t(t){var i=e.call(this)||this;return i.children=t,i}return r(t,e),Object.defineProperty(t.prototype,"firstChild",{get:function(){var e;return null!==(e=this.children[0])&&void 0!==e?e:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(e){this.children=e},enumerable:!1,configurable:!0}),t}(a);t.NodeWithChildren=u;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.CDATA,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(u);t.CDATA=p;var f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=o.ElementType.Root,t}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(u);t.Document=f;var m=function(e){function t(t,i,n,r){void 0===n&&(n=[]),void 0===r&&(r="script"===t?o.ElementType.Script:"style"===t?o.ElementType.Style:o.ElementType.Tag);var s=e.call(this,n)||this;return s.name=t,s.attribs=i,s.type=r,s}return r(t,e),Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(e){this.name=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var e=this;return Object.keys(this.attribs).map((function(t){var i,n;return{name:t,value:e.attribs[t],namespace:null===(i=e["x-attribsNamespace"])||void 0===i?void 0:i[t],prefix:null===(n=e["x-attribsPrefix"])||void 0===n?void 0:n[t]}}))},enumerable:!1,configurable:!0}),t}(u);function g(e){return(0,o.isTag)(e)}function y(e){return e.type===o.ElementType.CDATA}function v(e){return e.type===o.ElementType.Text}function x(e){return e.type===o.ElementType.Comment}function b(e){return e.type===o.ElementType.Directive}function w(e){return e.type===o.ElementType.Root}function O(e,t){var i;if(void 0===t&&(t=!1),v(e))i=new c(e.data);else if(x(e))i=new h(e.data);else if(g(e)){var n=t?S(e.children):[],r=new m(e.name,s({},e.attribs),n);n.forEach((function(e){return e.parent=r})),null!=e.namespace&&(r.namespace=e.namespace),e["x-attribsNamespace"]&&(r["x-attribsNamespace"]=s({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(r["x-attribsPrefix"]=s({},e["x-attribsPrefix"])),i=r}else if(y(e)){n=t?S(e.children):[];var o=new p(n);n.forEach((function(e){return e.parent=o})),i=o}else if(w(e)){n=t?S(e.children):[];var a=new f(n);n.forEach((function(e){return e.parent=a})),e["x-mode"]&&(a["x-mode"]=e["x-mode"]),i=a}else{if(!b(e))throw new Error("Not implemented yet: ".concat(e.type));var l=new d(e.name,e.data);null!=e["x-name"]&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),i=l}return i.startIndex=e.startIndex,i.endIndex=e.endIndex,null!=e.sourceCodeLocation&&(i.sourceCodeLocation=e.sourceCodeLocation),i}function S(e){for(var t=e.map((function(e){return O(e,!0)})),i=1;i<t.length;i++)t[i].prev=t[i-1],t[i-1].next=t[i];return t}t.Element=m,t.isTag=g,t.isCDATA=y,t.isText=v,t.isComment=x,t.isDirective=b,t.isDocument=w,t.hasChildren=function(e){return Object.prototype.hasOwnProperty.call(e,"children")},t.cloneNode=O},2772:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeed=void 0;var n=i(9124),r=i(1974);t.getFeed=function(e){var t=l(d,e);return t?"feed"===t.name?function(e){var t,i=e.children,n={type:"atom",items:(0,r.getElementsByTagName)("entry",i).map((function(e){var t,i=e.children,n={media:a(i)};h(n,"id","id",i),h(n,"title","title",i);var r=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;r&&(n.link=r);var s=c("summary",i)||c("content",i);s&&(n.description=s);var o=c("updated",i);return o&&(n.pubDate=new Date(o)),n}))};h(n,"id","id",i),h(n,"title","title",i);var s=null===(t=l("link",i))||void 0===t?void 0:t.attribs.href;s&&(n.link=s),h(n,"description","subtitle",i);var o=c("updated",i);return o&&(n.updated=new Date(o)),h(n,"author","email",i,!0),n}(t):function(e){var t,i,n=null!==(i=null===(t=l("channel",e.children))||void 0===t?void 0:t.children)&&void 0!==i?i:[],s={type:e.name.substr(0,3),id:"",items:(0,r.getElementsByTagName)("item",e.children).map((function(e){var t=e.children,i={media:a(t)};h(i,"id","guid",t),h(i,"title","title",t),h(i,"link","link",t),h(i,"description","description",t);var n=c("pubDate",t)||c("dc:date",t);return n&&(i.pubDate=new Date(n)),i}))};h(s,"title","title",n),h(s,"link","link",n),h(s,"description","description",n);var o=c("lastBuildDate",n);return o&&(s.updated=new Date(o)),h(s,"author","managingEditor",n,!0),s}(t):null};var s=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(e){return(0,r.getElementsByTagName)("media:content",e).map((function(e){for(var t=e.attribs,i={medium:t.medium,isDefault:!!t.isDefault},n=0,r=s;n<r.length;n++)t[c=r[n]]&&(i[c]=t[c]);for(var a=0,l=o;a<l.length;a++){var c;t[c=l[a]]&&(i[c]=parseInt(t[c],10))}return t.expression&&(i.expression=t.expression),i}))}function l(e,t){return(0,r.getElementsByTagName)(e,t,!0,1)[0]}function c(e,t,i){return void 0===i&&(i=!1),(0,n.textContent)((0,r.getElementsByTagName)(e,t,i,1)).trim()}function h(e,t,i,n,r){void 0===r&&(r=!1);var s=c(i,n,r);s&&(e[t]=s)}function d(e){return"rss"===e||"feed"===e||"rdf:RDF"===e}},5936:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueSort=t.compareDocumentPosition=t.DocumentPosition=t.removeSubsets=void 0;var n,r=i(4128);function s(e,t){var i=[],s=[];if(e===t)return 0;for(var o=(0,r.hasChildren)(e)?e:e.parent;o;)i.unshift(o),o=o.parent;for(o=(0,r.hasChildren)(t)?t:t.parent;o;)s.unshift(o),o=o.parent;for(var a=Math.min(i.length,s.length),l=0;l<a&&i[l]===s[l];)l++;if(0===l)return n.DISCONNECTED;var c=i[l-1],h=c.children,d=i[l],u=s[l];return h.indexOf(d)>h.indexOf(u)?c===t?n.FOLLOWING|n.CONTAINED_BY:n.FOLLOWING:c===e?n.PRECEDING|n.CONTAINS:n.PRECEDING}t.removeSubsets=function(e){for(var t=e.length;--t>=0;){var i=e[t];if(t>0&&e.lastIndexOf(i,t-1)>=0)e.splice(t,1);else for(var n=i.parent;n;n=n.parent)if(e.includes(n)){e.splice(t,1);break}}return e},function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"}(n=t.DocumentPosition||(t.DocumentPosition={})),t.compareDocumentPosition=s,t.uniqueSort=function(e){return(e=e.filter((function(e,t,i){return!i.includes(e,t+1)}))).sort((function(e,t){var i=s(e,t);return i&n.PRECEDING?-1:i&n.FOLLOWING?1:0})),e}},1941:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(i(9124),t),r(i(2851),t),r(i(568),t),r(i(1161),t),r(i(1974),t),r(i(5936),t),r(i(2772),t);var s=i(4128);Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return s.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return s.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return s.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return s.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return s.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return s.hasChildren}})},1974:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getElementsByTagType=t.getElementsByTagName=t.getElementById=t.getElements=t.testElement=void 0;var n=i(4128),r=i(1161),s={tag_name:function(e){return"function"==typeof e?function(t){return(0,n.isTag)(t)&&e(t.name)}:"*"===e?n.isTag:function(t){return(0,n.isTag)(t)&&t.name===e}},tag_type:function(e){return"function"==typeof e?function(t){return e(t.type)}:function(t){return t.type===e}},tag_contains:function(e){return"function"==typeof e?function(t){return(0,n.isText)(t)&&e(t.data)}:function(t){return(0,n.isText)(t)&&t.data===e}}};function o(e,t){return"function"==typeof t?function(i){return(0,n.isTag)(i)&&t(i.attribs[e])}:function(i){return(0,n.isTag)(i)&&i.attribs[e]===t}}function a(e,t){return function(i){return e(i)||t(i)}}function l(e){var t=Object.keys(e).map((function(t){var i=e[t];return Object.prototype.hasOwnProperty.call(s,t)?s[t](i):o(t,i)}));return 0===t.length?null:t.reduce(a)}t.testElement=function(e,t){var i=l(e);return!i||i(t)},t.getElements=function(e,t,i,n){void 0===n&&(n=1/0);var s=l(e);return s?(0,r.filter)(s,t,i,n):[]},t.getElementById=function(e,t,i){return void 0===i&&(i=!0),Array.isArray(t)||(t=[t]),(0,r.findOne)(o("id",e),t,i)},t.getElementsByTagName=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),(0,r.filter)(s.tag_name(e),t,i,n)},t.getElementsByTagType=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),(0,r.filter)(s.tag_type(e),t,i,n)}},568:(e,t)=>{"use strict";function i(e){if(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.parent){var t=e.parent.children,i=t.lastIndexOf(e);i>=0&&t.splice(i,1)}e.next=null,e.prev=null,e.parent=null}Object.defineProperty(t,"__esModule",{value:!0}),t.prepend=t.prependChild=t.append=t.appendChild=t.replaceElement=t.removeElement=void 0,t.removeElement=i,t.replaceElement=function(e,t){var i=t.prev=e.prev;i&&(i.next=t);var n=t.next=e.next;n&&(n.prev=t);var r=t.parent=e.parent;if(r){var s=r.children;s[s.lastIndexOf(e)]=t,e.parent=null}},t.appendChild=function(e,t){if(i(t),t.next=null,t.parent=e,e.children.push(t)>1){var n=e.children[e.children.length-2];n.next=t,t.prev=n}else t.prev=null},t.append=function(e,t){i(t);var n=e.parent,r=e.next;if(t.next=r,t.prev=e,e.next=t,t.parent=n,r){if(r.prev=t,n){var s=n.children;s.splice(s.lastIndexOf(r),0,t)}}else n&&n.children.push(t)},t.prependChild=function(e,t){if(i(t),t.parent=e,t.prev=null,1!==e.children.unshift(t)){var n=e.children[1];n.prev=t,t.next=n}else t.next=null},t.prepend=function(e,t){i(t);var n=e.parent;if(n){var r=n.children;r.splice(r.indexOf(e),0,t)}e.prev&&(e.prev.next=t),t.parent=n,t.prev=e.prev,t.next=e,e.prev=t}},1161:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAll=t.existsOne=t.findOne=t.findOneChild=t.find=t.filter=void 0;var n=i(4128);function r(e,t,i,r){for(var s=[],o=[t],a=[0];;)if(a[0]>=o[0].length){if(1===a.length)return s;o.shift(),a.shift()}else{var l=o[0][a[0]++];if(e(l)&&(s.push(l),--r<=0))return s;i&&(0,n.hasChildren)(l)&&l.children.length>0&&(a.unshift(0),o.unshift(l.children))}}t.filter=function(e,t,i,n){return void 0===i&&(i=!0),void 0===n&&(n=1/0),r(e,Array.isArray(t)?t:[t],i,n)},t.find=r,t.findOneChild=function(e,t){return t.find(e)},t.findOne=function e(t,i,r){void 0===r&&(r=!0);for(var s=null,o=0;o<i.length&&!s;o++){var a=i[o];(0,n.isTag)(a)&&(t(a)?s=a:r&&a.children.length>0&&(s=e(t,a.children,!0)))}return s},t.existsOne=function e(t,i){return i.some((function(i){return(0,n.isTag)(i)&&(t(i)||e(t,i.children))}))},t.findAll=function(e,t){for(var i=[],r=[t],s=[0];;)if(s[0]>=r[0].length){if(1===r.length)return i;r.shift(),s.shift()}else{var o=r[0][s[0]++];(0,n.isTag)(o)&&(e(o)&&i.push(o),o.children.length>0&&(s.unshift(0),r.unshift(o.children)))}}},9124:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.innerText=t.textContent=t.getText=t.getInnerHTML=t.getOuterHTML=void 0;var r=i(4128),s=n(i(9079)),o=i(5413);function a(e,t){return(0,s.default)(e,t)}t.getOuterHTML=a,t.getInnerHTML=function(e,t){return(0,r.hasChildren)(e)?e.children.map((function(e){return a(e,t)})).join(""):""},t.getText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.isTag)(t)?"br"===t.name?"\n":e(t.children):(0,r.isCDATA)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.textContent=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&!(0,r.isComment)(t)?e(t.children):(0,r.isText)(t)?t.data:""},t.innerText=function e(t){return Array.isArray(t)?t.map(e).join(""):(0,r.hasChildren)(t)&&(t.type===o.ElementType.Tag||(0,r.isCDATA)(t))?e(t.children):(0,r.isText)(t)?t.data:""}},2851:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prevElementSibling=t.nextElementSibling=t.getName=t.hasAttrib=t.getAttributeValue=t.getSiblings=t.getParent=t.getChildren=void 0;var n=i(4128);function r(e){return(0,n.hasChildren)(e)?e.children:[]}function s(e){return e.parent||null}t.getChildren=r,t.getParent=s,t.getSiblings=function(e){var t=s(e);if(null!=t)return r(t);for(var i=[e],n=e.prev,o=e.next;null!=n;)i.unshift(n),n=n.prev;for(;null!=o;)i.push(o),o=o.next;return i},t.getAttributeValue=function(e,t){var i;return null===(i=e.attribs)||void 0===i?void 0:i[t]},t.hasAttrib=function(e,t){return null!=e.attribs&&Object.prototype.hasOwnProperty.call(e.attribs,t)&&null!=e.attribs[t]},t.getName=function(e){return e.name},t.nextElementSibling=function(e){for(var t=e.next;null!==t&&!(0,n.isTag)(t);)t=t.next;return t},t.prevElementSibling=function(e){for(var t=e.prev;null!==t&&!(0,n.isTag)(t);)t=t.prev;return t}},2349:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=o(i(2556));t.htmlDecodeTree=a.default;var l=o(i(3356));t.xmlDecodeTree=l.default;var c=s(i(855));t.decodeCodePoint=c.default;var h,d,u,p,f=i(855);function m(e){return e>=h.ZERO&&e<=h.NINE}Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return f.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return f.fromCodePoint}}),function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"}(h||(h={})),function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"}(d=t.BinTrieFlags||(t.BinTrieFlags={})),function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"}(u||(u={})),function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"}(p=t.DecodingMode||(t.DecodingMode={}));var g=function(){function e(e,t,i){this.decodeTree=e,this.emitCodePoint=t,this.errors=i,this.state=u.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=p.Strict}return e.prototype.startEntity=function(e){this.decodeMode=e,this.state=u.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},e.prototype.write=function(e,t){switch(this.state){case u.EntityStart:return e.charCodeAt(t)===h.NUM?(this.state=u.NumericStart,this.consumed+=1,this.stateNumericStart(e,t+1)):(this.state=u.NamedEntity,this.stateNamedEntity(e,t));case u.NumericStart:return this.stateNumericStart(e,t);case u.NumericDecimal:return this.stateNumericDecimal(e,t);case u.NumericHex:return this.stateNumericHex(e,t);case u.NamedEntity:return this.stateNamedEntity(e,t)}},e.prototype.stateNumericStart=function(e,t){return t>=e.length?-1:(32|e.charCodeAt(t))===h.LOWER_X?(this.state=u.NumericHex,this.consumed+=1,this.stateNumericHex(e,t+1)):(this.state=u.NumericDecimal,this.stateNumericDecimal(e,t))},e.prototype.addToNumericResult=function(e,t,i,n){if(t!==i){var r=i-t;this.result=this.result*Math.pow(n,r)+parseInt(e.substr(t,r),n),this.consumed+=r}},e.prototype.stateNumericHex=function(e,t){for(var i,n=t;t<e.length;){var r=e.charCodeAt(t);if(!(m(r)||(i=r,i>=h.UPPER_A&&i<=h.UPPER_F||i>=h.LOWER_A&&i<=h.LOWER_F)))return this.addToNumericResult(e,n,t,16),this.emitNumericEntity(r,3);t+=1}return this.addToNumericResult(e,n,t,16),-1},e.prototype.stateNumericDecimal=function(e,t){for(var i=t;t<e.length;){var n=e.charCodeAt(t);if(!m(n))return this.addToNumericResult(e,i,t,10),this.emitNumericEntity(n,2);t+=1}return this.addToNumericResult(e,i,t,10),-1},e.prototype.emitNumericEntity=function(e,t){var i;if(this.consumed<=t)return null===(i=this.errors)||void 0===i||i.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(e===h.SEMI)this.consumed+=1;else if(this.decodeMode===p.Strict)return 0;return this.emitCodePoint((0,c.replaceCodePoint)(this.result),this.consumed),this.errors&&(e!==h.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},e.prototype.stateNamedEntity=function(e,t){for(var i=this.decodeTree,n=i[this.treeIndex],r=(n&d.VALUE_LENGTH)>>14;t<e.length;t++,this.excess++){var s=e.charCodeAt(t);if(this.treeIndex=v(i,n,this.treeIndex+Math.max(1,r),s),this.treeIndex<0)return 0===this.result||this.decodeMode===p.Attribute&&(0===r||((o=s)===h.EQUALS||function(e){return e>=h.UPPER_A&&e<=h.UPPER_Z||e>=h.LOWER_A&&e<=h.LOWER_Z||m(e)}(o)))?0:this.emitNotTerminatedNamedEntity();if(0!=(r=((n=i[this.treeIndex])&d.VALUE_LENGTH)>>14)){if(s===h.SEMI)return this.emitNamedEntityData(this.treeIndex,r,this.consumed+this.excess);this.decodeMode!==p.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}var o;return-1},e.prototype.emitNotTerminatedNamedEntity=function(){var e,t=this.result,i=(this.decodeTree[t]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(t,i,this.consumed),null===(e=this.errors)||void 0===e||e.missingSemicolonAfterCharacterReference(),this.consumed},e.prototype.emitNamedEntityData=function(e,t,i){var n=this.decodeTree;return this.emitCodePoint(1===t?n[e]&~d.VALUE_LENGTH:n[e+1],i),3===t&&this.emitCodePoint(n[e+2],i),i},e.prototype.end=function(){var e;switch(this.state){case u.NamedEntity:return 0===this.result||this.decodeMode===p.Attribute&&this.result!==this.treeIndex?0:this.emitNotTerminatedNamedEntity();case u.NumericDecimal:return this.emitNumericEntity(0,2);case u.NumericHex:return this.emitNumericEntity(0,3);case u.NumericStart:return null===(e=this.errors)||void 0===e||e.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case u.EntityStart:return 0}},e}();function y(e){var t="",i=new g(e,(function(e){return t+=(0,c.fromCodePoint)(e)}));return function(e,n){for(var r=0,s=0;(s=e.indexOf("&",s))>=0;){t+=e.slice(r,s),i.startEntity(n);var o=i.write(e,s+1);if(o<0){r=s+i.end();break}r=s+o,s=0===o?r+1:r}var a=t+e.slice(r);return t="",a}}function v(e,t,i,n){var r=(t&d.BRANCH_LENGTH)>>7,s=t&d.JUMP_TABLE;if(0===r)return 0!==s&&n===s?i:-1;if(s){var o=n-s;return o<0||o>=r?-1:e[i+o]-1}for(var a=i,l=a+r-1;a<=l;){var c=a+l>>>1,h=e[c];if(h<n)a=c+1;else{if(!(h>n))return e[c+r];l=c-1}}return-1}t.EntityDecoder=g,t.determineBranch=v;var x=y(a.default),b=y(l.default);t.decodeHTML=function(e,t){return void 0===t&&(t=p.Legacy),x(e,t)},t.decodeHTMLAttribute=function(e){return x(e,p.Attribute)},t.decodeHTMLStrict=function(e){return x(e,p.Strict)},t.decodeXML=function(e){return b(e,p.Strict)}},855:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var n=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);function r(e){var t;return e>=55296&&e<=57343||e>1114111?65533:null!==(t=n.get(e))&&void 0!==t?t:e}t.fromCodePoint=null!==(i=String.fromCodePoint)&&void 0!==i?i:function(e){var t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|1023&e),t+String.fromCharCode(e)},t.replaceCodePoint=r,t.default=function(e){return(0,t.fromCodePoint)(r(e))}},8149:function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.encodeNonAsciiHTML=t.encodeHTML=void 0;var r=n(i(2125)),s=i(1560),o=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function a(e,t){for(var i,n="",o=0;null!==(i=e.exec(t));){var a=i.index;n+=t.substring(o,a);var l=t.charCodeAt(a),c=r.default.get(l);if("object"==typeof c){if(a+1<t.length){var h=t.charCodeAt(a+1),d="number"==typeof c.n?c.n===h?c.o:void 0:c.n.get(h);if(void 0!==d){n+=d,o=e.lastIndex+=1;continue}}c=c.v}if(void 0!==c)n+=c,o=a+1;else{var u=(0,s.getCodePoint)(t,a);n+="&#x".concat(u.toString(16),";"),o=e.lastIndex+=Number(u!==l)}}return n+t.substr(o)}t.encodeHTML=function(e){return a(o,e)},t.encodeNonAsciiHTML=function(e){return a(s.xmlReplacer,e)}},1560:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var i=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);function n(e){for(var n,r="",s=0;null!==(n=t.xmlReplacer.exec(e));){var o=n.index,a=e.charCodeAt(o),l=i.get(a);void 0!==l?(r+=e.substring(s,o)+l,s=o+1):(r+="".concat(e.substring(s,o),"&#x").concat((0,t.getCodePoint)(e,o).toString(16),";"),s=t.xmlReplacer.lastIndex+=Number(55296==(64512&a)))}return r+e.substr(s)}function r(e,t){return function(i){for(var n,r=0,s="";n=e.exec(i);)r!==n.index&&(s+=i.substring(r,n.index)),s+=t.get(n[0].charCodeAt(0)),r=n.index+1;return s+i.substring(r)}}t.getCodePoint=null!=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return 55296==(64512&e.charCodeAt(t))?1024*(e.charCodeAt(t)-55296)+e.charCodeAt(t+1)-56320+65536:e.charCodeAt(t)},t.encodeXML=n,t.escape=n,t.escapeUTF8=r(/[&<>'"]/g,i),t.escapeAttribute=r(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=r(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))},2556:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map((function(e){return e.charCodeAt(0)})))},3356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Uint16Array("Ȁaglq\tɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map((function(e){return e.charCodeAt(0)})))},2125:(e,t)=>{"use strict";function i(e){for(var t=1;t<e.length;t++)e[t][0]+=e[t-1][0]+1;return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=new Map(i([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(i([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(i([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(i([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]]))},6835:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var n,r,s=i(2349),o=i(8149),a=i(1560);function l(e,t){if(void 0===t&&(t=n.XML),("number"==typeof t?t:t.level)===n.HTML){var i="object"==typeof t?t.mode:void 0;return(0,s.decodeHTML)(e,i)}return(0,s.decodeXML)(e)}!function(e){e[e.XML=0]="XML",e[e.HTML=1]="HTML"}(n=t.EntityLevel||(t.EntityLevel={})),function(e){e[e.UTF8=0]="UTF8",e[e.ASCII=1]="ASCII",e[e.Extensive=2]="Extensive",e[e.Attribute=3]="Attribute",e[e.Text=4]="Text"}(r=t.EncodingMode||(t.EncodingMode={})),t.decode=l,t.decodeStrict=function(e,t){var i;void 0===t&&(t=n.XML);var r="number"==typeof t?{level:t}:t;return null!==(i=r.mode)&&void 0!==i||(r.mode=s.DecodingMode.Strict),l(e,r)},t.encode=function(e,t){void 0===t&&(t=n.XML);var i="number"==typeof t?{level:t}:t;return i.mode===r.UTF8?(0,a.escapeUTF8)(e):i.mode===r.Attribute?(0,a.escapeAttribute)(e):i.mode===r.Text?(0,a.escapeText)(e):i.level===n.HTML?i.mode===r.ASCII?(0,o.encodeNonAsciiHTML)(e):(0,o.encodeHTML)(e):(0,a.encodeXML)(e)};var c=i(1560);Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var h=i(8149);Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return h.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return h.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return h.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return h.encodeHTML}});var d=i(2349);Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})},7151:e=>{"use strict";e.exports=e=>{if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},221:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Parser=void 0;var o=s(i(357)),a=i(2349),l=new Set(["input","option","optgroup","select","button","datalist","textarea"]),c=new Set(["p"]),h=new Set(["thead","tbody"]),d=new Set(["dd","dt"]),u=new Set(["rt","rp"]),p=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",c],["h1",c],["h2",c],["h3",c],["h4",c],["h5",c],["h6",c],["select",l],["input",l],["output",l],["button",l],["datalist",l],["textarea",l],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",d],["dt",d],["address",c],["article",c],["aside",c],["blockquote",c],["details",c],["div",c],["dl",c],["fieldset",c],["figcaption",c],["figure",c],["footer",c],["form",c],["header",c],["hr",c],["main",c],["nav",c],["ol",c],["pre",c],["section",c],["table",c],["ul",c],["rt",u],["rp",u],["tbody",h],["tfoot",h]]),f=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),m=new Set(["math","svg"]),g=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),y=/\s|\//,v=function(){function e(e,t){var i,n,r,s,a;void 0===t&&(t={}),this.options=t,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=null!=e?e:{},this.lowerCaseTagNames=null!==(i=t.lowerCaseTags)&&void 0!==i?i:!t.xmlMode,this.lowerCaseAttributeNames=null!==(n=t.lowerCaseAttributeNames)&&void 0!==n?n:!t.xmlMode,this.tokenizer=new(null!==(r=t.Tokenizer)&&void 0!==r?r:o.default)(this.options,this),null===(a=(s=this.cbs).onparserinit)||void 0===a||a.call(s,this)}return e.prototype.ontext=function(e,t){var i,n,r=this.getSlice(e,t);this.endIndex=t-1,null===(n=(i=this.cbs).ontext)||void 0===n||n.call(i,r),this.startIndex=t},e.prototype.ontextentity=function(e){var t,i,n=this.tokenizer.getSectionStart();this.endIndex=n-1,null===(i=(t=this.cbs).ontext)||void 0===i||i.call(t,(0,a.fromCodePoint)(e)),this.startIndex=n},e.prototype.isVoidElement=function(e){return!this.options.xmlMode&&f.has(e)},e.prototype.onopentagname=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);this.lowerCaseTagNames&&(i=i.toLowerCase()),this.emitOpenTag(i)},e.prototype.emitOpenTag=function(e){var t,i,n,r;this.openTagStart=this.startIndex,this.tagname=e;var s=!this.options.xmlMode&&p.get(e);if(s)for(;this.stack.length>0&&s.has(this.stack[this.stack.length-1]);){var o=this.stack.pop();null===(i=(t=this.cbs).onclosetag)||void 0===i||i.call(t,o,!0)}this.isVoidElement(e)||(this.stack.push(e),m.has(e)?this.foreignContext.push(!0):g.has(e)&&this.foreignContext.push(!1)),null===(r=(n=this.cbs).onopentagname)||void 0===r||r.call(n,e),this.cbs.onopentag&&(this.attribs={})},e.prototype.endOpenTag=function(e){var t,i;this.startIndex=this.openTagStart,this.attribs&&(null===(i=(t=this.cbs).onopentag)||void 0===i||i.call(t,this.tagname,this.attribs,e),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},e.prototype.onopentagend=function(e){this.endIndex=e,this.endOpenTag(!1),this.startIndex=e+1},e.prototype.onclosetag=function(e,t){var i,n,r,s,o,a;this.endIndex=t;var l=this.getSlice(e,t);if(this.lowerCaseTagNames&&(l=l.toLowerCase()),(m.has(l)||g.has(l))&&this.foreignContext.pop(),this.isVoidElement(l))this.options.xmlMode||"br"!==l||(null===(n=(i=this.cbs).onopentagname)||void 0===n||n.call(i,"br"),null===(s=(r=this.cbs).onopentag)||void 0===s||s.call(r,"br",{},!0),null===(a=(o=this.cbs).onclosetag)||void 0===a||a.call(o,"br",!1));else{var c=this.stack.lastIndexOf(l);if(-1!==c)if(this.cbs.onclosetag)for(var h=this.stack.length-c;h--;)this.cbs.onclosetag(this.stack.pop(),0!==h);else this.stack.length=c;else this.options.xmlMode||"p"!==l||(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=t+1},e.prototype.onselfclosingtag=function(e){this.endIndex=e,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=e+1):this.onopentagend(e)},e.prototype.closeCurrentTag=function(e){var t,i,n=this.tagname;this.endOpenTag(e),this.stack[this.stack.length-1]===n&&(null===(i=(t=this.cbs).onclosetag)||void 0===i||i.call(t,n,!e),this.stack.pop())},e.prototype.onattribname=function(e,t){this.startIndex=e;var i=this.getSlice(e,t);this.attribname=this.lowerCaseAttributeNames?i.toLowerCase():i},e.prototype.onattribdata=function(e,t){this.attribvalue+=this.getSlice(e,t)},e.prototype.onattribentity=function(e){this.attribvalue+=(0,a.fromCodePoint)(e)},e.prototype.onattribend=function(e,t){var i,n;this.endIndex=t,null===(n=(i=this.cbs).onattribute)||void 0===n||n.call(i,this.attribname,this.attribvalue,e===o.QuoteType.Double?'"':e===o.QuoteType.Single?"'":e===o.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},e.prototype.getInstructionName=function(e){var t=e.search(y),i=t<0?e:e.substr(0,t);return this.lowerCaseTagNames&&(i=i.toLowerCase()),i},e.prototype.ondeclaration=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("!".concat(n),"!".concat(i))}this.startIndex=t+1},e.prototype.onprocessinginstruction=function(e,t){this.endIndex=t;var i=this.getSlice(e,t);if(this.cbs.onprocessinginstruction){var n=this.getInstructionName(i);this.cbs.onprocessinginstruction("?".concat(n),"?".concat(i))}this.startIndex=t+1},e.prototype.oncomment=function(e,t,i){var n,r,s,o;this.endIndex=t,null===(r=(n=this.cbs).oncomment)||void 0===r||r.call(n,this.getSlice(e,t-i)),null===(o=(s=this.cbs).oncommentend)||void 0===o||o.call(s),this.startIndex=t+1},e.prototype.oncdata=function(e,t,i){var n,r,s,o,a,l,c,h,d,u;this.endIndex=t;var p=this.getSlice(e,t-i);this.options.xmlMode||this.options.recognizeCDATA?(null===(r=(n=this.cbs).oncdatastart)||void 0===r||r.call(n),null===(o=(s=this.cbs).ontext)||void 0===o||o.call(s,p),null===(l=(a=this.cbs).oncdataend)||void 0===l||l.call(a)):(null===(h=(c=this.cbs).oncomment)||void 0===h||h.call(c,"[CDATA[".concat(p,"]]")),null===(u=(d=this.cbs).oncommentend)||void 0===u||u.call(d)),this.startIndex=t+1},e.prototype.onend=function(){var e,t;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var i=this.stack.length;i>0;this.cbs.onclosetag(this.stack[--i],!0));}null===(t=(e=this.cbs).onend)||void 0===t||t.call(e)},e.prototype.reset=function(){var e,t,i,n;null===(t=(e=this.cbs).onreset)||void 0===t||t.call(e),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,null===(n=(i=this.cbs).onparserinit)||void 0===n||n.call(i,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},e.prototype.parseComplete=function(e){this.reset(),this.end(e)},e.prototype.getSlice=function(e,t){for(;e-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var i=this.buffers[0].slice(e-this.bufferOffset,t-this.bufferOffset);t-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),i+=this.buffers[0].slice(0,t-this.bufferOffset);return i},e.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},e.prototype.write=function(e){var t,i;this.ended?null===(i=(t=this.cbs).onerror)||void 0===i||i.call(t,new Error(".write() after done!")):(this.buffers.push(e),this.tokenizer.running&&(this.tokenizer.write(e),this.writeIndex++))},e.prototype.end=function(e){var t,i;this.ended?null===(i=(t=this.cbs).onerror)||void 0===i||i.call(t,new Error(".end() after done!")):(e&&this.write(e),this.ended=!0,this.tokenizer.end())},e.prototype.pause=function(){this.tokenizer.pause()},e.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},e.prototype.parseChunk=function(e){this.write(e)},e.prototype.done=function(e){this.end(e)},e}();t.Parser=v},357:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var n,r,s,o=i(2349);function a(e){return e===n.Space||e===n.NewLine||e===n.Tab||e===n.FormFeed||e===n.CarriageReturn}function l(e){return e===n.Slash||e===n.Gt||a(e)}function c(e){return e>=n.Zero&&e<=n.Nine}!function(e){e[e.Tab=9]="Tab",e[e.NewLine=10]="NewLine",e[e.FormFeed=12]="FormFeed",e[e.CarriageReturn=13]="CarriageReturn",e[e.Space=32]="Space",e[e.ExclamationMark=33]="ExclamationMark",e[e.Number=35]="Number",e[e.Amp=38]="Amp",e[e.SingleQuote=39]="SingleQuote",e[e.DoubleQuote=34]="DoubleQuote",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Zero=48]="Zero",e[e.Nine=57]="Nine",e[e.Semi=59]="Semi",e[e.Lt=60]="Lt",e[e.Eq=61]="Eq",e[e.Gt=62]="Gt",e[e.Questionmark=63]="Questionmark",e[e.UpperA=65]="UpperA",e[e.LowerA=97]="LowerA",e[e.UpperF=70]="UpperF",e[e.LowerF=102]="LowerF",e[e.UpperZ=90]="UpperZ",e[e.LowerZ=122]="LowerZ",e[e.LowerX=120]="LowerX",e[e.OpeningSquareBracket=91]="OpeningSquareBracket"}(n||(n={})),function(e){e[e.Text=1]="Text",e[e.BeforeTagName=2]="BeforeTagName",e[e.InTagName=3]="InTagName",e[e.InSelfClosingTag=4]="InSelfClosingTag",e[e.BeforeClosingTagName=5]="BeforeClosingTagName",e[e.InClosingTagName=6]="InClosingTagName",e[e.AfterClosingTagName=7]="AfterClosingTagName",e[e.BeforeAttributeName=8]="BeforeAttributeName",e[e.InAttributeName=9]="InAttributeName",e[e.AfterAttributeName=10]="AfterAttributeName",e[e.BeforeAttributeValue=11]="BeforeAttributeValue",e[e.InAttributeValueDq=12]="InAttributeValueDq",e[e.InAttributeValueSq=13]="InAttributeValueSq",e[e.InAttributeValueNq=14]="InAttributeValueNq",e[e.BeforeDeclaration=15]="BeforeDeclaration",e[e.InDeclaration=16]="InDeclaration",e[e.InProcessingInstruction=17]="InProcessingInstruction",e[e.BeforeComment=18]="BeforeComment",e[e.CDATASequence=19]="CDATASequence",e[e.InSpecialComment=20]="InSpecialComment",e[e.InCommentLike=21]="InCommentLike",e[e.BeforeSpecialS=22]="BeforeSpecialS",e[e.SpecialStartSequence=23]="SpecialStartSequence",e[e.InSpecialTag=24]="InSpecialTag",e[e.BeforeEntity=25]="BeforeEntity",e[e.BeforeNumericEntity=26]="BeforeNumericEntity",e[e.InNamedEntity=27]="InNamedEntity",e[e.InNumericEntity=28]="InNumericEntity",e[e.InHexEntity=29]="InHexEntity"}(r||(r={})),function(e){e[e.NoValue=0]="NoValue",e[e.Unquoted=1]="Unquoted",e[e.Single=2]="Single",e[e.Double=3]="Double"}(s=t.QuoteType||(t.QuoteType={}));var h={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=function(){function e(e,t){var i=e.xmlMode,n=void 0!==i&&i,s=e.decodeEntities,a=void 0===s||s;this.cbs=t,this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=n,this.decodeEntities=a,this.entityTrie=n?o.xmlDecodeTree:o.htmlDecodeTree}return e.prototype.reset=function(){this.state=r.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=r.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},e.prototype.write=function(e){this.offset+=this.buffer.length,this.buffer=e,this.parse()},e.prototype.end=function(){this.running&&this.finish()},e.prototype.pause=function(){this.running=!1},e.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},e.prototype.getIndex=function(){return this.index},e.prototype.getSectionStart=function(){return this.sectionStart},e.prototype.stateText=function(e){e===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=r.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&e===n.Amp&&(this.state=r.BeforeEntity)},e.prototype.stateSpecialStartSequence=function(e){var t=this.sequenceIndex===this.currentSequence.length;if(t?l(e):(32|e)===this.currentSequence[this.sequenceIndex]){if(!t)return void this.sequenceIndex++}else this.isSpecial=!1;this.sequenceIndex=0,this.state=r.InTagName,this.stateInTagName(e)},e.prototype.stateInSpecialTag=function(e){if(this.sequenceIndex===this.currentSequence.length){if(e===n.Gt||a(e)){var t=this.index-this.currentSequence.length;if(this.sectionStart<t){var i=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=i}return this.isSpecial=!1,this.sectionStart=t+2,void this.stateInClosingTagName(e)}this.sequenceIndex=0}(32|e)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:0===this.sequenceIndex?this.currentSequence===h.TitleEnd?this.decodeEntities&&e===n.Amp&&(this.state=r.BeforeEntity):this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=Number(e===n.Lt)},e.prototype.stateCDATASequence=function(e){e===h.Cdata[this.sequenceIndex]?++this.sequenceIndex===h.Cdata.length&&(this.state=r.InCommentLike,this.currentSequence=h.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=r.InDeclaration,this.stateInDeclaration(e))},e.prototype.fastForwardTo=function(e){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===e)return!0;return this.index=this.buffer.length+this.offset-1,!1},e.prototype.stateInCommentLike=function(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=r.Text):0===this.sequenceIndex?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},e.prototype.isTagStartChar=function(e){return this.xmlMode?!l(e):function(e){return e>=n.LowerA&&e<=n.LowerZ||e>=n.UpperA&&e<=n.UpperZ}(e)},e.prototype.startSpecial=function(e,t){this.isSpecial=!0,this.currentSequence=e,this.sequenceIndex=t,this.state=r.SpecialStartSequence},e.prototype.stateBeforeTagName=function(e){if(e===n.ExclamationMark)this.state=r.BeforeDeclaration,this.sectionStart=this.index+1;else if(e===n.Questionmark)this.state=r.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(e)){var t=32|e;this.sectionStart=this.index,this.xmlMode||t!==h.TitleEnd[2]?this.state=this.xmlMode||t!==h.ScriptEnd[2]?r.InTagName:r.BeforeSpecialS:this.startSpecial(h.TitleEnd,3)}else e===n.Slash?this.state=r.BeforeClosingTagName:(this.state=r.Text,this.stateText(e))},e.prototype.stateInTagName=function(e){l(e)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateBeforeClosingTagName=function(e){a(e)||(e===n.Gt?this.state=r.Text:(this.state=this.isTagStartChar(e)?r.InClosingTagName:r.InSpecialComment,this.sectionStart=this.index))},e.prototype.stateInClosingTagName=function(e){(e===n.Gt||a(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterClosingTagName,this.stateAfterClosingTagName(e))},e.prototype.stateAfterClosingTagName=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeAttributeName=function(e){e===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=r.InSpecialTag,this.sequenceIndex=0):this.state=r.Text,this.baseState=this.state,this.sectionStart=this.index+1):e===n.Slash?this.state=r.InSelfClosingTag:a(e)||(this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateInSelfClosingTag=function(e){e===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=r.Text,this.baseState=r.Text,this.sectionStart=this.index+1,this.isSpecial=!1):a(e)||(this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e))},e.prototype.stateInAttributeName=function(e){(e===n.Eq||l(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=r.AfterAttributeName,this.stateAfterAttributeName(e))},e.prototype.stateAfterAttributeName=function(e){e===n.Eq?this.state=r.BeforeAttributeValue:e===n.Slash||e===n.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):a(e)||(this.cbs.onattribend(s.NoValue,this.index),this.state=r.InAttributeName,this.sectionStart=this.index)},e.prototype.stateBeforeAttributeValue=function(e){e===n.DoubleQuote?(this.state=r.InAttributeValueDq,this.sectionStart=this.index+1):e===n.SingleQuote?(this.state=r.InAttributeValueSq,this.sectionStart=this.index+1):a(e)||(this.sectionStart=this.index,this.state=r.InAttributeValueNq,this.stateInAttributeValueNoQuotes(e))},e.prototype.handleInAttributeValue=function(e,t){e===t||!this.decodeEntities&&this.fastForwardTo(t)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===n.DoubleQuote?s.Double:s.Single,this.index),this.state=r.BeforeAttributeName):this.decodeEntities&&e===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateInAttributeValueDoubleQuotes=function(e){this.handleInAttributeValue(e,n.DoubleQuote)},e.prototype.stateInAttributeValueSingleQuotes=function(e){this.handleInAttributeValue(e,n.SingleQuote)},e.prototype.stateInAttributeValueNoQuotes=function(e){a(e)||e===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=r.BeforeAttributeName,this.stateBeforeAttributeName(e)):this.decodeEntities&&e===n.Amp&&(this.baseState=this.state,this.state=r.BeforeEntity)},e.prototype.stateBeforeDeclaration=function(e){e===n.OpeningSquareBracket?(this.state=r.CDATASequence,this.sequenceIndex=0):this.state=e===n.Dash?r.BeforeComment:r.InDeclaration},e.prototype.stateInDeclaration=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateInProcessingInstruction=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeComment=function(e){e===n.Dash?(this.state=r.InCommentLike,this.currentSequence=h.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=r.InDeclaration},e.prototype.stateInSpecialComment=function(e){(e===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=r.Text,this.sectionStart=this.index+1)},e.prototype.stateBeforeSpecialS=function(e){var t=32|e;t===h.ScriptEnd[3]?this.startSpecial(h.ScriptEnd,4):t===h.StyleEnd[3]?this.startSpecial(h.StyleEnd,4):(this.state=r.InTagName,this.stateInTagName(e))},e.prototype.stateBeforeEntity=function(e){this.entityExcess=1,this.entityResult=0,e===n.Number?this.state=r.BeforeNumericEntity:e===n.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=r.InNamedEntity,this.stateInNamedEntity(e))},e.prototype.stateInNamedEntity=function(e){if(this.entityExcess+=1,this.trieIndex=(0,o.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,e),this.trieIndex<0)return this.emitNamedEntity(),void this.index--;this.trieCurrent=this.entityTrie[this.trieIndex];var t=this.trieCurrent&o.BinTrieFlags.VALUE_LENGTH;if(t){var i=(t>>14)-1;if(this.allowLegacyEntity()||e===n.Semi){var r=this.index-this.entityExcess+1;r>this.sectionStart&&this.emitPartial(this.sectionStart,r),this.entityResult=this.trieIndex,this.trieIndex+=i,this.entityExcess=0,this.sectionStart=this.index+1,0===i&&this.emitNamedEntity()}else this.trieIndex+=i}},e.prototype.emitNamedEntity=function(){if(this.state=this.baseState,0!==this.entityResult)switch((this.entityTrie[this.entityResult]&o.BinTrieFlags.VALUE_LENGTH)>>14){case 1:this.emitCodePoint(this.entityTrie[this.entityResult]&~o.BinTrieFlags.VALUE_LENGTH);break;case 2:this.emitCodePoint(this.entityTrie[this.entityResult+1]);break;case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}},e.prototype.stateBeforeNumericEntity=function(e){(32|e)===n.LowerX?(this.entityExcess++,this.state=r.InHexEntity):(this.state=r.InNumericEntity,this.stateInNumericEntity(e))},e.prototype.emitNumericEntity=function(e){var t=this.index-this.entityExcess-1;t+2+Number(this.state===r.InHexEntity)!==this.index&&(t>this.sectionStart&&this.emitPartial(this.sectionStart,t),this.sectionStart=this.index+Number(e),this.emitCodePoint((0,o.replaceCodePoint)(this.entityResult))),this.state=this.baseState},e.prototype.stateInNumericEntity=function(e){e===n.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=10*this.entityResult+(e-n.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.stateInHexEntity=function(e){e===n.Semi?this.emitNumericEntity(!0):c(e)?(this.entityResult=16*this.entityResult+(e-n.Zero),this.entityExcess++):function(e){return e>=n.UpperA&&e<=n.UpperF||e>=n.LowerA&&e<=n.LowerF}(e)?(this.entityResult=16*this.entityResult+((32|e)-n.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},e.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===r.Text||this.baseState===r.InSpecialTag)},e.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===r.Text||this.state===r.InSpecialTag&&0===this.sequenceIndex?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):this.state!==r.InAttributeValueDq&&this.state!==r.InAttributeValueSq&&this.state!==r.InAttributeValueNq||(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},e.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},e.prototype.parse=function(){for(;this.shouldContinue();){var e=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case r.Text:this.stateText(e);break;case r.SpecialStartSequence:this.stateSpecialStartSequence(e);break;case r.InSpecialTag:this.stateInSpecialTag(e);break;case r.CDATASequence:this.stateCDATASequence(e);break;case r.InAttributeValueDq:this.stateInAttributeValueDoubleQuotes(e);break;case r.InAttributeName:this.stateInAttributeName(e);break;case r.InCommentLike:this.stateInCommentLike(e);break;case r.InSpecialComment:this.stateInSpecialComment(e);break;case r.BeforeAttributeName:this.stateBeforeAttributeName(e);break;case r.InTagName:this.stateInTagName(e);break;case r.InClosingTagName:this.stateInClosingTagName(e);break;case r.BeforeTagName:this.stateBeforeTagName(e);break;case r.AfterAttributeName:this.stateAfterAttributeName(e);break;case r.InAttributeValueSq:this.stateInAttributeValueSingleQuotes(e);break;case r.BeforeAttributeValue:this.stateBeforeAttributeValue(e);break;case r.BeforeClosingTagName:this.stateBeforeClosingTagName(e);break;case r.AfterClosingTagName:this.stateAfterClosingTagName(e);break;case r.BeforeSpecialS:this.stateBeforeSpecialS(e);break;case r.InAttributeValueNq:this.stateInAttributeValueNoQuotes(e);break;case r.InSelfClosingTag:this.stateInSelfClosingTag(e);break;case r.InDeclaration:this.stateInDeclaration(e);break;case r.BeforeDeclaration:this.stateBeforeDeclaration(e);break;case r.BeforeComment:this.stateBeforeComment(e);break;case r.InProcessingInstruction:this.stateInProcessingInstruction(e);break;case r.InNamedEntity:this.stateInNamedEntity(e);break;case r.BeforeEntity:this.stateBeforeEntity(e);break;case r.InHexEntity:this.stateInHexEntity(e);break;case r.InNumericEntity:this.stateInNumericEntity(e);break;default:this.stateBeforeNumericEntity(e)}this.index++}this.cleanup()},e.prototype.finish=function(){this.state===r.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},e.prototype.handleTrailingData=function(){var e=this.buffer.length+this.offset;this.state===r.InCommentLike?this.currentSequence===h.CdataEnd?this.cbs.oncdata(this.sectionStart,e,0):this.cbs.oncomment(this.sectionStart,e,0):this.state===r.InNumericEntity&&this.allowLegacyEntity()||this.state===r.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===r.InTagName||this.state===r.BeforeAttributeName||this.state===r.BeforeAttributeValue||this.state===r.AfterAttributeName||this.state===r.InAttributeName||this.state===r.InAttributeValueSq||this.state===r.InAttributeValueDq||this.state===r.InAttributeValueNq||this.state===r.InClosingTagName||this.cbs.ontext(this.sectionStart,e)},e.prototype.emitPartial=function(e,t){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribdata(e,t):this.cbs.ontext(e,t)},e.prototype.emitCodePoint=function(e){this.baseState!==r.Text&&this.baseState!==r.InSpecialTag?this.cbs.onattribentity(e):this.cbs.ontextentity(e)},e}();t.default=d},6808:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=i(221),l=i(221);Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return l.Parser}});var c=i(4128),h=i(4128);function d(e,t){var i=new c.DomHandler(void 0,t);return new a.Parser(i,t).end(e),i.root}function u(e,t){return d(e,t).children}Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return h.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return h.DomHandler}}),t.parseDocument=d,t.parseDOM=u,t.createDomStream=function(e,t,i){var n=new c.DomHandler(e,t,i);return new a.Parser(n,t)};var p=i(357);Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return o(p).default}}),t.ElementType=s(i(5413));var f=i(1941),m=i(1941);Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return m.getFeed}});var g={xmlMode:!0};t.parseFeed=function(e,t){return void 0===t&&(t=g),(0,f.getFeed)(u(e,t))},t.DomUtils=s(i(1941))},6191:(e,t)=>{"use strict";function i(e){return"[object Object]"===Object.prototype.toString.call(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isPlainObject=function(e){var t,n;return!1!==i(e)&&(void 0===(t=e.constructor)||!1!==i(n=t.prototype)&&!1!==n.hasOwnProperty("isPrototypeOf"))}},5824:(e,t,i)=>{"use strict";e.exports=i(3276)},1897:(e,t,i)=>{"use strict";var n,r,s,o=i(1452),a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function l(){s=!1}function c(e){if(e){if(e!==n){if(e.length!==a.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. You submitted "+e.length+" characters: "+e);var t=e.split("").filter((function(e,t,i){return t!==i.lastIndexOf(e)}));if(t.length)throw new Error("Custom alphabet for shortid must be "+a.length+" unique characters. These characters were not unique: "+t.join(", "));n=e,l()}}else n!==a&&(n=a,l())}function h(){return s||(s=function(){n||c(a);for(var e,t=n.split(""),i=[],r=o.nextValue();t.length>0;)r=o.nextValue(),e=Math.floor(r*t.length),i.push(t.splice(e,1)[0]);return i.join("")}())}e.exports={get:function(){return n||a},characters:function(e){return c(e),n},seed:function(e){o.seed(e),r!==e&&(l(),r=e)},lookup:function(e){return h()[e]},shuffled:h}},6852:(e,t,i)=>{"use strict";var n,r,s=i(5697);i(1897),e.exports=function(e){var t="",i=Math.floor(.001*(Date.now()-1567752802062));return i===r?n++:(n=0,r=i),t+=s(7),t+=s(e),n>0&&(t+=s(n)),t+s(i)}},5697:(e,t,i)=>{"use strict";var n=i(1897),r=i(5040),s=i(8886);e.exports=function(e){for(var t,i=0,o="";!t;)o+=s(r,n.get(),1),t=e<Math.pow(16,i+1),i++;return o}},3276:(e,t,i)=>{"use strict";var n=i(1897),r=i(6852),s=i(8905),o=i(4263)||0;function a(){return r(o)}e.exports=a,e.exports.generate=a,e.exports.seed=function(t){return n.seed(t),e.exports},e.exports.worker=function(t){return o=t,e.exports},e.exports.characters=function(e){return void 0!==e&&n.characters(e),n.shuffled()},e.exports.isValid=s},8905:(e,t,i)=>{"use strict";var n=i(1897);e.exports=function(e){return!(!e||"string"!=typeof e||e.length<6||new RegExp("[^"+n.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(e))}},5040:e=>{"use strict";var t,i="object"==typeof window&&(window.crypto||window.msCrypto);t=i&&i.getRandomValues?function(e){return i.getRandomValues(new Uint8Array(e))}:function(e){for(var t=[],i=0;i<e;i++)t.push(Math.floor(256*Math.random()));return t},e.exports=t},1452:e=>{"use strict";var t=1;e.exports={nextValue:function(){return(t=(9301*t+49297)%233280)/233280},seed:function(e){t=e}}},4263:e=>{"use strict";e.exports=0},8886:e=>{e.exports=function(e,t,i){for(var n=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*n*i/t.length),s="";;)for(var o=e(r),a=r;a--;)if((s+=t[o[a]&n]||"").length===+i)return s}},8078:function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=60)}([function(e,t){function i(e,t){var i=e[1]||"",n=e[3];if(!n)return i;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n);return[i].concat(n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}))).concat([r]).join("\n")}return[i].join("\n")}e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=i(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(n[s]=!0)}for(r=0;r<e.length;r++){var o=e[r];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},function(e,t,i){function n(e){for(var t=0;t<e.length;t++){var i=e[t],n=h[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(s(i.parts[r]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(s(i.parts[r]));h[i.id]={id:i.id,refs:1,parts:o}}}}function r(){var e=document.createElement("style");return e.type="text/css",d.appendChild(e),e}function s(e){var t,i,n=document.querySelector("style["+y+'~="'+e.id+'"]');if(n){if(f)return m;n.parentNode.removeChild(n)}if(v){var s=p++;n=u||(u=r()),t=o.bind(null,n,s,!1),i=o.bind(null,n,s,!0)}else n=r(),t=a.bind(null,n),i=function(){n.parentNode.removeChild(n)};return t(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap)return;t(e=n)}else i()}}function o(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=x(t,r);else{var s=document.createTextNode(r),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(s,o[t]):e.appendChild(s)}}function a(e,t){var i=t.css,n=t.media,r=t.sourceMap;if(n&&e.setAttribute("media",n),g.ssrId&&e.setAttribute(y,t.id),r&&(i+="\n/*# sourceURL="+r.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=i(64),h={},d=l&&(document.head||document.getElementsByTagName("head")[0]),u=null,p=0,f=!1,m=function(){},g=null,y="data-vue-ssr-id",v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());e.exports=function(e,t,i,r){f=i,g=r||{};var s=c(e,t);return n(s),function(t){for(var i=[],r=0;r<s.length;r++){var o=s[r];(a=h[o.id]).refs--,i.push(a)}for(t?n(s=c(e,t)):s=[],r=0;r<i.length;r++){var a;if(0===(a=i[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete h[a.id]}}}};var x=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports=function(e,t,i,n,r,s){var o,a=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,a=e.default);var c,h="function"==typeof a?a.options:a;if(t&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId=r),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},h._ssrRegister=c):n&&(c=n),c){var d=h.functional,u=d?h.render:h.beforeCreate;d?(h._injectStyles=c,h.render=function(e,t){return c.call(t),u(e,t)}):h.beforeCreate=u?[].concat(u,c):[c]}return{esModule:o,exports:a,options:h}}},function(e,t,i){"use strict";function n(e,t){var i,n=e&&e.a;!(i=e&&e.hsl?(0,r.default)(e.hsl):e&&e.hex&&e.hex.length>0?(0,r.default)(e.hex):e&&e.hsv?(0,r.default)(e.hsv):e&&e.rgba?(0,r.default)(e.rgba):e&&e.rgb?(0,r.default)(e.rgb):(0,r.default)(e))||void 0!==i._a&&null!==i._a||i.setAlpha(n||1);var s=i.toHsl(),o=i.toHsv();return 0===s.s&&(o.h=s.h=e.h||e.hsl&&e.hsl.h||t||0),{hsl:s,hex:i.toHexString().toUpperCase(),hex8:i.toHex8String().toUpperCase(),rgba:i.toRgb(),hsv:o,oldHue:e.h||t||s.h,source:e.source,a:e.a||i.getAlpha()}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(i(65));t.default={props:["value"],data:function(){return{val:n(this.value)}},computed:{colors:{get:function(){return this.val},set:function(e){this.val=e,this.$emit("input",e)}}},watch:{value:function(e){this.val=n(e)}},methods:{colorChange:function(e,t){this.oldHue=this.colors.hsl.h,this.colors=n(e,t||this.oldHue)},isValidHex:function(e){return(0,r.default)(e).isValid()},simpleCheckForValidColor:function(e){for(var t=["r","g","b","a","h","s","l","v"],i=0,n=0,r=0;r<t.length;r++){var s=t[r];e[s]&&(i++,isNaN(e[s])||n++)}if(i===n)return e},paletteUpperCase:function(e){return e.map((function(e){return e.toUpperCase()}))},isTransparent:function(e){return 0===(0,r.default)(e).getAlpha()}}}},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(36),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(68),a=!1,l=function(e){a||i(66)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/EditableInput.vue",t.default=c.exports},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){var n=i(8),r=i(18);e.exports=i(9)?function(e,t,i){return n.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(16),r=i(42),s=i(25),o=Object.defineProperty;t.f=i(9)?Object.defineProperty:function(e,t,i){if(n(e),t=s(t,!0),n(i),r)try{return o(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){e.exports=!i(17)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(90),r=i(24);e.exports=function(e){return n(r(e))}},function(e,t,i){var n=i(29)("wks"),r=i(19),s=i(4).Symbol,o="function"==typeof s;(e.exports=function(e){return n[e]||(n[e]=o&&s[e]||(o?s:r)("Symbol."+e))}).store=n},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(51),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(113),a=!1,l=function(e){a||i(111)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Hue.vue",t.default=c.exports},function(e,t){e.exports=!0},function(e,t){var i=e.exports={version:"2.6.11"};"number"==typeof __e&&(__e=i)},function(e,t,i){var n=i(12);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(54),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(127),a=!1,l=function(e){a||i(123)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Saturation.vue",t.default=c.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(55),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(133),a=!1,l=function(e){a||i(128)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Alpha.vue",t.default=c.exports},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(56),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(132),a=!1,l=function(e){a||i(130)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/common/Checkboard.vue",t.default=c.exports},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,i){var n=i(12);e.exports=function(e,t){if(!n(e))return e;var i,r;if(t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;if("function"==typeof(i=e.valueOf)&&!n(r=i.call(e)))return r;if(!t&&"function"==typeof(i=e.toString)&&!n(r=i.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t){e.exports={}},function(e,t,i){var n=i(46),r=i(30);e.exports=Object.keys||function(e){return n(e,r)}},function(e,t,i){var n=i(29)("keys"),r=i(19);e.exports=function(e){return n[e]||(n[e]=r(e))}},function(e,t,i){var n=i(15),r=i(4),s=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:i(14)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,i){var n=i(8).f,r=i(6),s=i(11)("toStringTag");e.exports=function(e,t,i){e&&!r(e=i?e:e.prototype,s)&&n(e,s,{configurable:!0,value:t})}},function(e,t,i){t.f=i(11)},function(e,t,i){var n=i(4),r=i(15),s=i(14),o=i(32),a=i(8).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=s?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||a(t,e,{value:o.f(e)})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#CCCCCC","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"];t.default={name:"Compact",mixins:[r.default],props:{palette:{type:Array,default:function(){return o}}},components:{"ed-in":s.default},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"editableInput",props:{label:String,labelText:String,desc:String,value:[String,Number],max:Number,min:Number,arrowOffset:{type:Number,default:1}},computed:{val:{get:function(){return this.value},set:function(e){if(!(void 0!==this.max&&+e>this.max))return e;this.$refs.input.value=this.max}},labelId:function(){return"input__label__"+this.label+"__"+Math.random().toString().slice(2,5)},labelSpanText:function(){return this.labelText||this.label}},methods:{update:function(e){this.handleChange(e.target.value)},handleChange:function(e){var t={};t[this.label]=e,(void 0===t.hex&&void 0===t["#"]||e.length>5)&&this.$emit("change",t)},handleKeyDown:function(e){var t=this.val,i=Number(t);if(i){var n=this.arrowOffset||1;38===e.keyCode&&(t=i+n,this.handleChange(t),e.preventDefault()),40===e.keyCode&&(t=i-n,this.handleChange(t),e.preventDefault())}}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(3)),r=["#FFFFFF","#F2F2F2","#E6E6E6","#D9D9D9","#CCCCCC","#BFBFBF","#B3B3B3","#A6A6A6","#999999","#8C8C8C","#808080","#737373","#666666","#595959","#4D4D4D","#404040","#333333","#262626","#0D0D0D","#000000"];t.default={name:"Grayscale",mixins:[n.default],props:{palette:{type:Array,default:function(){return r}}},components:{},computed:{pick:function(){return this.colors.hex.toUpperCase()}},methods:{handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),s=n(i(3));t.default={name:"Material",mixins:[s.default],components:{"ed-in":r.default},methods:{onChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(81)),s=n(i(3)),o=n(i(13));t.default={name:"Slider",mixins:[s.default],props:{swatches:{type:Array,default:function(){return[{s:.5,l:.8},{s:.5,l:.65},{s:.5,l:.5},{s:.5,l:.35},{s:.5,l:.2}]}}},components:{hue:o.default},computed:{normalizedSwatches:function(){return this.swatches.map((function(e){return"object"!==(void 0===e?"undefined":(0,r.default)(e))?{s:.5,l:e}:e}))}},methods:{isActive:function(e,t){var i=this.colors.hsl;return 1===i.l&&1===e.l||0===i.l&&0===e.l||Math.abs(i.l-e.l)<.01&&Math.abs(i.s-e.s)<.01},hueChange:function(e){this.colorChange(e)},handleSwClick:function(e,t){this.colorChange({h:this.colors.hsl.h,s:t.s,l:t.l,source:"hsl"})}}}},function(e,t,i){"use strict";var n=i(14),r=i(41),s=i(44),o=i(7),a=i(26),l=i(88),c=i(31),h=i(95),d=i(11)("iterator"),u=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,i,f,m,g,y){l(i,t,f);var v,x,b,w=function(e){if(!u&&e in P)return P[e];switch(e){case"keys":case"values":return function(){return new i(this,e)}}return function(){return new i(this,e)}},O=t+" Iterator",S="values"==m,k=!1,P=e.prototype,C=P[d]||P["@@iterator"]||m&&P[m],A=C||w(m),I=m?S?w("entries"):A:void 0,T="Array"==t&&P.entries||C;if(T&&(b=h(T.call(new e)))!==Object.prototype&&b.next&&(c(b,O,!0),n||"function"==typeof b[d]||o(b,d,p)),S&&C&&"values"!==C.name&&(k=!0,A=function(){return C.call(this)}),n&&!y||!u&&!k&&P[d]||o(P,d,A),a[t]=A,a[O]=p,m)if(v={values:S?A:w("values"),keys:g?A:w("keys"),entries:I},y)for(x in v)x in P||s(P,x,v[x]);else r(r.P+r.F*(u||k),t,v);return v}},function(e,t,i){var n=i(4),r=i(15),s=i(86),o=i(7),a=i(6),l=function(e,t,i){var c,h,d,u=e&l.F,p=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,y=e&l.W,v=p?r:r[t]||(r[t]={}),x=v.prototype,b=p?n:f?n[t]:(n[t]||{}).prototype;for(c in p&&(i=t),i)(h=!u&&b&&void 0!==b[c])&&a(v,c)||(d=h?b[c]:i[c],v[c]=p&&"function"!=typeof b[c]?i[c]:g&&h?s(d,n):y&&b[c]==d?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?s(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[c]=d,e&l.R&&x&&!x[c]&&o(x,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,i){e.exports=!i(9)&&!i(17)((function(){return 7!=Object.defineProperty(i(43)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,i){var n=i(12),r=i(4).document,s=n(r)&&n(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},function(e,t,i){e.exports=i(7)},function(e,t,i){var n=i(16),r=i(89),s=i(30),o=i(28)("IE_PROTO"),a=function(){},l=function(){var e,t=i(43)("iframe"),n=s.length;for(t.style.display="none",i(94).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;n--;)delete l.prototype[s[n]];return l()};e.exports=Object.create||function(e,t){var i;return null!==e?(a.prototype=n(e),i=new a,a.prototype=null,i[o]=e):i=l(),void 0===t?i:r(i,t)}},function(e,t,i){var n=i(6),r=i(10),s=i(91)(!1),o=i(28)("IE_PROTO");e.exports=function(e,t){var i,a=r(e),l=0,c=[];for(i in a)i!=o&&n(a,i)&&c.push(i);for(;t.length>l;)n(a,i=t[l++])&&(~s(c,i)||c.push(i));return c}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(24);e.exports=function(e){return Object(n(e))}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(46),r=i(30).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,r)}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Hue",props:{value:Object,direction:{type:String,default:"horizontal"}},data:function(){return{oldHue:0,pullDirection:""}},computed:{colors:function(){var e=this.value.hsl.h;return 0!==e&&e-this.oldHue>0&&(this.pullDirection="right"),0!==e&&e-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=e,this.value},directionClass:function(){return{"vc-hue--horizontal":"horizontal"===this.direction,"vc-hue--vertical":"vertical"===this.direction}},pointerTop:function(){return"vertical"===this.direction?0===this.colors.hsl.h&&"right"===this.pullDirection?0:-100*this.colors.hsl.h/360+100+"%":0},pointerLeft:function(){return"vertical"===this.direction?0:0===this.colors.hsl.h&&"right"===this.pullDirection?"100%":100*this.colors.hsl.h/360+"%"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n,r=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect().left+window.pageXOffset,a=i.getBoundingClientRect().top+window.pageYOffset,l=(e.pageX||(e.touches?e.touches[0].pageX:0))-o,c=(e.pageY||(e.touches?e.touches[0].pageY:0))-a;"vertical"===this.direction?(n=c<0?360:c>s?0:360*(-100*c/s+100)/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})):(n=l<0?0:l>r?360:100*l/r*360/100,this.colors.hsl.h!==n&&this.$emit("change",{h:n,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"}))}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(118)),s=n(i(3)),o=["red","pink","purple","deepPurple","indigo","blue","lightBlue","cyan","teal","green","lightGreen","lime","yellow","amber","orange","deepOrange","brown","blueGrey","black"],a=["900","700","500","300","100"],l=function(){var e=[];return o.forEach((function(t){var i=[];"black"===t.toLowerCase()||"white"===t.toLowerCase()?i=i.concat(["#000000","#FFFFFF"]):a.forEach((function(e){var n=r.default[t][e];i.push(n.toUpperCase())})),e.push(i)})),e}();t.default={name:"Swatches",mixins:[s.default],props:{palette:{type:Array,default:function(){return l}}},computed:{pick:function(){return this.colors.hex}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21));t.default={name:"Photoshop",mixins:[r.default],props:{head:{type:String,default:"Color Picker"},disableFields:{type:Boolean,default:!1},hasResetButton:{type:Boolean,default:!1},acceptLabel:{type:String,default:"OK"},cancelLabel:{type:String,default:"Cancel"},resetLabel:{type:String,default:"Reset"},newLabel:{type:String,default:"new"},currentLabel:{type:String,default:"current"}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default},data:function(){return{currentColor:"#FFF"}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},created:function(){this.currentColor=this.colors.hex},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))},clickCurrentColor:function(){this.colorChange({hex:this.currentColor,source:"hex"})},handleAccept:function(){this.$emit("ok")},handleCancel:function(){this.$emit("cancel")},handleReset:function(){this.$emit("reset")}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(125)),s=n(i(126));t.default={name:"Saturation",props:{value:Object},computed:{colors:function(){return this.value},bgColor:function(){return"hsl("+this.colors.hsv.h+", 100%, 50%)"},pointerTop:function(){return-100*this.colors.hsv.v+1+100+"%"},pointerLeft:function(){return 100*this.colors.hsv.s+"%"}},methods:{throttle:(0,s.default)((function(e,t){e(t)}),20,{leading:!0,trailing:!1}),handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n=i.clientWidth,s=i.clientHeight,o=i.getBoundingClientRect().left+window.pageXOffset,a=i.getBoundingClientRect().top+window.pageYOffset,l=e.pageX||(e.touches?e.touches[0].pageX:0),c=e.pageY||(e.touches?e.touches[0].pageY:0),h=(0,r.default)(l-o,0,n),d=(0,r.default)(c-a,0,s),u=h/n,p=(0,r.default)(-d/s+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:u,v:p,a:this.colors.hsv.a,source:"hsva"})}},onChange:function(e){this.$emit("change",e)},handleMouseDown:function(e){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(e){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(i(22));t.default={name:"Alpha",props:{value:Object,onChange:Function},components:{checkboard:n.default},computed:{colors:function(){return this.value},gradientColor:function(){var e=this.colors.rgba,t=[e.r,e.g,e.b].join(",");return"linear-gradient(to right, rgba("+t+", 0) 0%, rgba("+t+", 1) 100%)"}},methods:{handleChange:function(e,t){!t&&e.preventDefault();var i=this.$refs.container;if(i){var n,r=i.clientWidth,s=i.getBoundingClientRect().left+window.pageXOffset,o=(e.pageX||(e.touches?e.touches[0].pageX:0))-s;n=o<0?0:o>r?1:Math.round(100*o/r)/100,this.colors.a!==n&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:n,source:"rgba"})}},handleMouseDown:function(e){this.handleChange(e,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp:function(){this.unbindEventListeners()},unbindEventListeners:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}},function(e,t,i){"use strict";function n(e,t,i){var n=e+","+t+","+i;if(r[n])return r[n];var s=function(e,t,i){if("undefined"==typeof document)return null;var n=document.createElement("canvas");n.width=n.height=2*i;var r=n.getContext("2d");return r?(r.fillStyle=e,r.fillRect(0,0,n.width,n.height),r.fillStyle=t,r.fillRect(0,0,i,i),r.translate(i,i),r.fillRect(0,0,i,i),n.toDataURL()):null}(e,t,i);return r[n]=s,s}Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default={name:"Checkboard",props:{size:{type:[Number,String],default:8},white:{type:String,default:"#fff"},grey:{type:String,default:"#e6e6e6"}},computed:{bgStyle:function(){return{"background-image":"url("+n(this.white,this.grey,this.size)+")"}}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21)),c=n(i(22)),h=["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF","rgba(0,0,0,0)"];t.default={name:"Sketch",mixins:[r.default],components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},props:{presetColors:{type:Array,default:function(){return h}},disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},computed:{hex:function(){return(this.colors.a<1?this.colors.hex8:this.colors.hex).replace("#","")},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"}},methods:{handlePreset:function(e){this.colorChange({hex:e,source:"hex"})},childChange:function(e){this.colorChange(e)},inputChange:function(e){e&&(e.hex?this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"}):(e.r||e.g||e.b||e.a)&&this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(3)),s=n(i(5)),o=n(i(20)),a=n(i(13)),l=n(i(21)),c=n(i(22));t.default={name:"Chrome",mixins:[r.default],props:{disableAlpha:{type:Boolean,default:!1},disableFields:{type:Boolean,default:!1}},components:{saturation:o.default,hue:a.default,alpha:l.default,"ed-in":s.default,checkboard:c.default},data:function(){return{fieldsIndex:0,highlight:!1}},computed:{hsl:function(){var e=this.colors.hsl,t=e.h,i=e.s,n=e.l;return{h:t.toFixed(),s:(100*i).toFixed()+"%",l:(100*n).toFixed()+"%"}},activeColor:function(){var e=this.colors.rgba;return"rgba("+[e.r,e.g,e.b,e.a].join(",")+")"},hasAlpha:function(){return this.colors.a<1}},methods:{childChange:function(e){this.colorChange(e)},inputChange:function(e){if(e)if(e.hex)this.isValidHex(e.hex)&&this.colorChange({hex:e.hex,source:"hex"});else if(e.r||e.g||e.b||e.a)this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"});else if(e.h||e.s||e.l){var t=e.s?e.s.replace("%","")/100:this.colors.hsl.s,i=e.l?e.l.replace("%","")/100:this.colors.hsl.l;this.colorChange({h:e.h||this.colors.hsl.h,s:t,l:i,source:"hsl"})}},toggleViews:function(){this.fieldsIndex>=2?this.fieldsIndex=0:this.fieldsIndex++},showHighlight:function(){this.highlight=!0},hideHighlight:function(){this.highlight=!1}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(i(5)),s=n(i(3)),o=["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"];t.default={name:"Twitter",mixins:[s.default],components:{editableInput:r.default},props:{width:{type:[String,Number],default:276},defaultColors:{type:Array,default:function(){return o}},triangle:{default:"top-left",validator:function(e){return["hide","top-left","top-right"].includes(e)}}},computed:{hsv:function(){var e=this.colors.hsv;return{h:e.h.toFixed(),s:(100*e.s).toFixed(),v:(100*e.v).toFixed()}},hex:function(){var e=this.colors.hex;return e&&e.replace("#","")}},methods:{equal:function(e){return e.toLowerCase()===this.colors.hex.toLowerCase()},handlerClick:function(e){this.colorChange({hex:e,source:"hex"})},inputChange:function(e){e&&(e["#"]?this.isValidHex(e["#"])&&this.colorChange({hex:e["#"],source:"hex"}):e.r||e.g||e.b||e.a?this.colorChange({r:e.r||this.colors.rgba.r,g:e.g||this.colors.rgba.g,b:e.b||this.colors.rgba.b,a:e.a||this.colors.rgba.a,source:"rgba"}):(e.h||e.s||e.v)&&this.colorChange({h:e.h||this.colors.hsv.h,s:e.s/100||this.colors.hsv.s,v:e.v/100||this.colors.hsv.v,source:"hsv"}))}}}},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var r=n(i(61)),s=n(i(70)),o=n(i(74)),a=n(i(78)),l=n(i(115)),c=n(i(120)),h=n(i(135)),d=n(i(139)),u=n(i(143)),p=n(i(21)),f=n(i(22)),m=n(i(5)),g=n(i(13)),y=n(i(20)),v=n(i(3)),x={version:"2.8.1",Compact:r.default,Grayscale:s.default,Twitter:u.default,Material:o.default,Slider:a.default,Swatches:l.default,Photoshop:c.default,Sketch:h.default,Chrome:d.default,Alpha:p.default,Checkboard:f.default,EditableInput:m.default,Hue:g.default,Saturation:y.default,ColorMixin:v.default};e.exports=x},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(35),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(69),a=!1,l=function(e){a||i(62)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Compact.vue",t.default=c.exports},function(e,t,i){var n=i(63);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("6ce8a5a8",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-compact {\n  padding-top: 5px;\n  padding-left: 5px;\n  width: 245px;\n  border-radius: 2px;\n  box-sizing: border-box;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-compact-colors {\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-compact-color-item {\n  list-style: none;\n  width: 15px;\n  height: 15px;\n  float: left;\n  margin-right: 5px;\n  margin-bottom: 5px;\n  position: relative;\n  cursor: pointer;\n}\n.vc-compact-color-item--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-compact-color-item--white .vc-compact-dot {\n  background: #000;\n}\n.vc-compact-dot {\n  position: absolute;\n  top: 5px;\n  right: 5px;\n  bottom: 5px;\n  left: 5px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t){e.exports=function(e,t){for(var i=[],n={},r=0;r<t.length;r++){var s=t[r],o=s[0],a={id:e+":"+r,css:s[1],media:s[2],sourceMap:s[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}},function(e,t,i){var n;!function(r){function s(e,t){if(t=t||{},(e=e||"")instanceof s)return e;if(!(this instanceof s))return new s(e,t);var i=function(e){var t={r:0,g:0,b:0},i=1,n=null,r=null,s=null,o=!1,a=!1;return"string"==typeof e&&(e=function(e){e=e.replace(_,"").replace(D,"").toLowerCase();var t,i=!1;if(j[e])e=j[e],i=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};return(t=Q.rgb.exec(e))?{r:t[1],g:t[2],b:t[3]}:(t=Q.rgba.exec(e))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Q.hsl.exec(e))?{h:t[1],s:t[2],l:t[3]}:(t=Q.hsla.exec(e))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Q.hsv.exec(e))?{h:t[1],s:t[2],v:t[3]}:(t=Q.hsva.exec(e))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Q.hex8.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),a:M(t[4]),format:i?"name":"hex8"}:(t=Q.hex6.exec(e))?{r:A(t[1]),g:A(t[2]),b:A(t[3]),format:i?"name":"hex"}:(t=Q.hex4.exec(e))?{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),a:M(t[4]+""+t[4]),format:i?"name":"hex8"}:!!(t=Q.hex3.exec(e))&&{r:A(t[1]+""+t[1]),g:A(t[2]+""+t[2]),b:A(t[3]+""+t[3]),format:i?"name":"hex"}}(e)),"object"==typeof e&&(E(e.r)&&E(e.g)&&E(e.b)?(t=function(e,t,i){return{r:255*P(e,255),g:255*P(t,255),b:255*P(i,255)}}(e.r,e.g,e.b),o=!0,a="%"===String(e.r).substr(-1)?"prgb":"rgb"):E(e.h)&&E(e.s)&&E(e.v)?(n=T(e.s),r=T(e.v),t=l(e.h,n,r),o=!0,a="hsv"):E(e.h)&&E(e.s)&&E(e.l)&&(n=T(e.s),s=T(e.l),t=function(e,t,i){function n(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}var r,s,o;if(e=P(e,360),t=P(t,100),i=P(i,100),0===t)r=s=o=i;else{var a=i<.5?i*(1+t):i+t-i*t,l=2*i-a;r=n(l,a,e+1/3),s=n(l,a,e),o=n(l,a,e-1/3)}return{r:255*r,g:255*s,b:255*o}}(e.h,n,s),o=!0,a="hsl"),e.hasOwnProperty("a")&&(i=e.a)),i=k(i),{ok:o,format:e.format||a,r:R(255,N(t.r,0)),g:R(255,N(t.g,0)),b:R(255,N(t.b,0)),a:i}}(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=B(100*this._a)/100,this._format=t.format||i.format,this._gradientType=t.gradientType,this._r<1&&(this._r=B(this._r)),this._g<1&&(this._g=B(this._g)),this._b<1&&(this._b=B(this._b)),this._ok=i.ok,this._tc_id=L++}function o(e,t,i){e=P(e,255),t=P(t,255),i=P(i,255);var n,r,s=N(e,t,i),o=R(e,t,i),a=(s+o)/2;if(s==o)n=r=0;else{var l=s-o;switch(r=a>.5?l/(2-s-o):l/(s+o),s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,l:a}}function a(e,t,i){e=P(e,255),t=P(t,255),i=P(i,255);var n,r,s=N(e,t,i),o=R(e,t,i),a=s,l=s-o;if(r=0===s?0:l/s,s==o)n=0;else{switch(s){case e:n=(t-i)/l+(t<i?6:0);break;case t:n=(i-e)/l+2;break;case i:n=(e-t)/l+4}n/=6}return{h:n,s:r,v:a}}function l(e,t,i){e=6*P(e,360),t=P(t,100),i=P(i,100);var n=r.floor(e),s=e-n,o=i*(1-t),a=i*(1-s*t),l=i*(1-(1-s)*t),c=n%6;return{r:255*[i,a,o,o,l,i][c],g:255*[l,i,i,a,o,o][c],b:255*[o,o,l,i,i,a][c]}}function c(e,t,i,n){var r=[I(B(e).toString(16)),I(B(t).toString(16)),I(B(i).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function h(e,t,i,n){return[I($(n)),I(B(e).toString(16)),I(B(t).toString(16)),I(B(i).toString(16))].join("")}function d(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.s-=t/100,i.s=C(i.s),s(i)}function u(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.s+=t/100,i.s=C(i.s),s(i)}function p(e){return s(e).desaturate(100)}function f(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.l+=t/100,i.l=C(i.l),s(i)}function m(e,t){t=0===t?0:t||10;var i=s(e).toRgb();return i.r=N(0,R(255,i.r-B(-t/100*255))),i.g=N(0,R(255,i.g-B(-t/100*255))),i.b=N(0,R(255,i.b-B(-t/100*255))),s(i)}function g(e,t){t=0===t?0:t||10;var i=s(e).toHsl();return i.l-=t/100,i.l=C(i.l),s(i)}function y(e,t){var i=s(e).toHsl(),n=(i.h+t)%360;return i.h=n<0?360+n:n,s(i)}function v(e){var t=s(e).toHsl();return t.h=(t.h+180)%360,s(t)}function x(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+120)%360,s:t.s,l:t.l}),s({h:(i+240)%360,s:t.s,l:t.l})]}function b(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+90)%360,s:t.s,l:t.l}),s({h:(i+180)%360,s:t.s,l:t.l}),s({h:(i+270)%360,s:t.s,l:t.l})]}function w(e){var t=s(e).toHsl(),i=t.h;return[s(e),s({h:(i+72)%360,s:t.s,l:t.l}),s({h:(i+216)%360,s:t.s,l:t.l})]}function O(e,t,i){t=t||6,i=i||30;var n=s(e).toHsl(),r=360/i,o=[s(e)];for(n.h=(n.h-(r*t>>1)+720)%360;--t;)n.h=(n.h+r)%360,o.push(s(n));return o}function S(e,t){t=t||6;for(var i=s(e).toHsv(),n=i.h,r=i.s,o=i.v,a=[],l=1/t;t--;)a.push(s({h:n,s:r,v:o})),o=(o+l)%1;return a}function k(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function P(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=R(t,N(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function C(e){return R(1,N(0,e))}function A(e){return parseInt(e,16)}function I(e){return 1==e.length?"0"+e:""+e}function T(e){return e<=1&&(e=100*e+"%"),e}function $(e){return r.round(255*parseFloat(e)).toString(16)}function M(e){return A(e)/255}function E(e){return!!Q.CSS_UNIT.exec(e)}var _=/^\s+/,D=/\s+$/,L=0,B=r.round,R=r.min,N=r.max,F=r.random;s.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,i,n=this.toRgb();return e=n.r/255,t=n.g/255,i=n.b/255,.2126*(e<=.03928?e/12.92:r.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:r.pow((t+.055)/1.055,2.4))+.0722*(i<=.03928?i/12.92:r.pow((i+.055)/1.055,2.4))},setAlpha:function(e){return this._a=k(e),this._roundA=B(100*this._a)/100,this},toHsv:function(){var e=a(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=a(this._r,this._g,this._b),t=B(360*e.h),i=B(100*e.s),n=B(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=B(360*e.h),i=B(100*e.s),n=B(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return c(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,i,n,r){var s=[I(B(e).toString(16)),I(B(t).toString(16)),I(B(i).toString(16)),I($(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:B(this._r),g:B(this._g),b:B(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+B(this._r)+", "+B(this._g)+", "+B(this._b)+")":"rgba("+B(this._r)+", "+B(this._g)+", "+B(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:B(100*P(this._r,255))+"%",g:B(100*P(this._g,255))+"%",b:B(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+B(100*P(this._r,255))+"%, "+B(100*P(this._g,255))+"%, "+B(100*P(this._b,255))+"%)":"rgba("+B(100*P(this._r,255))+"%, "+B(100*P(this._g,255))+"%, "+B(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(z[c(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var r=s(e);i="#"+h(r._r,r._g,r._b,r._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex4"===e&&(i=this.toHex8String(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return s(this.toString())},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(f,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(p,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(S,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(x,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},s.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:T(e[n]));e=i}return s(e,t)},s.equals=function(e,t){return!(!e||!t)&&s(e).toRgbString()==s(t).toRgbString()},s.random=function(){return s.fromRatio({r:F(),g:F(),b:F()})},s.mix=function(e,t,i){i=0===i?0:i||50;var n=s(e).toRgb(),r=s(t).toRgb(),o=i/100;return s({r:(r.r-n.r)*o+n.r,g:(r.g-n.g)*o+n.g,b:(r.b-n.b)*o+n.b,a:(r.a-n.a)*o+n.a})},s.readability=function(e,t){var i=s(e),n=s(t);return(r.max(i.getLuminance(),n.getLuminance())+.05)/(r.min(i.getLuminance(),n.getLuminance())+.05)},s.isReadable=function(e,t,i){var n,r,o=s.readability(e,t);switch(r=!1,(n=function(e){var t,i;return"AA"!==(t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==t&&(t="AA"),"small"!==(i=(e.size||"small").toLowerCase())&&"large"!==i&&(i="small"),{level:t,size:i}}(i)).level+n.size){case"AAsmall":case"AAAlarge":r=o>=4.5;break;case"AAlarge":r=o>=3;break;case"AAAsmall":r=o>=7}return r},s.mostReadable=function(e,t,i){var n,r,o,a,l=null,c=0;r=(i=i||{}).includeFallbackColors,o=i.level,a=i.size;for(var h=0;h<t.length;h++)(n=s.readability(e,t[h]))>c&&(c=n,l=s(t[h]));return s.isReadable(e,l,{level:o,size:a})||!r?l:(i.includeFallbackColors=!1,s.mostReadable(e,["#fff","#000"],i))};var j=s.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=s.hexNames=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}(j),Q=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",i="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+i),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();void 0!==e&&e.exports?e.exports=s:void 0!==(n=function(){return s}.call(t,i,t,e))&&(e.exports=n)}(Math)},function(e,t,i){var n=i(67);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("0f73e73c",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-editable-input {\n  position: relative;\n}\n.vc-input__input {\n  padding: 0;\n  border: 0;\n  outline: none;\n}\n.vc-input__label {\n  text-transform: capitalize;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-editable-input"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.val,expression:"val"}],ref:"input",staticClass:"vc-input__input",attrs:{"aria-labelledby":e.labelId},domProps:{value:e.val},on:{keydown:e.handleKeyDown,input:[function(t){t.target.composing||(e.val=t.target.value)},e.update]}}),e._v(" "),i("span",{staticClass:"vc-input__label",attrs:{for:e.label,id:e.labelId}},[e._v(e._s(e.labelSpanText))]),e._v(" "),i("span",{staticClass:"vc-input__desc"},[e._v(e._s(e.desc))])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-compact",attrs:{role:"application","aria-label":"Compact color picker"}},[i("ul",{staticClass:"vc-compact-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return i("li",{key:t,staticClass:"vc-compact-color-item",class:{"vc-compact-color-item--white":"#FFFFFF"===t},style:{background:t},attrs:{role:"option","aria-label":"color:"+t,"aria-selected":t===e.pick},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-compact-dot"})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(37),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(73),a=!1,l=function(e){a||i(71)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Grayscale.vue",t.default=c.exports},function(e,t,i){var n=i(72);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("21ddbb74",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-grayscale {\n  width: 125px;\n  border-radius: 2px;\n  box-shadow: 0 2px 15px rgba(0,0,0,.12), 0 2px 10px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-grayscale-colors {\n  border-radius: 2px;\n  overflow: hidden;\n  padding: 0;\n  margin: 0;\n}\n.vc-grayscale-color-item {\n  list-style: none;\n  width: 25px;\n  height: 25px;\n  float: left;\n  position: relative;\n  cursor: pointer;\n}\n.vc-grayscale-color-item--white .vc-grayscale-dot {\n  background: #000;\n}\n.vc-grayscale-dot {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 6px;\n  height: 6px;\n  margin: -3px 0 0 -2px;\n  border-radius: 50%;\n  opacity: 1;\n  background: #fff;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-grayscale",attrs:{role:"application","aria-label":"Grayscale color picker"}},[i("ul",{staticClass:"vc-grayscale-colors",attrs:{role:"listbox"}},e._l(e.paletteUpperCase(e.palette),(function(t){return i("li",{key:t,staticClass:"vc-grayscale-color-item",class:{"vc-grayscale-color-item--white":"#FFFFFF"==t},style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":t===e.pick},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t===e.pick,expression:"c === pick"}],staticClass:"vc-grayscale-dot"})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(77),a=!1,l=function(e){a||i(75)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Material.vue",t.default=c.exports},function(e,t,i){var n=i(76);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("1ff3af73",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,'\n.vc-material {\n  width: 98px;\n  height: 98px;\n  padding: 16px;\n  font-family: "Roboto";\n  position: relative;\n  border-radius: 2px;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n  background-color: #fff;\n}\n.vc-material .vc-input__input {\n  width: 100%;\n  margin-top: 12px;\n  font-size: 15px;\n  color: #333;\n  height: 30px;\n}\n.vc-material .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  font-size: 11px;\n  color: #999;\n  text-transform: capitalize;\n}\n.vc-material-hex {\n  border-bottom-width: 2px;\n  border-bottom-style: solid;\n}\n.vc-material-split {\n  display: flex;\n  margin-right: -10px;\n  padding-top: 11px;\n}\n.vc-material-third {\n  flex: 1;\n  padding-right: 10px;\n}\n',""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-material",attrs:{role:"application","aria-label":"Material color picker"}},[i("ed-in",{staticClass:"vc-material-hex",style:{borderColor:e.colors.hex},attrs:{label:"hex"},on:{change:e.onChange},model:{value:e.colors.hex,callback:function(t){e.$set(e.colors,"hex",t)},expression:"colors.hex"}}),e._v(" "),i("div",{staticClass:"vc-material-split"},[i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"r"},on:{change:e.onChange},model:{value:e.colors.rgba.r,callback:function(t){e.$set(e.colors.rgba,"r",t)},expression:"colors.rgba.r"}})],1),e._v(" "),i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"g"},on:{change:e.onChange},model:{value:e.colors.rgba.g,callback:function(t){e.$set(e.colors.rgba,"g",t)},expression:"colors.rgba.g"}})],1),e._v(" "),i("div",{staticClass:"vc-material-third"},[i("ed-in",{attrs:{label:"b"},on:{change:e.onChange},model:{value:e.colors.rgba.b,callback:function(t){e.$set(e.colors.rgba,"b",t)},expression:"colors.rgba.b"}})],1)])],1)};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(39),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(114),a=!1,l=function(e){a||i(79)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Slider.vue",t.default=c.exports},function(e,t,i){var n=i(80);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7982aa43",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-slider {\n  position: relative;\n  width: 410px;\n}\n.vc-slider-hue-warp {\n  height: 12px;\n  position: relative;\n}\n.vc-slider-hue-warp .vc-hue-picker {\n  width: 14px;\n  height: 14px;\n  border-radius: 6px;\n  transform: translate(-7px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-slider-swatches {\n  display: flex;\n  margin-top: 20px;\n}\n.vc-slider-swatch {\n  margin-right: 1px;\n  flex: 1;\n  width: 20%;\n}\n.vc-slider-swatch:first-child {\n  margin-right: 1px;\n}\n.vc-slider-swatch:first-child .vc-slider-swatch-picker {\n  border-radius: 2px 0px 0px 2px;\n}\n.vc-slider-swatch:last-child {\n  margin-right: 0;\n}\n.vc-slider-swatch:last-child .vc-slider-swatch-picker {\n  border-radius: 0px 2px 2px 0px;\n}\n.vc-slider-swatch-picker {\n  cursor: pointer;\n  height: 12px;\n}\n.vc-slider-swatch:nth-child(n) .vc-slider-swatch-picker.vc-slider-swatch-picker--active {\n  transform: scaleY(1.8);\n  border-radius: 3.6px/2px;\n}\n.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 1px #ddd;\n}\n.vc-slider-swatch-picker--active.vc-slider-swatch-picker--white {\n  box-shadow: inset 0 0 0 0.6px #ddd;\n}\n",""])},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(i(82)),s=n(i(100)),o="function"==typeof s.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,i){e.exports={default:i(83),__esModule:!0}},function(e,t,i){i(84),i(96),e.exports=i(32).f("iterator")},function(e,t,i){"use strict";var n=i(85)(!0);i(40)(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})}))},function(e,t,i){var n=i(23),r=i(24);e.exports=function(e){return function(t,i){var s,o,a=String(r(t)),l=n(i),c=a.length;return l<0||l>=c?e?"":void 0:(s=a.charCodeAt(l))<55296||s>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?e?a.charAt(l):s:e?a.slice(l,l+2):o-56320+(s-55296<<10)+65536}}},function(e,t,i){var n=i(87);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,r){return e.call(t,i,n,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,i){"use strict";var n=i(45),r=i(18),s=i(31),o={};i(7)(o,i(11)("iterator"),(function(){return this})),e.exports=function(e,t,i){e.prototype=n(o,{next:r(1,i)}),s(e,t+" Iterator")}},function(e,t,i){var n=i(8),r=i(16),s=i(27);e.exports=i(9)?Object.defineProperties:function(e,t){r(e);for(var i,o=s(t),a=o.length,l=0;a>l;)n.f(e,i=o[l++],t[i]);return e}},function(e,t,i){var n=i(47);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(10),r=i(92),s=i(93);e.exports=function(e){return function(t,i,o){var a,l=n(t),c=r(l.length),h=s(o,c);if(e&&i!=i){for(;c>h;)if((a=l[h++])!=a)return!0}else for(;c>h;h++)if((e||h in l)&&l[h]===i)return e||h||0;return!e&&-1}}},function(e,t,i){var n=i(23),r=Math.min;e.exports=function(e){return e>0?r(n(e),9007199254740991):0}},function(e,t,i){var n=i(23),r=Math.max,s=Math.min;e.exports=function(e,t){return(e=n(e))<0?r(e+t,0):s(e,t)}},function(e,t,i){var n=i(4).document;e.exports=n&&n.documentElement},function(e,t,i){var n=i(6),r=i(48),s=i(28)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),n(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,i){i(97);for(var n=i(4),r=i(7),s=i(26),o=i(11)("toStringTag"),a="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<a.length;l++){var c=a[l],h=n[c],d=h&&h.prototype;d&&!d[o]&&r(d,o,c),s[c]=s.Array}},function(e,t,i){"use strict";var n=i(98),r=i(99),s=i(26),o=i(10);e.exports=i(40)(Array,"Array",(function(e,t){this._t=o(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,r(1)):r(0,"keys"==t?i:"values"==t?e[i]:[i,e[i]])}),"values"),s.Arguments=s.Array,n("keys"),n("values"),n("entries")},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){e.exports={default:i(101),__esModule:!0}},function(e,t,i){i(102),i(108),i(109),i(110),e.exports=i(15).Symbol},function(e,t,i){"use strict";var n=i(4),r=i(6),s=i(9),o=i(41),a=i(44),l=i(103).KEY,c=i(17),h=i(29),d=i(31),u=i(19),p=i(11),f=i(32),m=i(33),g=i(104),y=i(105),v=i(16),x=i(12),b=i(48),w=i(10),O=i(25),S=i(18),k=i(45),P=i(106),C=i(107),A=i(49),I=i(8),T=i(27),$=C.f,M=I.f,E=P.f,_=n.Symbol,D=n.JSON,L=D&&D.stringify,B=p("_hidden"),R=p("toPrimitive"),N={}.propertyIsEnumerable,F=h("symbol-registry"),j=h("symbols"),z=h("op-symbols"),Q=Object.prototype,U="function"==typeof _&&!!A.f,q=n.QObject,H=!q||!q.prototype||!q.prototype.findChild,V=s&&c((function(){return 7!=k(M({},"a",{get:function(){return M(this,"a",{value:7}).a}})).a}))?function(e,t,i){var n=$(Q,t);n&&delete Q[t],M(e,t,i),n&&e!==Q&&M(Q,t,n)}:M,W=function(e){var t=j[e]=k(_.prototype);return t._k=e,t},X=U&&"symbol"==typeof _.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof _},G=function(e,t,i){return e===Q&&G(z,t,i),v(e),t=O(t,!0),v(i),r(j,t)?(i.enumerable?(r(e,B)&&e[B][t]&&(e[B][t]=!1),i=k(i,{enumerable:S(0,!1)})):(r(e,B)||M(e,B,S(1,{})),e[B][t]=!0),V(e,t,i)):M(e,t,i)},Y=function(e,t){v(e);for(var i,n=g(t=w(t)),r=0,s=n.length;s>r;)G(e,i=n[r++],t[i]);return e},Z=function(e){var t=N.call(this,e=O(e,!0));return!(this===Q&&r(j,e)&&!r(z,e))&&(!(t||!r(this,e)||!r(j,e)||r(this,B)&&this[B][e])||t)},K=function(e,t){if(e=w(e),t=O(t,!0),e!==Q||!r(j,t)||r(z,t)){var i=$(e,t);return!i||!r(j,t)||r(e,B)&&e[B][t]||(i.enumerable=!0),i}},J=function(e){for(var t,i=E(w(e)),n=[],s=0;i.length>s;)r(j,t=i[s++])||t==B||t==l||n.push(t);return n},ee=function(e){for(var t,i=e===Q,n=E(i?z:w(e)),s=[],o=0;n.length>o;)!r(j,t=n[o++])||i&&!r(Q,t)||s.push(j[t]);return s};U||(_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var e=u(arguments.length>0?arguments[0]:void 0),t=function(i){this===Q&&t.call(z,i),r(this,B)&&r(this[B],e)&&(this[B][e]=!1),V(this,e,S(1,i))};return s&&H&&V(Q,e,{configurable:!0,set:t}),W(e)},a(_.prototype,"toString",(function(){return this._k})),C.f=K,I.f=G,i(50).f=P.f=J,i(34).f=Z,A.f=ee,s&&!i(14)&&a(Q,"propertyIsEnumerable",Z,!0),f.f=function(e){return W(p(e))}),o(o.G+o.W+o.F*!U,{Symbol:_});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)p(te[ie++]);for(var ne=T(p.store),re=0;ne.length>re;)m(ne[re++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return r(F,e+="")?F[e]:F[e]=_(e)},keyFor:function(e){if(!X(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!U,"Object",{create:function(e,t){return void 0===t?k(e):Y(k(e),t)},defineProperty:G,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:J,getOwnPropertySymbols:ee});var se=c((function(){A.f(1)}));o(o.S+o.F*se,"Object",{getOwnPropertySymbols:function(e){return A.f(b(e))}}),D&&o(o.S+o.F*(!U||c((function(){var e=_();return"[null]"!=L([e])||"{}"!=L({a:e})||"{}"!=L(Object(e))}))),"JSON",{stringify:function(e){for(var t,i,n=[e],r=1;arguments.length>r;)n.push(arguments[r++]);if(i=t=n[1],(x(t)||void 0!==e)&&!X(e))return y(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!X(t))return t}),n[1]=t,L.apply(D,n)}}),_.prototype[R]||i(7)(_.prototype,R,_.prototype.valueOf),d(_,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,i){var n=i(19)("meta"),r=i(12),s=i(6),o=i(8).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(17)((function(){return l(Object.preventExtensions({}))})),h=function(e){o(e,n,{value:{i:"O"+ ++a,w:{}}})},d=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!s(e,n)){if(!l(e))return"F";if(!t)return"E";h(e)}return e[n].i},getWeak:function(e,t){if(!s(e,n)){if(!l(e))return!0;if(!t)return!1;h(e)}return e[n].w},onFreeze:function(e){return c&&d.NEED&&l(e)&&!s(e,n)&&h(e),e}}},function(e,t,i){var n=i(27),r=i(49),s=i(34);e.exports=function(e){var t=n(e),i=r.f;if(i)for(var o,a=i(e),l=s.f,c=0;a.length>c;)l.call(e,o=a[c++])&&t.push(o);return t}},function(e,t,i){var n=i(47);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){var n=i(10),r=i(50).f,s={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return o&&"[object Window]"==s.call(e)?function(e){try{return r(e)}catch(e){return o.slice()}}(e):r(n(e))}},function(e,t,i){var n=i(34),r=i(18),s=i(10),o=i(25),a=i(6),l=i(42),c=Object.getOwnPropertyDescriptor;t.f=i(9)?c:function(e,t){if(e=s(e),t=o(t,!0),l)try{return c(e,t)}catch(e){}if(a(e,t))return r(!n.f.call(e,t),e[t])}},function(e,t){},function(e,t,i){i(33)("asyncIterator")},function(e,t,i){i(33)("observable")},function(e,t,i){var n=i(112);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7c5f1a1c",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-hue {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  border-radius: 2px;\n}\n.vc-hue--horizontal {\n  background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue--vertical {\n  background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n}\n.vc-hue-container {\n  cursor: pointer;\n  margin: 0 2px;\n  position: relative;\n  height: 100%;\n}\n.vc-hue-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-hue-picker {\n  cursor: pointer;\n  margin-top: 1px;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  transform: translateX(-2px) ;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-hue",e.directionClass]},[i("div",{ref:"container",staticClass:"vc-hue-container",attrs:{role:"slider","aria-valuenow":e.colors.hsl.h,"aria-valuemin":"0","aria-valuemax":"360"},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-hue-pointer",style:{top:e.pointerTop,left:e.pointerLeft},attrs:{role:"presentation"}},[i("div",{staticClass:"vc-hue-picker"})])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-slider",attrs:{role:"application","aria-label":"Slider color picker"}},[i("div",{staticClass:"vc-slider-hue-warp"},[i("hue",{on:{change:e.hueChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-slider-swatches",attrs:{role:"group"}},e._l(e.normalizedSwatches,(function(t,n){return i("div",{key:n,staticClass:"vc-slider-swatch",attrs:{"data-index":n,"aria-label":"color:"+e.colors.hex,role:"button"},on:{click:function(i){return e.handleSwClick(n,t)}}},[i("div",{staticClass:"vc-slider-swatch-picker",class:{"vc-slider-swatch-picker--active":e.isActive(t,n),"vc-slider-swatch-picker--white":1===t.l},style:{background:"hsl("+e.colors.hsl.h+", "+100*t.s+"%, "+100*t.l+"%)"}})])})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(52),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(119),a=!1,l=function(e){a||i(116)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Swatches.vue",t.default=c.exports},function(e,t,i){var n=i(117);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("10f839a2",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-swatches {\n  width: 320px;\n  height: 240px;\n  overflow-y: scroll;\n  background-color: #fff;\n  box-shadow: 0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16);\n}\n.vc-swatches-box {\n  padding: 16px 0 6px 16px;\n  overflow: hidden;\n}\n.vc-swatches-color-group {\n  padding-bottom: 10px;\n  width: 40px;\n  float: left;\n  margin-right: 10px;\n}\n.vc-swatches-color-it {\n  box-sizing: border-box;\n  width: 40px;\n  height: 24px;\n  cursor: pointer;\n  background: #880e4f;\n  margin-bottom: 1px;\n  overflow: hidden;\n  -ms-border-radius: 2px 2px 0 0;\n  -moz-border-radius: 2px 2px 0 0;\n  -o-border-radius: 2px 2px 0 0;\n  -webkit-border-radius: 2px 2px 0 0;\n  border-radius: 2px 2px 0 0;\n}\n.vc-swatches-color--white {\n  border: 1px solid #DDD;\n}\n.vc-swatches-pick {\n  fill: rgb(255, 255, 255);\n  margin-left: 8px;\n  display: block;\n}\n.vc-swatches-color--white .vc-swatches-pick {\n  fill: rgb(51, 51, 51);\n}\n",""])},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"red",(function(){return n})),i.d(t,"pink",(function(){return r})),i.d(t,"purple",(function(){return s})),i.d(t,"deepPurple",(function(){return o})),i.d(t,"indigo",(function(){return a})),i.d(t,"blue",(function(){return l})),i.d(t,"lightBlue",(function(){return c})),i.d(t,"cyan",(function(){return h})),i.d(t,"teal",(function(){return d})),i.d(t,"green",(function(){return u})),i.d(t,"lightGreen",(function(){return p})),i.d(t,"lime",(function(){return f})),i.d(t,"yellow",(function(){return m})),i.d(t,"amber",(function(){return g})),i.d(t,"orange",(function(){return y})),i.d(t,"deepOrange",(function(){return v})),i.d(t,"brown",(function(){return x})),i.d(t,"grey",(function(){return b})),i.d(t,"blueGrey",(function(){return w})),i.d(t,"darkText",(function(){return O})),i.d(t,"lightText",(function(){return S})),i.d(t,"darkIcons",(function(){return k})),i.d(t,"lightIcons",(function(){return P})),i.d(t,"white",(function(){return C})),i.d(t,"black",(function(){return A}));var n={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},s={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},o={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},a={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},l={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},c={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},h={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},d={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},u={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},p={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},f={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},m={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},g={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},y={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},v={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},x={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},b={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},w={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},O={primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",dividers:"rgba(0, 0, 0, 0.12)"},S={primary:"rgba(255, 255, 255, 1)",secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",dividers:"rgba(255, 255, 255, 0.12)"},k={active:"rgba(0, 0, 0, 0.54)",inactive:"rgba(0, 0, 0, 0.38)"},P={active:"rgba(255, 255, 255, 1)",inactive:"rgba(255, 255, 255, 0.5)"},C="#ffffff",A="#000000";t.default={red:n,pink:r,purple:s,deepPurple:o,indigo:a,blue:l,lightBlue:c,cyan:h,teal:d,green:u,lightGreen:p,lime:f,yellow:m,amber:g,orange:y,deepOrange:v,brown:x,grey:b,blueGrey:w,darkText:O,lightText:S,darkIcons:k,lightIcons:P,white:C,black:A}},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-swatches",attrs:{role:"application","aria-label":"Swatches color picker","data-pick":e.pick}},[i("div",{staticClass:"vc-swatches-box",attrs:{role:"listbox"}},e._l(e.palette,(function(t,n){return i("div",{key:n,staticClass:"vc-swatches-color-group"},e._l(t,(function(t){return i("div",{key:t,class:["vc-swatches-color-it",{"vc-swatches-color--white":"#FFFFFF"===t}],style:{background:t},attrs:{role:"option","aria-label":"Color:"+t,"aria-selected":e.equal(t),"data-color":t},on:{click:function(i){return e.handlerClick(t)}}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.equal(t),expression:"equal(c)"}],staticClass:"vc-swatches-pick"},[i("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"}},[i("path",{attrs:{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}})])])])})),0)})),0)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(53),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(134),a=!1,l=function(e){a||i(121)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Photoshop.vue",t.default=c.exports},function(e,t,i){var n=i(122);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("080365d4",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,'\n.vc-photoshop {\n  background: #DCDCDC;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15);\n  box-sizing: initial;\n  width: 513px;\n  font-family: Roboto;\n}\n.vc-photoshop__disable-fields {\n  width: 390px;\n}\n.vc-ps-head {\n  background-image: linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%);\n  border-bottom: 1px solid #B1B1B1;\n  box-shadow: inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02);\n  height: 23px;\n  line-height: 24px;\n  border-radius: 4px 4px 0 0;\n  font-size: 13px;\n  color: #4D4D4D;\n  text-align: center;\n}\n.vc-ps-body {\n  padding: 15px;\n  display: flex;\n}\n.vc-ps-saturation-wrap {\n  width: 256px;\n  height: 256px;\n  position: relative;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n  overflow: hidden;\n}\n.vc-ps-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-ps-hue-wrap {\n  position: relative;\n  height: 256px;\n  width: 19px;\n  margin-left: 10px;\n  border: 2px solid #B3B3B3;\n  border-bottom: 2px solid #F0F0F0;\n}\n.vc-ps-hue-pointer {\n  position: relative;\n}\n.vc-ps-hue-pointer--left,\n.vc-ps-hue-pointer--right {\n  position: absolute;\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 5px 0 5px 8px;\n  border-color: transparent transparent transparent #555;\n}\n.vc-ps-hue-pointer--left:after,\n.vc-ps-hue-pointer--right:after {\n  content: "";\n  width: 0;\n  height: 0;\n  border-style: solid;\n  border-width: 4px 0 4px 6px;\n  border-color: transparent transparent transparent #fff;\n  position: absolute;\n  top: 1px;\n  left: 1px;\n  transform: translate(-8px, -5px);\n}\n.vc-ps-hue-pointer--left {\n  transform: translate(-13px, -4px);\n}\n.vc-ps-hue-pointer--right {\n  transform: translate(20px, -4px) rotate(180deg);\n}\n.vc-ps-controls {\n  width: 180px;\n  margin-left: 10px;\n  display: flex;\n}\n.vc-ps-controls__disable-fields {\n  width: auto;\n}\n.vc-ps-actions {\n  margin-left: 20px;\n  flex: 1;\n}\n.vc-ps-ac-btn {\n  cursor: pointer;\n  background-image: linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%);\n  border: 1px solid #878787;\n  border-radius: 2px;\n  height: 20px;\n  box-shadow: 0 1px 0 0 #EAEAEA;\n  font-size: 14px;\n  color: #000;\n  line-height: 20px;\n  text-align: center;\n  margin-bottom: 10px;\n}\n.vc-ps-previews {\n  width: 60px;\n}\n.vc-ps-previews__swatches {\n  border: 1px solid #B3B3B3;\n  border-bottom: 1px solid #F0F0F0;\n  margin-bottom: 2px;\n  margin-top: 1px;\n}\n.vc-ps-previews__pr-color {\n  height: 34px;\n  box-shadow: inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000;\n}\n.vc-ps-previews__label {\n  font-size: 14px;\n  color: #000;\n  text-align: center;\n}\n.vc-ps-fields {\n  padding-top: 5px;\n  padding-bottom: 9px;\n  width: 80px;\n  position: relative;\n}\n.vc-ps-fields .vc-input__input {\n  margin-left: 40%;\n  width: 40%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 5px;\n  font-size: 13px;\n  padding-left: 3px;\n  margin-right: 10px;\n}\n.vc-ps-fields .vc-input__label, .vc-ps-fields .vc-input__desc {\n  top: 0;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n  position: absolute;\n}\n.vc-ps-fields .vc-input__label {\n  left: 0;\n  width: 34px;\n}\n.vc-ps-fields .vc-input__desc {\n  right: 0;\n  width: 0;\n}\n.vc-ps-fields__divider {\n  height: 5px;\n}\n.vc-ps-fields__hex .vc-input__input {\n  margin-left: 20%;\n  width: 80%;\n  height: 18px;\n  border: 1px solid #888888;\n  box-shadow: inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC;\n  margin-bottom: 6px;\n  font-size: 13px;\n  padding-left: 3px;\n}\n.vc-ps-fields__hex .vc-input__label {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 14px;\n  text-transform: uppercase;\n  font-size: 13px;\n  height: 18px;\n  line-height: 22px;\n}\n',""])},function(e,t,i){var n=i(124);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("b5380e52",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-saturation,\n.vc-saturation--white,\n.vc-saturation--black {\n  cursor: pointer;\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n.vc-saturation--white {\n  background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n}\n.vc-saturation--black {\n  background: linear-gradient(to top, #000, rgba(0,0,0,0));\n}\n.vc-saturation-pointer {\n  cursor: pointer;\n  position: absolute;\n}\n.vc-saturation-circle {\n  cursor: head;\n  width: 4px;\n  height: 4px;\n  box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3), 0 0 1px 2px rgba(0,0,0,.4);\n  border-radius: 50%;\n  transform: translate(-2px, -2px);\n}\n",""])},function(e,t){e.exports=function(e,t,i){return t<i?e<t?t:e>i?i:e:e<i?i:e>t?t:e}},function(e,t){function n(e,t,i){function n(t){var i=d,n=u;return d=u=void 0,y=t,f=e.apply(n,i)}function a(e){var i=e-g;return void 0===g||i>=t||i<0||O&&e-y>=p}function l(){var e=b();if(a(e))return c(e);m=setTimeout(l,function(e){var i=t-(e-g);return O?x(i,p-(e-y)):i}(e))}function c(e){return m=void 0,S&&d?n(e):(d=u=void 0,f)}function h(){var e=b(),i=a(e);if(d=arguments,u=this,g=e,i){if(void 0===m)return function(e){return y=e,m=setTimeout(l,t),w?n(e):f}(g);if(O)return m=setTimeout(l,t),n(g)}return void 0===m&&(m=setTimeout(l,t)),f}var d,u,p,f,m,g,y=0,w=!1,O=!1,S=!0;if("function"!=typeof e)throw new TypeError(o);return t=s(t)||0,r(i)&&(w=!!i.leading,p=(O="maxWait"in i)?v(s(i.maxWait)||0,t):p,S="trailing"in i?!!i.trailing:S),h.cancel=function(){void 0!==m&&clearTimeout(m),y=0,d=g=u=m=void 0},h.flush=function(){return void 0===m?f:c(b())},h}function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function s(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&y.call(e)==l}(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var i=d.test(e);return i||u.test(e)?p(e.slice(2),i?2:8):h.test(e)?a:+e}var o="Expected a function",a=NaN,l="[object Symbol]",c=/^\s+|\s+$/g,h=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt,f="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,m="object"==typeof self&&self&&self.Object===Object&&self,g=f||m||Function("return this")(),y=Object.prototype.toString,v=Math.max,x=Math.min,b=function(){return g.Date.now()};e.exports=function(e,t,i){var s=!0,a=!0;if("function"!=typeof e)throw new TypeError(o);return r(i)&&(s="leading"in i?!!i.leading:s,a="trailing"in i?!!i.trailing:a),n(e,t,{leading:s,maxWait:t,trailing:a})}},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"container",staticClass:"vc-saturation",style:{background:e.bgColor},on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-saturation--white"}),e._v(" "),i("div",{staticClass:"vc-saturation--black"}),e._v(" "),i("div",{staticClass:"vc-saturation-pointer",style:{top:e.pointerTop,left:e.pointerLeft}},[i("div",{staticClass:"vc-saturation-circle"})])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){var n=i(129);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("4dc1b086",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-alpha {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-checkboard-wrap {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  overflow: hidden;\n}\n.vc-alpha-gradient {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n}\n.vc-alpha-container {\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n  height: 100%;\n  margin: 0 3px;\n}\n.vc-alpha-pointer {\n  z-index: 2;\n  position: absolute;\n}\n.vc-alpha-picker {\n  cursor: pointer;\n  width: 4px;\n  border-radius: 1px;\n  height: 8px;\n  box-shadow: 0 0 2px rgba(0, 0, 0, .6);\n  background: #fff;\n  margin-top: 1px;\n  transform: translateX(-2px);\n}\n",""])},function(e,t,i){var n=i(131);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("7e15c05b",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-checkerboard {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n  background-size: contain;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"vc-checkerboard",style:e.bgStyle})};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-alpha"},[i("div",{staticClass:"vc-alpha-checkboard-wrap"},[i("checkboard")],1),e._v(" "),i("div",{staticClass:"vc-alpha-gradient",style:{background:e.gradientColor}}),e._v(" "),i("div",{ref:"container",staticClass:"vc-alpha-container",on:{mousedown:e.handleMouseDown,touchmove:e.handleChange,touchstart:e.handleChange}},[i("div",{staticClass:"vc-alpha-pointer",style:{left:100*e.colors.a+"%"}},[i("div",{staticClass:"vc-alpha-picker"})])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-photoshop",e.disableFields?"vc-photoshop__disable-fields":""],attrs:{role:"application","aria-label":"PhotoShop color picker"}},[i("div",{staticClass:"vc-ps-head",attrs:{role:"heading"}},[e._v(e._s(e.head))]),e._v(" "),i("div",{staticClass:"vc-ps-body"},[i("div",{staticClass:"vc-ps-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-ps-hue-wrap"},[i("hue",{attrs:{direction:"vertical"},on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}},[i("div",{staticClass:"vc-ps-hue-pointer"},[i("i",{staticClass:"vc-ps-hue-pointer--left"}),i("i",{staticClass:"vc-ps-hue-pointer--right"})])])],1),e._v(" "),i("div",{class:["vc-ps-controls",e.disableFields?"vc-ps-controls__disable-fields":""]},[i("div",{staticClass:"vc-ps-previews"},[i("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.newLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-previews__swatches"},[i("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.colors.hex},attrs:{"aria-label":"New color is "+e.colors.hex}}),e._v(" "),i("div",{staticClass:"vc-ps-previews__pr-color",style:{background:e.currentColor},attrs:{"aria-label":"Current color is "+e.currentColor},on:{click:e.clickCurrentColor}})]),e._v(" "),i("div",{staticClass:"vc-ps-previews__label"},[e._v(e._s(e.currentLabel))])]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-ps-actions"},[i("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.acceptLabel},on:{click:e.handleAccept}},[e._v(e._s(e.acceptLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-ac-btn",attrs:{role:"button","aria-label":e.cancelLabel},on:{click:e.handleCancel}},[e._v(e._s(e.cancelLabel))]),e._v(" "),i("div",{staticClass:"vc-ps-fields"},[i("ed-in",{attrs:{label:"h",desc:"°",value:e.hsv.h},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"s",desc:"%",value:e.hsv.s,max:100},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"v",desc:"%",value:e.hsv.v,max:100},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}}),e._v(" "),i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-ps-fields__divider"}),e._v(" "),i("ed-in",{staticClass:"vc-ps-fields__hex",attrs:{label:"#",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),e.hasResetButton?i("div",{staticClass:"vc-ps-ac-btn",attrs:{"aria-label":"reset"},on:{click:e.handleReset}},[e._v(e._s(e.resetLabel))]):e._e()])])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(57),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(138),a=!1,l=function(e){a||i(136)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Sketch.vue",t.default=c.exports},function(e,t,i){var n=i(137);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("612c6604",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-sketch {\n  position: relative;\n  width: 200px;\n  padding: 10px 10px 0;\n  box-sizing: initial;\n  background: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, .15), 0 8px 16px rgba(0, 0, 0, .15);\n}\n.vc-sketch-saturation-wrap {\n  width: 100%;\n  padding-bottom: 75%;\n  position: relative;\n  overflow: hidden;\n}\n.vc-sketch-controls {\n  display: flex;\n}\n.vc-sketch-sliders {\n  padding: 4px 0;\n  flex: 1;\n}\n.vc-sketch-sliders .vc-hue,\n.vc-sketch-sliders .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-sketch-hue-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-sketch-alpha-wrap {\n  position: relative;\n  height: 10px;\n  margin-top: 4px;\n  overflow: hidden;\n}\n.vc-sketch-color-wrap {\n  width: 24px;\n  height: 24px;\n  position: relative;\n  margin-top: 4px;\n  margin-left: 4px;\n  border-radius: 3px;\n}\n.vc-sketch-active-color {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  border-radius: 2px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15), inset 0 0 4px rgba(0, 0, 0, .25);\n  z-index: 2;\n}\n.vc-sketch-color-wrap .vc-checkerboard {\n  background-size: auto;\n}\n.vc-sketch-field {\n  display: flex;\n  padding-top: 4px;\n}\n.vc-sketch-field .vc-input__input {\n  width: 90%;\n  padding: 4px 0 3px 10%;\n  border: none;\n  box-shadow: inset 0 0 0 1px #ccc;\n  font-size: 10px;\n}\n.vc-sketch-field .vc-input__label {\n  display: block;\n  text-align: center;\n  font-size: 11px;\n  color: #222;\n  padding-top: 3px;\n  padding-bottom: 4px;\n  text-transform: capitalize;\n}\n.vc-sketch-field--single {\n  flex: 1;\n  padding-left: 6px;\n}\n.vc-sketch-field--double {\n  flex: 2;\n}\n.vc-sketch-presets {\n  margin-right: -10px;\n  margin-left: -10px;\n  padding-left: 10px;\n  padding-top: 10px;\n  border-top: 1px solid #eee;\n}\n.vc-sketch-presets-color {\n  border-radius: 3px;\n  overflow: hidden;\n  position: relative;\n  display: inline-block;\n  margin: 0 10px 10px 0;\n  vertical-align: top;\n  cursor: pointer;\n  width: 16px;\n  height: 16px;\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n}\n.vc-sketch-presets-color .vc-checkerboard {\n  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, .15);\n  border-radius: 3px;\n}\n.vc-sketch__disable-alpha .vc-sketch-color-wrap {\n  height: 10px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-sketch",e.disableAlpha?"vc-sketch__disable-alpha":""],attrs:{role:"application","aria-label":"Sketch color picker"}},[i("div",{staticClass:"vc-sketch-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-controls"},[i("div",{staticClass:"vc-sketch-sliders"},[i("div",{staticClass:"vc-sketch-hue-wrap"},[i("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-sketch-alpha-wrap"},[i("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)]),e._v(" "),i("div",{staticClass:"vc-sketch-color-wrap"},[i("div",{staticClass:"vc-sketch-active-color",style:{background:e.activeColor},attrs:{"aria-label":"Current color is "+e.activeColor}}),e._v(" "),i("checkboard")],1)]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-sketch-field"},[i("div",{staticClass:"vc-sketch-field--double"},[i("ed-in",{attrs:{label:"hex",value:e.hex},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-sketch-field--single"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{staticClass:"vc-sketch-presets",attrs:{role:"group","aria-label":"A color preset, pick one to set as current color"}},[e._l(e.presetColors,(function(t){return[e.isTransparent(t)?i("div",{key:t,staticClass:"vc-sketch-presets-color",attrs:{"aria-label":"Color:"+t},on:{click:function(i){return e.handlePreset(t)}}},[i("checkboard")],1):i("div",{key:t,staticClass:"vc-sketch-presets-color",style:{background:t},attrs:{"aria-label":"Color:"+t},on:{click:function(i){return e.handlePreset(t)}}})]}))],2)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(58),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(142),a=!1,l=function(e){a||i(140)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Chrome.vue",t.default=c.exports},function(e,t,i){var n=i(141);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("1cd16048",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-chrome {\n  background: #fff;\n  border-radius: 2px;\n  box-shadow: 0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3);\n  box-sizing: initial;\n  width: 225px;\n  font-family: Menlo;\n  background-color: #fff;\n}\n.vc-chrome-controls {\n  display: flex;\n}\n.vc-chrome-color-wrap {\n  position: relative;\n  width: 36px;\n}\n.vc-chrome-active-color {\n  position: relative;\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  overflow: hidden;\n  z-index: 1;\n}\n.vc-chrome-color-wrap .vc-checkerboard {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n  background-size: auto;\n}\n.vc-chrome-sliders {\n  flex: 1;\n}\n.vc-chrome-fields-wrap {\n  display: flex;\n  padding-top: 16px;\n}\n.vc-chrome-fields {\n  display: flex;\n  margin-left: -6px;\n  flex: 1;\n}\n.vc-chrome-field {\n  padding-left: 6px;\n  width: 100%;\n}\n.vc-chrome-toggle-btn {\n  width: 32px;\n  text-align: right;\n  position: relative;\n}\n.vc-chrome-toggle-icon {\n  margin-right: -4px;\n  margin-top: 12px;\n  cursor: pointer;\n  position: relative;\n  z-index: 2;\n}\n.vc-chrome-toggle-icon-highlight {\n  position: absolute;\n  width: 24px;\n  height: 28px;\n  background: #eee;\n  border-radius: 4px;\n  top: 10px;\n  left: 12px;\n}\n.vc-chrome-hue-wrap {\n  position: relative;\n  height: 10px;\n  margin-bottom: 8px;\n}\n.vc-chrome-alpha-wrap {\n  position: relative;\n  height: 10px;\n}\n.vc-chrome-hue-wrap .vc-hue {\n  border-radius: 2px;\n}\n.vc-chrome-alpha-wrap .vc-alpha-gradient {\n  border-radius: 2px;\n}\n.vc-chrome-hue-wrap .vc-hue-picker, .vc-chrome-alpha-wrap .vc-alpha-picker {\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  transform: translate(-6px, -2px);\n  background-color: rgb(248, 248, 248);\n  box-shadow: 0 1px 4px 0 rgba(0, 0, 0, 0.37);\n}\n.vc-chrome-body {\n  padding: 16px 16px 12px;\n  background-color: #fff;\n}\n.vc-chrome-saturation-wrap {\n  width: 100%;\n  padding-bottom: 55%;\n  position: relative;\n  border-radius: 2px 2px 0 0;\n  overflow: hidden;\n}\n.vc-chrome-saturation-wrap .vc-saturation-circle {\n  width: 12px;\n  height: 12px;\n}\n.vc-chrome-fields .vc-input__input {\n  font-size: 11px;\n  color: #333;\n  width: 100%;\n  border-radius: 2px;\n  border: none;\n  box-shadow: inset 0 0 0 1px #dadada;\n  height: 21px;\n  text-align: center;\n}\n.vc-chrome-fields .vc-input__label {\n  text-transform: uppercase;\n  font-size: 11px;\n  line-height: 11px;\n  color: #969696;\n  text-align: center;\n  display: block;\n  margin-top: 12px;\n}\n.vc-chrome__disable-alpha .vc-chrome-active-color {\n  width: 18px;\n  height: 18px;\n}\n.vc-chrome__disable-alpha .vc-chrome-color-wrap {\n  width: 30px;\n}\n.vc-chrome__disable-alpha .vc-chrome-hue-wrap {\n  margin-top: 4px;\n  margin-bottom: 4px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["vc-chrome",e.disableAlpha?"vc-chrome__disable-alpha":""],attrs:{role:"application","aria-label":"Chrome color picker"}},[i("div",{staticClass:"vc-chrome-saturation-wrap"},[i("saturation",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-body"},[i("div",{staticClass:"vc-chrome-controls"},[i("div",{staticClass:"vc-chrome-color-wrap"},[i("div",{staticClass:"vc-chrome-active-color",style:{background:e.activeColor},attrs:{"aria-label":"current color is "+e.colors.hex}}),e._v(" "),e.disableAlpha?e._e():i("checkboard")],1),e._v(" "),i("div",{staticClass:"vc-chrome-sliders"},[i("div",{staticClass:"vc-chrome-hue-wrap"},[i("hue",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-alpha-wrap"},[i("alpha",{on:{change:e.childChange},model:{value:e.colors,callback:function(t){e.colors=t},expression:"colors"}})],1)])]),e._v(" "),e.disableFields?e._e():i("div",{staticClass:"vc-chrome-fields-wrap"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0===e.fieldsIndex,expression:"fieldsIndex === 0"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[e.hasAlpha?e._e():i("ed-in",{attrs:{label:"hex",value:e.colors.hex},on:{change:e.inputChange}}),e._v(" "),e.hasAlpha?i("ed-in",{attrs:{label:"hex",value:e.colors.hex8},on:{change:e.inputChange}}):e._e()],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:1===e.fieldsIndex,expression:"fieldsIndex === 1"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"r",value:e.colors.rgba.r},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"g",value:e.colors.rgba.g},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"b",value:e.colors.rgba.b},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:2===e.fieldsIndex,expression:"fieldsIndex === 2"}],staticClass:"vc-chrome-fields"},[i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"h",value:e.hsl.h},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"s",value:e.hsl.s},on:{change:e.inputChange}})],1),e._v(" "),i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"l",value:e.hsl.l},on:{change:e.inputChange}})],1),e._v(" "),e.disableAlpha?e._e():i("div",{staticClass:"vc-chrome-field"},[i("ed-in",{attrs:{label:"a",value:e.colors.a,"arrow-offset":.01,max:1},on:{change:e.inputChange}})],1)]),e._v(" "),i("div",{staticClass:"vc-chrome-toggle-btn",attrs:{role:"button","aria-label":"Change another color definition"},on:{click:e.toggleViews}},[i("div",{staticClass:"vc-chrome-toggle-icon"},[i("svg",{staticStyle:{width:"24px",height:"24px"},attrs:{viewBox:"0 0 24 24"},on:{mouseover:e.showHighlight,mouseenter:e.showHighlight,mouseout:e.hideHighlight}},[i("path",{attrs:{fill:"#333",d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}})])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.highlight,expression:"highlight"}],staticClass:"vc-chrome-toggle-icon-highlight"})])])])])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(59),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);var o=i(146),a=!1,l=function(e){a||i(144)},c=i(2)(r.a,o.a,!1,l,null,null);c.options.__file="src/components/Twitter.vue",t.default=c.exports},function(e,t,i){var n=i(145);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals),i(1)("669a48a5",n,!1,{})},function(e,t,i){(e.exports=i(0)(!1)).push([e.i,"\n.vc-twitter {\n  background: #fff;\n  border: 0 solid rgba(0,0,0,0.25);\n  box-shadow: 0 1px 4px rgba(0,0,0,0.25);\n  border-radius: 4px;\n  position: relative;\n}\n.vc-twitter-triangle {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent #fff transparent;\n  position: absolute;\n}\n.vc-twitter-triangle-shadow {\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 0 9px 10px 9px;\n  border-color: transparent transparent rgba(0, 0, 0, .1) transparent;\n  position: absolute;\n}\n.vc-twitter-body {\n  padding: 15px 9px 9px 15px;\n}\n.vc-twitter .vc-editable-input {\n  position: relative;\n}\n.vc-twitter .vc-editable-input input {\n  width: 100px;\n  font-size: 14px;\n  color: #666;\n  border: 0px;\n  outline: none;\n  height: 28px;\n  box-shadow: inset 0 0 0 1px #F0F0F0;\n  box-sizing: content-box;\n  border-radius: 0 4px 4px 0;\n  float: left;\n  padding: 1px;\n  padding-left: 8px;\n}\n.vc-twitter .vc-editable-input span {\n  display: none;\n}\n.vc-twitter-hash {\n  background: #F0F0F0;\n  height: 30px;\n  width: 30px;\n  border-radius: 4px 0 0 4px;\n  float: left;\n  color: #98A1A4;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.vc-twitter-swatch {\n  width: 30px;\n  height: 30px;\n  float: left;\n  border-radius: 4px;\n  margin: 0 6px 6px 0;\n  cursor: pointer;\n  position: relative;\n  outline: none;\n}\n.vc-twitter-clear {\n  clear: both;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle {\n  display: none;\n}\n.vc-twitter-hide-triangle .vc-twitter-triangle-shadow {\n  display: none;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle{\n  top: -10px;\n  left: 12px;\n}\n.vc-twitter-top-left-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  left: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle{\n  top: -10px;\n  right: 12px;\n}\n.vc-twitter-top-right-triangle .vc-twitter-triangle-shadow{\n  top: -11px;\n  right: 12px;\n}\n",""])},function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vc-twitter",class:{"vc-twitter-hide-triangle ":"hide"===e.triangle,"vc-twitter-top-left-triangle ":"top-left"===e.triangle,"vc-twitter-top-right-triangle ":"top-right"===e.triangle},style:{width:"number"==typeof e.width?e.width+"px":e.width}},[i("div",{staticClass:"vc-twitter-triangle-shadow"}),e._v(" "),i("div",{staticClass:"vc-twitter-triangle"}),e._v(" "),i("div",{staticClass:"vc-twitter-body"},[e._l(e.defaultColors,(function(t,n){return i("span",{key:n,staticClass:"vc-twitter-swatch",style:{background:t,boxShadow:"0 0 4px "+(e.equal(t)?t:"transparent")},on:{click:function(i){return e.handlerClick(t)}}})})),e._v(" "),i("div",{staticClass:"vc-twitter-hash"},[e._v("#")]),e._v(" "),i("editable-input",{attrs:{label:"#",value:e.hex},on:{change:e.inputChange}}),e._v(" "),i("div",{staticClass:"vc-twitter-clear"})],2)])};n._withStripped=!0;var r={render:n,staticRenderFns:[]};t.a=r}])},3651:(e,t,i)=>{"use strict";function n(e,t){let i=null;return{lastUpdatedTime:-1,trigger(){this.lastUpdatedTime<0||performance.now()-this.lastUpdatedTime>e?(this.lastUpdatedTime=performance.now(),t()):i||(i=setTimeout((()=>{i=null,this.lastUpdatedTime=performance.now(),t()}),e))},delay(){i&&clearTimeout(i),i=setTimeout((()=>{i=null,this.lastUpdatedTime=performance.now(),t()}),e)},destroy(){i&&(clearTimeout(i),i=null)}}}i.d(t,{A:()=>a});var r=i(1570);function s(e){if(e%1==0)return""+e;let t="";return t=Math.floor(Math.abs(e))>0?""+r.A.roundPrecise(e,3):""+r.A.roundPrecise(e,4),t}const o={props:{value:[Number,String,Object],format:{type:String,default:"float"},name:{type:String,default:null},icon:{type:String,default:null},min:{type:Number,default:null},max:{type:Number,default:null},disabled:{type:Boolean,default:!1},incrementSpeed:{type:Number,default:1},incrementMaxSpeed:{type:Number,default:50},incrementAcceleration:{type:Number,default:.15}},beforeDestroy(){document.body.removeEventListener("mouseup",this.onMouseUp)},data(){return{text:s(this.value),number:this.value,updateDelayer:n(100,(()=>{this.submitEvent()})),autoIncrementDelayTimeoutId:-1,autoIncrementDirection:1,autoIncrementInitDelay:300,autoIncrementDelay:50,autoIncrementIntervalId:-1,autoIncrementSpeed:this.incrementSpeed,autoIncrementMaxSpeed:this.incrementMaxSpeed,autoIncrementAcceleration:this.incrementAcceleration}},methods:{onLabelClicked(){this.$refs.textfield.focus()},textToFloat(e){const t=parseFloat(e.replace(/[^\d.-]/g,""));return isFinite(t)?t:0},textToInt(e){const t=parseInt(e.replace(/[^\d-]/g,""));return isFinite(t)?t:0},textToNumber(e){return e=""+e,"float"===this.format?this.textToFloat(e):this.textToInt(e)},delaySubmit(){this.updateDelayer.delay()},submitEvent(){this.number=this.enforceLimits(this.textToNumber(this.text)),this.$emit("changed",this.number)},onStepClicked(e){if(this.disabled)return;let t=this.textToNumber(this.text);t+=e,this.number=this.enforceLimits(t),this.$emit("changed",this.number),this.text=""+this.number},enforceLimits(e){return null!==this.min&&e<this.min?this.min:null!==this.max&&e>this.max?this.max:e},onMouseDownIncrement(e){this.onMouseDown(e,1)},onMouseDownDecrement(e){this.onMouseDown(e,-1)},onMouseDown(e,t){this.autoIncrementDirection=t,this.autoIncrementDelayTimeoutId&&clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=setTimeout((()=>{this.initAutoIncrement()}),this.autoIncrementInitDelay),document.body.addEventListener("mouseup",this.onMouseUp)},onMouseUp(){document.body.removeEventListener("mouseup",this.onMouseUp),this.autoIncrementIntervalId&&(clearInterval(this.autoIncrementIntervalId),this.autoIncrementIntervalId=-1),this.autoIncrementDelayTimeoutId&&(clearTimeout(this.autoIncrementDelayTimeoutId),this.autoIncrementDelayTimeoutId=-1)},initAutoIncrement(){this.autoIncrementSpeed=this.incrementSpeed,this.number=this.textToNumber(this.text),this.autoIncrementIntervalId=setInterval((()=>{this.number=this.enforceLimits(this.number+this.autoIncrementDirection*Math.floor(this.autoIncrementSpeed)),this.text=""+this.number,this.$emit("changed",this.number),this.autoIncrementSpeed<this.autoIncrementMaxSpeed&&(this.autoIncrementSpeed+=this.autoIncrementAcceleration)}),this.autoIncrementDelay)}},watch:{value(e){this.text=s(e)}}},a=(0,i(4486).A)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"number-textfield-container",class:{disabled:e.disabled}},[e.name?t("div",{ref:"label",staticClass:"label",on:{click:e.onLabelClicked}},[e._v(e._s(e.name))]):e._e(),e._v(" "),!e.name&&e.icon?t("div",{ref:"icon",staticClass:"label"},[t("i",{class:e.icon})]):e._e(),e._v(" "),t("div",{staticClass:"wrapper"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],ref:"textfield",attrs:{type:"text",disabled:e.disabled},domProps:{value:e.text},on:{keydown:[e.delaySubmit,function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitEvent.apply(null,arguments)}],input:function(t){t.target.composing||(e.text=t.target.value)}}}),e._v(" "),t("div",{staticClass:"step-controls"},[t("span",{staticClass:"step step-up",on:{click:function(t){return e.onStepClicked(1)},mousedown:e.onMouseDownIncrement}},[t("i",{staticClass:"fas fa-caret-up"})]),e._v(" "),t("span",{staticClass:"step step-down",on:{click:function(t){return e.onStepClicked(-1)},mousedown:e.onMouseDownDecrement}},[t("i",{staticClass:"fas fa-caret-down"})])])])])}),[],!1,null,null,null).exports},6222:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(5824),r=i.n(n),s=i(8078),o=i.n(s),a=i(8176);const l={props:{editorId:{type:String,required:!1},color:{type:String,default:"rgba(0,0,0,1.0)"},width:{type:String,default:"100%"},height:{type:String,default:"26px"},hollow:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},hint:{type:String,default:""}},components:{"color-picker":o().Chrome},beforeMount(){document.body.addEventListener("click",this.onGlobalClick)},beforeDestroy(){document.body.removeEventListener("click",this.onGlobalClick),a.A.colorControlToggled.$emit(this.editorId,!1)},data(){return{uid:r().generate(),pickerColor:this.color,vuePickerColor:{hex:this.color},showColorPicker:!1,tooltip:{shown:!1,x:0,y:0},oldColor:null,oldAlpha:1}},methods:{toggleColorPicker(){if(!this.disabled){if(this.tooltip.shown)return a.A.colorControlToggled.$emit(this.editorId,!1),void(this.tooltip.shown=!1);this.oldColor=this.color,this.vuePickerColor={hex:this.color},this.tooltip.shown=!0,a.A.colorControlToggled.$emit(this.editorId,!0),this.$nextTick((()=>{this.readjustTooltipPosition()}))}},updateColor(e){this.pickerColor=e.hex,this.$emit("input",`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`)},readjustTooltipPosition(){const e=this.$refs.tooltip,t=this.$refs.toggleButton;if(!e||!t)return;const i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=window.innerWidth,s=window.innerHeight;let o=0,a=0;o=n.left<r/2?n.right:n.left-i.width,a=n.top<s/2?n.top:n.bottom-i.height,o+i.width>window.innerWidth&&(o-=o+i.width-window.innerWidth),o=Math.max(0,o),a+i.height>window.innerHeight&&(a-=a+i.height-window.innerHeight),a=Math.max(60,a),this.tooltip.x=o,this.tooltip.y=a},onGlobalClick(e){!this.tooltip.shown||e.target&&e.target.closest(`.color-picker-uid-${this.uid}`)||(a.A.colorControlToggled.$emit(this.editorId,!1),this.tooltip.shown=!1)}},watch:{color(e){this.pickerColor=e,this.vuePickerColor.hex=e,this.$forceUpdate()}},computed:{cssStyle(){return this.hollow?{background:"none",border:`2px solid ${this.pickerColor}`}:{background:this.pickerColor,border:`2px solid ${this.pickerColor}`}}}},c=(0,i(4486).A)(l,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"color-picker",class:[`color-picker-uid-${e.uid}`],style:{width:e.width,"min-width":e.width,height:e.height},attrs:{title:e.hint}},[t("div",{ref:"toggleButton",staticClass:"color-picker-toggle-button",class:{disabled:e.disabled}},[t("span",{staticClass:"color-picker-toggle-button-background"}),e._v(" "),t("span",{staticClass:"color-picker-toggle-button-fill",style:e.cssStyle,on:{click:function(t){return e.toggleColorPicker()}}})]),e._v(" "),e.tooltip.shown?t("div",{ref:"tooltip",staticClass:"color-picker-tooltip",style:{left:e.tooltip.x+"px",top:e.tooltip.y+"px"}},[t("color-picker",{on:{input:e.updateColor},model:{value:e.vuePickerColor,callback:function(t){e.vuePickerColor=t},expression:"vuePickerColor"}})],1):e._e()])}),[],!1,null,null,null).exports},6635:(e,t,i)=>{"use strict";i.d(t,{A:()=>Lf});let n=[],r=[];function s(e){if(e<768)return!1;for(let t=0,i=n.length;;){let s=t+i>>1;if(e<n[s])i=s;else{if(!(e>=r[s]))return!0;t=s+1}if(t==i)return!1}}function o(e){return e>=127462&&e<=127487}(()=>{let e="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let t=0,i=0;t<e.length;t++)(t%2?r:n).push(i+=e[t])})();const a=8205;function l(e,t,i=!0,n=!0){return(i?c:h)(e,t,n)}function c(e,t,i){if(t==e.length)return t;t&&u(e.charCodeAt(t))&&p(e.charCodeAt(t-1))&&t--;let n=d(e,t);for(t+=f(n);t<e.length;){let r=d(e,t);if(n==a||r==a||i&&s(r))t+=f(r),n=r;else{if(!o(r))break;{let i=0,n=t-2;for(;n>=0&&o(d(e,n));)i++,n-=2;if(i%2==0)break;t+=2}}}return t}function h(e,t,i){for(;t>0;){let n=c(e,t-2,i);if(n<t)return n;t--}return 0}function d(e,t){let i=e.charCodeAt(t);if(!p(i)||t+1==e.length)return i;let n=e.charCodeAt(t+1);return u(n)?n-56320+(i-55296<<10)+65536:i}function u(e){return e>=56320&&e<57344}function p(e){return e>=55296&&e<56320}function f(e){return e<65536?1:2}class m{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,i){[e,t]=k(this,e,t);let n=[];return this.decompose(0,e,n,2),i.length&&i.decompose(0,i.length,n,3),this.decompose(t,this.length,n,1),y.from(n,this.length-(t-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=k(this,e,t);let i=[];return this.decompose(e,t,i,0),y.from(i,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),n=new b(this),r=new b(e);for(let e=t,s=t;;){if(n.next(e),r.next(e),e=0,n.lineBreak!=r.lineBreak||n.done!=r.done||n.value!=r.value)return!1;if(s+=n.value.length,n.done||s>=i)return!0}}iter(e=1){return new b(this,e)}iterRange(e,t=this.length){return new w(this,e,t)}iterLines(e,t){let i;if(null==e)i=this.iter();else{null==t&&(t=this.lines+1);let n=this.line(e).from;i=this.iterRange(n,Math.max(n,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new O(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new g(e):y.from(g.split(e,[])):m.empty}}class g extends m{constructor(e,t=function(e){let t=-1;for(let i of e)t+=i.length+1;return t}(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.text[r],o=n+s.length;if((t?i:o)>=e)return new S(n,o,i,s);n=o+1,i++}}decompose(e,t,i,n){let r=e<=0&&t>=this.length?this:new g(x(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&n){let e=i.pop(),t=v(r.text,e.text.slice(),0,r.length);if(t.length<=32)i.push(new g(t,e.length+r.length));else{let e=t.length>>1;i.push(new g(t.slice(0,e)),new g(t.slice(e)))}}else i.push(r)}replace(e,t,i){if(!(i instanceof g))return super.replace(e,t,i);[e,t]=k(this,e,t);let n=v(this.text,v(i.text,x(this.text,0,e)),t),r=this.length+i.length-(t-e);return n.length<=32?new g(n,r):y.from(g.split(n,[]),r)}sliceString(e,t=this.length,i="\n"){[e,t]=k(this,e,t);let n="";for(let r=0,s=0;r<=t&&s<this.text.length;s++){let o=this.text[s],a=r+o.length;r>e&&s&&(n+=i),e<a&&t>r&&(n+=o.slice(Math.max(0,e-r),t-r)),r=a+1}return n}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let i=[],n=-1;for(let r of e)i.push(r),n+=r.length+1,32==i.length&&(t.push(new g(i,n)),i=[],n=-1);return n>-1&&t.push(new g(i,n)),t}}class y extends m{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let t of e)this.lines+=t.lines}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.children[r],o=n+s.length,a=i+s.lines-1;if((t?a:o)>=e)return s.lineInner(e,t,i,n);n=o+1,i=a+1}}decompose(e,t,i,n){for(let r=0,s=0;s<=t&&r<this.children.length;r++){let o=this.children[r],a=s+o.length;if(e<=a&&t>=s){let r=n&((s<=e?1:0)|(a>=t?2:0));s>=e&&a<=t&&!r?i.push(o):o.decompose(e-s,t-s,i,r)}s=a+1}}replace(e,t,i){if([e,t]=k(this,e,t),i.lines<this.lines)for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.length;if(e>=r&&t<=o){let a=s.replace(e-r,t-r,i),l=this.lines-s.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let r=this.children.slice();return r[n]=a,new y(r,this.length-(t-e)+i.length)}return super.replace(r,o,a)}r=o+1}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){[e,t]=k(this,e,t);let n="";for(let r=0,s=0;r<this.children.length&&s<=t;r++){let o=this.children[r],a=s+o.length;s>e&&r&&(n+=i),e<a&&t>s&&(n+=o.sliceString(e-s,t-s,i)),s=a+1}return n}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof y))return 0;let i=0,[n,r,s,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;n+=t,r+=t){if(n==s||r==o)return i;let a=this.children[n],l=e.children[r];if(a!=l)return i+a.scanIdentical(l,t);i+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let i=0;for(let t of e)i+=t.lines;if(i<32){let i=[];for(let t of e)t.flatten(i);return new g(i,t)}let n=Math.max(32,i>>5),r=n<<1,s=n>>1,o=[],a=0,l=-1,c=[];function h(e){let t;if(e.lines>r&&e instanceof y)for(let t of e.children)h(t);else e.lines>s&&(a>s||!a)?(d(),o.push(e)):e instanceof g&&a&&(t=c[c.length-1])instanceof g&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new g(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>n&&d(),a+=e.lines,l+=e.length+1,c.push(e))}function d(){0!=a&&(o.push(1==c.length?c[0]:y.from(c,l)),l=-1,a=c.length=0)}for(let t of e)h(t);return d(),1==o.length?o[0]:new y(o,t)}}function v(e,t,i=0,n=1e9){for(let r=0,s=0,o=!0;s<e.length&&r<=n;s++){let a=e[s],l=r+a.length;l>=i&&(l>n&&(a=a.slice(0,n-r)),r<i&&(a=a.slice(i-r)),o?(t[t.length-1]+=a,o=!1):t.push(a)),r=l+1}return t}function x(e,t,i){return v(e,[""],t,i)}m.empty=new g([""],0);class b{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof g?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,n=this.nodes[i],r=this.offsets[i],s=r>>1,o=n instanceof g?n.text.length:n.children.length;if(s==(t>0?o:0)){if(0==i)return this.done=!0,this.value="",this;t>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&r)==(t>0?0:1)){if(this.offsets[i]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(n instanceof g){let r=n.text[s+(t<0?-1:0)];if(this.offsets[i]+=t,r.length>Math.max(0,e))return this.value=0==e?r:t>0?r.slice(e):r.slice(0,r.length-e),this;e-=r.length}else{let r=n.children[s+(t<0?-1:0)];e>r.length?(e-=r.length,this.offsets[i]+=t):(t<0&&this.offsets[i]--,this.nodes.push(r),this.offsets.push(t>0?1:(r instanceof g?r.text.length:r.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class w{constructor(e,t,i){this.value="",this.done=!1,this.cursor=new b(e,t>i?-1:1),this.pos=t>i?e.length:0,this.from=Math.min(t,i),this.to=Math.max(t,i)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let i=t<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:n}=this.cursor.next(e);return this.pos+=(n.length+e)*t,this.value=n.length<=i?n:t<0?n.slice(n.length-i):n.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class O{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:i,value:n}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=n,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(m.prototype[Symbol.iterator]=function(){return this.iter()},b.prototype[Symbol.iterator]=w.prototype[Symbol.iterator]=O.prototype[Symbol.iterator]=function(){return this});class S{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.text=n}get length(){return this.to-this.from}}function k(e,t,i){return[t=Math.max(0,Math.min(e.length,t)),Math.max(t,Math.min(e.length,i))]}function P(e,t,i=!0,n=!0){return l(e,t,i,n)}function C(e,t){let i=e.charCodeAt(t);if(!((n=i)>=55296&&n<56320&&t+1!=e.length))return i;var n;let r=e.charCodeAt(t+1);return function(e){return e>=56320&&e<57344}(r)?r-56320+(i-55296<<10)+65536:i}function A(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function I(e){return e<65536?1:2}const T=/\r\n?|\n/;var $=function(e){return e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter",e}($||($={}));class M{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?(e(i,n,r),n+=r):n+=s,i+=r}}iterChangedRanges(e,t=!1){L(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new M(e)}composeDesc(e){return this.empty?e:e.empty?this:R(this,e)}mapDesc(e,t=!1){return e.empty?this:B(this,e,t)}mapPos(e,t=-1,i=$.Simple){let n=0,r=0;for(let s=0;s<this.sections.length;){let o=this.sections[s++],a=this.sections[s++],l=n+o;if(a<0){if(l>e)return r+(e-n);r+=o}else{if(i!=$.Simple&&l>=e&&(i==$.TrackDel&&n<e&&l>e||i==$.TrackBefore&&n<e||i==$.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!o)return e==n||t<0?r:r+a;r+=a}n=l}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=n+this.sections[i++];if(this.sections[i++]>=0&&n<=t&&r>=e)return!(n<e&&r>t)||"cover";n=r}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new M(e)}static create(e){return new M(e)}}class E extends M{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return L(this,((t,i,n,r,s)=>e=e.replace(n,n+(i-t),s)),!1),e}mapDesc(e,t=!1){return B(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let n=0,r=0;n<t.length;n+=2){let s=t[n],o=t[n+1];if(o>=0){t[n]=o,t[n+1]=s;let a=n>>1;for(;i.length<a;)i.push(m.empty);i.push(s?e.slice(r,r+s):m.empty)}r+=s}return new E(t,i)}compose(e){return this.empty?e:e.empty?this:R(this,e,!0)}map(e,t=!1){return e.empty?this:B(this,e,t,!0)}iterChanges(e,t=!1){L(this,e,t)}get desc(){return M.create(this.sections)}filter(e){let t=[],i=[],n=[],r=new N(this);e:for(let s=0,o=0;;){let a=s==e.length?1e9:e[s++];for(;o<a||o==a&&0==r.len;){if(r.done)break e;let e=Math.min(r.len,a-o);_(n,e,-1);let s=-1==r.ins?-1:0==r.off?r.ins:0;_(t,e,s),s>0&&D(i,t,r.text),r.forward(e),o+=e}let l=e[s++];for(;o<l;){if(r.done)break e;let e=Math.min(r.len,l-o);_(t,e,-1),_(n,e,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(e),o+=e}}return{changes:new E(t,i),filtered:M.create(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):0==n?e.push([i]):e.push([i].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,i){let n=[],r=[],s=0,o=null;function a(e=!1){if(!e&&!n.length)return;s<t&&_(n,t-s,-1);let i=new E(n,r);o=o?o.compose(i.map(o)):i,n=[],r=[],s=0}return function e(l){if(Array.isArray(l))for(let t of l)e(t);else if(l instanceof E){if(l.length!=t)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${t})`);a(),o=o?o.compose(l.map(o)):l}else{let{from:e,to:o=e,insert:c}=l;if(e>o||e<0||o>t)throw new RangeError(`Invalid change range ${e} to ${o} (in doc of length ${t})`);let h=c?"string"==typeof c?m.of(c.split(i||T)):c:m.empty,d=h.length;if(e==o&&0==d)return;e<s&&a(),e>s&&_(n,e-s,-1),_(n,o-e,d),D(r,n,h),s=o}}(e),a(!o),o}static empty(e){return new E(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],i=[];for(let n=0;n<e.length;n++){let r=e[n];if("number"==typeof r)t.push(r,-1);else{if(!Array.isArray(r)||"number"!=typeof r[0]||r.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==r.length)t.push(r[0],0);else{for(;i.length<n;)i.push(m.empty);i[n]=m.of(r.slice(1)),t.push(r[0],i[n].length)}}}return new E(t,i)}static createSet(e,t){return new E(e,t)}}function _(e,t,i,n=!1){if(0==t&&i<=0)return;let r=e.length-2;r>=0&&i<=0&&i==e[r+1]?e[r]+=t:r>=0&&0==t&&0==e[r]?e[r+1]+=i:n?(e[r]+=t,e[r+1]+=i):e.push(t,i)}function D(e,t,i){if(0==i.length)return;let n=t.length-2>>1;if(n<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<n;)e.push(m.empty);e.push(i)}}function L(e,t,i){let n=e.inserted;for(let r=0,s=0,o=0;o<e.sections.length;){let a=e.sections[o++],l=e.sections[o++];if(l<0)r+=a,s+=a;else{let c=r,h=s,d=m.empty;for(;c+=a,h+=l,l&&n&&(d=d.append(n[o-2>>1])),!(i||o==e.sections.length||e.sections[o+1]<0);)a=e.sections[o++],l=e.sections[o++];t(r,c,s,h,d),r=c,s=h}}}function B(e,t,i,n=!1){let r=[],s=n?[]:null,o=new N(e),a=new N(t);for(let e=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(-1==o.ins&&-1==a.ins){let e=Math.min(o.len,a.len);_(r,e,-1),o.forward(e),a.forward(e)}else if(a.ins>=0&&(o.ins<0||e==o.i||0==o.off&&(a.len<o.len||a.len==o.len&&!i))){let t=a.len;for(_(r,a.ins,-1);t;){let i=Math.min(o.len,t);o.ins>=0&&e<o.i&&o.len<=i&&(_(r,0,o.ins),s&&D(s,r,o.text),e=o.i),o.forward(i),t-=i}a.next()}else{if(!(o.ins>=0)){if(o.done&&a.done)return s?E.createSet(r,s):M.create(r);throw new Error("Mismatched change set lengths")}{let t=0,i=o.len;for(;i;)if(-1==a.ins){let e=Math.min(i,a.len);t+=e,i-=e,a.forward(e)}else{if(!(0==a.ins&&a.len<i))break;i-=a.len,a.next()}_(r,t,e<o.i?o.ins:0),s&&e<o.i&&D(s,r,o.text),e=o.i,o.forward(o.len-i)}}}}function R(e,t,i=!1){let n=[],r=i?[]:null,s=new N(e),o=new N(t);for(let e=!1;;){if(s.done&&o.done)return r?E.createSet(n,r):M.create(n);if(0==s.ins)_(n,s.len,0,e),s.next();else if(0!=o.len||o.done){if(s.done||o.done)throw new Error("Mismatched change set lengths");{let t=Math.min(s.len2,o.len),i=n.length;if(-1==s.ins){let i=-1==o.ins?-1:o.off?0:o.ins;_(n,t,i,e),r&&i&&D(r,n,o.text)}else-1==o.ins?(_(n,s.off?0:s.len,t,e),r&&D(r,n,s.textBit(t))):(_(n,s.off?0:s.len,o.off?0:o.ins,e),r&&!o.off&&D(r,n,o.text));e=(s.ins>t||o.ins>=0&&o.len>t)&&(e||n.length>i),s.forward2(t),o.forward(t)}}else _(n,0,o.ins,e),r&&D(r,n,o.text),o.next()}}class N{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?m.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?m.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class F{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let i,n;return this.empty?i=n=e.mapPos(this.from,t):(i=e.mapPos(this.from,1),n=e.mapPos(this.to,-1)),i==this.from&&n==this.to?this:new F(i,n,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return j.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return j.range(this.anchor,i)}eq(e,t=!1){return!(this.anchor!=e.anchor||this.head!=e.head||t&&this.empty&&this.assoc!=e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return j.range(e.anchor,e.head)}static create(e,t,i){return new F(e,t,i)}}class j{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:j.create(this.ranges.map((i=>i.map(e,t))),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new j([this.main],0)}addRange(e,t=!0){return j.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let i=this.ranges.slice();return i[t]=e,j.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new j(e.ranges.map((e=>F.fromJSON(e))),e.main)}static single(e,t=e){return new j([j.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return j.normalized(e.slice(),t);i=r.to}return new j(e,t)}static cursor(e,t=0,i,n){return F.create(e,e,(0==t?0:t<0?8:16)|(null==i?7:Math.min(6,i))|(null!=n?n:16777215)<<6)}static range(e,t,i,n){let r=(null!=i?i:16777215)<<6|(null==n?7:Math.min(6,n));return t<e?F.create(t,e,48|r):F.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let i=1;i<e.length;i++){let n=e[i],r=e[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let s=r.from,o=Math.max(n.to,r.to);i<=t&&t--,e.splice(--i,2,n.anchor>n.head?j.range(o,s):j.range(s,o))}}return new j(e,t)}}function z(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let Q=0;class U{constructor(e,t,i,n,r){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=Q++,this.default=e([]),this.extensions="function"==typeof r?r(this):r}get reader(){return this}static define(e={}){return new U(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:q),!!e.static,e.enables)}of(e){return new H([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new H(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new H(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(i=>t(i.field(e))))}}function q(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class H{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=Q++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=this.id,s=e[r]>>1,o=2==this.type,a=!1,l=!1,c=[];for(let i of this.dependencies)"doc"==i?a=!0:"selection"==i?l=!0:0==(1&(null!==(t=e[i.id])&&void 0!==t?t:1))&&c.push(e[i.id]);return{create:e=>(e.values[s]=i(e),1),update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||W(e,c)){let t=i(e);if(o?!V(t,e.values[s],n):!n(t,e.values[s]))return e.values[s]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[r];if(null!=l){let r=re(t,l);if(this.dependencies.every((i=>i instanceof U?t.facet(i)===e.facet(i):!(i instanceof Y)||t.field(i,!1)==e.field(i,!1)))||(o?V(a=i(e),r,n):n(a=i(e),r)))return e.values[s]=r,0}else a=i(e);return e.values[s]=a,1}}}}function V(e,t,i){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}function W(e,t){let i=!1;for(let n of t)1&ne(e,n)&&(i=!0);return i}function X(e,t,i){let n=i.map((t=>e[t.id])),r=i.map((e=>e.type)),s=n.filter((e=>!(1&e))),o=e[t.id]>>1;function a(e){let i=[];for(let t=0;t<n.length;t++){let s=re(e,n[t]);if(2==r[t])for(let e of s)i.push(e);else i.push(s)}return t.combine(i)}return{create(e){for(let t of n)ne(e,t);return e.values[o]=a(e),1},update(e,i){if(!W(e,s))return 0;let n=a(e);return t.compare(n,e.values[o])?0:(e.values[o]=n,1)},reconfigure(e,r){let s=W(e,n),l=r.config.facets[t.id],c=r.facet(t);if(l&&!s&&q(i,l))return e.values[o]=c,0;let h=a(e);return t.compare(h,c)?(e.values[o]=c,0):(e.values[o]=h,1)}}}const G=U.define({static:!0});class Y{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.spec=r,this.provides=void 0}static define(e){let t=new Y(Q++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(G).find((e=>e.field==this));return((null==t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,i)=>{let n=e.values[t],r=this.updateF(n,i);return this.compareF(n,r)?0:(e.values[t]=r,1)},reconfigure:(e,i)=>null!=i.config.address[this.id]?(e.values[t]=i.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,G.of({field:this,create:e})]}get extension(){return this}}function Z(e){return t=>new J(t,e)}const K={highest:Z(0),high:Z(1),default:Z(2),low:Z(3),lowest:Z(4)};class J{constructor(e,t){this.inner=e,this.prec=t}}class ee{of(e){return new te(this,e)}reconfigure(e){return ee.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class te{constructor(e,t){this.compartment=e,this.inner=t}}class ie{constructor(e,t,i,n,r,s){for(this.base=e,this.compartments=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.facets=s,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,i){let n=[],r=Object.create(null),s=new Map;for(let i of function(e,t,i){let n=[[],[],[],[],[]],r=new Map;return function e(s,o){let a=r.get(s);if(null!=a){if(a<=o)return;let e=n[a].indexOf(s);e>-1&&n[a].splice(e,1),s instanceof te&&i.delete(s.compartment)}if(r.set(s,o),Array.isArray(s))for(let t of s)e(t,o);else if(s instanceof te){if(i.has(s.compartment))throw new RangeError("Duplicate use of compartment in extensions");let n=t.get(s.compartment)||s.inner;i.set(s.compartment,n),e(n,o)}else if(s instanceof J)e(s.inner,s.prec);else if(s instanceof Y)n[o].push(s),s.provides&&e(s.provides,o);else if(s instanceof H)n[o].push(s),s.facet.extensions&&e(s.facet.extensions,2);else{let t=s.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${s}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);e(t,o)}}(e,2),n.reduce(((e,t)=>e.concat(t)))}(e,t,s))i instanceof Y?n.push(i):(r[i.facet.id]||(r[i.facet.id]=[])).push(i);let o=Object.create(null),a=[],l=[];for(let e of n)o[e.id]=l.length<<1,l.push((t=>e.slot(t)));let c=null==i?void 0:i.config.facets;for(let e in r){let t=r[e],n=t[0].facet,s=c&&c[e]||[];if(t.every((e=>0==e.type)))if(o[n.id]=a.length<<1|1,q(s,t))a.push(i.facet(n));else{let e=n.combine(t.map((e=>e.value)));a.push(i&&n.compare(e,i.facet(n))?i.facet(n):e)}else{for(let e of t)0==e.type?(o[e.id]=a.length<<1|1,a.push(e.value)):(o[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));o[n.id]=l.length<<1,l.push((e=>X(e,n,t)))}}let h=l.map((e=>e(o)));return new ie(e,s,h,o,a,r)}}function ne(e,t){if(1&t)return 2;let i=t>>1,n=e.status[i];if(4==n)throw new Error("Cyclic dependency between fields and/or facets");if(2&n)return n;e.status[i]=4;let r=e.computeSlot(e,e.config.dynamicSlots[i]);return e.status[i]=2|r}function re(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const se=U.define(),oe=U.define({combine:e=>e.some((e=>e)),static:!0}),ae=U.define({combine:e=>e.length?e[0]:void 0,static:!0}),le=U.define(),ce=U.define(),he=U.define(),de=U.define({combine:e=>!!e.length&&e[0]});class ue{constructor(e,t){this.type=e,this.value=t}static define(){return new pe}}class pe{of(e){return new ue(this,e)}}class fe{constructor(e){this.map=e}of(e){return new me(this,e)}}class me{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new me(this.type,t)}is(e){return this.type==e}static define(e={}){return new fe(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let e=n.map(t);e&&i.push(e)}return i}}me.reconfigure=me.define(),me.appendConfig=me.define();class ge{constructor(e,t,i,n,r,s){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.scrollIntoView=s,this._doc=null,this._state=null,i&&z(i,t.newLength),r.some((e=>e.type==ge.time))||(this.annotations=r.concat(ge.time.of(Date.now())))}static create(e,t,i,n,r,s){return new ge(e,t,i,n,r,s)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(ge.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function ye(e,t){let i=[];for(let n=0,r=0;;){let s,o;if(n<e.length&&(r==t.length||t[r]>=e[n]))s=e[n++],o=e[n++];else{if(!(r<t.length))return i;s=t[r++],o=t[r++]}!i.length||i[i.length-1]<s?i.push(s,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function ve(e,t,i){var n;let r,s,o;return i?(r=t.changes,s=E.empty(t.changes.length),o=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):null===(n=e.selection)||void 0===n?void 0:n.map(r),effects:me.mapEffects(e.effects,r).concat(me.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function xe(e,t,i){let n=t.selection,r=Oe(t.annotations);return t.userEvent&&(r=r.concat(ge.userEvent.of(t.userEvent))),{changes:t.changes instanceof E?t.changes:E.of(t.changes||[],i,e.facet(ae)),selection:n&&(n instanceof j?n:j.single(n.anchor,n.head)),effects:Oe(t.effects),annotations:r,scrollIntoView:!!t.scrollIntoView}}function be(e,t,i){let n=xe(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let r=1;r<t.length;r++){!1===t[r].filter&&(i=!1);let s=!!t[r].sequential;n=ve(n,xe(e,t[r],s?n.changes.newLength:e.doc.length),s)}let r=ge.create(e,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return function(e){let t=e.startState,i=t.facet(he),n=e;for(let r=i.length-1;r>=0;r--){let s=i[r](e);s&&Object.keys(s).length&&(n=ve(n,xe(t,s,e.changes.newLength),!0))}return n==e?e:ge.create(t,e.changes,e.selection,n.effects,n.annotations,n.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let n of t.facet(le)){let t=n(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:ye(i,t))}if(!0!==i){let n,r;if(!1===i)r=e.changes.invertedDesc,n=E.empty(t.doc.length);else{let t=e.changes.filter(i);n=t.changes,r=t.filtered.mapDesc(t.changes).invertedDesc}e=ge.create(t,n,e.selection&&e.selection.map(r),me.mapEffects(e.effects,r),e.annotations,e.scrollIntoView)}let n=t.facet(ce);for(let i=n.length-1;i>=0;i--){let r=n[i](e);e=r instanceof ge?r:Array.isArray(r)&&1==r.length&&r[0]instanceof ge?r[0]:be(t,Oe(r),!1)}return e}(r):r)}ge.time=ue.define(),ge.userEvent=ue.define(),ge.addToHistory=ue.define(),ge.remote=ue.define();const we=[];function Oe(e){return null==e?we:Array.isArray(e)?e:[e]}var Se=function(e){return e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other",e}(Se||(Se={}));const ke=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pe;try{Pe=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class Ce{constructor(e,t,i,n,r,s){this.config=e,this.doc=t,this.selection=i,this.values=n,this.status=e.statusTemplate.slice(),this.computeSlot=r,s&&(s._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)ne(this,e<<1);this.computeSlot=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return ne(this,i),re(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return be(this,e,!0)}applyTransaction(e){let t,i=this.config,{base:n,compartments:r}=i;for(let t of e.effects)t.is(ee.reconfigure)?(i&&(r=new Map,i.compartments.forEach(((e,t)=>r.set(t,e))),i=null),r.set(t.value.compartment,t.value.extension)):t.is(me.reconfigure)?(i=null,n=t.value):t.is(me.appendConfig)&&(i=null,n=Oe(n).concat(t.value));i?t=e.startState.values.slice():(i=ie.resolve(n,r,this),t=new Ce(i,this.doc,this.selection,i.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null).values);let s=e.startState.facet(oe)?e.newSelection:e.newSelection.asSingle();new Ce(i,e.newDoc,s,t,((t,i)=>i.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:j.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],s=Oe(i.effects);for(let i=1;i<t.ranges.length;i++){let o=e(t.ranges[i]),a=this.changes(o.changes),l=a.map(n);for(let e=0;e<i;e++)r[e]=r[e].map(l);let c=n.mapDesc(a,!0);r.push(o.range.map(c)),n=n.compose(l),s=me.mapEffects(s,l).concat(me.mapEffects(Oe(o.effects),c))}return{changes:n,selection:j.create(r,t.mainIndex),effects:s}}changes(e=[]){return e instanceof E?e:E.of(e,this.doc.length,this.facet(Ce.lineSeparator))}toText(e){return m.of(e.split(this.facet(Ce.lineSeparator)||T))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(ne(this,t),re(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let n=e[i];n instanceof Y&&null!=this.config.address[n.id]&&(t[i]=n.spec.toJSON(this.field(e[i]),this))}return t}static fromJSON(e,t={},i){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let n=[];if(i)for(let t in i)if(Object.prototype.hasOwnProperty.call(e,t)){let r=i[t],s=e[t];n.push(r.init((e=>r.spec.fromJSON(s,e))))}return Ce.create({doc:e.doc,selection:j.fromJSON(e.selection),extensions:t.extensions?n.concat([t.extensions]):n})}static create(e={}){let t=ie.resolve(e.extensions||[],new Map),i=e.doc instanceof m?e.doc:m.of((e.doc||"").split(t.staticFacet(Ce.lineSeparator)||T)),n=e.selection?e.selection instanceof j?e.selection:j.single(e.selection.anchor,e.selection.head):j.single(0);return z(n,i.length),t.staticFacet(oe)||(n=n.asSingle()),new Ce(t,i,n,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Ce.tabSize)}get lineBreak(){return this.facet(Ce.lineSeparator)||"\n"}get readOnly(){return this.facet(de)}phrase(e,...t){for(let t of this.facet(Ce.phrases))if(Object.prototype.hasOwnProperty.call(t,e)){e=t[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,i)=>{if("$"==i)return"$";let n=+(i||1);return!n||n>t.length?e:t[n-1]}))),e}languageDataAt(e,t,i=-1){let n=[];for(let r of this.facet(se))for(let s of r(this,t,i))Object.prototype.hasOwnProperty.call(s,e)&&n.push(s[e]);return n}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return Se.Space;if(function(e){if(Pe)return Pe.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||ke.test(i)))return!0}return!1}(e))return Se.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return Se.Word;return Se.Other};var t}wordAt(e){let{text:t,from:i,length:n}=this.doc.lineAt(e),r=this.charCategorizer(e),s=e-i,o=e-i;for(;s>0;){let e=P(t,s,!1);if(r(t.slice(e,s))!=Se.Word)break;s=e}for(;o<n;){let e=P(t,o);if(r(t.slice(o,e))!=Se.Word)break;o=e}return s==o?null:j.range(s+i,o+i)}}function Ae(e,t,i={}){let n={};for(let t of e)for(let e of Object.keys(t)){let r=t[e],s=n[e];if(void 0===s)n[e]=r;else if(s===r||void 0===r);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);n[e]=i[e](s,r)}}for(let e in t)void 0===n[e]&&(n[e]=t[e]);return n}Ce.allowMultipleSelections=oe,Ce.tabSize=U.define({combine:e=>e.length?e[0]:4}),Ce.lineSeparator=ae,Ce.readOnly=de,Ce.phrases=U.define({compare(e,t){let i=Object.keys(e),n=Object.keys(t);return i.length==n.length&&i.every((i=>e[i]==t[i]))}}),Ce.languageData=se,Ce.changeFilter=le,Ce.transactionFilter=ce,Ce.transactionExtender=he,ee.reconfigure=me.define();class Ie{eq(e){return this==e}range(e,t=e){return Te.create(e,t,this)}}Ie.prototype.startSide=Ie.prototype.endSide=0,Ie.prototype.point=!1,Ie.prototype.mapMode=$.TrackDel;class Te{constructor(e,t,i){this.from=e,this.to=t,this.value=i}static create(e,t,i){return new Te(e,t,i)}}function $e(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Me{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i,n=0){let r=i?this.to:this.from;for(let s=n,o=r.length;;){if(s==o)return s;let n=s+o>>1,a=r[n]-e||(i?this.value[n].endSide:this.value[n].startSide)-t;if(n==s)return a>=0?s:o;a>=0?o=n:s=n+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1e9,!0),s=this.findIndex(i,1e9,!1,r);r<s;r++)if(!1===n(this.from[r]+e,this.to[r]+e,this.value[r]))return!1}map(e,t){let i=[],n=[],r=[],s=-1,o=-1;for(let a=0;a<this.value.length;a++){let l,c,h=this.value[a],d=this.from[a]+e,u=this.to[a]+e;if(d==u){let e=t.mapPos(d,h.startSide,h.mapMode);if(null==e)continue;if(l=c=e,h.startSide!=h.endSide&&(c=t.mapPos(d,h.endSide),c<l))continue}else if(l=t.mapPos(d,h.startSide),c=t.mapPos(u,h.endSide),l>c||l==c&&h.startSide>0&&h.endSide<=0)continue;(c-l||h.endSide-h.startSide)<0||(s<0&&(s=l),h.point&&(o=Math.max(o,c-l)),i.push(h),n.push(l-s),r.push(c-s))}return{mapped:i.length?new Me(n,r,i,o):null,pos:s}}}class Ee{constructor(e,t,i,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}static create(e,t,i,n){return new Ee(e,t,i,n)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filterFrom:n=0,filterTo:r=this.length}=e,s=e.filter;if(0==t.length&&!s)return this;if(i&&(t=t.slice().sort($e)),this.isEmpty)return t.length?Ee.of(t):this;let o=new Le(this,null,-1).goto(0),a=0,l=[],c=new _e;for(;o.value||a<t.length;)if(a<t.length&&(o.from-t[a].from||o.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==o.rangeIndex&&o.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(o.chunkIndex)<t[a].from)&&(!s||n>this.chunkEnd(o.chunkIndex)||r<this.chunkPos[o.chunkIndex])&&c.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!s||n>o.to||r<o.from||s(o.from,o.to,o.value))&&(c.addInner(o.from,o.to,o.value)||l.push(Te.create(o.from,o.to,o.value))),o.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Ee.empty:this.nextLayer.update({add:l,filter:s,filterFrom:n,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r],a=e.touchesRange(s,s+o.length);if(!1===a)n=Math.max(n,o.maxPoint),t.push(o),i.push(e.mapPos(s));else if(!0===a){let{mapped:r,pos:a}=o.map(s,e);r&&(n=Math.max(n,r.maxPoint),t.push(r),i.push(a))}}let r=this.nextLayer.map(e);return 0==t.length?r:new Ee(i,t,r||Ee.empty,n)}between(e,t,i){if(!this.isEmpty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],s=this.chunk[n];if(t>=r&&e<=r+s.length&&!1===s.between(r,e-r,t-r,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return Be.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Be.from(e).goto(t)}static compare(e,t,i,n,r=-1){let s=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),o=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=r)),a=De(s,o,i),l=new Ne(s,a,r),c=new Ne(o,a,r);i.iterGaps(((e,t,i)=>Fe(l,e,c,t,i,n))),i.empty&&0==i.length&&Fe(l,0,c,0,0,n)}static eq(e,t,i=0,n){null==n&&(n=999999999);let r=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),s=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(r.length!=s.length)return!1;if(!r.length)return!0;let o=De(r,s),a=new Ne(r,o,0).goto(i),l=new Ne(s,o,0).goto(i);for(;;){if(a.to!=l.to||!je(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>n)return!0;a.next(),l.next()}}static spans(e,t,i,n,r=-1){let s=new Ne(e,null,r).goto(t),o=t,a=s.openStart;for(;;){let e=Math.min(s.to,i);if(s.point){let i=s.activeForPoint(s.to),r=s.pointFrom<t?i.length+1:s.point.startSide<0?i.length:Math.min(i.length,a);n.point(o,e,s.point,i,r,s.pointRank),a=Math.min(s.openEnd(e),i.length)}else e>o&&(n.span(o,e,s.active,a),a=s.openEnd(e));if(s.to>i)return a+(s.point&&s.to>i?1:0);o=s.to,s.next()}}static of(e,t=!1){let i=new _e;for(let n of e instanceof Te?[e]:t?function(e){if(e.length>1)for(let t=e[0],i=1;i<e.length;i++){let n=e[i];if($e(t,n)>0)return e.slice().sort($e);t=n}return e}(e):e)i.add(n.from,n.to,n.value);return i.finish()}static join(e){if(!e.length)return Ee.empty;let t=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let n=e[i];n!=Ee.empty;n=n.nextLayer)t=new Ee(n.chunkPos,n.chunk,t,Math.max(n.maxPoint,t.maxPoint));return t}}Ee.empty=new Ee([],[],null,-1),Ee.empty.nextLayer=Ee.empty;class _e{finishChunk(e){this.chunks.push(new Me(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new _e)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(n<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(Ee.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Ee.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function De(e,t,i){let n=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<=0&&n.set(t.chunk[e],t.chunkPos[e]);let r=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++){let s=n.get(e.chunk[t]);null==s||(i?i.mapPos(s):s)!=e.chunkPos[t]||(null==i?void 0:i.touchesRange(s,s+e.chunk[t].length))||r.add(e.chunk[t])}return r}class Le{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let n=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!i||this.rangeIndex<n)&&this.setRangeIndex(n)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Be{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let s=e[r];!s.isEmpty;s=s.nextLayer)s.maxPoint>=i&&n.push(new Le(s,t,i,r));return 1==n.length?n[0]:new Be(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)Re(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)Re(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Re(this.heap,0)}}}function Re(e,t){for(let i=e[t];;){let n=1+(t<<1);if(n>=e.length)break;let r=e[n];if(n+1<e.length&&r.compare(e[n+1])>=0&&(r=e[n+1],n++),i.compare(r)<0)break;e[n]=i,e[t]=r,t=n}}class Ne{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Be.from(e,t,i)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ze(this.active,e),ze(this.activeTo,e),ze(this.activeRank,e),this.minActive=Ue(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||n-this.activeTo[t])>0;)t++;Qe(this.active,t,i),Qe(this.activeTo,t,n),Qe(this.activeRank,t,r),e&&Qe(e,t,this.cursor.from),this.minActive=Ue(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),i&&ze(i,n)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(i),this.cursor.next()}}}if(i){this.openStart=0;for(let t=i.length-1;t>=0&&i[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&t.push(this.active[i]);return t.reverse()}openEnd(e){let t=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)t++;return t}}function Fe(e,t,i,n,r,s){e.goto(t),i.goto(n);let o=n+r,a=n,l=n-t;for(;;){let t=e.to+l-i.to,n=t||e.endSide-i.endSide,r=n<0?e.to+l:i.to,c=Math.min(r,o);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))&&je(e.activeForPoint(e.to),i.activeForPoint(i.to))||s.comparePoint(a,c,e.point,i.point):c>a&&!je(e.active,i.active)&&s.compareRange(a,c,e.active,i.active),r>o)break;(t||e.openEnd!=i.openEnd)&&s.boundChange&&s.boundChange(r),a=r,n<=0&&e.next(),n>=0&&i.next()}}function je(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function ze(e,t){for(let i=t,n=e.length-1;i<n;i++)e[i]=e[i+1];e.pop()}function Qe(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function Ue(e,t){let i=-1,n=1e9;for(let r=0;r<t.length;r++)(t[r]-n||e[r].endSide-e[i].endSide)<0&&(i=r,n=t[r]);return i}function qe(e,t,i=e.length){let n=0;for(let r=0;r<i;)9==e.charCodeAt(r)?(n+=t-n%t,r++):(n++,r=P(e,r));return n}function He(e,t,i,n){for(let n=0,r=0;;){if(r>=t)return n;if(n==e.length)break;r+=9==e.charCodeAt(n)?i-r%i:1,n=P(e,n)}return!0===n?-1:e.length}const Ve="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),We="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),Xe="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class Ge{constructor(e,t){this.rules=[];let{finish:i}=t||{};function n(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function r(e,t,s,o){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return s.push(e[0]+";");for(let i in t){let o=t[i];if(/&/.test(i))r(i.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),o,s);else if(o&&"object"==typeof o){if(!l)throw new RangeError("The value of a property ("+i+") should be a primitive value.");r(n(i),o,a,c)}else null!=o&&a.push(i.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+o+";")}(a.length||c)&&s.push((!i||l||o?e:e.map(i)).join(", ")+" {"+a.join(" ")+"}")}for(let t in e)r(n(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=Xe[Ve]||1;return Xe[Ve]=e+1,"ͼ"+e.toString(36)}static mount(e,t,i){let n=e[We],r=i&&i.nonce;n?r&&n.setNonce(r):n=new Ze(e,r),n.mount(Array.isArray(t)?t:[t],e)}}let Ye=new Map;class Ze{constructor(e,t){let i=e.ownerDocument||e,n=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&n.CSSStyleSheet){let t=Ye.get(i);if(t)return e[We]=t;this.sheet=new n.CSSStyleSheet,Ye.set(i,this)}else this.styleTag=i.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[We]=this}mount(e,t){let i=this.sheet,n=0,r=0;for(let t=0;t<e.length;t++){let s=e[t],o=this.modules.indexOf(s);if(o<r&&o>-1&&(this.modules.splice(o,1),r--,o=-1),-1==o){if(this.modules.splice(r++,0,s),i)for(let e=0;e<s.rules.length;e++)i.insertRule(s.rules[e],n++)}else{for(;r<o;)n+=this.modules[r++].rules.length;n+=s.rules.length,r++}}if(i)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let i=t.head||t;this.styleTag.parentNode!=i&&i.insertBefore(this.styleTag,i.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Ke={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},Je={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},et="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),tt="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),it="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),nt="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),rt="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),st=et&&(nt||+et[1]<57)||it&&nt,ot=0;ot<10;ot++)Ke[48+ot]=Ke[96+ot]=String(ot);for(ot=1;ot<=24;ot++)Ke[ot+111]="F"+ot;for(ot=65;ot<=90;ot++)Ke[ot]=String.fromCharCode(ot+32),Je[ot]=String.fromCharCode(ot);for(var at in Ke)Je.hasOwnProperty(at)||(Je[at]=Ke[at]);function lt(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function ct(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function ht(e,t){if(!t.anchorNode)return!1;try{return ct(e,t.anchorNode)}catch(e){return!1}}function dt(e){return 3==e.nodeType?kt(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function ut(e,t,i,n){return!!i&&(mt(e,t,i,n,-1)||mt(e,t,i,n,1))}function pt(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function ft(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function mt(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:gt(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=pt(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if(1==(e=e.childNodes[t+(r<0?-1:0)]).nodeType&&"false"==e.contentEditable)return!1;t=r<0?gt(e):0}}}function gt(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function yt(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function vt(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function xt(e,t){let i=t.width/e.offsetWidth,n=t.height/e.offsetHeight;return(i>.995&&i<1.005||!isFinite(i)||Math.abs(t.width-e.offsetWidth)<1)&&(i=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.height-e.offsetHeight)<1)&&(n=1),{scaleX:i,scaleY:n}}class bt{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:i}=e;this.set(t,Math.min(e.anchorOffset,t?gt(t):0),i,Math.min(e.focusOffset,i?gt(i):0))}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let wt,Ot=null;function St(e){if(e.setActive)return e.setActive();if(Ot)return e.focus(Ot);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==Ot?{get preventScroll(){return Ot={preventScroll:!0},!0}}:void 0),!Ot){Ot=!1;for(let e=0;e<t.length;){let i=t[e++],n=t[e++],r=t[e++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}function kt(e,t,i=t){let n=wt||(wt=document.createRange());return n.setEnd(e,i),n.setStart(e,t),n}function Pt(e,t,i,n){let r={key:t,code:t,keyCode:i,which:i,cancelable:!0};n&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=n);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,e.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,e.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function Ct(e){for(;e.attributes.length;)e.removeAttributeNode(e.attributes[0])}function At(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function It(e,t){for(let i=e,n=t;;){if(3==i.nodeType&&n>0)return{node:i,offset:n};if(1==i.nodeType&&n>0){if("false"==i.contentEditable)return null;i=i.childNodes[n-1],n=gt(i)}else{if(!i.parentNode||ft(i))return null;n=pt(i),i=i.parentNode}}}function Tt(e,t){for(let i=e,n=t;;){if(3==i.nodeType&&n<i.nodeValue.length)return{node:i,offset:n};if(1==i.nodeType&&n<i.childNodes.length){if("false"==i.contentEditable)return null;i=i.childNodes[n],n=0}else{if(!i.parentNode||ft(i))return null;n=pt(i)+1,i=i.parentNode}}}class $t{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new $t(e.parentNode,pt(e),t)}static after(e,t){return new $t(e.parentNode,pt(e)+1,t)}}const Mt=[];class Et{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let i,n=this.dom,r=null;for(let s of this.children){if(7&s.flags){if(!s.dom&&(i=r?r.nextSibling:n.firstChild)){let e=Et.get(i);(!e||!e.parent&&e.canReuseDOM(s))&&s.reuseDOM(i)}s.sync(e,t),s.flags&=-8}if(i=r?r.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&i!=s.dom&&(t.written=!0),s.dom.parentNode==n)for(;i&&i!=s.dom;)i=_t(i);else n.insertBefore(s.dom,i);r=s.dom}for(i=r?r.nextSibling:n.firstChild,i&&t&&t.node==n&&(t.written=!0);i;)i=_t(i)}else if(1&this.flags)for(let i of this.children)7&i.flags&&(i.sync(e,t),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=0==gt(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==n&&t.firstChild!=t.lastChild&&(n=e==t.firstChild?-1:1),e=t}i=n<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Et.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let n=this.children[e];if(n.dom==i)return t;t+=n.length+n.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,s=-1,o=-1;for(let a=0,l=i,c=i;a<this.children.length;a++){let i=this.children[a],h=l+i.length;if(l<e&&h>t)return i.domBoundsAround(e,t,l);if(h>=e&&-1==n&&(n=a,r=l),l>t&&i.dom.parentNode==this.dom){s=a,o=c;break}c=h,l=h+i.breakAfter}return{from:r,to:o<0?i+this.length:o,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length&&s>=0?this.children[s].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=Mt){this.markDirty();for(let n=e;n<t;n++){let e=this.children[n];e.parent==this&&i.indexOf(e)<0&&e.destroy()}i.length<250?this.children.splice(e,t-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(t));for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Dt(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,i,n,r,s){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function _t(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}Et.prototype.breakAfter=0;class Dt{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function Lt(e,t,i,n,r,s,o,a,l){let{children:c}=e,h=c.length?c[t]:null,d=s.length?s[s.length-1]:null,u=d?d.breakAfter:o;if(!(t==n&&h&&!o&&!u&&s.length<2&&h.merge(i,r,s.length?d:null,0==i,a,l))){if(n<c.length){let e=c[n];e&&(r<e.length||e.breakAfter&&(null==d?void 0:d.breakAfter))?(t==n&&(e=e.split(r),r=0),!u&&d&&e.merge(0,r,d,!0,0,l)?s[s.length-1]=e:((r||e.children.length&&!e.children[0].length)&&e.merge(0,r,null,!1,0,l),s.push(e))):(null==e?void 0:e.breakAfter)&&(d?d.breakAfter=1:o=1),n++}for(h&&(h.breakAfter=o,i>0&&(!o&&s.length&&h.merge(i,h.length,s[0],!1,a,0)?h.breakAfter=s.shift().breakAfter:(i<h.length||h.children.length&&0==h.children[h.children.length-1].length)&&h.merge(i,h.length,null,!1,a,0),t++));t<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:a;else{if(!c[t].become(s[0]))break;t++,s.shift(),a=s.length?0:l}!s.length&&t&&n<c.length&&!c[t-1].breakAfter&&c[n].merge(0,0,c[t-1],!1,a,l)&&t--,(t<n||s.length)&&e.replaceChildren(t,n,s)}}function Bt(e,t,i,n,r,s){let o=e.childCursor(),{i:a,off:l}=o.findPos(i,1),{i:c,off:h}=o.findPos(t,-1),d=t-i;for(let e of n)d+=e.length;e.length+=d,Lt(e,c,h,a,l,n,0,r,s)}let Rt="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},Nt="undefined"!=typeof document?document:{documentElement:{style:{}}};const Ft=/Edge\/(\d+)/.exec(Rt.userAgent),jt=/MSIE \d/.test(Rt.userAgent),zt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Rt.userAgent),Qt=!!(jt||zt||Ft),Ut=!Qt&&/gecko\/(\d+)/i.test(Rt.userAgent),qt=!Qt&&/Chrome\/(\d+)/.exec(Rt.userAgent),Ht="webkitFontSmoothing"in Nt.documentElement.style,Vt=!Qt&&/Apple Computer/.test(Rt.vendor),Wt=Vt&&(/Mobile\/\w+/.test(Rt.userAgent)||Rt.maxTouchPoints>2);var Xt={mac:Wt||/Mac/.test(Rt.platform),windows:/Win/.test(Rt.platform),linux:/Linux|X11/.test(Rt.platform),ie:Qt,ie_version:jt?Nt.documentMode||6:zt?+zt[1]:Ft?+Ft[1]:0,gecko:Ut,gecko_version:Ut?+(/Firefox\/(\d+)/.exec(Rt.userAgent)||[0,0])[1]:0,chrome:!!qt,chrome_version:qt?+qt[1]:0,ios:Wt,android:/Android\b/.test(Rt.userAgent),webkit:Ht,safari:Vt,webkit_version:Ht?+(/\bAppleWebKit\/(\d+)/.exec(Rt.userAgent)||[0,0])[1]:0,tabSize:null!=Nt.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};class Gt extends Et{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,i){return!(8&this.flags||i&&(!(i instanceof Gt)||this.length-(t-e)+i.length>256||8&i.flags)||(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),0))}split(e){let t=new Gt(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new $t(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return function(e,t,i){let n=e.nodeValue.length;t>n&&(t=n);let r=t,s=t,o=0;0==t&&i<0||t==n&&i>=0?Xt.chrome||Xt.gecko||(t?(r--,o=1):s<n&&(s++,o=-1)):i<0?r--:s<n&&s++;let a=kt(e,r,s).getClientRects();if(!a.length)return null;let l=a[(o?o<0:i>=0)?0:a.length-1];return Xt.safari&&!o&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),o?yt(l,o<0):l||null}(this.dom,e,t)}}class Yt extends Et{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let e of t)e.setParent(this)}setAttrs(e){if(Ct(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,i,n,r,s){return!(i&&(!(i instanceof Yt&&i.mark.eq(this.mark))||e&&r<=0||t<this.length&&s<=0)||(Bt(this,e,t,i?i.children.slice():[],r-1,s-1),this.markDirty(),0))}split(e){let t=[],i=0,n=-1,r=0;for(let s of this.children){let o=i+s.length;o>e&&t.push(i<e?s.split(e-i):s),n<0&&i>=e&&(n=r),i=o,r++}let s=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new Yt(this.mark,t,s)}domAtPos(e){return Jt(this,e)}coordsAt(e,t){return ti(this,e,t)}}class Zt extends Et{static create(e,t,i){return new Zt(e,t,i)}constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}split(e){let t=Zt.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,i,n,r,s){return!(i&&(!(i instanceof Zt&&this.widget.compare(i.widget))||e>0&&r<=0||t<this.length&&s<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}become(e){return e instanceof Zt&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return m.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):m.empty}domAtPos(e){return(this.length?0==e:this.side>0)?$t.before(this.dom):$t.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.widget.coordsAt(this.dom,e,t);if(i)return i;let n=this.dom.getClientRects(),r=null;if(!n.length)return null;let s=this.side?this.side<0:e>0;for(let t=s?n.length-1:0;r=n[t],!(e>0?0==t:t==n.length-1||r.top<r.bottom);t+=s?-1:1);return yt(r,!s)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Kt extends Et{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Kt&&e.side==this.side}split(){return new Kt(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?$t.before(this.dom):$t.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return m.empty}get isHidden(){return!0}}function Jt(e,t){let i=e.dom,{children:n}=e,r=0;for(let e=0;r<n.length;r++){let s=n[r],o=e+s.length;if(!(o==e&&s.getSide()<=0)){if(t>e&&t<o&&s.dom.parentNode==i)return s.domAtPos(t-e);if(t<=e)break;e=o}}for(let e=r;e>0;e--){let t=n[e-1];if(t.dom.parentNode==i)return t.domAtPos(t.length)}for(let e=r;e<n.length;e++){let t=n[e];if(t.dom.parentNode==i)return t.domAtPos(0)}return new $t(i,0)}function ei(e,t,i){let n,{children:r}=e;i>0&&t instanceof Yt&&r.length&&(n=r[r.length-1])instanceof Yt&&n.mark.eq(t.mark)?ei(n,t.children[0],i-1):(r.push(t),t.setParent(e)),e.length+=t.length}function ti(e,t,i){let n=null,r=-1,s=null,o=-1;!function e(t,a){for(let l=0,c=0;l<t.children.length&&c<=a;l++){let h=t.children[l],d=c+h.length;d>=a&&(h.children.length?e(h,a-c):(!s||s.isHidden&&i>0)&&(d>a||c==d&&h.getSide()>0)?(s=h,o=a-c):(c<a||c==d&&h.getSide()<0&&!h.isHidden)&&(n=h,r=a-c)),c=d}}(e,t);let a=(i<0?n:s)||n||s;return a?a.coordsAt(Math.max(0,a==n?r:o),i):function(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let i=dt(t);return i[i.length-1]||null}(e)}function ii(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}Gt.prototype.children=Zt.prototype.children=Kt.prototype.children=Mt;const ni=Object.create(null);function ri(e,t,i){if(e==t)return!0;e||(e=ni),t||(t=ni);let n=Object.keys(e),r=Object.keys(t);if(n.length-(i&&n.indexOf(i)>-1?1:0)!=r.length-(i&&r.indexOf(i)>-1?1:0))return!1;for(let s of n)if(s!=i&&(-1==r.indexOf(s)||e[s]!==t[s]))return!1;return!0}function si(e,t,i){let n=!1;if(t)for(let r in t)i&&r in i||(n=!0,"style"==r?e.style.cssText="":e.removeAttribute(r));if(i)for(let r in i)t&&t[r]==i[r]||(n=!0,"style"==r?e.style.cssText=i[r]:e.setAttribute(r,i[r]));return n}function oi(e){let t=Object.create(null);for(let i=0;i<e.attributes.length;i++){let n=e.attributes[i];t[n.name]=n.value}return t}class ai{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var li=function(e){return e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange",e}(li||(li={}));class ci extends Ie{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new hi(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return t+=i&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ui(e,t,t,i,e.widget||null,!1)}static replace(e){let t,i,n=!!e.block;if(e.isBlockGap)t=-5e8,i=4e8;else{let{start:r,end:s}=pi(e,n);t=(r?n?-3e8:-1:5e8)-1,i=1+(s?n?2e8:1:-6e8)}return new ui(e,t,i,n,e.widget||null,!0)}static line(e){return new di(e)}static set(e,t=!1){return Ee.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}ci.none=Ee.empty;class hi extends ci{constructor(e){let{start:t,end:i}=pi(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,i;return this==e||e instanceof hi&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(i=e.attrs)||void 0===i?void 0:i.class))&&ri(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}hi.prototype.point=!1;class di extends ci{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof di&&this.spec.class==e.spec.class&&ri(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}di.prototype.mapMode=$.TrackBefore,di.prototype.point=!0;class ui extends ci{constructor(e,t,i,n,r,s){super(t,i,r,e),this.block=n,this.isReplace=s,this.mapMode=n?t<=0?$.TrackBefore:$.TrackAfter:$.TrackDel}get type(){return this.startSide!=this.endSide?li.WidgetRange:this.startSide<=0?li.WidgetBefore:li.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ui&&((t=this.widget)==(i=e.widget)||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,i}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function pi(e,t=!1){let{inclusiveStart:i,inclusiveEnd:n}=e;return null==i&&(i=e.inclusive),null==n&&(n=e.inclusive),{start:null!=i?i:t,end:null!=n?n:t}}function fi(e,t,i,n=0){let r=i.length-1;r>=0&&i[r]+n>=e?i[r]=Math.max(i[r],t):i.push(e,t)}ui.prototype.point=!0;class mi extends Et{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,s){if(i){if(!(i instanceof mi))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),Bt(this,e,t,i?i.children.slice():[],r,s),!0}split(e){let t=new mi;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){ri(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ei(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=ii(t,this.attrs||{})),i&&(this.attrs=ii({class:i},this.attrs||{}))}domAtPos(e){return Jt(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var i;this.dom?4&this.flags&&(Ct(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(si(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let n=this.dom.lastChild;for(;n&&Et.get(n)instanceof Yt;)n=n.lastChild;if(!(n&&this.length&&("BR"==n.nodeName||0!=(null===(i=Et.get(n))||void 0===i?void 0:i.isEditable)||Xt.ios&&this.children.some((e=>e instanceof Gt))))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let i of this.children){if(!(i instanceof Gt)||/[^ -~]/.test(i.text))return null;let n=dt(i.dom);if(1!=n.length)return null;t+=n[0].width,e=n[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let i=ti(this,e,t);if(!this.children.length&&i&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=i.bottom-i.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let n=(t-e.textHeight)/2;return{top:i.top+n,bottom:i.bottom-n,left:i.left,right:i.left}}}return i}become(e){return e instanceof mi&&0==this.children.length&&0==e.children.length&&ri(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let r=e.children[i],s=n+r.length;if(s>=t){if(r instanceof mi)return r;if(s>t)break}n=s+r.breakAfter}return null}}class gi extends Et{constructor(e,t,i){super(),this.widget=e,this.length=t,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,r,s){return!(i&&(!(i instanceof gi&&this.widget.compare(i.widget))||e>0&&r<=0||t<this.length&&s<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?$t.before(this.dom):$t.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new gi(this.widget,t,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return Mt}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):m.empty}domBoundsAround(){return null}become(e){return e instanceof gi&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){return this.widget.coordsAt(this.dom,e,t)||(this.widget instanceof yi?null:yt(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:i}=this.deco;return t!=i&&(e<0?t<0:i>0)}}class yi extends ai{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class vi{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsFor=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof gi&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new mi),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(xi(new Kt(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof gi||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:n}=this.cursor.next(this.skip);if(this.skip=0,n)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-i)),this.getLine().append(xi(new Gt(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r,s){if(this.disallowBlockEffectsFor[s]&&i instanceof ui){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(i instanceof ui)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new gi(i.widget||bi.block,o,i));else{let s=Zt.create(i.widget||bi.inline,o,o?0:i.startSide),a=this.atCursorPos&&!s.isEditable&&r<=n.length&&(e<t||i.startSide>0),l=!s.isEditable&&(e<t||r>n.length||i.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||s.isEditable||(this.pendingBuffer=0),this.flushBuffer(n),a&&(c.append(xi(new Kt(1),n),r),r=n.length+Math.max(0,r-n.length)),c.append(xi(s,n),r),this.atCursorPos=l,this.pendingBuffer=l?e<t||r>n.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=n.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n,r){let s=new vi(e,t,i,r);return s.openEnd=Ee.spans(n,t,i,s),s.openStart<0&&(s.openStart=s.openEnd),s.finish(s.openEnd),s}}function xi(e,t){for(let i of t)e=new Yt(i,[e],e.length);return e}class bi extends ai{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}bi.inline=new bi("span"),bi.block=new bi("div");var wi=function(e){return e[e.LTR=0]="LTR",e[e.RTL=1]="RTL",e}(wi||(wi={}));const Oi=wi.LTR,Si=wi.RTL;function ki(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const Pi=ki("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Ci=ki("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Ai=Object.create(null),Ii=[];for(let e of["()","[]","{}"]){let t=e.charCodeAt(0),i=e.charCodeAt(1);Ai[t]=i,Ai[i]=-t}function Ti(e){return e<=247?Pi[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Ci[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const $i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Mi{get dir(){return this.level%2?Si:Oi}constructor(e,t,i){this.from=e,this.to=t,this.level=i}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,i,n){let r=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==i)return s;(r<0||(0!=n?n<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=s)}}if(r<0)throw new RangeError("Index out of range");return r}}function Ei(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.direction!=r.direction||!Ei(n.inner,r.inner))return!1}return!0}const _i=[];function Di(e,t,i,n,r,s,o){let a=n%2?2:1;if(n%2==r%2)for(let l=t,c=0;l<i;){let t=!0,h=!1;if(c==s.length||l<s[c].from){let e=_i[l];e!=a&&(t=!1,h=16==e)}let d=t||1!=a?null:[],u=t?n:n+1,p=l;e:for(;;)if(c<s.length&&p==s[c].from){if(h)break e;let f=s[c];if(!t)for(let e=f.to,t=c+1;;){if(e==i)break e;if(!(t<s.length&&s[t].from==e)){if(_i[e]==a)break e;break}e=s[t++].to}c++,d?d.push(f):(f.from>l&&o.push(new Mi(l,f.from,u)),Li(e,f.direction==Oi!=!(u%2)?n+1:n,r,f.inner,f.from,f.to,o),l=f.to),p=f.to}else{if(p==i||(t?_i[p]!=a:_i[p]==a))break;p++}d?Di(e,l,p,n+1,r,d,o):l<p&&o.push(new Mi(l,p,u)),l=p}else for(let l=i,c=s.length;l>t;){let i=!0,h=!1;if(!c||l>s[c-1].to){let e=_i[l-1];e!=a&&(i=!1,h=16==e)}let d=i||1!=a?null:[],u=i?n:n+1,p=l;e:for(;;)if(c&&p==s[c-1].to){if(h)break e;let f=s[--c];if(!i)for(let e=f.from,i=c;;){if(e==t)break e;if(!i||s[i-1].to!=e){if(_i[e-1]==a)break e;break}e=s[--i].from}d?d.push(f):(f.to<l&&o.push(new Mi(f.to,l,u)),Li(e,f.direction==Oi!=!(u%2)?n+1:n,r,f.inner,f.from,f.to,o),l=f.from),p=f.from}else{if(p==t||(i?_i[p-1]!=a:_i[p-1]==a))break;p--}d?Di(e,p,l,n+1,r,d,o):p<l&&o.push(new Mi(p,l,u)),l=p}}function Li(e,t,i,n,r,s,o){let a=t%2?2:1;!function(e,t,i,n,r){for(let s=0;s<=n.length;s++){let o=s?n[s-1].to:t,a=s<n.length?n[s].from:i,l=s?256:r;for(let t=o,i=l,n=l;t<a;t++){let r=Ti(e.charCodeAt(t));512==r?r=i:8==r&&4==n&&(r=16),_i[t]=4==r?2:r,7&r&&(n=r),i=r}for(let e=o,t=l,n=l;e<a;e++){let r=_i[e];if(128==r)e<a-1&&t==_i[e+1]&&24&t?r=_i[e]=t:_i[e]=256;else if(64==r){let r=e+1;for(;r<a&&64==_i[r];)r++;let s=e&&8==t||r<i&&8==_i[r]?1==n?1:8:256;for(let t=e;t<r;t++)_i[t]=s;e=r-1}else 8==r&&1==n&&(_i[e]=1);t=r,7&r&&(n=r)}}}(e,r,s,n,a),function(e,t,i,n,r){let s=1==r?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:t,h=o<n.length?n[o].from:i;for(let t,i,n,o=c;o<h;o++)if(i=Ai[t=e.charCodeAt(o)])if(i<0){for(let e=a-3;e>=0;e-=3)if(Ii[e+1]==-i){let t=Ii[e+2],i=2&t?r:4&t?1&t?s:r:0;i&&(_i[o]=_i[Ii[e]]=i),a=e;break}}else{if(189==Ii.length)break;Ii[a++]=o,Ii[a++]=t,Ii[a++]=l}else if(2==(n=_i[o])||1==n){let e=n==r;l=e?0:1;for(let t=a-3;t>=0;t-=3){let i=Ii[t+2];if(2&i)break;if(e)Ii[t+2]|=2;else{if(4&i)break;Ii[t+2]|=4}}}}}(e,r,s,n,a),function(e,t,i,n){for(let r=0,s=n;r<=i.length;r++){let o=r?i[r-1].to:e,a=r<i.length?i[r].from:t;for(let l=o;l<a;){let o=_i[l];if(256==o){let o=l+1;for(;;)if(o==a){if(r==i.length)break;o=i[r++].to,a=r<i.length?i[r].from:t}else{if(256!=_i[o])break;o++}let c=1==s,h=c==(1==(o<t?_i[o]:n))?c?1:2:n;for(let t=o,n=r,s=n?i[n-1].to:e;t>l;)t==s&&(t=i[--n].from,s=n?i[n-1].to:e),_i[--t]=h;l=o}else s=o,l++}}}(r,s,n,a),Di(e,r,s,t,i,n,o)}function Bi(e){return[new Mi(0,e,0)]}let Ri="";function Ni(e,t,i,n,r){var s;let o=n.head-e.from,a=Mi.find(t,o,null!==(s=n.bidiLevel)&&void 0!==s?s:-1,n.assoc),l=t[a],c=l.side(r,i);if(o==c){let e=a+=r?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],o=l.side(!r,i),c=l.side(r,i)}let h=P(e.text,o,l.forward(r,i));(h<l.from||h>l.to)&&(h=c),Ri=e.text.slice(Math.min(o,h),Math.max(o,h));let d=a==(r?t.length-1:0)?null:t[a+(r?1:-1)];return d&&h==c&&d.level+(r?0:1)<l.level?j.cursor(d.side(!r,i)+e.from,d.forward(r,i)?1:-1,d.level):j.cursor(h+e.from,l.forward(r,i)?-1:1,l.level)}function Fi(e,t,i){for(let n=t;n<i;n++){let t=Ti(e.charCodeAt(n));if(1==t)return Oi;if(2==t||4==t)return Si}return Oi}const ji=U.define(),zi=U.define(),Qi=U.define(),Ui=U.define(),qi=U.define(),Hi=U.define(),Vi=U.define(),Wi=U.define(),Xi=U.define(),Gi=U.define({combine:e=>e.some((e=>e))}),Yi=U.define({combine:e=>e.some((e=>e))}),Zi=U.define();class Ki{constructor(e,t="nearest",i="nearest",n=5,r=5,s=!1){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=r,this.isSnapshot=s}map(e){return e.empty?this:new Ki(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ki(j.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ji=me.define({map:(e,t)=>e.map(t)}),en=me.define();function tn(e,t,i){let n=e.facet(Ui);n.length?n[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const nn=U.define({combine:e=>!e.length||e[0]});let rn=0;const sn=U.define();class on{constructor(e,t,i,n,r){this.id=e,this.create=t,this.domEventHandlers=i,this.domEventObservers=n,this.extension=r(this)}static define(e,t){const{eventHandlers:i,eventObservers:n,provide:r,decorations:s}=t||{};return new on(rn++,e,i,n,(e=>{let t=[sn.of(e)];return s&&t.push(hn.of((t=>{let i=t.plugin(e);return i?s(i):ci.none}))),r&&t.push(r(e)),t}))}static fromClass(e,t){return on.define((t=>new e(t)),t)}}class an{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(tn(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){tn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(t){tn(e.state,t,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ln=U.define(),cn=U.define(),hn=U.define(),dn=U.define(),un=U.define(),pn=U.define();function fn(e,t){let i=e.state.facet(pn);if(!i.length)return i;let n=i.map((t=>t instanceof Function?t(e):t)),r=[];return Ee.spans(n,t.from,t.to,{point(){},span(e,i,n,s){let o=e-t.from,a=i-t.from,l=r;for(let e=n.length-1;e>=0;e--,s--){let i,r=n[e].spec.bidiIsolate;if(null==r&&(r=Fi(t.text,o,a)),s>0&&l.length&&(i=l[l.length-1]).to==o&&i.direction==r)i.to=a,l=i.inner;else{let e={from:o,to:a,direction:r,inner:[]};l.push(e),l=e.inner}}}}),r}const mn=U.define();function gn(e){let t=0,i=0,n=0,r=0;for(let s of e.state.facet(mn)){let o=s(e);o&&(null!=o.left&&(t=Math.max(t,o.left)),null!=o.right&&(i=Math.max(i,o.right)),null!=o.top&&(n=Math.max(n,o.top)),null!=o.bottom&&(r=Math.max(r,o.bottom)))}return{left:t,right:i,top:n,bottom:r}}const yn=U.define();class vn{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new vn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let n=0,r=0,s=0,o=0;;n++){let a=n==e.length?null:e[n],l=s-o,c=a?a.fromB:1e9;for(;r<t.length&&t[r]<c;){let e=t[r],n=t[r+1],s=Math.max(o,e),a=Math.min(c,n);if(s<=a&&new vn(s+l,a+l,s,a).addToSet(i),n>c)break;r+=2}if(!a)return i;new vn(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),s=a.toA,o=a.toB}}}class xn{constructor(e,t,i){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=E.empty(this.startState.doc.length);for(let e of i)this.changes=this.changes.compose(e.changes);let n=[];this.changes.iterChangedRanges(((e,t,i,r)=>n.push(new vn(e,t,i,r)))),this.changedRanges=n}static create(e,t,i){return new xn(e,t,i)}get viewportChanged(){return(4&this.flags)>0}get viewportMoved(){return(8&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class bn extends Et{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ci.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new mi],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new vn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let n=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?n=this.domChanged.newSel.head:function(e,t){let i=!1;return t&&e.iterChangedRanges(((e,n)=>{e<t.to&&n>t.from&&(i=!0)})),i}(e.changes,this.hasComposition)||e.selectionSet||(n=e.state.selection.main.head));let r=n>-1?function(e,t,i){let n=wn(e,i);if(!n)return null;let{node:r,from:s,to:o}=n,a=r.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(n.from,n.to)!=a)return null;let l=t.invertedDesc,c=new vn(l.mapPos(s),l.mapPos(o),s,o),h=[];for(let t=r.parentNode;;t=t.parentNode){let i=Et.get(t);if(i instanceof Yt)h.push({node:t,deco:i.mark});else{if(i instanceof mi||"DIV"==t.nodeName&&t.parentNode==e.contentDOM)return{range:c,text:r,marks:h,line:t};if(t==e.contentDOM)return null;h.push({node:t,deco:new hi({inclusive:!0,attributes:oi(t),tagName:t.tagName.toLowerCase()})})}}}(this.view,e.changes,n):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:n}=this.hasComposition;i=new vn(t,n,e.changes.mapPos(t,-1),e.changes.mapPos(n,1)).addToSet(i.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Xt.ie||Xt.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let s=function(e,t,i){let n=new On;return Ee.compare(e,t,i,n),n.changes}(this.decorations,this.updateDeco(),e.changes);return i=vn.extendWithRanges(i,s),!!(7&this.flags||0!=i.length)&&(this.updateInner(i,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,i);let{observer:n}=this.view;n.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=Xt.chrome||Xt.ios?{node:n.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||n.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let e of this.children)e instanceof gi&&e.widget instanceof yi&&r.push(e.dom);n.updateGaps(r)}updateChildren(e,t,i){let n=i?i.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let e=n.length-1;;e--){let t=e>=0?n[e]:null;if(!t)break;let s,o,a,l,{fromA:c,toA:h,fromB:d,toB:u}=t;if(i&&i.range.fromB<u&&i.range.toB>d){let e=vi.build(this.view.state.doc,d,i.range.fromB,this.decorations,this.dynamicDecorationMap),t=vi.build(this.view.state.doc,i.range.toB,u,this.decorations,this.dynamicDecorationMap);o=e.breakAtStart,a=e.openStart,l=t.openEnd;let n=this.compositionView(i);t.breakAtStart?n.breakAfter=1:t.content.length&&n.merge(n.length,n.length,t.content[0],!1,t.openStart,0)&&(n.breakAfter=t.content[0].breakAfter,t.content.shift()),e.content.length&&n.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),s=e.content.concat(n).concat(t.content)}else({content:s,breakAtStart:o,openStart:a,openEnd:l}=vi.build(this.view.state.doc,d,u,this.decorations,this.dynamicDecorationMap));let{i:p,off:f}=r.findPos(h,1),{i:m,off:g}=r.findPos(c,-1);Lt(this,m,g,p,f,s,o,a,l)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(en)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new Gt(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new Yt(i,[t],t.length);let i=new mi;return i.append(t,0),i}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let i=Et.get(e);i&&i!=t&&(i.dom=null),t.setDOM(e)},i=this.childPos(e.range.fromB,1),n=this.children[i.i];t(e.line,n);for(let r=e.marks.length-1;r>=-1;r--)i=n.childPos(i.off,1),n=n.children[i.i],t(r>=0?e.marks[r].node:e.text,n)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let i=this.view.root.activeElement,n=i==this.dom,r=!n&&!(this.view.state.facet(nn)||this.dom.tabIndex>-1)&&ht(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(n||t||r))return;let s=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(o.anchor)),l=o.empty?a:this.moveToLine(this.domAtPos(o.head));if(Xt.gecko&&o.empty&&!this.hasComposition&&1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable)){let e=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null))),a=l=new $t(e,0),s=!0}var c;let h=this.view.observer.selectionRange;!s&&h.focusNode&&(ut(a.node,a.offset,h.anchorNode,h.anchorOffset)&&ut(l.node,l.offset,h.focusNode,h.focusOffset)||this.suppressWidgetCursorChange(h,o))||(this.view.observer.ignore((()=>{Xt.android&&Xt.chrome&&this.dom.contains(h.focusNode)&&function(e,t){for(let i=e;i&&i!=t;i=i.assignedSlot||i.parentNode)if(1==i.nodeType&&"false"==i.contentEditable)return!0;return!1}(h.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=lt(this.view.root);if(e)if(o.empty){if(Xt.gecko){let e=(t=a.node,n=a.offset,1!=t.nodeType?0:(n&&"false"==t.childNodes[n-1].contentEditable?1:0)|(n<t.childNodes.length&&"false"==t.childNodes[n].contentEditable?2:0));if(e&&3!=e){let t=(1==e?It:Tt)(a.node,a.offset);t&&(a=new $t(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=o.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=o.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(e){}}else{let t=document.createRange();o.anchor>o.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}var t,n;r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new $t(h.anchorNode,h.anchorOffset),this.impreciseHead=l.precise?null:new $t(h.focusNode,h.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&ut(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,i=lt(e.root),{anchorNode:n,anchorOffset:r}=e.observer.selectionRange;if(!(i&&t.empty&&t.assoc&&i.modify))return;let s=mi.find(this,t.head);if(!s)return;let o=s.posAtStart;if(t.head==o||t.head==o+s.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);i.collapse(c.node,c.offset),i.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=t.from&&i.collapse(n,r)}moveToLine(e){let t,i=this.dom;if(e.node!=i)return e;for(let n=e.offset;!t&&n<i.childNodes.length;n++){let e=Et.get(i.childNodes[n]);e instanceof mi&&(t=e.domAtPos(0))}for(let n=e.offset-1;!t&&n>=0;n--){let e=Et.get(i.childNodes[n]);e instanceof mi&&(t=e.domAtPos(e.length))}return t?new $t(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=Et.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof mi)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){let i=null,n=0;for(let r=this.length,s=this.children.length-1;s>=0;s--){let o=this.children[s],a=r-o.breakAfter,l=a-o.length;if(a<e)break;if(l<=e&&(l<e||o.covers(-1))&&(a>e||o.covers(1))&&(!i||o instanceof mi&&!(i instanceof mi&&t>=0)))i=o,n=l;else if(i&&l==e&&a==e&&o instanceof gi&&Math.abs(t)<2){if(o.deco.startSide<0)break;s&&(i=null)}r=l}return i?i.coordsAt(e-n,t):null}coordsForChar(e){let{i:t,off:i}=this.childPos(e,1),n=this.children[t];if(!(n instanceof mi))return null;for(;n.children.length;){let{i:e,off:t}=n.childPos(i,1);for(;;e++){if(e==n.children.length)return null;if((n=n.children[e]).length)break}i=t}if(!(n instanceof Gt))return null;let r=P(n.text,i);if(r==i)return null;let s=kt(n.dom,i,r).getClientRects();for(let e=0;e<s.length;e++){let t=s[e];if(e==s.length-1||t.top<t.bottom&&t.left<t.right)return t}return null}measureVisibleLineHeights(e){let t=[],{from:i,to:n}=e,r=this.view.contentDOM.clientWidth,s=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,a=this.view.textDirection==wi.LTR;for(let e=0,l=0;l<this.children.length;l++){let c=this.children[l],h=e+c.length;if(h>n)break;if(e>=i){let i=c.dom.getBoundingClientRect();if(t.push(i.height),s){let t=c.dom.lastChild,n=t?dt(t):[];if(n.length){let t=n[n.length-1],s=a?t.right-i.left:i.right-t.left;s>o&&(o=s,this.minWidth=r,this.minWidthFrom=e,this.minWidthTo=h)}}}e=h+c.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?wi.RTL:wi.LTR}measureTextSize(){for(let e of this.children)if(e instanceof mi){let t=e.measureTextSize();if(t)return t}let e,t,i,n=document.createElement("div");return n.className="cm-line",n.style.width="99999px",n.style.position="absolute",n.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(n);let r=dt(n.firstChild)[0];e=n.getBoundingClientRect().height,t=r?r.width/27:7,i=r?r.height:e,n.remove()})),{lineHeight:e,charWidth:t,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Dt(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let r=n==t.viewports.length?null:t.viewports[n],s=r?r.from-1:this.length;if(s>i){let n=(t.lineBlockAt(s).bottom-t.lineBlockAt(i).top)/this.view.scaleY;e.push(ci.replace({widget:new yi(n),block:!0,inclusive:!0,isBlockGap:!0}).range(i,s))}if(!r)break;i=r.to+1}return ci.set(e)}updateDeco(){let e=1,t=this.view.state.facet(hn).map((t=>(this.dynamicDecorationMap[e++]="function"==typeof t)?t(this.view):t)),i=!1,n=this.view.state.facet(dn).map(((e,t)=>{let n="function"==typeof e;return n&&(i=!0),n?e(this.view):e}));for(n.length&&(this.dynamicDecorationMap[e++]=i,t.push(Ee.join(n))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let t of this.view.state.facet(Zi))try{if(t(this.view,e.range,e))return!0}catch(e){tn(this.view.state,e,"scroll handler")}let t,{range:i}=e,n=this.coordsAt(i.head,i.empty?i.assoc:i.head>i.anchor?-1:1);if(!n)return;!i.empty&&(t=this.coordsAt(i.anchor,i.anchor>i.head?-1:1))&&(n={left:Math.min(n.left,t.left),top:Math.min(n.top,t.top),right:Math.max(n.right,t.right),bottom:Math.max(n.bottom,t.bottom)});let r=gn(this.view),s={left:n.left-r.left,top:n.top-r.top,right:n.right+r.right,bottom:n.bottom+r.bottom},{offsetWidth:o,offsetHeight:a}=this.view.scrollDOM;!function(e,t,i,n,r,s,o,a){let l=e.ownerDocument,c=l.defaultView||window;for(let h=e,d=!1;h&&!d;)if(1==h.nodeType){let e,u=h==l.body,p=1,f=1;if(u)e=vt(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(h).position)&&(d=!0),h.scrollHeight<=h.clientHeight&&h.scrollWidth<=h.clientWidth){h=h.assignedSlot||h.parentNode;continue}let t=h.getBoundingClientRect();({scaleX:p,scaleY:f}=xt(h,t)),e={left:t.left,right:t.left+h.clientWidth*p,top:t.top,bottom:t.top+h.clientHeight*f}}let m=0,g=0;if("nearest"==r)t.top<e.top?(g=-(e.top-t.top+o),i>0&&t.bottom>e.bottom+g&&(g=t.bottom-e.bottom+g+o)):t.bottom>e.bottom&&(g=t.bottom-e.bottom+o,i<0&&t.top-g<e.top&&(g=-(e.top+g-t.top+o)));else{let n=t.bottom-t.top,s=e.bottom-e.top;g=("center"==r&&n<=s?t.top+n/2-s/2:"start"==r||"center"==r&&i<0?t.top-o:t.bottom-s+o)-e.top}if("nearest"==n?t.left<e.left?(m=-(e.left-t.left+s),i>0&&t.right>e.right+m&&(m=t.right-e.right+m+s)):t.right>e.right&&(m=t.right-e.right+s,i<0&&t.left<e.left+m&&(m=-(e.left+m-t.left+s))):m=("center"==n?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==n==a?t.left-s:t.right-(e.right-e.left)+s)-e.left,m||g)if(u)c.scrollBy(m,g);else{let e=0,i=0;if(g){let e=h.scrollTop;h.scrollTop+=g/f,i=(h.scrollTop-e)*f}if(m){let t=h.scrollLeft;h.scrollLeft+=m/p,e=(h.scrollLeft-t)*p}t={left:t.left-e,top:t.top-i,right:t.right-e,bottom:t.bottom-i},e&&Math.abs(e-m)<1&&(n="nearest"),i&&Math.abs(i-g)<1&&(r="nearest")}if(u)break;h=h.assignedSlot||h.parentNode}else{if(11!=h.nodeType)break;h=h.host}}(this.view.scrollDOM,s,i.head<i.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==wi.LTR)}}function wn(e,t){let i=e.observer.selectionRange;if(!i.focusNode)return null;let n=It(i.focusNode,i.focusOffset),r=Tt(i.focusNode,i.focusOffset),s=n||r;if(r&&n&&r.node!=n.node){let t=Et.get(r.node);if(!t||t instanceof Gt&&t.text!=r.node.nodeValue)s=r;else if(e.docView.lastCompositionAfterCursor){let e=Et.get(n.node);!e||e instanceof Gt&&e.text!=n.node.nodeValue||(s=r)}}if(e.docView.lastCompositionAfterCursor=s!=n,!s)return null;let o=t-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}let On=class{constructor(){this.changes=[]}compareRange(e,t){fi(e,t,this.changes)}comparePoint(e,t){fi(e,t,this.changes)}boundChange(e){fi(e,e,this.changes)}};function Sn(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function kn(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function Pn(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Cn(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function An(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function In(e,t,i){let n,r,s,o,a,l,c,h,d=!1;for(let u=e.firstChild;u;u=u.nextSibling){let e=dt(u);for(let p=0;p<e.length;p++){let f=e[p];r&&Pn(r,f)&&(f=Cn(An(f,r.bottom),r.top));let m=Sn(t,f),g=kn(i,f);if(0==m&&0==g)return 3==u.nodeType?Tn(u,t,i):In(u,t,i);if(!n||o>g||o==g&&s>m){n=u,r=f,s=m,o=g;let a=g?i<f.top?-1:1:m?t<f.left?-1:1:0;d=!a||(a>0?p<e.length-1:p>0)}0==m?i>f.bottom&&(!c||c.bottom<f.bottom)?(a=u,c=f):i<f.top&&(!h||h.top>f.top)&&(l=u,h=f):c&&Pn(c,f)?c=An(c,f.bottom):h&&Pn(h,f)&&(h=Cn(h,f.top))}}if(c&&c.bottom>=i?(n=a,r=c):h&&h.top<=i&&(n=l,r=h),!n)return{node:e,offset:0};let u=Math.max(r.left,Math.min(r.right,t));return 3==n.nodeType?Tn(n,u,i):d&&"false"!=n.contentEditable?In(n,u,i):{node:e,offset:Array.prototype.indexOf.call(e.childNodes,n)+(t>=(r.left+r.right)/2?1:0)}}function Tn(e,t,i){let n=e.nodeValue.length,r=-1,s=1e9,o=0;for(let a=0;a<n;a++){let n=kt(e,a,a+1).getClientRects();for(let l=0;l<n.length;l++){let c=n[l];if(c.top==c.bottom)continue;o||(o=t-c.left);let h=(c.top>i?c.top-i:i-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&h<s){let i=t>=(c.left+c.right)/2,n=i;if((Xt.chrome||Xt.gecko)&&kt(e,a).getBoundingClientRect().left==c.right&&(n=!i),h<=0)return{node:e,offset:a+(n?1:0)};r=a+(n?1:0),s=h}}}return{node:e,offset:r>-1?r:o>0?e.nodeValue.length:0}}function $n(e,t,i,n=-1){var r,s;let o,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:h,y:d}=t,u=d-l;if(u<0)return 0;if(u>c)return e.state.doc.length;for(let t=e.viewState.heightOracle.textHeight/2,r=!1;o=e.elementAtHeight(u),o.type!=li.Text;)for(;u=n>0?o.bottom+t:o.top-t,!(u>=0&&u<=c);){if(r)return i?null:0;r=!0,n=-n}d=l+u;let p=o.from;if(p<e.viewport.from)return 0==e.viewport.from?0:i?null:Mn(e,a,o,h,d);if(p>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:i?null:Mn(e,a,o,h,d);let f=e.dom.ownerDocument,m=e.root.elementFromPoint?e.root:f,g=m.elementFromPoint(h,d);g&&!e.contentDOM.contains(g)&&(g=null),g||(h=Math.max(a.left+1,Math.min(a.right-1,h)),g=m.elementFromPoint(h,d),g&&!e.contentDOM.contains(g)&&(g=null));let y,v=-1;if(g&&0!=(null===(r=e.docView.nearest(g))||void 0===r?void 0:r.isEditable)){if(f.caretPositionFromPoint){let e=f.caretPositionFromPoint(h,d);e&&({offsetNode:y,offset:v}=e)}else if(f.caretRangeFromPoint){let t=f.caretRangeFromPoint(h,d);t&&(({startContainer:y,startOffset:v}=t),(!e.contentDOM.contains(y)||Xt.safari&&function(e,t,i){let n;if(3!=e.nodeType||t!=(n=e.nodeValue.length))return!1;for(let t=e.nextSibling;t;t=t.nextSibling)if(1!=t.nodeType||"BR"!=t.nodeName)return!1;return kt(e,n-1,n).getBoundingClientRect().left>i}(y,v,h)||Xt.chrome&&function(e,t,i){if(0!=t)return!1;for(let t=e;;){let e=t.parentNode;if(!e||1!=e.nodeType||e.firstChild!=t)return!1;if(e.classList.contains("cm-line"))break;t=e}return i-(1==e.nodeType?e.getBoundingClientRect():kt(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect()).left>5}(y,v,h))&&(y=void 0))}y&&(v=Math.min(gt(y),v))}if(!y||!e.docView.dom.contains(y)){let t=mi.find(e.docView,p);if(!t)return u>o.top+o.height/2?o.to:o.from;({node:y,offset:v}=In(t.dom,h,d))}let x=e.docView.nearest(y);if(!x)return null;if(x.isWidget&&1==(null===(s=x.dom)||void 0===s?void 0:s.nodeType)){let e=x.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?x.posAtStart:x.posAtEnd}return x.localPosFromDOM(y,v)+x.posAtStart}function Mn(e,t,i,n,r){let s=Math.round((n-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&i.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight;s+=Math.floor((r-i.top-.5*(e.defaultLineHeight-t))/t)*e.viewState.heightOracle.lineLength}let o=e.state.sliceDoc(i.from,i.to);return i.from+He(o,s,e.state.tabSize)}function En(e,t){let i=e.lineBlockAt(t);if(Array.isArray(i.type))for(let e of i.type)if(e.to>t||e.to==t&&(e.to==i.to||e.type==li.Text))return e;return i}function _n(e,t,i,n){let r=e.state.doc.lineAt(t.head),s=e.bidiSpans(r),o=e.textDirectionAt(r.from);for(let a=t,l=null;;){let t=Ni(r,s,o,a,i),c=Ri;if(!t){if(r.number==(i?e.state.doc.lines:1))return a;c="\n",r=e.state.doc.line(r.number+(i?1:-1)),s=e.bidiSpans(r),t=e.visualLineSide(r,!i)}if(l){if(!l(c))return a}else{if(!n)return t;l=n(c)}a=t}}function Dn(e,t,i){for(;;){let n=0;for(let r of e)r.between(t-1,t+1,((e,r,s)=>{if(t>e&&t<r){let s=n||i||(t-e<r-t?-1:1);t=s<0?e:r,n=s}}));if(!n)return t}}function Ln(e,t,i){let n=Dn(e.state.facet(un).map((t=>t(e))),i.from,t.head>i.from?-1:1);return n==i.from?i:j.cursor(n,n<i.from?1:-1)}const Bn="￿";class Rn{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ce.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Bn}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n);let e=this.text.length;this.readNode(n);let r=n.nextSibling;if(r==t)break;let s=Et.get(n),o=Et.get(r);(s&&o?s.breakAfter:(s?s.breakAfter:ft(n))||ft(r)&&("BR"!=n.nodeName||n.cmIgnore)&&this.text.length>e)&&this.lineBreak(),n=r}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let r,s=-1,o=1;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(r=n.exec(t))&&(s=r.index,o=r[0].length),this.append(t.slice(i,s<0?t.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let t=Et.get(e),i=t&&t.overrideDOMText;if(null!=i){this.findPointInside(e,i.length);for(let e=i.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(3==e.nodeType?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(Nn(e,i.node,i.offset)?t:0))}}function Nn(e,t,i){for(;;){if(!t||i<gt(t))return!1;if(t==e)return!0;i=pt(t)+1,t=t.parentNode}}class Fn{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class jn{constructor(e,t,i,n){this.typeOver=n,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:s}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,i,0))){let t=r||s?[]:function(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}=e.observer.selectionRange;return i&&(t.push(new Fn(i,n)),r==i&&s==n||t.push(new Fn(r,s))),t}(e),i=new Rn(t,e.state);i.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=i.text,this.newSel=function(e,t){if(0==e.length)return null;let i=e[0].pos,n=2==e.length?e[1].pos:i;return i>-1&&n>-1?j.single(i+t,n+t):null}(t,this.bounds.from)}else{let t=e.observer.selectionRange,i=r&&r.node==t.focusNode&&r.offset==t.focusOffset||!ct(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),n=s&&s.node==t.anchorNode&&s.offset==t.anchorOffset||!ct(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),o=e.viewport;if((Xt.ios||Xt.chrome)&&e.state.selection.main.empty&&i!=n&&(o.from>0||o.to<e.state.doc.length)){let t=Math.min(i,n),r=Math.max(i,n),s=o.from-t,a=o.to-r;0!=s&&1!=s&&0!=t||0!=a&&-1!=a&&r!=e.state.doc.length||(i=0,n=e.state.doc.length)}this.newSel=j.single(n,i)}}}function zn(e,t){let i,{newSel:n}=t,r=e.state.selection.main,s=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:n,to:o}=t.bounds,a=r.from,l=null;(8===s||Xt.android&&t.text.length<o-n)&&(a=r.to,l="end");let c=function(e,t,i,n){let r=Math.min(e.length,t.length),s=0;for(;s<r&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&e.length==t.length)return null;let o=e.length,a=t.length;for(;o>0&&a>0&&e.charCodeAt(o-1)==t.charCodeAt(a-1);)o--,a--;return"end"==n&&(i-=o+Math.max(0,s-Math.min(o,a))-s),o<s&&e.length<t.length?(s-=i<=s&&i>=o?s-i:0,a=s+(a-o),o=s):a<s&&(s-=i<=s&&i>=a?s-i:0,o=s+(o-a),a=s),{from:s,toA:o,toB:a}}(e.state.doc.sliceString(n,o,Bn),t.text,a-n,l);c&&(Xt.chrome&&13==s&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Bn+Bn&&c.toB--,i={from:n+c.from,to:n+c.toA,insert:m.of(t.text.slice(c.from,c.toB).split(Bn))})}else n&&(!e.hasFocus&&e.state.facet(nn)||n.main.eq(r))&&(n=null);if(!i&&!n)return!1;if(!i&&t.typeOver&&!r.empty&&n&&n.main.empty?i={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,r.to)}:i&&i.from>=r.from&&i.to<=r.to&&(i.from!=r.from||i.to!=r.to)&&r.to-r.from-(i.to-i.from)<=4?i={from:r.from,to:r.to,insert:e.state.doc.slice(r.from,i.from).append(i.insert).append(e.state.doc.slice(i.to,r.to))}:(Xt.mac||Xt.android)&&i&&i.from==i.to&&i.from==r.head-1&&/^\. ?$/.test(i.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(n&&2==i.insert.length&&(n=j.single(n.main.anchor-1,n.main.head-1)),i={from:r.from,to:r.to,insert:m.of([" "])}):Xt.chrome&&i&&i.from==i.to&&i.from==r.head&&"\n "==i.insert.toString()&&e.lineWrapping&&(n&&(n=j.single(n.main.anchor-1,n.main.head-1)),i={from:r.from,to:r.to,insert:m.of([" "])}),i)return Qn(e,i,n,s);if(n&&!n.main.eq(r)){let t=!1,i="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),i=e.inputState.lastSelectionOrigin),e.dispatch({selection:n,scrollIntoView:t,userEvent:i}),!0}return!1}function Qn(e,t,i,n=-1){if(Xt.ios&&e.inputState.flushIOSKey(t))return!0;let r=e.state.selection.main;if(Xt.android&&(t.to==r.to&&(t.from==r.from||t.from==r.from-1&&" "==e.state.sliceDoc(t.from,r.from))&&1==t.insert.length&&2==t.insert.lines&&Pt(e.contentDOM,"Enter",13)||(t.from==r.from-1&&t.to==r.to&&0==t.insert.length||8==n&&t.insert.length<t.to-t.from&&t.to>r.head)&&Pt(e.contentDOM,"Backspace",8)||t.from==r.from&&t.to==r.to+1&&0==t.insert.length&&Pt(e.contentDOM,"Delete",46)))return!0;let s,o=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>s||(s=function(e,t,i){let n,r=e.state,s=r.selection.main;if(t.from>=s.from&&t.to<=s.to&&t.to-t.from>=(s.to-s.from)/3&&(!i||i.main.empty&&i.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let i=s.from<t.from?r.sliceDoc(s.from,t.from):"",o=s.to>t.to?r.sliceDoc(t.to,s.to):"";n=r.replaceSelection(e.state.toText(i+t.insert.sliceString(0,void 0,e.state.lineBreak)+o))}else{let o=r.changes(t),a=i&&i.main.to<=o.newLength?i.main:void 0;if(r.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=s.to&&t.to>=s.to-10){let l,c=e.state.sliceDoc(t.from,t.to),h=i&&wn(e,i.main.head);if(h){let e=t.insert.length-(t.to-t.from);l={from:h.from,to:h.to-e}}else l=e.state.doc.lineAt(s.head);let d=s.to-t.to,u=s.to-s.from;n=r.changeByRange((i=>{if(i.from==s.from&&i.to==s.to)return{changes:o,range:a||i.map(o)};let n=i.to-d,h=n-c.length;if(i.to-i.from!=u||e.state.sliceDoc(h,n)!=c||i.to>=l.from&&i.from<=l.to)return{range:i};let p=r.changes({from:h,to:n,insert:t.insert}),f=i.to-s.to;return{changes:p,range:a?j.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):i.map(p)}}))}else n={changes:o,selection:a&&r.selection.replaceRange(a)}}let o="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,o+=".compose",e.inputState.compositionFirstChange&&(o+=".start",e.inputState.compositionFirstChange=!1)),r.update(n,{userEvent:o,scrollIntoView:!0})}(e,t,i));return e.state.facet(Hi).some((i=>i(e,t.from,t.to,o,a)))||e.dispatch(a()),!0}class Un{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Xt.safari&&e.contentDOM.addEventListener("input",(()=>null)),Xt.gecko&&function(e){gr.has(e)||(gr.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}(e.contentDOM.ownerDocument)}handleEvent(e){(function(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,n=t.target;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=Et.get(n))&&i.ignoreEvent(t))return!1;return!0})(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let i=this.handlers[e];if(i){for(let e of i.observers)e(this.view,t);for(let e of i.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=Hn(e),i=this.handlers,n=this.view.contentDOM;for(let e in t)if("scroll"!=e){let r=!t[e].handlers.length,s=i[e];s&&r!=!s.handlers.length&&(n.removeEventListener(e,this.handleEvent),s=null),s||n.addEventListener(e,this.handleEvent,{passive:r})}for(let e in i)"scroll"==e||t[e]||n.removeEventListener(e,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&Xn.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Xt.android&&Xt.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!Xt.ios||e.synthetic||e.altKey||e.metaKey||!((t=Vn.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||Wn.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,Pt(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(Xt.safari&&!Xt.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function qn(e,t){return(i,n)=>{try{return t.call(e,n,i)}catch(e){tn(i.state,e)}}}function Hn(e){let t=Object.create(null);function i(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let t of e){let e=t.spec;if(e&&e.domEventHandlers)for(let n in e.domEventHandlers){let r=e.domEventHandlers[n];r&&i(n).handlers.push(qn(t.value,r))}if(e&&e.domEventObservers)for(let n in e.domEventObservers){let r=e.domEventObservers[n];r&&i(n).observers.push(qn(t.value,r))}}for(let e in Zn)i(e).handlers.push(Zn[e]);for(let e in Kn)i(e).observers.push(Kn[e]);return t}const Vn=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Wn="dthko",Xn=[16,17,18,20,91,92,224,225];function Gn(e){return.7*Math.max(0,e)+8}class Yn{constructor(e,t,i,n){this.view=e,this.startEvent=t,this.style=i,this.mustSelect=n,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=function(e){let t,i,n=e.ownerDocument;for(let r=e.parentNode;r&&!(r==n.body||t&&i);)if(1==r.nodeType)!i&&r.scrollHeight>r.clientHeight&&(i=r),!t&&r.scrollWidth>r.clientWidth&&(t=r),r=r.assignedSlot||r.parentNode;else{if(11!=r.nodeType)break;r=r.host}return{x:t,y:i}}(e.contentDOM),this.atoms=e.state.facet(un).map((t=>t(e)));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ce.allowMultipleSelections)&&function(e,t){let i=e.state.facet(ji);return i.length?i[0](t):Xt.mac?t.metaKey:t.ctrlKey}(e,t),this.dragging=!(!function(e,t){let{main:i}=e.state.selection;if(i.empty)return!1;let n=lt(e.root);if(!n||0==n.rangeCount)return!0;let r=n.getRangeAt(0).getClientRects();for(let e=0;e<r.length;e++){let i=r[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(e,t)||1!=hr(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&(t=this.startEvent,i=e,Math.max(Math.abs(t.clientX-i.clientX),Math.abs(t.clientY-i.clientY))<10))return;var t,i;this.select(this.lastEvent=e);let n=0,r=0,s=0,o=0,a=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:o,bottom:l}=this.scrollParents.y.getBoundingClientRect());let c=gn(this.view);e.clientX-c.left<=s+6?n=-Gn(s-e.clientX):e.clientX+c.right>=a-6&&(n=Gn(e.clientX-a)),e.clientY-c.top<=o+6?r=-Gn(o-e.clientY):e.clientY+c.bottom>=l-6&&(r=Gn(e.clientY-l)),this.setScrollSpeed(n,r)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let i=0;i<e.ranges.length;i++){let n=e.ranges[i],r=null;if(n.empty){let e=Dn(this.atoms,n.from,0);e!=n.from&&(r=j.cursor(e,-1))}else{let e=Dn(this.atoms,n.from,-1),t=Dn(this.atoms,n.to,1);e==n.from&&t==n.to||(r=j.range(n.from==n.anchor?e:t,n.from==n.head?e:t))}r&&(t||(t=e.ranges.slice()),t[i]=r)}return t?j.create(t,e.mainIndex):e}select(e){let{view:t}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&i.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const Zn=Object.create(null),Kn=Object.create(null),Jn=Xt.ie&&Xt.ie_version<15||Xt.ios&&Xt.webkit_version<604;function er(e,t,i){for(let n of e.facet(t))i=n(i,e);return i}function tr(e,t){t=er(e.state,Wi,t);let i,{state:n}=e,r=1,s=n.toText(t),o=s.lines==n.selection.ranges.length;if(null!=ur&&n.selection.ranges.every((e=>e.empty))&&ur==s.toString()){let e=-1;i=n.changeByRange((i=>{let a=n.doc.lineAt(i.from);if(a.from==e)return{range:i};e=a.from;let l=n.toText((o?s.line(r++).text:t)+n.lineBreak);return{changes:{from:a.from,insert:l},range:j.cursor(i.from+l.length)}}))}else i=o?n.changeByRange((e=>{let t=s.line(r++);return{changes:{from:e.from,to:e.to,insert:t.text},range:j.cursor(e.from+t.length)}})):n.replaceSelection(s);e.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}function ir(e,t,i,n){if(1==n)return j.cursor(t,i);if(2==n)return function(e,t,i=1){let n=e.charCategorizer(t),r=e.doc.lineAt(t),s=t-r.from;if(0==r.length)return j.cursor(t);0==s?i=1:s==r.length&&(i=-1);let o=s,a=s;i<0?o=P(r.text,s,!1):a=P(r.text,s);let l=n(r.text.slice(o,a));for(;o>0;){let e=P(r.text,o,!1);if(n(r.text.slice(e,o))!=l)break;o=e}for(;a<r.length;){let e=P(r.text,a);if(n(r.text.slice(a,e))!=l)break;a=e}return j.range(o+r.from,a+r.from)}(e.state,t,i);{let i=mi.find(e.docView,t),n=e.state.doc.lineAt(i?i.posAtEnd:t),r=i?i.posAtStart:n.from,s=i?i.posAtEnd:n.to;return s<e.state.doc.length&&s==n.to&&s++,j.range(r,s)}}Kn.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},Zn.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),Kn.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Kn.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Zn.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let i=null;for(let n of e.state.facet(Qi))if(i=n(e,t),i)break;if(i||0!=t.button||(i=function(e,t){let i=sr(e,t),n=hr(t),r=e.state.selection;return{update(e){e.docChanged&&(i.pos=e.changes.mapPos(i.pos),r=r.map(e.changes))},get(t,s,o){let a,l=sr(e,t),c=ir(e,l.pos,l.bias,n);if(i.pos!=l.pos&&!s){let t=ir(e,i.pos,i.bias,n),r=Math.min(t.from,c.from),s=Math.max(t.to,c.to);c=r<c.from?j.range(r,s):j.range(s,r)}return s?r.replaceRange(r.main.extend(c.from,c.to)):o&&1==n&&r.ranges.length>1&&(a=function(e,t){for(let i=0;i<e.ranges.length;i++){let{from:n,to:r}=e.ranges[i];if(n<=t&&r>=t)return j.create(e.ranges.slice(0,i).concat(e.ranges.slice(i+1)),e.mainIndex==i?0:e.mainIndex-(e.mainIndex>i?1:0))}return null}(r,l.pos))?a:o?r.addRange(c):j.create([c])}}}(e,t)),i){let n=!e.hasFocus;e.inputState.startMouseSelection(new Yn(e,t,i,n)),n&&e.observer.ignore((()=>{St(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let r=e.inputState.mouseSelection;if(r)return r.start(t),!1===r.dragging}return!1};let nr=(e,t,i)=>t>=i.top&&t<=i.bottom&&e>=i.left&&e<=i.right;function rr(e,t,i,n){let r=mi.find(e.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(0==s)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&nr(i,n,o))return-1;let a=r.coordsAt(s,1);return a&&nr(i,n,a)?1:o&&o.bottom>=n?-1:1}function sr(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:i,bias:rr(e,i,t.clientX,t.clientY)}}const or=Xt.ie&&Xt.ie_version<=11;let ar=null,lr=0,cr=0;function hr(e){if(!or)return e.detail;let t=ar,i=cr;return ar=e,cr=Date.now(),lr=!t||i>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(lr+1)%3:1}function dr(e,t,i,n){if(!(i=er(e.state,Wi,i)))return;let r=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:s}=e.inputState,o=n&&s&&function(e,t){let i=e.state.facet(zi);return i.length?i[0](t):Xt.mac?!t.altKey:!t.ctrlKey}(e,t)?{from:s.from,to:s.to}:null,a={from:r,insert:i},l=e.state.changes(o?[o,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(r,-1),head:l.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),e.inputState.draggedContent=null}Zn.dragstart=(e,t)=>{let{selection:{main:i}}=e.state;if(t.target.draggable){let n=e.docView.nearest(t.target);if(n&&n.isWidget){let e=n.posAtStart,t=e+n.length;(e>=i.to||t<=i.from)&&(i=j.range(e,t))}}let{inputState:n}=e;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=i,t.dataTransfer&&(t.dataTransfer.setData("Text",er(e.state,Xi,e.state.sliceDoc(i.from,i.to))),t.dataTransfer.effectAllowed="copyMove"),!1},Zn.dragend=e=>(e.inputState.draggedContent=null,!1),Zn.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let i=t.dataTransfer.files;if(i&&i.length){let n=Array(i.length),r=0,s=()=>{++r==i.length&&dr(e,t,n.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<i.length;e++){let t=new FileReader;t.onerror=s,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(n[e]=t.result),s()},t.readAsText(i[e])}return!0}{let i=t.dataTransfer.getData("Text");if(i)return dr(e,t,i,!0),!0}return!1},Zn.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let i=Jn?null:t.clipboardData;return i?(tr(e,i.getData("text/plain")||i.getData("text/uri-list")),!0):(function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),tr(e,i.value)}),50)}(e),!1)};let ur=null;Zn.copy=Zn.cut=(e,t)=>{let{text:i,ranges:n,linewise:r}=function(e){let t=[],i=[],n=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),i.push(n));if(!t.length){let r=-1;for(let{from:n}of e.selection.ranges){let s=e.doc.lineAt(n);s.number>r&&(t.push(s.text),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}n=!0}return{text:er(e,Xi,t.join(e.lineBreak)),ranges:i,linewise:n}}(e.state);if(!i&&!r)return!1;ur=r?i:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=Jn?null:t.clipboardData;return s?(s.clearData(),s.setData("text/plain",i),!0):(function(e,t){let i=e.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout((()=>{n.remove(),e.focus()}),50)}(e,i),!1)};const pr=ue.define();function fr(e,t){let i=[];for(let n of e.facet(Vi)){let r=n(e,t);r&&i.push(r)}return i?e.update({effects:i,annotations:pr.of(!0)}):null}function mr(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let i=fr(e.state,t);i?e.dispatch(i):e.update([])}}),10)}Kn.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),mr(e)},Kn.blur=e=>{e.observer.clearSelectionRange(),mr(e)},Kn.compositionstart=Kn.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},Kn.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,Xt.chrome&&Xt.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},Kn.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Zn.beforeinput=(e,t)=>{var i,n;if("insertReplacementText"==t.inputType&&e.observer.editContext){let n=null===(i=t.dataTransfer)||void 0===i?void 0:i.getData("text/plain"),r=t.getTargetRanges();if(n&&r.length){let t=r[0],i=e.posAtDOM(t.startContainer,t.startOffset),s=e.posAtDOM(t.endContainer,t.endOffset);return Qn(e,{from:i,to:s,insert:e.state.toText(n)},null),!0}}let r;if(Xt.chrome&&Xt.android&&(r=Vn.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(r.key,r.keyCode),"Backspace"==r.key||"Delete"==r.key)){let t=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var i;((null===(i=window.visualViewport)||void 0===i?void 0:i.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return Xt.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),Xt.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>Kn.compositionend(e,t)),20),!1};const gr=new Set,yr=["pre-wrap","normal","pre-line","break-spaces"];let vr=!1;function xr(){vr=!1}class br{constructor(e){this.lineWrapping=e,this.doc=m.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return yr.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(10*n)]||(t=!0,this.heightSamples[Math.floor(10*n)]=!0)}return t}refresh(e,t,i,n,r,s){let o=yr.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=i,this.textHeight=n,this.lineLength=r,a){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class wr{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Or{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this._content=r}get type(){return"number"==typeof this._content?li.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ui?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Or(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Sr=function(e){return e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight",e}(Sr||(Sr={}));const kr=.001;class Pr{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>kr&&(vr=!0),this.height=e)}replace(e,t,i){return Pr.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this,s=i.doc;for(let o=n.length-1;o>=0;o--){let{fromA:a,toA:l,fromB:c,toB:h}=n[o],d=r.lineAt(a,Sr.ByPosNoHeight,i.setDoc(t),0,0),u=d.to>=l?d:r.lineAt(l,Sr.ByPosNoHeight,i,0,0);for(h+=u.to-l,l=u.to;o>0&&d.from<=n[o-1].toA;)a=n[o-1].fromA,c=n[o-1].fromB,o--,a<d.from&&(d=r.lineAt(a,Sr.ByPosNoHeight,i,0,0));c+=d.from-a,a=d.from;let p=Er.build(i.setDoc(s),e,c,h);r=Cr(r,r.replace(a,l,p))}return r.updateHeight(i,0)}static empty(){return new Ir(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),i+=1+r.break,n-=r.size}else{if(!(r>2*n))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,r-=t.size}}else if(n<r){let i=e[t++];i&&(n+=i.size)}else{let t=e[--i];t&&(r+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,i++),new $r(Pr.of(e.slice(0,t)),s,Pr.of(e.slice(i)))}}function Cr(e,t){return e==t?e:(e.constructor!=t.constructor&&(vr=!0),t)}Pr.prototype.size=1;class Ar extends Pr{constructor(e,t,i){super(e,t),this.deco=i}blockAt(e,t,i,n){return new Or(n,this.length,i,this.height,this.deco||0)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,s){e<=r+this.length&&t>=r&&s(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ir extends Ar{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,i,n){return new Or(n,this.length,i,this.height,this.breaks)}replace(e,t,i){let n=i[0];return 1==i.length&&(n instanceof Ir||n instanceof Tr&&4&n.flags)&&Math.abs(this.length-n.length)<10?(n instanceof Tr?n=new Ir(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Pr.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(n.heights[n.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Tr extends Pr{constructor(e){super(e,0)}heightMetrics(e,t){let i,n=e.doc.lineAt(t).number,r=e.doc.lineAt(t+this.length).number,s=r-n+1,o=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*s);i=t/s,this.length>s+1&&(o=(this.height-t)/(this.length-s-1))}else i=this.height/s;return{firstLine:n,lastLine:r,perLine:i,perChar:o}}blockAt(e,t,i,n){let{firstLine:r,lastLine:s,perLine:o,perChar:a}=this.heightMetrics(t,n);if(t.lineWrapping){let r=n+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),s=t.doc.lineAt(r),l=o+s.length*a,c=Math.max(i,e-l/2);return new Or(s.from,s.length,c,l,0)}{let n=Math.max(0,Math.min(s-r,Math.floor((e-i)/o))),{from:a,length:l}=t.doc.line(r+n);return new Or(a,l,i+o*n,o,0)}}lineAt(e,t,i,n,r){if(t==Sr.ByHeight)return this.blockAt(e,i,n,r);if(t==Sr.ByPosNoHeight){let{from:t,to:n}=i.doc.lineAt(e);return new Or(t,n-t,0,0,0)}let{firstLine:s,perLine:o,perChar:a}=this.heightMetrics(i,r),l=i.doc.lineAt(e),c=o+l.length*a,h=l.number-s,d=n+o*h+a*(l.from-r-h);return new Or(l.from,l.length,Math.max(n,Math.min(d,n+this.height-c)),c,0)}forEachLine(e,t,i,n,r,s){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(i,r);for(let c=e,h=n;c<=t;){let t=i.doc.lineAt(c);if(c==e){let i=t.number-o;h+=a*i+l*(e-r-i)}let n=a+l*t.length;s(new Or(t.from,t.length,h,n,0)),h+=n,c=t.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let e=i[i.length-1];e instanceof Tr?i[i.length-1]=new Tr(e.length+n):i.push(null,new Tr(n-1))}if(e>0){let t=i[0];t instanceof Tr?i[0]=new Tr(e+t.length):i.unshift(new Tr(e-1),null)}return Pr.of(i)}decomposeLeft(e,t){t.push(new Tr(e-1),null)}decomposeRight(e,t){t.push(null,new Tr(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let i=[],s=Math.max(t,n.from),o=-1;for(n.from>t&&i.push(new Tr(n.from-t-1).updateHeight(e,t));s<=r&&n.more;){let t=e.doc.lineAt(s).length;i.length&&i.push(null);let r=n.heights[n.index++];-1==o?o=r:Math.abs(r-o)>=kr&&(o=-2);let a=new Ir(t,r);a.outdated=!1,i.push(a),s+=t+1}s<=r&&i.push(null,new Tr(r-s).updateHeight(e,s));let a=Pr.of(i);return(o<0||Math.abs(a.height-this.height)>=kr||Math.abs(o-this.heightMetrics(e,t).perLine)>=kr)&&(vr=!0),Cr(this,a)}return(i||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class $r extends Pr{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,n){let r=i+this.left.height;return e<r?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let s=n+this.left.height,o=r+this.left.length+this.break,a=t==Sr.ByHeight?e<s:e<o,l=a?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,s,o);if(this.break||(a?l.to<o:l.from>o))return l;let c=t==Sr.ByPosNoHeight?Sr.ByPosNoHeight:Sr.ByPos;return a?l.join(this.right.lineAt(o,c,i,s,o)):this.left.lineAt(o,c,i,n,r).join(l)}forEachLine(e,t,i,n,r,s){let o=n+this.left.height,a=r+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,i,n,r,s),t>=a&&this.right.forEachLine(e,t,i,o,a,s);else{let l=this.lineAt(a,Sr.ByPos,i,n,r);e<l.from&&this.left.forEachLine(e,l.from-1,i,n,r,s),l.to>=e&&l.from<=t&&s(l),t>l.to&&this.right.forEachLine(l.to+1,t,i,o,a,s)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let s=r.length;for(let e of i)r.push(e);if(e>0&&Mr(r,s-1),t<this.length){let e=r.length;this.decomposeRight(t,r),Mr(r,e)}return Pr.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Pr.of(this.break?[e,null,t]:[e,t]):(this.left=Cr(this.left,e),this.right=Cr(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:s}=this,o=t+r.length+this.break,a=null;return n&&n.from<=t+r.length&&n.more?a=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=o+s.length&&n.more?a=s=s.updateHeight(e,o,i,n):s.updateHeight(e,o,i),a?this.balanced(r,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Mr(e,t){let i,n;null==e[t]&&(i=e[t-1])instanceof Tr&&(n=e[t+1])instanceof Tr&&e.splice(t-1,3,new Tr(i.length+1+n.length))}class Er{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ir?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Ir(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0,r=i.widget?i.widget.lineBreaks:0;n<0&&(n=this.oracle.lineHeight);let s=t-e;i.block?this.addBlock(new Ar(s,n,i)):(s||r||n>=5)&&this.addLineDeco(n,r,s)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ir(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Tr(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ir)return e;let t=new Ir(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,i){let n=this.ensureLine();n.length+=i,n.collapsed+=i,n.widgetHeight=Math.max(n.widgetHeight,e),n.breaks+=t,this.writtenTo=this.pos=this.pos+i}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Ir||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ir(0,-1));let i=e;for(let e of this.nodes)e instanceof Ir&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,n){let r=new Er(i,e);return Ee.spans(t,i,n,r,0),r.finish(i)}}class _r{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&fi(e,t,this.changes,5)}}function Dr(e,t){let i=e.getBoundingClientRect(),n=e.ownerDocument,r=n.defaultView||window,s=Math.max(0,i.left),o=Math.min(r.innerWidth,i.right),a=Math.max(0,i.top),l=Math.min(r.innerHeight,i.bottom);for(let t=e.parentNode;t&&t!=n.body;)if(1==t.nodeType){let i=t,n=window.getComputedStyle(i);if((i.scrollHeight>i.clientHeight||i.scrollWidth>i.clientWidth)&&"visible"!=n.overflow){let n=i.getBoundingClientRect();s=Math.max(s,n.left),o=Math.min(o,n.right),a=Math.max(a,n.top),l=Math.min(t==e.parentNode?r.innerHeight:l,n.bottom)}t="absolute"==n.position||"fixed"==n.position?i.offsetParent:i.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:s-i.left,right:Math.max(s,o)-i.left,top:a-(i.top+t),bottom:Math.max(a,l)-(i.top+t)}}function Lr(e,t){let i=e.getBoundingClientRect();return{left:0,right:i.right-i.left,top:t,bottom:i.bottom-(i.top+t)}}class Br{constructor(e,t,i,n){this.from=e,this.to=t,this.size=i,this.displaySize=n}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e,t){return ci.replace({widget:new Rr(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class Rr extends ai{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Nr{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Qr,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=wi.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(cn).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new br(t),this.stateDeco=e.facet(hn).filter((e=>"function"!=typeof e)),this.heightMap=Pr.empty().applyChanges(this.stateDeco,m.empty,this.heightOracle.setDoc(e.doc),[new vn(0,0,0,e.doc.length)]);for(let e=0;e<2&&(this.viewport=this.getViewport(0,null),this.updateForViewport());e++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ci.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some((({from:e,to:t})=>n>=e&&n<=t))){let{from:t,to:i}=this.lineBlockAt(n);e.push(new Fr(t,i))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Qr:new Ur(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(qr(e,this.scaler))}))}update(e,t=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(hn).filter((e=>"function"!=typeof e));let n=e.changedRanges,r=vn.extendWithRanges(n,function(e,t,i){let n=new _r;return Ee.compare(e,t,i,n,0),n.changes}(i,this.stateDeco,e?e.changes:E.empty(this.state.doc.length))),s=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);xr(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=s||vr)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Yi)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,r=i.whiteSpace;this.defaultTextDirection="rtl"==i.direction?wi.RTL:wi.LTR;let s=this.heightOracle.mustRefreshForWrapping(r),o=t.getBoundingClientRect(),a=s||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let l=0,c=0;if(o.width&&o.height){let{scaleX:e,scaleY:i}=xt(t,o);(e>.005&&Math.abs(this.scaleX-e)>.005||i>.005&&Math.abs(this.scaleY-i)>.005)&&(this.scaleX=e,this.scaleY=i,l|=16,s=a=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,d=(parseInt(i.paddingBottom)||0)*this.scaleY;this.paddingTop==h&&this.paddingBottom==d||(this.paddingTop=h,this.paddingBottom=d,l|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=16);let u=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=u&&(this.scrollAnchorHeight=-1,this.scrollTop=u),this.scrolledToBottom=At(e.scrollDOM);let p=(this.printing?Lr:Dr)(t,this.paddingTop),f=p.top-this.pixelViewport.top,g=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let y=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(y!=this.inView&&(this.inView=y,y&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=o.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,l|=16),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(n.mustRefreshForHeights(t)&&(s=!0),s||n.lineWrapping&&Math.abs(v-this.contentDOMWidth)>n.charWidth){let{lineHeight:i,charWidth:o,textHeight:a}=e.docView.measureTextSize();s=i>0&&n.refresh(r,i,o,a,v/o,t),s&&(e.docView.minWidth=0,l|=16)}f>0&&g>0?c=Math.max(f,g):f<0&&g<0&&(c=Math.min(f,g)),xr();for(let i of this.viewports){let r=i.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(i);this.heightMap=(s?Pr.empty().applyChanges(this.stateDeco,m.empty,this.heightOracle,[new vn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(n,0,s,new wr(i.from,r))}vr&&(l|=2)}let x=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return x&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||x)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(s?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.heightOracle,{visibleTop:s,visibleBottom:o}=this,a=new Fr(n.lineAt(s-1e3*i,Sr.ByHeight,r,0,0).from,n.lineAt(o+1e3*(1-i),Sr.ByHeight,r,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let i,s=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),o=n.lineAt(e,Sr.ByPos,r,0,0);i="center"==t.y?(o.top+o.bottom)/2-s/2:"start"==t.y||"nearest"==t.y&&e<a.from?o.top:o.bottom-s,a=new Fr(n.lineAt(i-500,Sr.ByHeight,r,0,0).from,n.lineAt(i+s+500,Sr.ByHeight,r,0,0).to)}}return a}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Fr(this.heightMap.lineAt(i,Sr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(n,Sr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Sr.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Sr.ByPos,this.heightOracle,0,0),{visibleTop:s,visibleBottom:o}=this;return(0==e||n<=s-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=o+Math.max(10,Math.min(i,250)))&&n>s-2e3&&r<o+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Br(t.mapPos(n.from),t.mapPos(n.to),n.size,n.displaySize));return i}ensureLineGaps(e,t){let i=this.heightOracle.lineWrapping,n=i?1e4:2e3,r=n>>1,s=n<<1;if(this.defaultTextDirection!=wi.LTR&&!i)return[];let o=[],a=(n,s,l,c)=>{if(s-n<r)return;let h=this.state.selection.main,d=[h.from];h.empty||d.push(h.to);for(let e of d)if(e>n&&e<s)return a(n,e-10,l,c),void a(e+10,s,l,c);let u=function(e,t){for(let i of e)if(t(i))return i}(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-n)<r&&Math.abs(e.to-s)<r&&!d.some((t=>e.from<t&&e.to>t))));if(!u){if(s<l.to&&t&&i&&t.visibleRanges.some((e=>e.from<=s&&e.to>=s))){let e=t.moveToLineBoundary(j.cursor(s),!1,!0).head;e>n&&(s=e)}let e=this.gapSize(l,n,s,c);u=new Br(n,s,e,i||e<2e6?e:2e6)}o.push(u)},l=t=>{if(t.length<s||t.type!=li.Text)return;let r=function(e,t,i){let n=[],r=e,s=0;return Ee.spans(i,e,t,{span(){},point(e,t){e>r&&(n.push({from:r,to:e}),s+=e-r),r=t}},20),r<t&&(n.push({from:r,to:t}),s+=t-r),{total:s,ranges:n}}(t.from,t.to,this.stateDeco);if(r.total<s)return;let o,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(i){let e,i,s=n/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let n=zr(r,c),o=((this.visibleBottom-this.visibleTop)/2+s)/t.height;e=n-o,i=n+o}else e=(this.visibleTop-t.top-s)/t.height,i=(this.visibleBottom-t.top+s)/t.height;o=jr(r,e),l=jr(r,i)}else{let i=r.total*this.heightOracle.charWidth,s=n*this.heightOracle.charWidth,a=0;if(i>2e6)for(let i of e)i.from>=t.from&&i.from<t.to&&i.size!=i.displaySize&&i.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=i.size-i.displaySize);let h,d,u=this.pixelViewport.left+a,p=this.pixelViewport.right+a;if(null!=c){let e=zr(r,c),t=((p-u)/2+s)/i;h=e-t,d=e+t}else h=(u-s)/i,d=(p+s)/i;o=jr(r,h),l=jr(r,d)}o>t.from&&a(t.from,o,t,r),l<t.to&&a(l,t.to,t,r)};for(let e of this.viewportLines)Array.isArray(e.type)?e.type.forEach(l):l(e);return o}gapSize(e,t,i,n){let r=zr(n,i)-zr(n,t);return this.heightOracle.lineWrapping?e.height*r:n.total*this.heightOracle.charWidth*r}updateLineGaps(e){Br.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ci.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let i=[];Ee.spans(t,this.viewport.from,this.viewport.to,{span(e,t){i.push({from:e,to:t})},point(){}},20);let n=0;if(i.length!=this.visibleRanges.length)n=12;else for(let t=0;t<i.length&&!(8&n);t++){let r=this.visibleRanges[t],s=i[t];r.from==s.from&&r.to==s.to||(n|=4,e&&e.mapPos(r.from,-1)==s.from&&e.mapPos(r.to,1)==s.to||(n|=8))}return this.visibleRanges=i,n}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||qr(this.heightMap.lineAt(e,Sr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||qr(this.heightMap.lineAt(this.scaler.fromDOM(e),Sr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return qr(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Fr{constructor(e,t){this.from=e,this.to=t}}function jr({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let n=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:r}=t[e],s=r-i;if(n<=s)return i+n;n-=s}}function zr(e,t){let i=0;for(let{from:n,to:r}of e.ranges){if(t<=r){i+=t-n;break}i+=r-n}return i/e.total}const Qr={toDOM:e=>e,fromDOM:e=>e,scale:1,eq(e){return e==this}};class Ur{constructor(e,t,i){let n=0,r=0,s=0;this.viewports=i.map((({from:i,to:r})=>{let s=t.lineAt(i,Sr.ByPos,e,0,0).top,o=t.lineAt(r,Sr.ByPos,e,0,0).bottom;return n+=o-s,{from:i,to:r,top:s,bottom:o,domTop:0,domBottom:0}})),this.scale=(7e6-n)/(t.height-n);for(let e of this.viewports)e.domTop=s+(e.top-r)*this.scale,s=e.domBottom=e.domTop+(e.bottom-e.top),r=e.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return n+(e-i)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);i=r.bottom,n=r.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return i+(e-n)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);i=r.bottom,n=r.domBottom}}eq(e){return e instanceof Ur&&this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,i)=>t.from==e.viewports[i].from&&t.to==e.viewports[i].to))}}function qr(e,t){if(1==t.scale)return e;let i=t.toDOM(e.top),n=t.toDOM(e.bottom);return new Or(e.from,e.length,i,n-i,Array.isArray(e._content)?e._content.map((e=>qr(e,t))):e._content)}const Hr=U.define({combine:e=>e.join(" ")}),Vr=U.define({combine:e=>e.indexOf(!0)>-1}),Wr=Ge.newName(),Xr=Ge.newName(),Gr=Ge.newName(),Yr={"&light":"."+Xr,"&dark":"."+Gr};function Zr(e,t,i){return new Ge(t,{finish:t=>/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!i||!i[t])throw new RangeError(`Unsupported selector: ${t}`);return i[t]})):e+" "+t})}const Kr=Zr("."+Wr,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Yr),Jr={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},es=Xt.ie&&Xt.ie_version<=11;class ts{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new bt,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(Xt.ie&&Xt.ie_version<=11||Xt.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||Xt.chrome&&Xt.chrome_version<126||(this.editContext=new rs(e),e.state.facet(nn)&&(e.contentDOM.editContext=this.editContext.editContext)),es&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,i)=>t!=e[i])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,n=this.selectionRange;if(i.state.facet(nn)?i.root.activeElement!=this.dom:!ht(this.dom,n))return;let r=n.anchorNode&&i.docView.nearest(n.anchorNode);r&&r.ignoreEvent(e)?t||(this.selectionChanged=!1):(Xt.ie&&Xt.ie_version<=11||Xt.android&&Xt.chrome)&&!i.state.selection.main.empty&&n.focusNode&&ut(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=lt(e.root);if(!t)return!1;let i=Xt.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&function(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return ns(e,i)}let i=null;function n(e){e.preventDefault(),e.stopImmediatePropagation(),i=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",n,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",n,!0),i?ns(e,i):null}(this.view,t)||t;if(!i||this.selectionRange.eq(i))return!1;let n=ht(this.dom,i);return n&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&function(e,t){let i=t.focusNode,n=t.focusOffset;if(!i||t.anchorNode!=i||t.anchorOffset!=n)return!1;for(n=Math.min(n,gt(i));;)if(n){if(1!=i.nodeType)return!1;let e=i.childNodes[n-1];"false"==e.contentEditable?n--:(i=e,n=gt(i))}else{if(i==e)return!0;n=pt(i),i=i.parentNode}}(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),n&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,Jr),es&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),es&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var i;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;e&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&e.force&&Pt(this.dom,e.key,e.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(i=this.delayedAndroidKey)||void 0===i?void 0:i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let r of e){let e=this.readMutation(r);e&&(e.typeOver&&(n=!0),-1==t?({from:t,to:i}=e):(t=Math.min(e.from,t),i=Math.max(e.to,i)))}return{from:t,to:i,typeOver:n}}readChange(){let{from:e,to:t,typeOver:i}=this.processRecords(),n=this.selectionChanged&&ht(this.dom,this.selectionRange);if(e<0&&!n)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new jn(this.view,e,t,i);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let i=this.view.state,n=zn(this.view,t);return this.view.state==i&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),n}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let i=is(t,e.previousSibling||e.target.previousSibling,-1),n=is(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(nn)!=e.state.facet(nn)&&(e.view.contentDOM.editContext=e.state.facet(nn)?this.editContext.editContext:null))}destroy(){var e,t,i;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(i=this.resizeScroll)||void 0===i||i.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function is(e,t,i){for(;t;){let n=Et.get(t);if(n&&n.parent==e)return n;let r=t.parentNode;t=r!=e.dom?r:i>0?t.nextSibling:t.previousSibling}return null}function ns(e,t){let i=t.startContainer,n=t.startOffset,r=t.endContainer,s=t.endOffset,o=e.docView.domAtPos(e.state.selection.main.anchor);return ut(o.node,o.offset,r,s)&&([i,n,r,s]=[r,s,i,n]),{anchorNode:i,anchorOffset:n,focusNode:r,focusOffset:s}}class rs{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:i}=e.state.selection.main,n=this.toEditorPos(t.updateRangeStart),r=this.toEditorPos(t.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:t.updateRangeStart,editorBase:n,drifted:!1});let s={from:n,to:r,insert:m.of(t.text.split("\n"))};if(s.from==this.from&&i<this.from?s.from=i:s.to==this.to&&i>this.to&&(s.to=i),s.from!=s.to||s.insert.length){if(this.pendingContextChange=s,!e.state.readOnly){let i=this.to-this.from+(s.to-s.from+s.insert.length);Qn(e,s,j.single(this.toEditorPos(t.selectionStart,i),this.toEditorPos(t.selectionEnd,i)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))}},this.handlers.characterboundsupdate=i=>{let n=[],r=null;for(let t=this.toEditorPos(i.rangeStart),s=this.toEditorPos(i.rangeEnd);t<s;t++){let i=e.coordsForChar(t);r=i&&new DOMRect(i.left,i.top,i.right-i.left,i.bottom-i.top)||r||new DOMRect,n.push(r)}t.updateCharacterBounds(i.rangeStart,n)},this.handlers.textformatupdate=t=>{let i=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,n=e.underlineThickness;if("None"!=t&&"None"!=n){let r=this.toEditorPos(e.rangeStart),s=this.toEditorPos(e.rangeEnd);if(r<s){let e=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==n?1:2}px`;i.push(ci.mark({attributes:{style:e}}).range(r,s))}}}e.dispatch({effects:en.of(ci.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let e in this.handlers)t.addEventListener(e,this.handlers[e]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=lt(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,i=!1,n=this.pendingContextChange;return e.changes.iterChanges(((r,s,o,a,l)=>{if(i)return;let c=l.length-(s-r);if(n&&s>=n.to){if(n.from==r&&n.to==s&&n.insert.eq(l))return n=this.pendingContextChange=null,t+=c,void(this.to+=c);n=null,this.revertPending(e.state)}if(r+=t,(s+=t)<=this.from)this.from+=c,this.to+=c;else if(r<this.to){if(r<this.from||s>this.to||this.to-this.from+l.length>3e4)return void(i=!0);this.editContext.updateText(this.toContextPos(r),this.toContextPos(s),l.toString()),this.to+=c}t+=c})),n&&!i&&this.revertPending(e.state),!i}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some((e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),n=this.toContextPos(t.head);this.editContext.selectionStart==i&&this.editContext.selectionEnd==n||this.editContext.updateSelection(i,n)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class ss{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(e=>e.forEach((e=>i(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||function(e){for(;e;){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}(e.parent)||document,this.viewState=new Nr(e.state||Ce.create(e)),e.scrollTo&&e.scrollTo.is(Ji)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(sn).map((e=>new an(e)));for(let e of this.plugins)e.update(this);this.observer=new ts(this),this.inputState=new Un(this),this.inputState.ensureHandlers(this.plugins),this.docView=new bn(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...e){let t=1==e.length&&e[0]instanceof ge?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1,n=!1,r=this.state;for(let t of e){if(t.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=t.state}if(this.destroyed)return void(this.viewState.state=r);let s=this.hasFocus,o=0,a=null;e.some((e=>e.annotation(pr)))?(this.inputState.notifiedFocused=s,o=1):s!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=s,a=fr(r,s),a||(o=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(c=null)):this.observer.clear(),r.facet(Ce.phrases)!=this.state.facet(Ce.phrases))return this.setState(r);t=xn.create(this,r,e),t.flags|=o;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(h&&(h=h.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;h=new Ki(e.empty?e:j.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Ji)&&(h=e.value.clip(this.state))}this.viewState.update(t,h),this.bidiCache=ls.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),i=this.docView.update(t),this.state.facet(yn)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(i,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Hr)!=t.state.facet(Hr)&&(this.viewState.mustMeasureContent=!0),(i||n||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),i&&this.docViewUpdate(),!t.empty)for(let e of this.state.facet(qi))try{e(t)}catch(e){tn(this.state,e,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!zn(this,c)&&l.force&&Pt(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Nr(e),this.plugins=e.facet(sn).map((e=>new an(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new bn(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(sn),i=e.state.facet(sn);if(t!=i){let n=[];for(let r of i){let i=t.indexOf(r);if(i<0)n.push(new an(r));else{let t=this.plugins[i];t.mustUpdate=e,n.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=n,this.pluginMap.clear()}else for(let t of this.plugins)t.mustUpdate=e;for(let e=0;e<this.plugins.length;e++)this.plugins[e].update(this);t!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(e){tn(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,i=this.scrollDOM,n=i.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:s}=this.viewState;Math.abs(n-this.viewState.scrollTop)>1&&(s=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(s<0)if(At(i))r=-1,s=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(n);r=e.from,s=e.top}this.updateState=1;let o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&o||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((e=>{try{return e.read(this)}catch(e){return tn(this.state,e),as}})),c=xn.create(this,this.state,[]),h=!1;c.flags|=o,t?t.flags|=o:t=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),h=this.docView.update(c),h&&this.docViewUpdate());for(let e=0;e<a.length;e++)if(l[e]!=as)try{let t=a[e];t.write&&t.write(l[e],this)}catch(e){tn(this.state,e)}if(h&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,s=-1;continue}{let e=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-s;if(e>1||e<-1){n+=e,i.scrollTop=n/this.scaleY,s=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let e of this.state.facet(qi))e(t)}get themeClasses(){return Wr+" "+(this.state.facet(Vr)?Gr:Xr)+" "+this.state.facet(Hr)}updateAttrs(){let e=cs(this,ln,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(nn)?"true":"false",class:"cm-content",style:`${Xt.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),cs(this,cn,t);let i=this.observer.ignore((()=>{let i=si(this.contentDOM,this.contentAttrs,t),n=si(this.dom,this.editorAttrs,e);return i||n}));return this.editorAttrs=e,this.contentAttrs=t,i}showAnnouncements(e){let t=!0;for(let i of e)for(let e of i.effects)e.is(ss.announce)&&(t&&(this.announceDOM.textContent=""),t=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=e.value)}mountStyles(){this.styleModules=this.state.facet(yn);let e=this.state.facet(ss.cspNonce);Ge.mount(this.root,this.styleModules.concat(Kr).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Ln(this,e,_n(this,e,t,i))}moveByGroup(e,t){return Ln(this,e,_n(this,e,t,(t=>function(e,t,i){let n=e.state.charCategorizer(t),r=n(i);return e=>{let t=n(e);return r==Se.Space&&(r=t),r==t}}(this,e.head,t))))}visualLineSide(e,t){let i=this.bidiSpans(e),n=this.textDirectionAt(e.from),r=i[t?i.length-1:0];return j.cursor(r.side(t,n)+e.from,r.forward(!t,n)?1:-1)}moveToLineBoundary(e,t,i=!0){return function(e,t,i,n){let r=En(e,t.head),s=n&&r.type==li.Text&&(e.lineWrapping||r.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>r.from?t.head-1:t.head):null;if(s){let t=e.dom.getBoundingClientRect(),n=e.textDirectionAt(r.from),o=e.posAtCoords({x:i==(n==wi.LTR)?t.right-1:t.left+1,y:(s.top+s.bottom)/2});if(null!=o)return j.cursor(o,i?-1:1)}return j.cursor(i?r.to:r.from,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return Ln(this,e,function(e,t,i,n){let r=t.head,s=i?1:-1;if(r==(i?e.state.doc.length:0))return j.cursor(r,t.assoc);let o,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(r,t.assoc||-1),h=e.documentTop;if(c)null==a&&(a=c.left-l.left),o=s<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(r);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(r-t.from))),o=(s<0?t.top:t.bottom)+h}let d=l.left+a,u=null!=n?n:e.viewState.heightOracle.textHeight>>1;for(let t=0;;t+=10){let i=o+(u+t)*s,n=$n(e,{x:d,y:i},!1,s);if(i<l.top||i>l.bottom||(s<0?n<r:n>r)){let t=e.docView.coordsForChar(n),r=!t||i<t.top?-1:1;return j.cursor(n,r,void 0,a)}}}(this,e,t,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),$n(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n);return yt(i,r[Mi.find(r,e-n.from,-1,t)].dir==wi.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Gi)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>os)return Bi(e.length);let t,i=this.textDirectionAt(e.from);for(let n of this.bidiCache)if(n.from==e.from&&n.dir==i&&(n.fresh||Ei(n.isolates,t=fn(this,e))))return n.order;t||(t=fn(this,e));let n=function(e,t,i){if(!e)return[new Mi(0,0,t==Si?1:0)];if(t==Oi&&!i.length&&!$i.test(e))return Bi(e.length);if(i.length)for(;e.length>_i.length;)_i[_i.length]=256;let n=[],r=t==Oi?0:1;return Li(e,r,r,i,0,e.length,n),n}(e.text,i,t);return this.bidiCache.push(new ls(e.from,e.to,i,t,!0,n)),n}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Xt.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{St(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ji.of(new Ki("number"==typeof e?j.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return Ji.of(new Ki(j.cursor(i.from),"start","start",i.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return on.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return on.define((()=>({})),{eventObservers:e})}static theme(e,t){let i=Ge.newName(),n=[Hr.of(i),yn.of(Zr(`.${i}`,e))];return t&&t.dark&&n.push(Vr.of(!0)),n}static baseTheme(e){return K.lowest(yn.of(Zr("."+Wr,e,Yr)))}static findFromDOM(e){var t;let i=e.querySelector(".cm-content"),n=i&&Et.get(i)||Et.get(e);return(null===(t=null==n?void 0:n.rootView)||void 0===t?void 0:t.view)||null}}ss.styleModule=yn,ss.inputHandler=Hi,ss.clipboardInputFilter=Wi,ss.clipboardOutputFilter=Xi,ss.scrollHandler=Zi,ss.focusChangeEffect=Vi,ss.perLineTextDirection=Gi,ss.exceptionSink=Ui,ss.updateListener=qi,ss.editable=nn,ss.mouseSelectionStyle=Qi,ss.dragMovesSelection=zi,ss.clickAddsSelectionRange=ji,ss.decorations=hn,ss.outerDecorations=dn,ss.atomicRanges=un,ss.bidiIsolatedRanges=pn,ss.scrollMargins=mn,ss.darkTheme=Vr,ss.cspNonce=U.define({combine:e=>e.length?e[0]:""}),ss.contentAttributes=cn,ss.editorAttributes=ln,ss.lineWrapping=ss.contentAttributes.of({class:"cm-lineWrapping"}),ss.announce=me.define();const os=4096,as={};class ls{constructor(e,t,i,n,r,s){this.from=e,this.to=t,this.dir=i,this.isolates=n,this.fresh=r,this.order=s}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let i=[],n=e.length?e[e.length-1].dir:wi.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let s=e[r];s.dir!=n||t.touchesRange(s.from,s.to)||i.push(new ls(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.isolates,!1,s.order))}return i}}function cs(e,t,i){for(let n=e.state.facet(t),r=n.length-1;r>=0;r--){let t=n[r],s="function"==typeof t?t(e):t;s&&ii(s,i)}return i}const hs=Xt.mac?"mac":Xt.windows?"win":Xt.linux?"linux":"key";function ds(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const us=K.default(ss.domEventHandlers({keydown:(e,t)=>xs(ms(t.state),e,t,"editor")})),ps=U.define({enables:us}),fs=new WeakMap;function ms(e){let t=e.facet(ps),i=fs.get(t);return i||fs.set(t,i=function(e,t=hs){let i=Object.create(null),n=Object.create(null),r=(e,t)=>{let i=n[e];if(null==i)n[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,n,s,o,a)=>{var l,c;let h=i[e]||(i[e]=Object.create(null)),d=n.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let n,r,s,o,a=i[i.length-1];"Space"==a&&(a=" ");for(let e=0;e<i.length-1;++e){const a=i[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))n=!0;else if(/^(c|ctrl|control)$/i.test(a))r=!0;else if(/^s(hift)?$/i.test(a))s=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==t?o=!0:r=!0}}return n&&(a="Alt-"+a),r&&(a="Ctrl-"+a),o&&(a="Meta-"+a),s&&(a="Shift-"+a),a}(e,t)));for(let t=1;t<d.length;t++){let i=d.slice(0,t).join(" ");r(i,!0),h[i]||(h[i]={preventDefault:!0,stopPropagation:!1,run:[t=>{let n=gs={view:t,prefix:i,scope:e};return setTimeout((()=>{gs==n&&(gs=null)}),ys),!0}]})}let u=d.join(" ");r(u,!1);let p=h[u]||(h[u]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=h._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});s&&p.run.push(s),o&&(p.preventDefault=!0),a&&(p.stopPropagation=!0)};for(let n of e){let e=n.scope?n.scope.split(" "):["editor"];if(n.any)for(let t of e){let e=i[t]||(i[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=n;for(let t in e)e[t].run.push((e=>r(e,vs)))}let r=n[t]||n.key;if(r)for(let t of e)s(t,r,n.run,n.preventDefault,n.stopPropagation),n.shift&&s(t,"Shift-"+r,n.shift,n.preventDefault,n.stopPropagation)}return i}(t.reduce(((e,t)=>e.concat(t)),[]))),i}let gs=null;const ys=4e3;let vs=null;function xs(e,t,i,n){vs=t;let r=function(e){var t=!(st&&(e.ctrlKey||e.altKey||e.metaKey)||(tt||rt)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?Je:Ke)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=I(C(r,0))==r.length&&" "!=r,o="",a=!1,l=!1,c=!1;gs&&gs.view==i&&gs.scope==n&&(o=gs.prefix+" ",Xn.indexOf(t.keyCode)<0&&(l=!0,gs=null));let h,d,u=new Set,p=e=>{if(e){for(let t of e.run)if(!u.has(t)&&(u.add(t),t(i)))return e.stopPropagation&&(c=!0),!0;e.preventDefault&&(e.stopPropagation&&(c=!0),l=!0)}return!1},f=e[n];return f&&(p(f[o+ds(r,t,!s)])?a=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(Xt.windows&&t.ctrlKey&&t.altKey)&&(h=Ke[t.keyCode])&&h!=r?(p(f[o+ds(h,t,!0)])||t.shiftKey&&(d=Je[t.keyCode])!=r&&d!=h&&p(f[o+ds(d,t,!1)]))&&(a=!0):s&&t.shiftKey&&p(f[o+ds(r,t,!0)])&&(a=!0),!a&&p(f._any)&&(a=!0)),l&&(a=!0),a&&c&&t.stopPropagation(),vs=null,a}class bs{constructor(e,t,i,n,r){this.className=e,this.left=t,this.top=i,this.width=n,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className==this.className&&(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",null!=this.width&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,i){if(i.empty){let n=e.coordsAtPos(i.head,i.assoc||1);if(!n)return[];let r=ws(e);return[new bs(t,n.left-r.left,n.top-r.top,null,n.bottom-n.top)]}return function(e,t,i){if(i.to<=e.viewport.from||i.from>=e.viewport.to)return[];let n=Math.max(i.from,e.viewport.from),r=Math.min(i.to,e.viewport.to),s=e.textDirection==wi.LTR,o=e.contentDOM,a=o.getBoundingClientRect(),l=ws(e),c=o.querySelector(".cm-line"),h=c&&window.getComputedStyle(c),d=a.left+(h?parseInt(h.paddingLeft)+Math.min(0,parseInt(h.textIndent)):0),u=a.right-(h?parseInt(h.paddingRight):0),p=En(e,n),f=En(e,r),m=p.type==li.Text?p:null,g=f.type==li.Text?f:null;if(m&&(e.lineWrapping||p.widgetLineBreaks)&&(m=Os(e,n,1,m)),g&&(e.lineWrapping||f.widgetLineBreaks)&&(g=Os(e,r,-1,g)),m&&g&&m.from==g.from&&m.to==g.to)return v(x(i.from,i.to,m));{let t=m?x(i.from,null,m):b(p,!1),n=g?x(null,i.to,g):b(f,!0),r=[];return(m||p).to<(g||f).from-(m&&g?1:0)||p.widgetLineBreaks>1&&t.bottom+e.defaultLineHeight/2<n.top?r.push(y(d,t.bottom,u,n.top)):t.bottom<n.top&&e.elementAtHeight((t.bottom+n.top)/2).type==li.Text&&(t.bottom=n.top=(t.bottom+n.top)/2),v(t).concat(r).concat(v(n))}function y(e,i,n,r){return new bs(t,e-l.left,i-l.top,n-e,r-i)}function v({top:e,bottom:t,horizontal:i}){let n=[];for(let r=0;r<i.length;r+=2)n.push(y(i[r],e,i[r+1],t));return n}function x(t,i,n){let r=1e9,o=-1e9,a=[];function l(t,i,l,c,h){let p=e.coordsAtPos(t,t==n.to?-2:2),f=e.coordsAtPos(l,l==n.from?2:-2);p&&f&&(r=Math.min(p.top,f.top,r),o=Math.max(p.bottom,f.bottom,o),h==wi.LTR?a.push(s&&i?d:p.left,s&&c?u:f.right):a.push(!s&&c?d:f.left,!s&&i?u:p.right))}let c=null!=t?t:n.from,h=null!=i?i:n.to;for(let n of e.visibleRanges)if(n.to>c&&n.from<h)for(let r=Math.max(n.from,c),s=Math.min(n.to,h);;){let n=e.state.doc.lineAt(r);for(let o of e.bidiSpans(n)){let e=o.from+n.from,a=o.to+n.from;if(e>=s)break;a>r&&l(Math.max(e,r),null==t&&e<=c,Math.min(a,s),null==i&&a>=h,o.dir)}if(r=n.to+1,r>=s)break}return 0==a.length&&l(c,null==t,h,null==i,e.textDirection),{top:r,bottom:o,horizontal:a}}function b(e,t){let i=a.top+(t?e.top:e.bottom);return{top:i,bottom:i,horizontal:[]}}}(e,t,i)}}function ws(e){let t=e.scrollDOM.getBoundingClientRect();return{left:(e.textDirection==wi.LTR?t.left:t.right-e.scrollDOM.clientWidth*e.scaleX)-e.scrollDOM.scrollLeft*e.scaleX,top:t.top-e.scrollDOM.scrollTop*e.scaleY}}function Os(e,t,i,n){let r=e.coordsAtPos(t,2*i);if(!r)return n;let s=e.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,a=e.posAtCoords({x:s.left+1,y:o}),l=e.posAtCoords({x:s.right-1,y:o});return null==a||null==l?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}class Ss{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(ks)!=e.state.facet(ks)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){!1!==this.layer.updateOnDocViewUpdate&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,i=e.facet(ks);for(;t<i.length&&i[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;e==this.scaleX&&t==this.scaleY||(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some(((e,t)=>{return i=e,n=this.drawn[t],!(i.constructor==n.constructor&&i.eq(n));var i,n}))){let t=this.dom.firstChild,i=0;for(let n of e)n.update&&t&&n.constructor&&this.drawn[i].constructor&&n.update(t,this.drawn[i])?(t=t.nextSibling,i++):this.dom.insertBefore(n.draw(),t);for(;t;){let e=t.nextSibling;t.remove(),t=e}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const ks=U.define();function Ps(e){return[on.define((t=>new Ss(t,e))),ks.of(e)]}const Cs=!(Xt.ios&&Xt.webkit&&Xt.webkit_version<534),As=U.define({combine:e=>Ae(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Is(e={}){return[As.of(e),$s,Es,Ds,Yi.of(!0)]}function Ts(e){return e.startState.facet(As)!=e.state.facet(As)}const $s=Ps({above:!0,markers(e){let{state:t}=e,i=t.facet(As),n=[];for(let r of t.selection.ranges){let s=r==t.selection.main;if(r.empty?!s||Cs:i.drawRangeCursor){let t=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",i=r.empty?r:j.cursor(r.head,r.head>r.anchor?-1:1);for(let r of bs.forRange(e,t,i))n.push(r)}}return n},update(e,t){e.transactions.some((e=>e.selection))&&(t.style.animationName="cm-blink"==t.style.animationName?"cm-blink2":"cm-blink");let i=Ts(e);return i&&Ms(e.state,t),e.docChanged||e.selectionSet||i},mount(e,t){Ms(t.state,e)},class:"cm-cursorLayer"});function Ms(e,t){t.style.animationDuration=e.facet(As).cursorBlinkRate+"ms"}const Es=Ps({above:!1,markers:e=>e.state.selection.ranges.map((t=>t.empty?[]:bs.forRange(e,"cm-selectionBackground",t))).reduce(((e,t)=>e.concat(t))),update:(e,t)=>e.docChanged||e.selectionSet||e.viewportChanged||Ts(e),class:"cm-selectionLayer"}),_s={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Cs&&(_s[".cm-line"].caretColor=_s[".cm-content"].caretColor="transparent !important");const Ds=K.highest(ss.theme(_s)),Ls=me.define({map:(e,t)=>null==e?null:t.mapPos(e)}),Bs=Y.define({create:()=>null,update:(e,t)=>(null!=e&&(e=t.changes.mapPos(e)),t.effects.reduce(((e,t)=>t.is(Ls)?t.value:e),e))}),Rs=on.fromClass(class{constructor(e){this.view=e,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(e){var t;let i=e.state.field(Bs);null==i?null!=this.cursor&&(null===(t=this.cursor)||void 0===t||t.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(e.startState.field(Bs)!=i||e.docChanged||e.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:e}=this,t=e.state.field(Bs),i=null!=t&&e.coordsAtPos(t);if(!i)return null;let n=e.scrollDOM.getBoundingClientRect();return{left:i.left-n.left+e.scrollDOM.scrollLeft*e.scaleX,top:i.top-n.top+e.scrollDOM.scrollTop*e.scaleY,height:i.bottom-i.top}}drawCursor(e){if(this.cursor){let{scaleX:t,scaleY:i}=this.view;e?(this.cursor.style.left=e.left/t+"px",this.cursor.style.top=e.top/i+"px",this.cursor.style.height=e.height/i+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(e){this.view.state.field(Bs)!=e&&this.view.dispatch({effects:Ls.of(e)})}},{eventObservers:{dragover(e){this.setDropPos(this.view.posAtCoords({x:e.clientX,y:e.clientY}))},dragleave(e){e.target!=this.view.contentDOM&&this.view.contentDOM.contains(e.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Ns(e,t,i,n,r){t.lastIndex=0;for(let s,o=e.iterRange(i,n),a=i;!o.next().done;a+=o.value.length)if(!o.lineBreak)for(;s=t.exec(o.value);)r(a+s.index,s)}class Fs{constructor(e){const{regexp:t,decoration:i,decorate:n,boundary:r,maxLength:s=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,n)this.addMatch=(e,t,i,r)=>n(r,i,i+e[0].length,e,t);else if("function"==typeof i)this.addMatch=(e,t,n,r)=>{let s=i(e,t,n);s&&r(n,n+e[0].length,s)};else{if(!i)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(e,t,n,r)=>r(n,n+e[0].length,i)}this.boundary=r,this.maxLength=s}createDeco(e){let t=new _e,i=t.add.bind(t);for(let{from:t,to:n}of function(e,t){let i=e.visibleRanges;if(1==i.length&&i[0].from==e.viewport.from&&i[0].to==e.viewport.to)return i;let n=[];for(let{from:r,to:s}of i)r=Math.max(e.state.doc.lineAt(r).from,r-t),s=Math.min(e.state.doc.lineAt(s).to,s+t),n.length&&n[n.length-1].to>=r?n[n.length-1].to=s:n.push({from:r,to:s});return n}(e,this.maxLength))Ns(e.state.doc,this.regexp,t,n,((t,n)=>this.addMatch(n,e,t,i)));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges(((t,r,s,o)=>{o>=e.view.viewport.from&&s<=e.view.viewport.to&&(i=Math.min(s,i),n=Math.max(o,n))})),e.viewportMoved||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let r of e.visibleRanges){let s=Math.max(r.from,i),o=Math.min(r.to,n);if(o>s){let i=e.state.doc.lineAt(s),n=i.to<o?e.state.doc.lineAt(o):i,a=Math.max(r.from,i.from),l=Math.min(r.to,n.to);if(this.boundary){for(;s>i.from;s--)if(this.boundary.test(i.text[s-1-i.from])){a=s;break}for(;o<n.to;o++)if(this.boundary.test(n.text[o-n.from])){l=o;break}}let c,h=[],d=(e,t,i)=>h.push(i.range(e,t));if(i==n)for(this.regexp.lastIndex=a-i.from;(c=this.regexp.exec(i.text))&&c.index<l-i.from;)this.addMatch(c,e,c.index+i.from,d);else Ns(e.state.doc,this.regexp,a,l,((t,i)=>this.addMatch(i,e,t,d)));t=t.update({filterFrom:a,filterTo:l,filter:(e,t)=>e<a||t>l,add:h})}}return t}}const js=null!=/x/.unicode?"gu":"g",zs=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",js),Qs={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Us=null;const qs=U.define({combine(e){let t=Ae(e,{render:null,specialChars:zs,addSpecialChars:null});return(t.replaceTabs=!function(){var e;if(null==Us&&"undefined"!=typeof document&&document.body){let t=document.body.style;Us=null!=(null!==(e=t.tabSize)&&void 0!==e?e:t.MozTabSize)}return Us||!1}())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,js)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,js)),t}});function Hs(e={}){return[qs.of(e),Vs||(Vs=on.fromClass(class{constructor(e){this.view=e,this.decorations=ci.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(e.state.facet(qs)),this.decorations=this.decorator.createDeco(e)}makeDecorator(e){return new Fs({regexp:e.specialChars,decoration:(t,i,n)=>{let{doc:r}=i.state,s=C(t[0],0);if(9==s){let e=r.lineAt(n),t=i.state.tabSize,s=qe(e.text,t,n-e.from);return ci.replace({widget:new Xs((t-s%t)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=ci.replace({widget:new Ws(e,s)}))},boundary:e.replaceTabs?void 0:/[^]/})}update(e){let t=e.state.facet(qs);e.startState.facet(qs)!=t?(this.decorator=this.makeDecorator(t),this.decorations=this.decorator.createDeco(e.view)):this.decorations=this.decorator.updateDeco(e,this.decorations)}},{decorations:e=>e.decorations}))]}let Vs=null;class Ws extends ai{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=function(e){return e>=32?"•":10==e?"␤":String.fromCharCode(9216+e)}(this.code),i=e.state.phrase("Control character")+" "+(Qs[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let r=document.createElement("span");return r.textContent=t,r.title=i,r.setAttribute("aria-label",i),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class Xs extends ai{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Gs=ci.line({class:"cm-activeLine"}),Ys=on.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let n of e.state.selection.ranges){let r=e.lineBlockAt(n.head);r.from>t&&(i.push(Gs.range(r.from)),t=r.from)}return ci.set(i)}},{decorations:e=>e.decorations}),Zs=2e3;function Ks(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),n=e.state.doc.lineAt(i),r=i-n.from,s=r>Zs?-1:r==n.length?function(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):qe(n.text,e.state.tabSize,i-n.from);return{line:n.number,col:s,off:r}}function Js(e){let t=(null==e?void 0:e.eventFilter)||(e=>e.altKey&&0==e.button);return ss.mouseSelectionStyle.of(((e,i)=>t(i)?function(e,t){let i=Ks(e,t),n=e.state.selection;return i?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.startState.doc.line(i.line).from),r=e.state.doc.lineAt(t);i={line:r.number,col:i.col,off:Math.min(i.off,r.length)},n=n.map(e.changes)}},get(t,r,s){let o=Ks(e,t);if(!o)return n;let a=function(e,t,i){let n=Math.min(t.line,i.line),r=Math.max(t.line,i.line),s=[];if(t.off>Zs||i.off>Zs||t.col<0||i.col<0){let o=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let t=n;t<=r;t++){let i=e.doc.line(t);i.length<=a&&s.push(j.range(i.from+o,i.to+a))}}else{let o=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let t=n;t<=r;t++){let i=e.doc.line(t),n=He(i.text,o,e.tabSize,!0);if(n<0)s.push(j.cursor(i.to));else{let t=He(i.text,a,e.tabSize);s.push(j.range(i.from+n,i.from+t))}}}return s}(e.state,i,o);return a.length?s?j.create(a.concat(n.ranges)):j.create(a):n}}:null}(e,i):null))}const eo={Alt:[18,e=>!!e.altKey],Control:[17,e=>!!e.ctrlKey],Shift:[16,e=>!!e.shiftKey],Meta:[91,e=>!!e.metaKey]},to={style:"cursor: crosshair"};function io(e={}){let[t,i]=eo[e.key||"Alt"],n=on.fromClass(class{constructor(e){this.view=e,this.isDown=!1}set(e){this.isDown!=e&&(this.isDown=e,this.view.update([]))}},{eventObservers:{keydown(e){this.set(e.keyCode==t||i(e))},keyup(e){e.keyCode!=t&&i(e)||this.set(!1)},mousemove(e){this.set(i(e))}}});return[n,ss.contentAttributes.of((e=>{var t;return(null===(t=e.plugin(n))||void 0===t?void 0:t.isDown)?to:null}))]}const no="-10000px";class ro{constructor(e,t,i,n){this.facet=t,this.createTooltipView=i,this.removeTooltipView=n,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let r=null;this.tooltipViews=this.tooltips.map((e=>r=i(e,r)))}update(e,t){var i;let n=e.state.facet(this.facet),r=n.filter((e=>e));if(n===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let s=[],o=t?[]:null;for(let i=0;i<r.length;i++){let n=r[i],a=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(a=e)}if(a<0)s[i]=this.createTooltipView(n,i?s[i-1]:null),o&&(o[i]=!!n.above);else{let n=s[i]=this.tooltipViews[a];o&&(o[i]=t[a]),n.update&&n.update(e)}}}for(let e of this.tooltipViews)s.indexOf(e)<0&&(this.removeTooltipView(e),null===(i=e.destroy)||void 0===i||i.call(e));return t&&(o.forEach(((e,i)=>t[i]=e)),t.length=o.length),this.input=n,this.tooltips=r,this.tooltipViews=s,!0}}function so(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const oo=U.define({combine:e=>{var t,i,n;return{position:Xt.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(i=e.find((e=>e.parent)))||void 0===i?void 0:i.parent)||null,tooltipSpace:(null===(n=e.find((e=>e.tooltipSpace)))||void 0===n?void 0:n.tooltipSpace)||so}}}),ao=new WeakMap,lo=on.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(oo);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new ro(e,po,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let i=t||e.geometryChanged,n=e.state.facet(oo);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;i=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);i=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);i&&this.maybeMeasure()}createTooltip(e,t){let i=e.create(this.view),n=t?t.dom:null;if(i.dom.classList.add("cm-tooltip"),e.arrow&&!i.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",i.dom.appendChild(e)}return i.dom.style.position=this.position,i.dom.style.top=no,i.dom.style.left="0px",this.container.insertBefore(i.dom,n),i.mount&&i.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(i.dom),i}destroy(){var e,t,i;this.view.win.removeEventListener("resize",this.measureSoon);for(let t of this.manager.tooltipViews)t.dom.remove(),null===(e=t.destroy)||void 0===e||e.call(t);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(i=this.intersectionObserver)||void 0===i||i.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,i=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(Xt.gecko)i=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==no&&"0px"==e.style.left){let t=e.getBoundingClientRect();i=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(i||"absolute"==this.position)if(this.parent){let i=this.parent.getBoundingClientRect();i.width&&i.height&&(e=i.width/this.parent.offsetWidth,t=i.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),r=gn(this.view);return{visible:{left:n.left+r.left,top:n.top+r.top,right:n.right-r.right,bottom:n.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((e,t)=>{let i=this.manager.tooltipViews[t];return i.getCoords?i.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(oo).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:i}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:i,space:n,scaleX:r,scaleY:s}=e,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:h}=c,d=e.pos[a],u=e.size[a];if(!d||!1!==l.clip&&(d.bottom<=Math.max(i.top,n.top)||d.top>=Math.min(i.bottom,n.bottom)||d.right<Math.max(i.left,n.left)-.1||d.left>Math.min(i.right,n.right)+.1)){h.style.top=no;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=p?7:0,m=u.right-u.left,g=null!==(t=ao.get(c))&&void 0!==t?t:u.bottom-u.top,y=c.offset||uo,v=this.view.textDirection==wi.LTR,x=u.width>n.right-n.left?v?n.left:n.right-u.width:v?Math.max(n.left,Math.min(d.left-(p?14:0)+y.x,n.right-m)):Math.min(Math.max(n.left,d.left-m+(p?14:0)-y.x),n.right-m),b=this.above[a];!l.strictSide&&(b?d.top-g-f-y.y<n.top:d.bottom+g+f+y.y>n.bottom)&&b==n.bottom-d.bottom>d.top-n.top&&(b=this.above[a]=!b);let w=(b?d.top-n.top:n.bottom-d.bottom)-f;if(w<g&&!1!==c.resize){if(w<this.view.defaultLineHeight){h.style.top=no;continue}ao.set(c,g),h.style.height=(g=w)/s+"px"}else h.style.height&&(h.style.height="");let O=b?d.top-g-f-y.y:d.bottom+f+y.y,S=x+m;if(!0!==c.overlap)for(let e of o)e.left<S&&e.right>x&&e.top<O+g&&e.bottom>O&&(O=b?e.top-g-2-f:e.bottom+f+2);if("absolute"==this.position?(h.style.top=(O-e.parent.top)/s+"px",co(h,(x-e.parent.left)/r)):(h.style.top=O/s+"px",co(h,x/r)),p){let e=d.left+(v?y.x:-y.x)-(x+14-7);p.style.left=e/r+"px"}!0!==c.overlap&&o.push({left:x,top:O,right:S,bottom:O+g}),h.classList.toggle("cm-tooltip-above",b),h.classList.toggle("cm-tooltip-below",!b),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=no}},{eventObservers:{scroll(){this.maybeMeasure()}}});function co(e,t){let i=parseInt(e.style.left,10);(isNaN(i)||Math.abs(t-i)>1)&&(e.style.left=t+"px")}const ho=ss.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),uo={x:0,y:0},po=U.define({enables:[lo,ho]}),fo=U.define({combine:e=>e.reduce(((e,t)=>e.concat(t)),[])});class mo{static create(e){return new mo(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new ro(e,fo,((e,t)=>this.createHostedView(e,t)),(e=>e.dom.remove()))}createHostedView(e,t){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let i of this.manager.tooltipViews){let n=i[e];if(void 0!==n)if(void 0===t)t=n;else if(t!==n)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const go=po.compute([fo],(e=>{let t=e.facet(fo);return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.map((e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:mo.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class yo{constructor(e,t,i,n,r){this.view=e,this.source=t,this.field=i,this.setHover=n,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,i=e.docView.nearest(t.target);if(!i)return;let n,r=1;if(i instanceof Zt)n=i.posAtStart;else{if(n=e.posAtCoords(t),null==n)return;let i=e.coordsAtPos(n);if(!i||t.y<i.top||t.y>i.bottom||t.x<i.left-e.defaultCharacterWidth||t.x>i.right+e.defaultCharacterWidth)return;let s=e.bidiSpans(e.state.doc.lineAt(n)).find((e=>e.from<=n&&e.to>=n)),o=s&&s.dir==wi.RTL?-1:1;r=t.x<i.left?-o:o}let s=this.source(e,n,r);if(null==s?void 0:s.then){let t=this.pending={pos:n};s.then((i=>{this.pending==t&&(this.pending=null,!i||Array.isArray(i)&&!i.length||e.dispatch({effects:this.setHover.of(Array.isArray(i)?i:[i])}))}),(t=>tn(e.state,t,"hover tooltip")))}else!s||Array.isArray(s)&&!s.length||e.dispatch({effects:this.setHover.of(Array.isArray(s)?s:[s])})}get tooltip(){let e=this.view.plugin(lo),t=e?e.manager.tooltips.findIndex((e=>e.create==mo.create)):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:r}=this;if(n.length&&r&&!function(e,t){let i,{left:n,right:r,top:s,bottom:o}=e.getBoundingClientRect();if(i=e.querySelector(".cm-tooltip-arrow")){let e=i.getBoundingClientRect();s=Math.min(e.top,s),o=Math.max(e.bottom,o)}return t.clientX>=n-vo&&t.clientX<=r+vo&&t.clientY>=s-vo&&t.clientY<=o+vo}(r.dom,e)||this.pending){let{pos:r}=n[0]||this.pending,s=null!==(i=null===(t=n[0])||void 0===t?void 0:t.end)&&void 0!==i?i:r;(r==s?this.view.posAtCoords(this.lastMove)==r:function(e,t,i,n,r,s){let o=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(o.left>n||o.right<n||o.top>r||Math.min(o.bottom,a)<r)return!1;let l=e.posAtCoords({x:n,y:r},!1);return l>=t&&l<=i}(this.view,r,s,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this;t&&t.dom.contains(e.relatedTarget)?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=i=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const vo=4;function xo(e,t={}){let i=me.define(),n=Y.define({create:()=>[],update(e,n){if(e.length&&(t.hideOnChange&&(n.docChanged||n.selection)?e=[]:t.hideOn&&(e=e.filter((e=>!t.hideOn(n,e)))),n.docChanged)){let t=[];for(let i of e){let e=n.changes.mapPos(i.pos,-1,$.TrackDel);if(null!=e){let r=Object.assign(Object.create(null),i);r.pos=e,null!=r.end&&(r.end=n.changes.mapPos(r.end)),t.push(r)}}e=t}for(let t of n.effects)t.is(i)&&(e=t.value),t.is(wo)&&(e=[]);return e},provide:e=>fo.from(e)});return{active:n,extension:[n,on.define((r=>new yo(r,e,n,i,t.hoverTime||300))),go]}}function bo(e,t){let i=e.plugin(lo);if(!i)return null;let n=i.manager.tooltips.indexOf(t);return n<0?null:i.manager.tooltipViews[n]}const wo=me.define(),Oo=U.define({combine(e){let t,i;for(let n of e)t=t||n.topContainer,i=i||n.bottomContainer;return{topContainer:t,bottomContainer:i}}});function So(e,t){let i=e.plugin(ko),n=i?i.specs.indexOf(t):-1;return n>-1?i.panels[n]:null}const ko=on.fromClass(class{constructor(e){this.input=e.state.facet(Ao),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(Oo);this.top=new Po(e,!0,t.topContainer),this.bottom=new Po(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}update(e){let t=e.state.facet(Oo);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new Po(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new Po(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(Ao);if(i!=this.input){let t=i.filter((e=>e)),n=[],r=[],s=[],o=[];for(let i of t){let t,a=this.specs.indexOf(i);a<0?(t=i(e.view),o.push(t)):(t=this.panels[a],t.update&&t.update(e)),n.push(t),(t.top?r:s).push(t)}this.specs=t,this.panels=n,this.top.sync(r),this.bottom.sync(s);for(let e of o)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>ss.scrollMargins.of((t=>{let i=t.plugin(e);return i&&{top:i.top.scrollMargin(),bottom:i.bottom.scrollMargin()}}))});class Po{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Co(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Co(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Co(e){let t=e.nextSibling;return e.remove(),t}const Ao=U.define({enables:ko});class Io extends Ie{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Io.prototype.elementClass="",Io.prototype.toDOM=void 0,Io.prototype.mapMode=$.TrackBefore,Io.prototype.startSide=Io.prototype.endSide=-1,Io.prototype.point=!0;const To=U.define(),$o=U.define(),Mo={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ee.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Eo=U.define();function _o(e){return[Lo(),Eo.of(Object.assign(Object.assign({},Mo),e))]}const Do=U.define({combine:e=>e.some((e=>e))});function Lo(e){let t=[Bo];return e&&!1===e.fixed&&t.push(Do.of(!0)),t}const Bo=on.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(Eo).map((t=>new jo(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(Do),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,i=e.view.viewport,n=Math.min(t.to,i.to)-Math.max(t.from,i.from);this.syncGutters(n<.8*(i.to-i.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(Do)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let i=Ee.iter(this.view.state.facet(To),this.view.viewport.from),n=[],r=this.gutters.map((e=>new Fo(e,this.view.viewport,-this.view.documentPadding.top)));for(let e of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(e.type)){let t=!0;for(let s of e.type)if(s.type==li.Text&&t){No(i,n,s.from);for(let e of r)e.line(this.view,s,n);t=!1}else if(s.widget)for(let e of r)e.widget(this.view,s)}else if(e.type==li.Text){No(i,n,e.from);for(let t of r)t.line(this.view,e,n)}else if(e.widget)for(let t of r)t.widget(this.view,e);for(let e of r)e.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(Eo),i=e.state.facet(Eo),n=e.docChanged||e.heightChanged||e.viewportChanged||!Ee.eq(e.startState.facet(To),e.state.facet(To),e.view.viewport.from,e.view.viewport.to);if(t==i)for(let t of this.gutters)t.update(e)&&(n=!0);else{n=!0;let r=[];for(let n of i){let i=t.indexOf(n);i<0?r.push(new jo(this.view,n)):(this.gutters[i].update(e),r.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove(),r.indexOf(e)<0&&e.destroy();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return n}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>ss.scrollMargins.of((t=>{let i=t.plugin(e);return i&&0!=i.gutters.length&&i.fixed?t.textDirection==wi.LTR?{left:i.dom.offsetWidth*t.scaleX}:{right:i.dom.offsetWidth*t.scaleX}:null}))});function Ro(e){return Array.isArray(e)?e:[e]}function No(e,t,i){for(;e.value&&e.from<=i;)e.from==i&&t.push(e.value),e.next()}class Fo{constructor(e,t,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Ee.iter(e.markers,t.from)}addElement(e,t,i){let{gutter:n}=this,r=(t.top-this.height)/e.scaleY,s=t.height/e.scaleY;if(this.i==n.elements.length){let t=new zo(e,s,r,i);n.elements.push(t),n.dom.appendChild(t.dom)}else n.elements[this.i].update(e,s,r,i);this.height=t.bottom,this.i++}line(e,t,i){let n=[];No(this.cursor,n,t.from),i.length&&(n=n.concat(i));let r=this.gutter.config.lineMarker(e,t,n);r&&n.unshift(r);let s=this.gutter;(0!=n.length||s.config.renderEmptyElements)&&this.addElement(e,t,n)}widget(e,t){let i=this.gutter.config.widgetMarker(e,t.widget,t),n=i?[i]:null;for(let i of e.state.facet($o)){let r=i(e,t.widget,t);r&&(n||(n=[])).push(r)}n&&this.addElement(e,t,n)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class jo{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in t.domEventHandlers)this.dom.addEventListener(i,(n=>{let r,s=n.target;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let e=s.getBoundingClientRect();r=(e.top+e.bottom)/2}else r=n.clientY;let o=e.lineBlockAtHeight(r-e.documentTop);t.domEventHandlers[i](e,o,n)&&n.preventDefault()}));this.markers=Ro(t.markers(e)),t.initialSpacer&&(this.spacer=new zo(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Ro(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let i=e.view.viewport;return!Ee.eq(this.markers,t,i.from,i.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class zo{constructor(e,t,i,n){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,i,n)}update(e,t,i,n){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0}(this.markers,n)||this.setMarkers(e,n)}setMarkers(e,t){let i="cm-gutterElement",n=this.dom.firstChild;for(let r=0,s=0;;){let o=s,a=r<t.length?t[r++]:null,l=!1;if(a){let e=a.elementClass;e&&(i+=" "+e);for(let e=s;e<this.markers.length;e++)if(this.markers[e].compare(a)){o=e,l=!0;break}}else o=this.markers.length;for(;s<o;){let e=this.markers[s++];if(e.toDOM){e.destroy(n);let t=n.nextSibling;n.remove(),n=t}}if(!a)break;a.toDOM&&(l?n=n.nextSibling:this.dom.insertBefore(a.toDOM(e),n)),l&&s++}this.dom.className=i,this.markers=t}destroy(){this.setMarkers(null,[])}}const Qo=U.define(),Uo=U.define(),qo=U.define({combine:e=>Ae(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let n=i[e],r=t[e];i[e]=n?(e,t,i)=>n(e,t,i)||r(e,t,i):r}return i}})});class Ho extends Io{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Vo(e,t){return e.state.facet(qo).formatNumber(t,e.state)}const Wo=Eo.compute([qo],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:e=>e.state.facet(Qo),lineMarker:(e,t,i)=>i.some((e=>e.toDOM))?null:new Ho(Vo(e,e.state.doc.lineAt(t.from).number)),widgetMarker:(e,t,i)=>{for(let n of e.state.facet(Uo)){let r=n(e,t,i);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(qo)!=e.state.facet(qo),initialSpacer:e=>new Ho(Vo(e,Go(e.state.doc.lines))),updateSpacer(e,t){let i=Vo(t.view,Go(t.view.state.doc.lines));return i==e.number?e:new Ho(i)},domEventHandlers:e.facet(qo).domEventHandlers})));function Xo(e={}){return[qo.of(e),Lo(),Wo]}function Go(e){let t=9;for(;t<e;)t=10*t+9;return t}const Yo=new class extends Io{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Zo=To.compute(["selection"],(e=>{let t=[],i=-1;for(let n of e.selection.ranges){let r=e.doc.lineAt(n.head).from;r>i&&(i=r,t.push(Yo.range(r)))}return Ee.of(t)})),Ko=1024;let Jo=0;class ea{constructor(e,t){this.from=e,this.to=t}}class ta{constructor(e={}){this.id=Jo++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=ra.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}ta.closedBy=new ta({deserialize:e=>e.split(" ")}),ta.openedBy=new ta({deserialize:e=>e.split(" ")}),ta.group=new ta({deserialize:e=>e.split(" ")}),ta.isolate=new ta({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),ta.contextHash=new ta({perNode:!0}),ta.lookAhead=new ta({perNode:!0}),ta.mounted=new ta({perNode:!0});class ia{constructor(e,t,i){this.tree=e,this.overlay=t,this.parser=i}static get(e){return e&&e.props&&e.props[ta.mounted.id]}}const na=Object.create(null);class ra{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):na,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new ra(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(n)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(ta.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return e=>{for(let i=e.prop(ta.group),n=-1;n<(i?i.length:0);n++){let r=t[n<0?e.name:i[n]];if(r)return r}}}}ra.none=new ra("",Object.create(null),0,8);class sa{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let t of e){let e=t(i);e&&(n||(n=Object.assign({},i.props)),n[e[0].id]=e[1])}t.push(n?new ra(i.name,n,i.id,i.flags):i)}return new sa(t)}}const oa=new WeakMap,aa=new WeakMap;var la;!function(e){e[e.ExcludeBuffers=1]="ExcludeBuffers",e[e.IncludeAnonymous=2]="IncludeAnonymous",e[e.IgnoreMounts=4]="IgnoreMounts",e[e.IgnoreOverlays=8]="IgnoreOverlays"}(la||(la={}));class ca{constructor(e,t,i,n,r){if(this.type=e,this.children=t,this.positions=i,this.length=n,this.props=null,r&&r.length){this.props=Object.create(null);for(let[e,t]of r)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=ia.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let e of this.children){let i=e.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Oa(this.topNode,e)}cursorAt(e,t=0,i=0){let n=oa.get(this)||this.topNode,r=new Oa(n);return r.moveTo(e,t),oa.set(this,r._tree),r}get topNode(){return new ma(this,0,0,null)}resolve(e,t=0){let i=pa(oa.get(this)||this.topNode,e,t,!1);return oa.set(this,i),i}resolveInner(e,t=0){let i=pa(aa.get(this)||this.topNode,e,t,!0);return aa.set(this,i),i}resolveStack(e,t=0){return function(e,t,i){let n=e.resolveInner(t,i),r=null;for(let e=n instanceof ma?n:n.context.parent;e;e=e.parent)if(e.index<0){let s=e.parent;(r||(r=[n])).push(s.resolve(t,i)),e=s}else{let s=ia.get(e.tree);if(s&&s.overlay&&s.overlay[0].from<=t&&s.overlay[s.overlay.length-1].to>=t){let o=new ma(s.tree,s.overlay[0].from+e.from,-1,e);(r||(r=[n])).push(pa(o,t,i,!1))}}return r?ba(r):n}(this,e,t)}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e,s=e.mode||0,o=(s&la.IncludeAnonymous)>0;for(let e=this.cursor(s|la.IncludeAnonymous);;){let s=!1;if(e.from<=r&&e.to>=n&&(!o&&e.type.isAnonymous||!1!==t(e))){if(e.firstChild())continue;s=!0}for(;s&&i&&(o||!e.type.isAnonymous)&&i(e),!e.nextSibling();){if(!e.parent())return;s=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ca(ra.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,i)=>new ca(this.type,e,t,i,this.propValues)),e.makeTree||((e,t,i)=>new ca(ra.none,e,t,i)))}static build(e){return function(e){var t;let{buffer:i,nodeSet:n,maxBufferLength:r=Ko,reused:s=[],minRepeatType:o=n.types.length}=e,a=Array.isArray(i)?new ha(i,i.length):i,l=n.types,c=0,h=0;function d(e,t,i,g,y,v){let{id:x,start:b,end:w,size:O}=a,S=h,k=c;for(;O<0;){if(a.next(),-1==O){let t=s[x];return i.push(t),void g.push(b-e)}if(-3==O)return void(c=x);if(-4==O)return void(h=x);throw new RangeError(`Unrecognized record size: ${O}`)}let P,C,A=l[x],I=b-e;if(w-b<=r&&(C=function(e,t){let i=a.fork(),n=0,s=0,l=0,c=i.end-r,h={size:0,start:0,skip:0};e:for(let r=i.pos-e;i.pos>r;){let e=i.size;if(i.id==t&&e>=0){h.size=n,h.start=s,h.skip=l,l+=4,n+=4,i.next();continue}let a=i.pos-e;if(e<0||a<r||i.start<c)break;let d=i.id>=o?4:0,u=i.start;for(i.next();i.pos>a;){if(i.size<0){if(-3!=i.size)break e;d+=4}else i.id>=o&&(d+=4);i.next()}s=u,n+=e,l+=d}return(t<0||n==e)&&(h.size=n,h.start=s,h.skip=l),h.size>4?h:void 0}(a.pos-t,y))){let t=new Uint16Array(C.size-C.skip),i=a.pos-C.size,r=t.length;for(;a.pos>i;)r=m(C.start,t,r);P=new da(t,w-C.start,n),I=C.start-e}else{let e=a.pos-O;a.next();let t=[],i=[],n=x>=o?x:-1,s=0,l=w;for(;a.pos>e;)n>=0&&a.id==n&&a.size>=0?(a.end<=l-r&&(p(t,i,b,s,a.end,l,n,S,k),s=t.length,l=a.end),a.next()):v>2500?u(b,e,t,i):d(b,e,t,i,n,v+1);if(n>=0&&s>0&&s<t.length&&p(t,i,b,s,b,l,n,S,k),t.reverse(),i.reverse(),n>-1&&s>0){let e=function(e,t){return(i,n,r)=>{let s,o,a=0,l=i.length-1;if(l>=0&&(s=i[l])instanceof ca){if(!l&&s.type==e&&s.length==r)return s;(o=s.prop(ta.lookAhead))&&(a=n[l]+s.length+o)}return f(e,i,n,r,a,t)}}(A,k);P=Ca(A,t,i,0,t.length,0,w-b,e,e)}else P=f(A,t,i,w-b,S-w,k)}i.push(P),g.push(I)}function u(e,t,i,s){let o=[],l=0,c=-1;for(;a.pos>t;){let{id:e,start:t,end:i,size:n}=a;if(n>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=i-r),o.push(e,t,i),l++,a.next()}}if(l){let t=new Uint16Array(4*l),r=o[o.length-2];for(let e=o.length-3,i=0;e>=0;e-=3)t[i++]=o[e],t[i++]=o[e+1]-r,t[i++]=o[e+2]-r,t[i++]=i;i.push(new da(t,o[2]-r,n)),s.push(r-e)}}function p(e,t,i,r,s,o,a,l,c){let h=[],d=[];for(;e.length>r;)h.push(e.pop()),d.push(t.pop()+i-s);e.push(f(n.types[a],h,d,o-s,l-o,c)),t.push(s-i)}function f(e,t,i,n,r,s,o){if(s){let e=[ta.contextHash,s];o=o?[e].concat(o):[e]}if(r>25){let e=[ta.lookAhead,r];o=o?[e].concat(o):[e]}return new ca(e,t,i,n,o)}function m(e,t,i){let{id:n,start:r,end:s,size:l}=a;if(a.next(),l>=0&&n<o){let o=i;if(l>4){let n=a.pos-(l-4);for(;a.pos>n;)i=m(e,t,i)}t[--i]=o,t[--i]=s-e,t[--i]=r-e,t[--i]=n}else-3==l?c=n:-4==l&&(h=n);return i}let g=[],y=[];for(;a.pos>0;)d(e.start||0,e.bufferStart||0,g,y,-1,0);let v=null!==(t=e.length)&&void 0!==t?t:g.length?y[0]+g[0].length:0;return new ca(l[e.topID],g.reverse(),y.reverse(),v)}(e)}}ca.empty=new ca(ra.none,[],[],0);class ha{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ha(this.buffer,this.index)}}class da{constructor(e,t,i){this.buffer=e,this.length=t,this.set=i}get type(){return ra.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),i==(e+=4))return r;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,i,n,r){let{buffer:s}=this,o=-1;for(let a=e;a!=t&&!(ua(r,n,s[a+1],s[a+2])&&(o=a,i>0));a=s[a+3]);return o}slice(e,t,i){let n=this.buffer,r=new Uint16Array(t-e),s=0;for(let o=e,a=0;o<t;){r[a++]=n[o++],r[a++]=n[o++]-i;let t=r[a++]=n[o++]-i;r[a++]=n[o++]-e,s=Math.max(s,t)}return new da(r,s,this.set)}}function ua(e,t,i,n){switch(e){case-2:return i<t;case-1:return n>=t&&i<t;case 0:return i<t&&n>t;case 1:return i<=t&&n>t;case 2:return n>t;case 4:return!0}}function pa(e,t,i,n){for(var r;e.from==e.to||(i<1?e.from>=t:e.from>t)||(i>-1?e.to<=t:e.to<t);){let t=!n&&e instanceof ma&&e.index<0?null:e.parent;if(!t)return e;e=t}let s=n?0:la.IgnoreOverlays;if(n)for(let n=e,o=n.parent;o;n=o,o=n.parent)n instanceof ma&&n.index<0&&(null===(r=o.enter(t,i,s))||void 0===r?void 0:r.from)!=n.from&&(e=o);for(;;){let n=e.enter(t,i,s);if(!n)return e;e=n}}class fa{cursor(e=0){return new Oa(this,e)}getChild(e,t=null,i=null){let n=ga(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return ga(this,e,t,i)}resolve(e,t=0){return pa(this,e,t,!1)}resolveInner(e,t=0){return pa(this,e,t,!0)}matchContext(e){return ya(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),i=this;for(;t;){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(i=t,t=e.prevSibling):t=e}return i}get node(){return this}get next(){return this.parent}}class ma extends fa{constructor(e,t,i,n){super(),this._tree=e,this.from=t,this.index=i,this._parent=n}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,i,n,r=0){for(let s=this;;){for(let{children:o,positions:a}=s._tree,l=t>0?o.length:-1;e!=l;e+=t){let l=o[e],c=a[e]+s.from;if(ua(n,i,c,c+l.length))if(l instanceof da){if(r&la.ExcludeBuffers)continue;let o=l.findChild(0,l.buffer.length,t,i-c,n);if(o>-1)return new xa(new va(s,l,e,c),null,o)}else if(r&la.IncludeAnonymous||!l.type.isAnonymous||Sa(l)){let o;if(!(r&la.IgnoreMounts)&&(o=ia.get(l))&&!o.overlay)return new ma(o.tree,c,e,s);let a=new ma(l,c,e,s);return r&la.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,i,n)}}if(r&la.IncludeAnonymous||!s.type.isAnonymous)return null;if(e=s.index>=0?s.index+t:t<0?-1:s._parent._tree.children.length,s=s._parent,!s)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,i=0){let n;if(!(i&la.IgnoreOverlays)&&(n=ia.get(this._tree))&&n.overlay){let i=e-this.from;for(let{from:e,to:r}of n.overlay)if((t>0?e<=i:e<i)&&(t<0?r>=i:r>i))return new ma(n.tree,n.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function ga(e,t,i,n){let r=e.cursor(),s=[];if(!r.firstChild())return s;if(null!=i)for(let e=!1;!e;)if(e=r.type.is(i),!r.nextSibling())return s;for(;;){if(null!=n&&r.type.is(n))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==n?s:[]}}function ya(e,t,i=t.length-1){for(let n=e;i>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(t[i]&&t[i]!=n.name)return!1;i--}}return!0}class va{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class xa extends fa{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,i){super(),this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,t,i){let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.context.start,i);return r<0?null:new xa(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,i=0){if(i&la.ExcludeBuffers)return null;let{buffer:n}=this.context,r=n.findChild(this.index+4,n.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new xa(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new xa(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new xa(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:i}=this.context,n=this.index+4,r=i.buffer[this.index+3];if(r>n){let s=i.buffer[this.index+1];e.push(i.slice(n,r,s)),t.push(0)}return new ca(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function ba(e){if(!e.length)return null;let t=0,i=e[0];for(let n=1;n<e.length;n++){let r=e[n];(r.from>i.from||r.to<i.to)&&(i=r,t=n)}let n=i instanceof ma&&i.index<0?null:i.parent,r=e.slice();return n?r[t]=n:r.splice(t,1),new wa(r,i)}class wa{constructor(e,t){this.heads=e,this.node=t}get next(){return ba(this.heads)}}class Oa{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ma)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof ma?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,i,this.mode));let{buffer:n}=this.buffer,r=n.findChild(this.index+4,n.buffer[this.index+3],e,t-this.buffer.start,i);return!(r<0)&&(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,i=this.mode){return this.buffer?!(i&la.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&la.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&la.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))if(t>-1)for(let n=t+e,r=e<0?-1:i._tree.children.length;n!=r;n+=e){let e=i._tree.children[n];if(this.mode&la.IncludeAnonymous||e instanceof da||!e.type.isAnonymous||Sa(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,i=r+1;break e}n=this.stack[--r]}for(let e=i;e<this.stack.length;e++)t=new xa(this.buffer,t,this.stack[e]);return this.bufferNode=new xa(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let i=0;;){let n=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){i++;continue}this.type.isAnonymous||(n=!0)}for(;;){if(n&&t&&t(this),n=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,n=!0}}}matchContext(e){if(!this.buffer)return ya(this.node.parent,e);let{buffer:t}=this.buffer,{types:i}=t.set;for(let n=e.length-1,r=this.stack.length-1;n>=0;r--){if(r<0)return ya(this._tree,e,n);let s=i[t.buffer[this.stack[r]]];if(!s.isAnonymous){if(e[n]&&e[n]!=s.name)return!1;n--}}return!0}}function Sa(e){return e.children.some((e=>e instanceof da||!e.type.isAnonymous||Sa(e)))}const ka=new WeakMap;function Pa(e,t){if(!e.isAnonymous||t instanceof da||t.type!=e)return 1;let i=ka.get(t);if(null==i){i=1;for(let n of t.children){if(n.type!=e||!(n instanceof ca)){i=1;break}i+=Pa(e,n)}ka.set(t,i)}return i}function Ca(e,t,i,n,r,s,o,a,l){let c=0;for(let i=n;i<r;i++)c+=Pa(e,t[i]);let h=Math.ceil(1.5*c/8),d=[],u=[];return function t(i,n,r,o,a){for(let c=r;c<o;){let r=c,p=n[c],f=Pa(e,i[c]);for(c++;c<o;c++){let t=Pa(e,i[c]);if(f+t>=h)break;f+=t}if(c==r+1){if(f>h){let e=i[r];t(e.children,e.positions,0,e.children.length,n[r]+a);continue}d.push(i[r])}else{let t=n[c-1]+i[c-1].length-p;d.push(Ca(e,i,n,r,c,p,t,null,l))}u.push(p+a-s)}}(t,i,n,r,0),(a||l)(d,u,o)}class Aa{constructor(e,t,i,n,r=!1,s=!1){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=(r?1:0)|(s?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],i=!1){let n=[new Aa(0,e.length,e,0,!1,i)];for(let i of t)i.to>e.length&&n.push(i);return n}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,s=e.length?e[0]:null;for(let o=0,a=0,l=0;;o++){let c=o<t.length?t[o]:null,h=c?c.fromA:1e9;if(h-a>=i)for(;s&&s.from<h;){let t=s;if(a>=t.from||h<=t.to||l){let e=Math.max(t.from,a)-l,i=Math.min(t.to,h)-l;t=e>=i?null:new Aa(e,i,t.tree,t.offset+l,o>0,!!c)}if(t&&n.push(t),s.to>h)break;s=r<e.length?e[r++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return n}}class Ia{startParse(e,t,i){return"string"==typeof e&&(e=new Ta(e)),i=i?i.length?i.map((e=>new ea(e.from,e.to))):[new ea(0,0)]:[new ea(0,e.length)],this.createParse(e,t||[],i)}parse(e,t,i){let n=this.startParse(e,t,i);for(;;){let e=n.advance();if(e)return e}}}class Ta{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new ta({perNode:!0});let $a=0;class Ma{constructor(e,t,i,n){this.name=e,this.set=t,this.base=i,this.modified=n,this.id=$a++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let i="string"==typeof e?e:"?";if(e instanceof Ma&&(t=e),null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let n=new Ma(i,[],null,[]);if(n.set.push(n),t)for(let e of t.set)n.set.push(e);return n}static defineModifier(e){let t=new _a(e);return e=>e.modified.indexOf(t)>-1?e:_a.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let Ea=0;class _a{constructor(e){this.name=e,this.instances=[],this.id=Ea++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>{return i.base==e&&(n=t,r=i.modified,n.length==r.length&&n.every(((e,t)=>e==r[t])));var n,r}));if(i)return i;let n=[],r=new Ma(e.name,n,e,t);for(let e of t)e.instances.push(r);let s=function(e){let t=[[]];for(let i=0;i<e.length;i++)for(let n=0,r=t.length;n<r;n++)t.push(t[n].concat(e[i]));return t.sort(((e,t)=>t.length-e.length))}(t);for(let t of e.set)if(!t.modified.length)for(let e of s)n.push(_a.get(t,e));return r}}function Da(e){let t=Object.create(null);for(let i in e){let n=e[i];Array.isArray(n)||(n=[n]);for(let e of i.split(" "))if(e){let i=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!n)throw new RangeError("Invalid path: "+e);if(i.push("*"==n[0]?"":'"'==n[0][0]?JSON.parse(n[0]):n[0]),t+=n[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=i.length-1,a=i[o];if(!a)throw new RangeError("Invalid path: "+e);let l=new Ba(n,r,o>0?i.slice(0,o):null);t[a]=l.sort(t[a])}}return La.add(t)}const La=new ta;class Ba{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Ra(e,t){let i=Object.create(null);for(let t of e)if(Array.isArray(t.tag))for(let e of t.tag)i[e.id]=t.class;else i[t.tag.id]=t.class;let{scope:n,all:r=null}=t||{};return{style:e=>{let t=r;for(let n of e)for(let e of n.set){let n=i[e.id];if(n){t=t?t+" "+n:n;break}}return t},scope:n}}function Na(e,t,i,n=0,r=e.length){let s=new Fa(n,Array.isArray(t)?t:[t],i);s.highlightRange(e.cursor(),n,r,"",s.highlighters),s.flush(r)}Ba.empty=new Ba([],2,null);class Fa{constructor(e,t,i){this.at=e,this.highlighters=t,this.span=i,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,i,n,r){let{type:s,from:o,to:a}=e;if(o>=i||a<=t)return;s.isTop&&(r=this.highlighters.filter((e=>!e.scope||e.scope(s))));let l=n,c=function(e){let t=e.type.prop(La);for(;t&&t.context&&!e.matchContext(t.context);)t=t.next;return t||null}(e)||Ba.empty,h=function(e,t){let i=null;for(let n of e){let e=n.style(t);e&&(i=i?i+" "+e:e)}return i}(r,c.tags);if(h&&(l&&(l+=" "),l+=h,1==c.mode&&(n+=(n?" ":"")+h)),this.startSpan(Math.max(t,o),l),c.opaque)return;let d=e.tree&&e.tree.prop(ta.mounted);if(d&&d.overlay){let s=e.node.enter(d.overlay[0].from+o,1),c=this.highlighters.filter((e=>!e.scope||e.scope(d.tree.type))),h=e.firstChild();for(let u=0,p=o;;u++){let f=u<d.overlay.length?d.overlay[u]:null,m=f?f.from+o:a,g=Math.max(t,p),y=Math.min(i,m);if(g<y&&h)for(;e.from<y&&(this.highlightRange(e,g,y,n,r),this.startSpan(Math.min(y,e.to),l),!(e.to>=m)&&e.nextSibling()););if(!f||m>i)break;p=f.to+o,p>t&&(this.highlightRange(s.cursor(),Math.max(t,f.from+o),Math.min(i,p),"",c),this.startSpan(Math.min(i,p),l))}h&&e.parent()}else if(e.firstChild()){d&&(n="");do{if(!(e.to<=t)){if(e.from>=i)break;this.highlightRange(e,t,i,n,r),this.startSpan(Math.min(i,e.to),l)}}while(e.nextSibling());e.parent()}}}const ja=Ma.define,za=ja(),Qa=ja(),Ua=ja(Qa),qa=ja(Qa),Ha=ja(),Va=ja(Ha),Wa=ja(Ha),Xa=ja(),Ga=ja(Xa),Ya=ja(),Za=ja(),Ka=ja(),Ja=ja(Ka),el=ja(),tl={comment:za,lineComment:ja(za),blockComment:ja(za),docComment:ja(za),name:Qa,variableName:ja(Qa),typeName:Ua,tagName:ja(Ua),propertyName:qa,attributeName:ja(qa),className:ja(Qa),labelName:ja(Qa),namespace:ja(Qa),macroName:ja(Qa),literal:Ha,string:Va,docString:ja(Va),character:ja(Va),attributeValue:ja(Va),number:Wa,integer:ja(Wa),float:ja(Wa),bool:ja(Ha),regexp:ja(Ha),escape:ja(Ha),color:ja(Ha),url:ja(Ha),keyword:Ya,self:ja(Ya),null:ja(Ya),atom:ja(Ya),unit:ja(Ya),modifier:ja(Ya),operatorKeyword:ja(Ya),controlKeyword:ja(Ya),definitionKeyword:ja(Ya),moduleKeyword:ja(Ya),operator:Za,derefOperator:ja(Za),arithmeticOperator:ja(Za),logicOperator:ja(Za),bitwiseOperator:ja(Za),compareOperator:ja(Za),updateOperator:ja(Za),definitionOperator:ja(Za),typeOperator:ja(Za),controlOperator:ja(Za),punctuation:Ka,separator:ja(Ka),bracket:Ja,angleBracket:ja(Ja),squareBracket:ja(Ja),paren:ja(Ja),brace:ja(Ja),content:Xa,heading:Ga,heading1:ja(Ga),heading2:ja(Ga),heading3:ja(Ga),heading4:ja(Ga),heading5:ja(Ga),heading6:ja(Ga),contentSeparator:ja(Xa),list:ja(Xa),quote:ja(Xa),emphasis:ja(Xa),strong:ja(Xa),link:ja(Xa),monospace:ja(Xa),strikethrough:ja(Xa),inserted:ja(),deleted:ja(),changed:ja(),invalid:ja(),meta:el,documentMeta:ja(el),annotation:ja(el),processingInstruction:ja(el),definition:Ma.defineModifier("definition"),constant:Ma.defineModifier("constant"),function:Ma.defineModifier("function"),standard:Ma.defineModifier("standard"),local:Ma.defineModifier("local"),special:Ma.defineModifier("special")};for(let e in tl){let t=tl[e];t instanceof Ma&&(t.name=e)}var il;Ra([{tag:tl.link,class:"tok-link"},{tag:tl.heading,class:"tok-heading"},{tag:tl.emphasis,class:"tok-emphasis"},{tag:tl.strong,class:"tok-strong"},{tag:tl.keyword,class:"tok-keyword"},{tag:tl.atom,class:"tok-atom"},{tag:tl.bool,class:"tok-bool"},{tag:tl.url,class:"tok-url"},{tag:tl.labelName,class:"tok-labelName"},{tag:tl.inserted,class:"tok-inserted"},{tag:tl.deleted,class:"tok-deleted"},{tag:tl.literal,class:"tok-literal"},{tag:tl.string,class:"tok-string"},{tag:tl.number,class:"tok-number"},{tag:[tl.regexp,tl.escape,tl.special(tl.string)],class:"tok-string2"},{tag:tl.variableName,class:"tok-variableName"},{tag:tl.local(tl.variableName),class:"tok-variableName tok-local"},{tag:tl.definition(tl.variableName),class:"tok-variableName tok-definition"},{tag:tl.special(tl.variableName),class:"tok-variableName2"},{tag:tl.definition(tl.propertyName),class:"tok-propertyName tok-definition"},{tag:tl.typeName,class:"tok-typeName"},{tag:tl.namespace,class:"tok-namespace"},{tag:tl.className,class:"tok-className"},{tag:tl.macroName,class:"tok-macroName"},{tag:tl.propertyName,class:"tok-propertyName"},{tag:tl.operator,class:"tok-operator"},{tag:tl.comment,class:"tok-comment"},{tag:tl.meta,class:"tok-meta"},{tag:tl.invalid,class:"tok-invalid"},{tag:tl.punctuation,class:"tok-punctuation"}]);const nl=new ta;const rl=new ta;class sl{constructor(e,t,i=[],n=""){this.data=e,this.name=n,Ce.prototype.hasOwnProperty("tree")||Object.defineProperty(Ce.prototype,"tree",{get(){return ll(this)}}),this.parser=t,this.extension=[yl.of(this),Ce.languageData.of(((e,t,i)=>{let n=ol(e,t,i),r=n.type.prop(nl);if(!r)return[];let s=e.facet(r),o=n.type.prop(rl);if(o){let r=n.resolve(t-n.from,i);for(let t of o)if(t.test(r,e)){let i=e.facet(t.facet);return"replace"==t.type?i:i.concat(s)}}return s}))].concat(i)}isActiveAt(e,t,i=-1){return ol(e,t,i).type.prop(nl)==this.data}findRegions(e){let t=e.facet(yl);if((null==t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let i=[],n=(e,t)=>{if(e.prop(nl)==this.data)return void i.push({from:t,to:t+e.length});let r=e.prop(ta.mounted);if(r){if(r.tree.prop(nl)==this.data){if(r.overlay)for(let e of r.overlay)i.push({from:e.from+t,to:e.to+t});else i.push({from:t,to:t+e.length});return}if(r.overlay){let e=i.length;if(n(r.tree,r.overlay[0].from+t),i.length>e)return}}for(let i=0;i<e.children.length;i++){let r=e.children[i];r instanceof ca&&n(r,e.positions[i]+t)}};return n(ll(e),0),i}get allowsNesting(){return!0}}function ol(e,t,i){let n=e.facet(yl),r=ll(e).topNode;if(!n||n.allowsNesting)for(let e=r;e;e=e.enter(t,i,la.ExcludeBuffers))e.type.isTop&&(r=e);return r}sl.setState=me.define();class al extends sl{constructor(e,t,i){super(e,t,[],i),this.parser=t}static define(e){let t=(i=e.languageData,U.define({combine:i?e=>e.concat(i):void 0}));var i;return new al(t,e.parser.configure({props:[nl.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new al(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ll(e){let t=e.field(sl.state,!1);return t?t.tree:ca.empty}class cl{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}}let hl=null;class dl{constructor(e,t,i=[],n,r,s,o,a){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.treeLen=r,this.viewport=s,this.skipped=o,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,i){return new dl(e,t,[],ca.empty,0,i,[],null)}startParse(){return this.parser.startParse(new cl(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=ca.empty&&this.isDone(null!=t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var i;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let n=this.parse.advance();if(n){if(this.fragments=this.withoutTempSkipped(Aa.addTree(n,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(i=this.parse.stoppedAt)&&void 0!==i?i:this.state.doc.length,this.tree=n,this.parse=null,!(this.treeLen<(null!=t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{for(;!(t=this.parse.advance()););})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Aa.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=hl;hl=this;try{return e()}finally{hl=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ul(e,t.from,t.to);return e}changes(e,t){let{fragments:i,tree:n,treeLen:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,n,r)=>t.push({fromA:e,toA:i,fromB:n,toB:r}))),i=Aa.applyChanges(i,t),n=ca.empty,r=0,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);i<n&&o.push({from:i,to:n})}}}return new dl(this.parser,t,i,n,r,s,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:n}=this.skipped[t];i<e.to&&n>e.from&&(this.fragments=ul(this.fragments,i,n),this.skipped.splice(t--,1))}return!(this.skipped.length>=t||(this.reset(),0))}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Ia{createParse(t,i,n){let r=n[0].from,s=n[n.length-1].to;return{parsedPos:r,advance(){let t=hl;if(t){for(let e of n)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=s,new ca(ra.none,[],[],s-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return hl}}function ul(e,t,i){return Aa.applyChanges(e,[{fromA:t,toA:i,fromB:t,toB:i}])}class pl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,i)||t.takeTree(),new pl(t)}static init(e){let t=Math.min(3e3,e.doc.length),i=dl.create(e.facet(yl).parser,e,{from:0,to:t});return i.work(20,t)||i.takeTree(),new pl(i)}}sl.state=Y.define({create:pl.init,update(e,t){for(let e of t.effects)if(e.is(sl.setState))return e.value;return t.startState.facet(yl)!=t.state.facet(yl)?pl.init(t.state):e.apply(t)}});let fl=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(fl=e=>{let t=-1,i=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(i):cancelIdleCallback(t)});const ml="undefined"!=typeof navigator&&(null===(il=navigator.scheduling)||void 0===il?void 0:il.isInputPending)?()=>navigator.scheduling.isInputPending():null,gl=on.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(sl.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(sl.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=fl(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:n}}=this.view,r=i.field(sl.state);if(r.tree==r.context.tree&&r.context.isDone(n+1e5))return;let s=Date.now()+Math.min(this.chunkBudget,100,e&&!ml?Math.max(25,e.timeRemaining()-5):1e9),o=r.context.treeLen<n&&i.doc.length>n+1e3,a=r.context.work((()=>ml&&ml()||Date.now()>s),n+(o?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:sl.setState.of(new pl(r.context))})),this.chunkBudget>0&&(!a||o)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>tn(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),yl=U.define({combine:e=>e.length?e[0]:null,enables:e=>[sl.state,gl,ss.contentAttributes.compute([e],(t=>{let i=t.facet(e);return i&&i.name?{"data-language":i.name}:{}}))]});class vl{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const xl=U.define(),bl=U.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function wl(e){let t=e.facet(bl);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Ol(e,t){let i="",n=e.tabSize,r=e.facet(bl)[0];if("\t"==r){for(;t>=n;)i+="\t",t-=n;r=" "}for(let e=0;e<t;e++)i+=r;return i}function Sl(e,t){e instanceof Ce&&(e=new kl(e));for(let i of e.state.facet(xl)){let n=i(e,t);if(void 0!==n)return n}let i=ll(e.state);return i.length>=t?function(e,t,i){let n=t.resolveStack(i),r=t.resolveInner(i,-1).resolve(i,0).enterUnfinishedNodesBefore(i);if(r!=n.node){let e=[];for(let t=r;t&&(t.from!=n.node.from||t.type!=n.node.type);t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)n={node:e[t],next:n}}return Cl(n,e,i)}(e,i,t):null}class kl{constructor(e,t={}){this.state=e,this.options=t,this.unit=wl(e)}lineAt(e,t=1){let i=this.state.doc.lineAt(e),{simulateBreak:n,simulateDoubleBreak:r}=this.options;return null!=n&&n>=i.from&&n<=i.to?r&&n==e?{text:"",from:e}:(t<0?n<e:n<=e)?{text:i.text.slice(n-i.from),from:n}:{text:i.text.slice(0,n-i.from),from:i.from}:i}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:n}=this.lineAt(e,t);return i.slice(e-n,Math.min(i.length,e+100-n))}column(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.countColumn(i,e-n),s=this.options.overrideIndentation?this.options.overrideIndentation(n):-1;return s>-1&&(r+=s-this.countColumn(i,i.search(/\S|$/))),r}countColumn(e,t=e.length){return qe(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:i,from:n}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let e=r(n);if(e>-1)return e}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Pl=new ta;function Cl(e,t,i){for(let n=e;n;n=n.next){let e=Al(n.node);if(e)return e(Tl.create(t,i,n))}return 0}function Al(e){let t=e.type.prop(Pl);if(t)return t;let i,n=e.firstChild;if(n&&(i=n.type.prop(ta.closedBy))){let t=e.lastChild,n=t&&i.indexOf(t.name)>-1;return e=>Ml(e,!0,1,void 0,n&&!function(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}(e)?t.from:void 0)}return null==e.parent?Il:null}function Il(){return 0}class Tl extends kl{constructor(e,t,i){super(e.state,e.options),this.base=e,this.pos=t,this.context=i}get node(){return this.context.node}static create(e,t,i){return new Tl(e,t,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(t.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if($l(i,e))break;t=this.state.doc.lineAt(i.from)}return this.lineIndent(t.from)}continue(){return Cl(this.context.next,this.base,this.pos)}}function $l(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function Ml(e,t,i,n,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,a=n&&s.slice(o,o+n.length)==n||r==e.pos+o,l=t?function(e){let t=e.node,i=t.childAfter(t.from),n=t.lastChild;if(!i)return null;let r=e.options.simulateBreak,s=e.state.doc.lineAt(i.from),o=null==r||r<=s.from?s.to:Math.min(s.to,r);for(let e=i.to;;){let r=t.childAfter(e);if(!r||r==n)return null;if(!r.type.isSkipped){if(r.from>=o)return null;let e=/^ */.exec(s.text.slice(i.to-s.from))[0].length;return{from:i.from,to:i.to+e}}e=r.to}}(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*i)}const El=U.define(),_l=new ta;function Dl(e){let t=e.lastChild;return t&&t.to==e.to&&t.type.isError}function Ll(e,t,i){for(let n of e.facet(El)){let r=n(e,t,i);if(r)return r}return function(e,t,i){let n=ll(e);if(n.length<i)return null;let r=null;for(let s=n.resolveStack(i,1);s;s=s.next){let o=s.node;if(o.to<=i||o.from>i)continue;if(r&&o.from<t)break;let a=o.type.prop(_l);if(a&&(o.to<n.length-50||n.length==e.doc.length||!Dl(o))){let n=a(o,e);n&&n.from<=i&&n.from>=t&&n.to>i&&(r=n)}}return r}(e,t,i)}function Bl(e,t){let i=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);return i>=n?void 0:{from:i,to:n}}const Rl=me.define({map:Bl}),Nl=me.define({map:Bl});function Fl(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some((e=>e.from<=i&&e.to>=i))||t.push(e.lineBlockAt(i));return t}const jl=Y.define({create:()=>ci.none,update(e,t){e=e.map(t.changes);for(let i of t.effects)if(i.is(Rl)&&!Ql(e,i.value.from,i.value.to)){let{preparePlaceholder:n}=t.state.facet(Wl),r=n?ci.replace({widget:new Zl(n(t.state,i.value))}):Yl;e=e.update({add:[r.range(i.value.from,i.value.to)]})}else i.is(Nl)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:n}=t.selection.main;e.between(n,n,((e,t)=>{e<n&&t>n&&(i=!0)})),i&&(e=e.update({filterFrom:n,filterTo:n,filter:(e,t)=>t<=n||e>=n}))}return e},provide:e=>ss.decorations.from(e),toJSON(e,t){let i=[];return e.between(0,t.doc.length,((e,t)=>{i.push(e,t)})),i},fromJSON(e){if(!Array.isArray(e)||e.length%2)throw new RangeError("Invalid JSON for fold state");let t=[];for(let i=0;i<e.length;){let n=e[i++],r=e[i++];if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid JSON for fold state");t.push(Yl.range(n,r))}return ci.set(t,!0)}});function zl(e,t,i){var n;let r=null;return null===(n=e.field(jl,!1))||void 0===n||n.between(t,i,((e,t)=>{(!r||r.from>e)&&(r={from:e,to:t})})),r}function Ql(e,t,i){let n=!1;return e.between(t,t,((e,r)=>{e==t&&r==i&&(n=!0)})),n}function Ul(e,t){return e.field(jl,!1)?t:t.concat(me.appendConfig.of(Xl()))}function ql(e,t,i=!0){let n=e.state.doc.lineAt(t.from).number,r=e.state.doc.lineAt(t.to).number;return ss.announce.of(`${e.state.phrase(i?"Folded lines":"Unfolded lines")} ${n} ${e.state.phrase("to")} ${r}.`)}const Hl=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of Fl(e)){let i=Ll(e.state,t.from,t.to);if(i)return e.dispatch({effects:Ul(e.state,[Rl.of(i),ql(e,i)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(jl,!1))return!1;let t=[];for(let i of Fl(e)){let n=zl(e.state,i.from,i.to);n&&t.push(Nl.of(n),ql(e,n,!1))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let n=0;n<t.doc.length;){let r=e.lineBlockAt(n),s=Ll(t,r.from,r.to);s&&i.push(Rl.of(s)),n=(s?e.lineBlockAt(s.to):r).to+1}return i.length&&e.dispatch({effects:Ul(e.state,i)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(jl,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,((e,t)=>{i.push(Nl.of({from:e,to:t}))})),e.dispatch({effects:i}),!0}}],Vl={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Wl=U.define({combine:e=>Ae(e,Vl)});function Xl(e){let t=[jl,tc];return e&&t.push(Wl.of(e)),t}function Gl(e,t){let{state:i}=e,n=i.facet(Wl),r=t=>{let i=e.lineBlockAt(e.posAtDOM(t.target)),n=zl(e.state,i.from,i.to);n&&e.dispatch({effects:Nl.of(n)}),t.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(e,r,t);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",i.phrase("folded code")),s.title=i.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const Yl=ci.replace({widget:new class extends ai{toDOM(e){return Gl(e,null)}}});class Zl extends ai{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Gl(e,this.value)}}const Kl={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Jl extends Io{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function ec(e={}){let t=Object.assign(Object.assign({},Kl),e),i=new Jl(t,!0),n=new Jl(t,!1),r=on.fromClass(class{constructor(e){this.from=e.viewport.from,this.markers=this.buildMarkers(e)}update(e){(e.docChanged||e.viewportChanged||e.startState.facet(yl)!=e.state.facet(yl)||e.startState.field(jl,!1)!=e.state.field(jl,!1)||ll(e.startState)!=ll(e.state)||t.foldingChanged(e))&&(this.markers=this.buildMarkers(e.view))}buildMarkers(e){let t=new _e;for(let r of e.viewportLineBlocks){let s=zl(e.state,r.from,r.to)?n:Ll(e.state,r.from,r.to)?i:null;s&&t.add(r.from,r.from,s)}return t.finish()}}),{domEventHandlers:s}=t;return[r,_o({class:"cm-foldGutter",markers(e){var t;return(null===(t=e.plugin(r))||void 0===t?void 0:t.markers)||Ee.empty},initialSpacer:()=>new Jl(t,!1),domEventHandlers:Object.assign(Object.assign({},s),{click:(e,t,i)=>{if(s.click&&s.click(e,t,i))return!0;let n=zl(e.state,t.from,t.to);if(n)return e.dispatch({effects:Nl.of(n)}),!0;let r=Ll(e.state,t.from,t.to);return!!r&&(e.dispatch({effects:Rl.of(r)}),!0)}})}),Xl()]}const tc=ss.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class ic{constructor(e,t){let i;function n(e){let t=Ge.newName();return(i||(i=Object.create(null)))["."+t]=e,t}this.specs=e;const r="string"==typeof t.all?t.all:t.all?n(t.all):void 0,s=t.scope;this.scope=s instanceof sl?e=>e.prop(nl)==s.data:s?e=>e==s:void 0,this.style=Ra(e.map((e=>({tag:e.tag,class:e.class||n(Object.assign({},e,{tag:null}))}))),{all:r}).style,this.module=i?new Ge(i):null,this.themeType=t.themeType}static define(e,t){return new ic(e,t||{})}}const nc=U.define(),rc=U.define({combine:e=>e.length?[e[0]]:null});function sc(e){let t=e.facet(nc);return t.length?t:e.facet(rc)}function oc(e,t){let i,n=[lc];return e instanceof ic&&(e.module&&n.push(ss.styleModule.of(e.module)),i=e.themeType),(null==t?void 0:t.fallback)?n.push(rc.of(e)):i?n.push(nc.computeN([ss.darkTheme],(t=>t.facet(ss.darkTheme)==("dark"==i)?[e]:[]))):n.push(nc.of(e)),n}class ac{constructor(e){this.markCache=Object.create(null),this.tree=ll(e.state),this.decorations=this.buildDeco(e,sc(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ll(e.state),i=sc(e.state),n=i!=sc(e.startState),{viewport:r}=e.view,s=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!n&&t.type==this.tree.type&&s>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=s):(t!=this.tree||e.viewportChanged||n)&&(this.tree=t,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return ci.none;let i=new _e;for(let{from:n,to:r}of e.visibleRanges)Na(this.tree,t,((e,t,n)=>{i.add(e,t,this.markCache[n]||(this.markCache[n]=ci.mark({class:n})))}),n,r);return i.finish()}}const lc=K.high(on.fromClass(ac,{decorations:e=>e.decorations})),cc=ic.define([{tag:tl.meta,color:"#404740"},{tag:tl.link,textDecoration:"underline"},{tag:tl.heading,textDecoration:"underline",fontWeight:"bold"},{tag:tl.emphasis,fontStyle:"italic"},{tag:tl.strong,fontWeight:"bold"},{tag:tl.strikethrough,textDecoration:"line-through"},{tag:tl.keyword,color:"#708"},{tag:[tl.atom,tl.bool,tl.url,tl.contentSeparator,tl.labelName],color:"#219"},{tag:[tl.literal,tl.inserted],color:"#164"},{tag:[tl.string,tl.deleted],color:"#a11"},{tag:[tl.regexp,tl.escape,tl.special(tl.string)],color:"#e40"},{tag:tl.definition(tl.variableName),color:"#00f"},{tag:tl.local(tl.variableName),color:"#30a"},{tag:[tl.typeName,tl.namespace],color:"#085"},{tag:tl.className,color:"#167"},{tag:[tl.special(tl.variableName),tl.macroName],color:"#256"},{tag:tl.definition(tl.propertyName),color:"#00c"},{tag:tl.comment,color:"#940"},{tag:tl.invalid,color:"#f00"}]),hc=ss.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),dc=1e4,uc="()[]{}",pc=U.define({combine:e=>Ae(e,{afterCursor:!0,brackets:uc,maxScanDistance:dc,renderMatch:gc})}),fc=ci.mark({class:"cm-matchingBracket"}),mc=ci.mark({class:"cm-nonmatchingBracket"});function gc(e){let t=[],i=e.matched?fc:mc;return t.push(i.range(e.start.from,e.start.to)),e.end&&t.push(i.range(e.end.from,e.end.to)),t}const yc=Y.define({create:()=>ci.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],n=t.state.facet(pc);for(let e of t.state.selection.ranges){if(!e.empty)continue;let r=Sc(t.state,e.head,-1,n)||e.head>0&&Sc(t.state,e.head-1,1,n)||n.afterCursor&&(Sc(t.state,e.head,1,n)||e.head<t.state.doc.length&&Sc(t.state,e.head+1,-1,n));r&&(i=i.concat(n.renderMatch(r,t.state)))}return ci.set(i,!0)},provide:e=>ss.decorations.from(e)}),vc=[yc,hc];function xc(e={}){return[pc.of(e),vc]}const bc=new ta;function wc(e,t,i){let n=e.prop(t<0?ta.openedBy:ta.closedBy);if(n)return n;if(1==e.name.length){let n=i.indexOf(e.name);if(n>-1&&n%2==(t<0?1:0))return[i[n+t]]}return null}function Oc(e){let t=e.type.prop(bc);return t?t(e.node):e}function Sc(e,t,i,n={}){let r=n.maxScanDistance||dc,s=n.brackets||uc,o=ll(e),a=o.resolveInner(t,i);for(let e=a;e;e=e.parent){let n=wc(e.type,i,s);if(n&&e.from<e.to){let r=Oc(e);if(r&&(i>0?t>=r.from&&t<r.to:t>r.from&&t<=r.to))return kc(0,0,i,e,r,n,s)}}return function(e,t,i,n,r,s,o){let a=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=o.indexOf(a);if(l<0||l%2==0!=i>0)return null;let c={from:i<0?t-1:t,to:i>0?t+1:t},h=e.doc.iterRange(t,i>0?e.doc.length:0),d=0;for(let e=0;!h.next().done&&e<=s;){let s=h.value;i<0&&(e+=s.length);let a=t+e*i;for(let e=i>0?0:s.length-1,t=i>0?s.length:-1;e!=t;e+=i){let t=o.indexOf(s[e]);if(!(t<0||n.resolveInner(a+e,1).type!=r))if(t%2==0==i>0)d++;else{if(1==d)return{start:c,end:{from:a+e,to:a+e+1},matched:t>>1==l>>1};d--}}i>0&&(e+=s.length)}return h.done?{start:c,matched:!1}:null}(e,t,i,o,a.type,r,s)}function kc(e,t,i,n,r,s,o){let a=n.parent,l={from:r.from,to:r.to},c=0,h=null==a?void 0:a.cursor();if(h&&(i<0?h.childBefore(n.from):h.childAfter(n.to)))do{if(i<0?h.to<=n.from:h.from>=n.to){if(0==c&&s.indexOf(h.type.name)>-1&&h.from<h.to){let e=Oc(h);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(wc(h.type,i,o))c++;else if(wc(h.type,-i,o)){if(0==c){let e=Oc(h);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(i<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}const Pc=Object.create(null),Cc=[ra.none],Ac=[],Ic=Object.create(null),Tc=Object.create(null);for(let[e,t]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Tc[e]=Mc(Pc,t);function $c(e,t){Ac.indexOf(e)>-1||(Ac.push(e),console.warn(t))}function Mc(e,t){let i=[];for(let n of t.split(" ")){let t=[];for(let i of n.split(".")){let n=e[i]||tl[i];n?"function"==typeof n?t.length?t=t.map(n):$c(i,`Modifier ${i} used at start of tag`):t.length?$c(i,`Tag ${i} used as modifier`):t=Array.isArray(n)?n:[n]:$c(i,`Unknown highlighting tag ${i}`)}for(let e of t)i.push(e)}if(!i.length)return 0;let n=t.replace(/ /g,"_"),r=n+" "+i.map((e=>e.id)),s=Ic[r];if(s)return s.id;let o=Ic[r]=ra.define({id:Cc.length,name:n,props:[Da({[n]:i})]});return Cc.push(o),o.id}function Ec(e,t){return({state:i,dispatch:n})=>{if(i.readOnly)return!1;let r=e(t,i);return!!r&&(n(i.update(r)),!0)}}wi.RTL,wi.LTR;const _c=Ec(Fc,0),Dc=Ec(Nc,0),Lc=Ec(((e,t)=>Nc(e,t,function(e){let t=[];for(let i of e.selection.ranges){let n=e.doc.lineAt(i.from),r=i.to<=n.to?n:e.doc.lineAt(i.to);r.from>n.from&&r.from==i.to&&(r=i.to==n.to+1?n:e.doc.lineAt(i.to-1));let s=t.length-1;s>=0&&t[s].to>n.from?t[s].to=r.to:t.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:r.to})}return t}(t))),0);function Bc(e,t){let i=e.languageDataAt("commentTokens",t);return i.length?i[0]:{}}const Rc=50;function Nc(e,t,i=t.selection.ranges){let n=i.map((e=>Bc(t,e.from).block));if(!n.every((e=>e)))return null;let r=i.map(((e,i)=>function(e,{open:t,close:i},n,r){let s,o,a=e.sliceDoc(n-Rc,n),l=e.sliceDoc(r,r+Rc),c=/\s*$/.exec(a)[0].length,h=/^\s*/.exec(l)[0].length,d=a.length-c;if(a.slice(d-t.length,d)==t&&l.slice(h,h+i.length)==i)return{open:{pos:n-c,margin:c&&1},close:{pos:r+h,margin:h&&1}};r-n<=2*Rc?s=o=e.sliceDoc(n,r):(s=e.sliceDoc(n,n+Rc),o=e.sliceDoc(r-Rc,r));let u=/^\s*/.exec(s)[0].length,p=/\s*$/.exec(o)[0].length,f=o.length-p-i.length;return s.slice(u,u+t.length)==t&&o.slice(f,f+i.length)==i?{open:{pos:n+u+t.length,margin:/\s/.test(s.charAt(u+t.length))?1:0},close:{pos:r-p-i.length,margin:/\s/.test(o.charAt(f-1))?1:0}}:null}(t,n[i],e.from,e.to)));if(2!=e&&!r.every((e=>e)))return{changes:t.changes(i.map(((e,t)=>r[t]?[]:[{from:e.from,insert:n[t].open+" "},{from:e.to,insert:" "+n[t].close}])))};if(1!=e&&r.some((e=>e))){let e=[];for(let t,i=0;i<r.length;i++)if(t=r[i]){let r=n[i],{open:s,close:o}=t;e.push({from:s.pos-r.open.length,to:s.pos+s.margin},{from:o.pos-o.margin,to:o.pos+r.close.length})}return{changes:e}}return null}function Fc(e,t,i=t.selection.ranges){let n=[],r=-1;for(let{from:e,to:s}of i){let i=n.length,o=1e9,a=Bc(t,e).line;if(a){for(let i=e;i<=s;){let l=t.doc.lineAt(i);if(l.from>r&&(e==s||s>l.from)){r=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,i=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<o&&(o=e),n.push({line:l,comment:i,token:a,indent:e,empty:t,single:!1})}i=l.to+1}if(o<1e9)for(let e=i;e<n.length;e++)n[e].indent<n[e].line.text.length&&(n[e].indent=o);n.length==i+1&&(n[i].single=!0)}}if(2!=e&&n.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:r,empty:s,single:o}of n)!o&&s||e.push({from:t.from+r,insert:i+" "});let i=t.changes(e);return{changes:i,selection:t.selection.map(i,1)}}if(1!=e&&n.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:i,token:r}of n)if(i>=0){let n=t.from+i,s=n+r.length;" "==t.text[s-t.from]&&s++,e.push({from:n,to:s})}return{changes:e}}return null}const jc=ue.define(),zc=ue.define(),Qc=U.define(),Uc=U.define({combine:e=>Ae(e,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(i,n)=>e(i,n)||t(i,n)})}),qc=Y.define({create:()=>ah.empty,update(e,t){let i=t.state.facet(Uc),n=t.annotation(jc);if(n){let r=Zc.fromTransaction(t,n.selection),s=n.side,o=0==s?e.undone:e.done;return o=r?Kc(o,o.length,i.minDepth,r):ih(o,t.startState.selection),new ah(0==s?n.rest:o,0==s?o:n.rest)}let r=t.annotation(zc);if("full"!=r&&"before"!=r||(e=e.isolate()),!1===t.annotation(ge.addToHistory))return t.changes.empty?e:e.addMapping(t.changes.desc);let s=Zc.fromTransaction(t),o=t.annotation(ge.time),a=t.annotation(ge.userEvent);return s?e=e.addChanges(s,o,a,i,t):t.selection&&(e=e.addSelection(t.startState.selection,o,a,i.newGroupDelay)),"full"!=r&&"after"!=r||(e=e.isolate()),e},toJSON:e=>({done:e.done.map((e=>e.toJSON())),undone:e.undone.map((e=>e.toJSON()))}),fromJSON:e=>new ah(e.done.map(Zc.fromJSON),e.undone.map(Zc.fromJSON))});function Hc(e={}){return[qc,Uc.of(e),ss.domEventHandlers({beforeinput(e,t){let i="historyUndo"==e.inputType?Wc:"historyRedo"==e.inputType?Xc:null;return!!i&&(e.preventDefault(),i(t))}})]}function Vc(e,t){return function({state:i,dispatch:n}){if(!t&&i.readOnly)return!1;let r=i.field(qc,!1);if(!r)return!1;let s=r.pop(e,i,t);return!!s&&(n(s),!0)}}const Wc=Vc(0,!1),Xc=Vc(1,!1),Gc=Vc(0,!0),Yc=Vc(1,!0);class Zc{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new Zc(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,i;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(i=this.startSelection)||void 0===i?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new Zc(e.changes&&E.fromJSON(e.changes),[],e.mapped&&M.fromJSON(e.mapped),e.startSelection&&j.fromJSON(e.startSelection),e.selectionsAfter.map(j.fromJSON))}static fromTransaction(e,t){let i=eh;for(let t of e.startState.facet(Qc)){let n=t(e);n.length&&(i=i.concat(n))}return!i.length&&e.changes.empty?null:new Zc(e.changes.invert(e.startState.doc),i,void 0,t||e.startState.selection,eh)}static selection(e){return new Zc(void 0,eh,void 0,void 0,e)}}function Kc(e,t,i,n){let r=t+1>i+20?t-i-1:0,s=e.slice(r,t);return s.push(n),s}function Jc(e,t){return e.length?t.length?e.concat(t):e:t}const eh=[],th=200;function ih(e,t){if(e.length){let i=e[e.length-1],n=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-th));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),Kc(e,e.length-1,1e9,i.setSelAfter(n)))}return[Zc.selection([t])]}function nh(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function rh(e,t){if(!e.length)return e;let i=e.length,n=eh;for(;i;){let r=sh(e[i-1],t,n);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,i);return t[i-1]=r,t}t=r.mapped,i--,n=r.selectionsAfter}return n.length?[Zc.selection(n)]:eh}function sh(e,t,i){let n=Jc(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):eh,i);if(!e.changes)return Zc.selection(n);let r=e.changes.map(t),s=t.mapDesc(e.changes,!0),o=e.mapped?e.mapped.composeDesc(s):s;return new Zc(r,me.mapEffects(e.effects,t),o,e.startSelection.map(s),n)}const oh=/^(input\.type|delete)($|\.)/;class ah{constructor(e,t,i=0,n=void 0){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new ah(this.done,this.undone):this}addChanges(e,t,i,n,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&!o.changes.empty&&e.changes&&(!i||oh.test(i))&&(!o.selectionsAfter.length&&t-this.prevTime<n.newGroupDelay&&n.joinToEvent(r,function(e,t){let i=[],n=!1;return e.iterChangedRanges(((e,t)=>i.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let e=0;e<i.length;){let t=i[e++],o=i[e++];s>=t&&r<=o&&(n=!0)}})),n}(o.changes,e.changes))||"input.type.compose"==i)?Kc(s,s.length-1,n.minDepth,new Zc(e.changes.compose(o.changes),Jc(me.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,eh)):Kc(s,s.length,n.minDepth,e),new ah(s,eh,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:eh;return r.length>0&&t-this.prevTime<n&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&(s=r[r.length-1],o=e,s.ranges.length==o.ranges.length&&0===s.ranges.filter(((e,t)=>e.empty!=o.ranges[t].empty)).length)?this:new ah(ih(this.done,e),this.undone,t,i);var s,o}addMapping(e){return new ah(rh(this.done,e),rh(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=0==e?this.done:this.undone;if(0==n.length)return null;let r=n[n.length-1],s=r.selectionsAfter[0]||t.selection;if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:jc.of({side:e,rest:nh(n),selection:s}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let i=1==n.length?eh:n.slice(0,n.length-1);return r.mapped&&(i=rh(i,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:jc.of({side:e,rest:i,selection:s}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}ah.empty=new ah(eh,eh);const lh=[{key:"Mod-z",run:Wc,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Xc,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Xc,preventDefault:!0},{key:"Mod-u",run:Gc,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Yc,preventDefault:!0}];function ch(e,t){return j.create(e.ranges.map(t),e.mainIndex)}function hh(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function dh({state:e,dispatch:t},i){let n=ch(e.selection,i);return!n.eq(e.selection,!0)&&(t(hh(e,n)),!0)}function uh(e,t){return j.cursor(t?e.to:e.from)}function ph(e,t){return dh(e,(i=>i.empty?e.moveByChar(i,t):uh(i,t)))}function fh(e){return e.textDirectionAt(e.state.selection.main.head)==wi.LTR}const mh=e=>ph(e,!fh(e)),gh=e=>ph(e,fh(e));function yh(e,t){return dh(e,(i=>i.empty?e.moveByGroup(i,t):uh(i,t)))}function vh(e,t,i){if(t.type.prop(i))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function xh(e,t,i){let n,r,s=ll(e).resolveInner(t.head),o=i?ta.closedBy:ta.openedBy;for(let n=t.head;;){let t=i?s.childAfter(n):s.childBefore(n);if(!t)break;vh(e,t,o)?s=t:n=i?t.to:t.from}return r=s.type.prop(o)&&(n=i?Sc(e,s.from,1):Sc(e,s.to,-1))&&n.matched?i?n.end.to:n.end.from:i?s.to:s.from,j.cursor(r,i?-1:1)}function bh(e,t){return dh(e,(i=>{if(!i.empty)return uh(i,t);let n=e.moveVertically(i,t);return n.head!=i.head?n:e.moveToLineBoundary(i,t)}))}"undefined"!=typeof Intl&&Intl.Segmenter;const wh=e=>bh(e,!1),Oh=e=>bh(e,!0);function Sh(e){let t,i=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,n=0,r=0;if(i){for(let t of e.state.facet(ss.scrollMargins)){let i=t(e);(null==i?void 0:i.top)&&(n=Math.max(null==i?void 0:i.top,n)),(null==i?void 0:i.bottom)&&(r=Math.max(null==i?void 0:i.bottom,r))}t=e.scrollDOM.clientHeight-n-r}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:r,selfScroll:i,height:Math.max(e.defaultLineHeight,t-5)}}function kh(e,t){let i,n=Sh(e),{state:r}=e,s=ch(r.selection,(i=>i.empty?e.moveVertically(i,t,n.height):uh(i,t)));if(s.eq(r.selection))return!1;if(n.selfScroll){let t=e.coordsAtPos(r.selection.main.head),o=e.scrollDOM.getBoundingClientRect(),a=o.top+n.marginTop,l=o.bottom-n.marginBottom;t&&t.top>a&&t.bottom<l&&(i=ss.scrollIntoView(s.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(hh(r,s),{effects:i}),!0}const Ph=e=>kh(e,!1),Ch=e=>kh(e,!0);function Ah(e,t,i){let n=e.lineBlockAt(t.head),r=e.moveToLineBoundary(t,i);if(r.head==t.head&&r.head!=(i?n.to:n.from)&&(r=e.moveToLineBoundary(t,i,!1)),!i&&r.head==n.from&&n.length){let i=/^\s*/.exec(e.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;i&&t.head!=n.from+i&&(r=j.cursor(n.from+i))}return r}function Ih(e,t){let i=ch(e.state.selection,(e=>{let i=t(e);return j.range(e.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)}));return!i.eq(e.state.selection)&&(e.dispatch(hh(e.state,i)),!0)}function Th(e,t){return Ih(e,(i=>e.moveByChar(i,t)))}const $h=e=>Th(e,!fh(e)),Mh=e=>Th(e,fh(e));function Eh(e,t){return Ih(e,(i=>e.moveByGroup(i,t)))}function _h(e,t){return Ih(e,(i=>e.moveVertically(i,t)))}const Dh=e=>_h(e,!1),Lh=e=>_h(e,!0);function Bh(e,t){return Ih(e,(i=>e.moveVertically(i,t,Sh(e).height)))}const Rh=e=>Bh(e,!1),Nh=e=>Bh(e,!0),Fh=({state:e,dispatch:t})=>(t(hh(e,{anchor:0})),!0),jh=({state:e,dispatch:t})=>(t(hh(e,{anchor:e.doc.length})),!0),zh=({state:e,dispatch:t})=>(t(hh(e,{anchor:e.selection.main.anchor,head:0})),!0),Qh=({state:e,dispatch:t})=>(t(hh(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0);function Uh(e,t){if(e.state.readOnly)return!1;let i="delete.selection",{state:n}=e,r=n.changeByRange((n=>{let{from:r,to:s}=n;if(r==s){let o=t(n);o<r?(i="delete.backward",o=qh(e,o,!1)):o>r&&(i="delete.forward",o=qh(e,o,!0)),r=Math.min(r,o),s=Math.max(s,o)}else r=qh(e,r,!1),s=qh(e,s,!0);return r==s?{range:n}:{changes:{from:r,to:s},range:j.cursor(r,r<n.head?-1:1)}}));return!r.changes.empty&&(e.dispatch(n.update(r,{scrollIntoView:!0,userEvent:i,effects:"delete.selection"==i?ss.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function qh(e,t,i){if(e instanceof ss)for(let n of e.state.facet(ss.atomicRanges).map((t=>t(e))))n.between(t,t,((e,n)=>{e<t&&n>t&&(t=i?n:e)}));return t}const Hh=(e,t,i)=>Uh(e,(n=>{let r,s,o=n.from,{state:a}=e,l=a.doc.lineAt(o);if(i&&!t&&o>l.from&&o<l.from+200&&!/[^ \t]/.test(r=l.text.slice(0,o-l.from))){if("\t"==r[r.length-1])return o-1;let e=qe(r,a.tabSize)%wl(a)||wl(a);for(let t=0;t<e&&" "==r[r.length-1-t];t++)o--;s=o}else s=P(l.text,o-l.from,t,t)+l.from,s==o&&l.number!=(t?a.doc.lines:1)?s+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(s-l.from,o-l.from))&&(s=P(l.text,s-l.from,!1,!1)+l.from);return s})),Vh=e=>Hh(e,!1,!0),Wh=e=>Hh(e,!0,!1),Xh=(e,t)=>Uh(e,(i=>{let n=i.head,{state:r}=e,s=r.doc.lineAt(n),o=r.charCategorizer(n);for(let e=null;;){if(n==(t?s.to:s.from)){n==i.head&&s.number!=(t?r.doc.lines:1)&&(n+=t?1:-1);break}let a=P(s.text,n-s.from,t)+s.from,l=s.text.slice(Math.min(n,a)-s.from,Math.max(n,a)-s.from),c=o(l);if(null!=e&&c!=e)break;" "==l&&n==i.head||(e=c),n=a}return n})),Gh=e=>Xh(e,!1);function Yh(e){let t=[],i=-1;for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),s=e.doc.lineAt(n.to);if(n.empty||n.to!=s.from||(s=e.doc.lineAt(n.to-1)),i>=r.number){let e=t[t.length-1];e.to=s.to,e.ranges.push(n)}else t.push({from:r.from,to:s.to,ranges:[n]});i=s.number+1}return t}function Zh(e,t,i){if(e.readOnly)return!1;let n=[],r=[];for(let t of Yh(e)){if(i?t.to==e.doc.length:0==t.from)continue;let s=e.doc.lineAt(i?t.to+1:t.from-1),o=s.length+1;if(i){n.push({from:t.to,to:s.to},{from:t.from,insert:s.text+e.lineBreak});for(let i of t.ranges)r.push(j.range(Math.min(e.doc.length,i.anchor+o),Math.min(e.doc.length,i.head+o)))}else{n.push({from:s.from,to:t.from},{from:t.to,insert:e.lineBreak+s.text});for(let e of t.ranges)r.push(j.range(e.anchor-o,e.head-o))}}return!!n.length&&(t(e.update({changes:n,scrollIntoView:!0,selection:j.create(r,e.selection.mainIndex),userEvent:"move.line"})),!0)}function Kh(e,t,i){if(e.readOnly)return!1;let n=[];for(let t of Yh(e))i?n.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):n.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Jh=ed(!1);function ed(e){return({state:t,dispatch:i})=>{if(t.readOnly)return!1;let n=t.changeByRange((i=>{let{from:n,to:r}=i,s=t.doc.lineAt(n),o=!e&&n==r&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,n=ll(e).resolveInner(t),r=n.childBefore(t),s=n.childAfter(t);return r&&s&&r.to<=t&&s.from>=t&&(i=r.type.prop(ta.closedBy))&&i.indexOf(s.name)>-1&&e.doc.lineAt(r.to).from==e.doc.lineAt(s.from).from&&!/\S/.test(e.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}(t,n);e&&(n=r=(r<=s.to?s:t.doc.lineAt(r)).to);let a=new kl(t,{simulateBreak:n,simulateDoubleBreak:!!o}),l=Sl(a,n);for(null==l&&(l=qe(/^\s*/.exec(t.doc.lineAt(n).text)[0],t.tabSize));r<s.to&&/\s/.test(s.text[r-s.from]);)r++;o?({from:n,to:r}=o):n>s.from&&n<s.from+100&&!/\S/.test(s.text.slice(0,n))&&(n=s.from);let c=["",Ol(t,l)];return o&&c.push(Ol(t,a.lineIndent(s.from,-1))),{changes:{from:n,to:r,insert:m.of(c)},range:j.cursor(n+1+c[1].length)}}));return i(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function td(e,t){let i=-1;return e.changeByRange((n=>{let r=[];for(let s=n.from;s<=n.to;){let o=e.doc.lineAt(s);o.number>i&&(n.empty||n.to>o.from)&&(t(o,r,n),i=o.number),s=o.to+1}let s=e.changes(r);return{changes:r,range:j.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}}))}const id=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(td(e,((t,i)=>{i.push({from:t.from,insert:e.facet(bl)})})),{userEvent:"input.indent"})),!0),nd=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(td(e,((t,i)=>{let n=/^\s*/.exec(t.text)[0];if(!n)return;let r=qe(n,e.tabSize),s=0,o=Ol(e,Math.max(0,r-wl(e)));for(;s<n.length&&s<o.length&&n.charCodeAt(s)==o.charCodeAt(s);)s++;i.push({from:t.from+s,to:t.from+n.length,insert:o.slice(s)})})),{userEvent:"delete.dedent"})),!0),rd=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:e=>dh(e,(t=>xh(e.state,t,!fh(e)))),shift:e=>Ih(e,(t=>xh(e.state,t,!fh(e))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:e=>dh(e,(t=>xh(e.state,t,fh(e)))),shift:e=>Ih(e,(t=>xh(e.state,t,fh(e))))},{key:"Alt-ArrowUp",run:({state:e,dispatch:t})=>Zh(e,t,!1)},{key:"Shift-Alt-ArrowUp",run:({state:e,dispatch:t})=>Kh(e,t,!1)},{key:"Alt-ArrowDown",run:({state:e,dispatch:t})=>Zh(e,t,!0)},{key:"Shift-Alt-ArrowDown",run:({state:e,dispatch:t})=>Kh(e,t,!0)},{key:"Escape",run:({state:e,dispatch:t})=>{let i=e.selection,n=null;return i.ranges.length>1?n=j.create([i.main]):i.main.empty||(n=j.create([j.cursor(i.main.head)])),!!n&&(t(hh(e,n)),!0)}},{key:"Mod-Enter",run:ed(!0)},{key:"Alt-l",mac:"Ctrl-l",run:({state:e,dispatch:t})=>{let i=Yh(e).map((({from:t,to:i})=>j.range(t,Math.min(i+1,e.doc.length))));return t(e.update({selection:j.create(i),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:e,dispatch:t})=>{let i=ch(e.selection,(t=>{let i=ll(e),n=i.resolveStack(t.from,1);if(t.empty){let e=i.resolveStack(t.from,-1);e.node.from>=n.node.from&&e.node.to<=n.node.to&&(n=e)}for(let e=n;e;e=e.next){let{node:i}=e;if((i.from<t.from&&i.to>=t.to||i.to>t.to&&i.from<=t.from)&&e.next)return j.range(i.to,i.from)}return t}));return!i.eq(e.selection)&&(t(hh(e,i)),!0)},preventDefault:!0},{key:"Mod-[",run:nd},{key:"Mod-]",run:id},{key:"Mod-Alt-\\",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=Object.create(null),n=new kl(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),r=td(e,((t,r,s)=>{let o=Sl(n,t.from);if(null==o)return;/\S/.test(t.text)||(o=0);let a=/^\s*/.exec(t.text)[0],l=Ol(e,o);(a!=l||s.from<t.from+a.length)&&(i[t.from]=o,r.push({from:t.from,to:t.from+a.length,insert:l}))}));return r.changes.empty||t(e.update(r,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:e=>{if(e.state.readOnly)return!1;let{state:t}=e,i=t.changes(Yh(t).map((({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i})))),n=ch(t.selection,(t=>{let i;if(e.lineWrapping){let n=e.lineBlockAt(t.head),r=e.coordsAtPos(t.head,t.assoc||1);r&&(i=n.bottom+e.documentTop-r.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,i)})).map(i);return e.dispatch({changes:i,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:e,dispatch:t})=>function(e,t,i){let n=!1,r=ch(e.selection,(t=>{let r=Sc(e,t.head,-1)||Sc(e,t.head,1)||t.head>0&&Sc(e,t.head-1,1)||t.head<e.doc.length&&Sc(e,t.head+1,-1);if(!r||!r.end)return t;n=!0;let s=r.start.from==t.head?r.end.to:r.end.from;return i?j.range(t.anchor,s):j.cursor(s)}));return!!n&&(t(hh(e,r)),!0)}(e,t,!1)},{key:"Mod-/",run:e=>{let{state:t}=e,i=t.doc.lineAt(t.selection.main.from),n=Bc(e.state,i.from);return n.line?_c(e):!!n.block&&Lc(e)}},{key:"Alt-A",run:Dc},{key:"Ctrl-m",mac:"Shift-Alt-m",run:e=>(e.setTabFocusMode(),!0)}].concat([{key:"ArrowLeft",run:mh,shift:$h,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:e=>yh(e,!fh(e)),shift:e=>Eh(e,!fh(e)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:e=>dh(e,(t=>Ah(e,t,!fh(e)))),shift:e=>Ih(e,(t=>Ah(e,t,!fh(e)))),preventDefault:!0},{key:"ArrowRight",run:gh,shift:Mh,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:e=>yh(e,fh(e)),shift:e=>Eh(e,fh(e)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:e=>dh(e,(t=>Ah(e,t,fh(e)))),shift:e=>Ih(e,(t=>Ah(e,t,fh(e)))),preventDefault:!0},{key:"ArrowUp",run:wh,shift:Dh,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Fh,shift:zh},{mac:"Ctrl-ArrowUp",run:Ph,shift:Rh},{key:"ArrowDown",run:Oh,shift:Lh,preventDefault:!0},{mac:"Cmd-ArrowDown",run:jh,shift:Qh},{mac:"Ctrl-ArrowDown",run:Ch,shift:Nh},{key:"PageUp",run:Ph,shift:Rh},{key:"PageDown",run:Ch,shift:Nh},{key:"Home",run:e=>dh(e,(t=>Ah(e,t,!1))),shift:e=>Ih(e,(t=>Ah(e,t,!1))),preventDefault:!0},{key:"Mod-Home",run:Fh,shift:zh},{key:"End",run:e=>dh(e,(t=>Ah(e,t,!0))),shift:e=>Ih(e,(t=>Ah(e,t,!0))),preventDefault:!0},{key:"Mod-End",run:jh,shift:Qh},{key:"Enter",run:Jh,shift:Jh},{key:"Mod-a",run:({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Vh,shift:Vh},{key:"Delete",run:Wh},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Gh},{key:"Mod-Delete",mac:"Alt-Delete",run:e=>Xh(e,!0)},{mac:"Mod-Backspace",run:e=>Uh(e,(t=>{let i=e.moveToLineBoundary(t,!1).head;return t.head>i?i:Math.max(0,t.head-1)}))},{mac:"Mod-Delete",run:e=>Uh(e,(t=>{let i=e.moveToLineBoundary(t,!0).head;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)}))}].concat([{key:"Ctrl-b",run:mh,shift:$h,preventDefault:!0},{key:"Ctrl-f",run:gh,shift:Mh},{key:"Ctrl-p",run:wh,shift:Dh},{key:"Ctrl-n",run:Oh,shift:Lh},{key:"Ctrl-a",run:e=>dh(e,(t=>j.cursor(e.lineBlockAt(t.head).from,1))),shift:e=>Ih(e,(t=>j.cursor(e.lineBlockAt(t.head).from)))},{key:"Ctrl-e",run:e=>dh(e,(t=>j.cursor(e.lineBlockAt(t.head).to,-1))),shift:e=>Ih(e,(t=>j.cursor(e.lineBlockAt(t.head).to)))},{key:"Ctrl-d",run:Wh},{key:"Ctrl-h",run:Vh},{key:"Ctrl-k",run:e=>Uh(e,(t=>{let i=e.lineBlockAt(t.head).to;return t.head<i?i:Math.min(e.state.doc.length,t.head+1)}))},{key:"Ctrl-Alt-h",run:Gh},{key:"Ctrl-o",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:m.of(["",""])},range:j.cursor(e.from)})));return t(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,n=e.doc.lineAt(i),r=i==n.from?i-1:P(n.text,i-n.from,!1)+n.from,s=i==n.to?i+1:P(n.text,i-n.from,!0)+n.from;return{changes:{from:r,to:s,insert:e.doc.slice(i,s).append(e.doc.slice(r,i))},range:j.cursor(s)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:Ch}].map((e=>({mac:e.key,run:e.run,shift:e.shift}))))),sd={key:"Tab",run:id,shift:nd};function od(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,i=arguments[1];if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i)){for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];"string"==typeof r?e.setAttribute(n,r):null!=r&&(e[n]=r)}t++}for(;t<arguments.length;t++)ad(e,arguments[t]);return e}function ad(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var i=0;i<t.length;i++)ad(e,t[i])}}const ld="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class cd{constructor(e,t,i=0,n=e.length,r,s){this.test=s,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?e=>r(ld(e)):ld,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return C(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=A(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=I(e);let n=this.normalize(t);if(n.length)for(let e=0,r=i;;e++){let s=n.charCodeAt(e),o=this.match(s,r,this.bufferPos+this.bufferStart);if(e==n.length-1){if(o)return this.value=o,this;break}r==i&&e<t.length&&t.charCodeAt(e)==s&&r++}}}match(e,t,i){let n=null;for(let t=0;t<this.matches.length;t+=2){let r=this.matches[t],s=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?n={from:this.matches[t+1],to:i}:(this.matches[t]++,s=!0)),s||(this.matches.splice(t,2),t-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?n={from:t,to:i}:this.matches.push(1,t)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}"undefined"!=typeof Symbol&&(cd.prototype[Symbol.iterator]=function(){return this});const hd={from:-1,to:-1,match:/.*/.exec("")},dd="gm"+(null==/x/.unicode?"":"u");class ud{constructor(e,t,i,n=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=hd,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new md(e,t,i,n,r);this.re=new RegExp(t,dd+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.iter=e.iter();let s=e.lineAt(n);this.curLineStart=s.from,this.matchPos=gd(e,n),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let i=this.curLineStart+t.index,n=i+t[0].length;if(this.matchPos=gd(this.text,n+(i==n?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<n||i>this.value.to)&&(!this.test||this.test(i,n,t)))return this.value={from:i,to:n,match:t},this;e=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),e=0}}}}const pd=new WeakMap;class fd{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,i){let n=pd.get(e);if(!n||n.from>=i||n.to<=t){let n=new fd(t,e.sliceString(t,i));return pd.set(e,n),n}if(n.from==t&&n.to==i)return n;let{text:r,from:s}=n;return s>t&&(r=e.sliceString(t,s)+r,s=t),n.to<i&&(r+=e.sliceString(n.to,i)),pd.set(e,new fd(s,r)),new fd(t,r.slice(t-s,i-s))}}class md{constructor(e,t,i,n,r){this.text=e,this.to=r,this.done=!1,this.value=hd,this.matchPos=gd(e,n),this.re=new RegExp(t,dd+((null==i?void 0:i.ignoreCase)?"i":"")),this.test=null==i?void 0:i.test,this.flat=fd.get(e,n,this.chunkEnd(n+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let e=this.flat.from+t.index,i=e+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(e,i,t)))return this.value={from:e,to:i,match:t},this.matchPos=gd(this.text,i+(e==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=fd.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function gd(e,t){if(t>=e.length)return t;let i,n=e.lineAt(t);for(;t<n.to&&(i=n.text.charCodeAt(t-n.from))>=56320&&i<57344;)t++;return t}function yd(e){let t=od("input",{class:"cm-textfield",name:"line",value:String(e.state.doc.lineAt(e.state.selection.main.head).number)});function i(){let i=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!i)return;let{state:n}=e,r=n.doc.lineAt(n.selection.main.head),[,s,o,a,l]=i,c=a?+a.slice(1):0,h=o?+o:r.number;if(o&&l){let e=h/100;s&&(e=e*("-"==s?-1:1)+r.number/n.doc.lines),h=Math.round(n.doc.lines*e)}else o&&s&&(h=h*("-"==s?-1:1)+r.number);let d=n.doc.line(Math.max(1,Math.min(n.doc.lines,h))),u=j.cursor(d.from+Math.max(0,Math.min(c,d.length)));e.dispatch({effects:[vd.of(!1),ss.scrollIntoView(u.from,{y:"center"})],selection:u}),e.focus()}return{dom:od("form",{class:"cm-gotoLine",onkeydown:t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({effects:vd.of(!1)}),e.focus()):13==t.keyCode&&(t.preventDefault(),i())},onsubmit:e=>{e.preventDefault(),i()}},od("label",e.state.phrase("Go to line"),": ",t)," ",od("button",{class:"cm-button",type:"submit"},e.state.phrase("go")))}}"undefined"!=typeof Symbol&&(ud.prototype[Symbol.iterator]=md.prototype[Symbol.iterator]=function(){return this});const vd=me.define(),xd=Y.define({create:()=>!0,update(e,t){for(let i of t.effects)i.is(vd)&&(e=i.value);return e},provide:e=>Ao.from(e,(e=>e?yd:null))}),bd=ss.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),wd={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},Od=U.define({combine:e=>Ae(e,wd,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function Sd(e){let t=[Id,Ad];return e&&t.push(Od.of(e)),t}const kd=ci.mark({class:"cm-selectionMatch"}),Pd=ci.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function Cd(e,t,i,n){return!(0!=i&&e(t.sliceDoc(i-1,i))==Se.Word||n!=t.doc.length&&e(t.sliceDoc(n,n+1))==Se.Word)}const Ad=on.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(Od),{state:i}=e,n=i.selection;if(n.ranges.length>1)return ci.none;let r,s=n.main,o=null;if(s.empty){if(!t.highlightWordAroundCursor)return ci.none;let e=i.wordAt(s.head);if(!e)return ci.none;o=i.charCategorizer(s.head),r=i.sliceDoc(e.from,e.to)}else{let e=s.to-s.from;if(e<t.minSelectionLength||e>200)return ci.none;if(t.wholeWords){if(r=i.sliceDoc(s.from,s.to),o=i.charCategorizer(s.head),!Cd(o,i,s.from,s.to)||!function(e,t,i,n){return e(t.sliceDoc(i,i+1))==Se.Word&&e(t.sliceDoc(n-1,n))==Se.Word}(o,i,s.from,s.to))return ci.none}else if(r=i.sliceDoc(s.from,s.to),!r)return ci.none}let a=[];for(let n of e.visibleRanges){let e=new cd(i.doc,r,n.from,n.to);for(;!e.next().done;){let{from:n,to:r}=e.value;if((!o||Cd(o,i,n,r))&&(s.empty&&n<=s.from&&r>=s.to?a.push(Pd.range(n,r)):(n>=s.to||r<=s.from)&&a.push(kd.range(n,r)),a.length>t.maxMatches))return ci.none}}return ci.set(a)}},{decorations:e=>e.decorations}),Id=ss.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),Td=U.define({combine:e=>Ae(e,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new ru(e),scrollToMatch:e=>ss.scrollIntoView(e)})});class $d{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||function(e){try{return new RegExp(e,dd),!0}catch(e){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,((e,t)=>"n"==t?"\n":"r"==t?"\r":"t"==t?"\t":"\\"))}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new Rd(this):new _d(this)}getCursor(e,t=0,i){let n=e.doc?e:Ce.create({doc:e});return null==i&&(i=n.doc.length),this.regexp?Dd(this,n,t,i):Ed(this,n,t,i)}}class Md{constructor(e){this.spec=e}}function Ed(e,t,i,n){return new cd(t.doc,e.unquoted,i,n,e.caseSensitive?void 0:e=>e.toLowerCase(),e.wholeWord?function(e,t){return(i,n,r,s)=>((s>i||s+r.length<n)&&(s=Math.max(0,i-2),r=e.sliceString(s,Math.min(e.length,n+2))),!(t(Ld(r,i-s))==Se.Word&&t(Bd(r,i-s))==Se.Word||t(Bd(r,n-s))==Se.Word&&t(Ld(r,n-s))==Se.Word))}(t.doc,t.charCategorizer(t.selection.main.head)):void 0)}class _d extends Md{constructor(e){super(e)}nextMatch(e,t,i){let n=Ed(this.spec,e,i,e.doc.length).nextOverlapping();if(n.done){let i=Math.min(e.doc.length,t+this.spec.unquoted.length);n=Ed(this.spec,e,0,i).nextOverlapping()}return n.done||n.value.from==t&&n.value.to==i?null:n.value}prevMatchInRange(e,t,i){for(let n=i;;){let i=Math.max(t,n-1e4-this.spec.unquoted.length),r=Ed(this.spec,e,i,n),s=null;for(;!r.nextOverlapping().done;)s=r.value;if(s)return s;if(i==t)return null;n-=1e4}}prevMatch(e,t,i){let n=this.prevMatchInRange(e,0,t);return n||(n=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),!n||n.from==t&&n.to==i?null:n}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let i=Ed(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Ed(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}function Dd(e,t,i,n){return new ud(t.doc,e.search,{ignoreCase:!e.caseSensitive,test:e.wholeWord?(r=t.charCategorizer(t.selection.main.head),(e,t,i)=>!i[0].length||(r(Ld(i.input,i.index))!=Se.Word||r(Bd(i.input,i.index))!=Se.Word)&&(r(Bd(i.input,i.index+i[0].length))!=Se.Word||r(Ld(i.input,i.index+i[0].length))!=Se.Word)):void 0},i,n);var r}function Ld(e,t){return e.slice(P(e,t,!1),t)}function Bd(e,t){return e.slice(t,P(e,t))}class Rd extends Md{nextMatch(e,t,i){let n=Dd(this.spec,e,i,e.doc.length).next();return n.done&&(n=Dd(this.spec,e,0,t).next()),n.done?null:n.value}prevMatchInRange(e,t,i){for(let n=1;;n++){let r=Math.max(t,i-1e4*n),s=Dd(this.spec,e,r,i),o=null;for(;!s.next().done;)o=s.value;if(o&&(r==t||o.from>r+10))return o;if(r==t)return null}}prevMatch(e,t,i){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((t,i)=>"$"==i?"$":"&"==i?e.match[0]:"0"!=i&&+i<e.match.length?e.match[i]:t))}matchAll(e,t){let i=Dd(this.spec,e,0,e.doc.length),n=[];for(;!i.next().done;){if(n.length>=t)return null;n.push(i.value)}return n}highlight(e,t,i,n){let r=Dd(this.spec,e,Math.max(0,t-250),Math.min(i+250,e.doc.length));for(;!r.next().done;)n(r.value.from,r.value.to)}}const Nd=me.define(),Fd=me.define(),jd=Y.define({create:e=>new zd(Kd(e).create(),null),update(e,t){for(let i of t.effects)i.is(Nd)?e=new zd(i.value.create(),e.panel):i.is(Fd)&&(e=new zd(e.query,i.value?Zd:null));return e},provide:e=>Ao.from(e,(e=>e.panel))});class zd{constructor(e,t){this.query=e,this.panel=t}}const Qd=ci.mark({class:"cm-searchMatch"}),Ud=ci.mark({class:"cm-searchMatch cm-searchMatch-selected"}),qd=on.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(jd))}update(e){let t=e.state.field(jd);(t!=e.startState.field(jd)||e.docChanged||e.selectionSet||e.viewportChanged)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t||!e.spec.valid)return ci.none;let{view:i}=this,n=new _e;for(let t=0,r=i.visibleRanges,s=r.length;t<s;t++){let{from:o,to:a}=r[t];for(;t<s-1&&a>r[t+1].from-500;)a=r[++t].to;e.highlight(i.state,o,a,((e,t)=>{let r=i.state.selection.ranges.some((i=>i.from==e&&i.to==t));n.add(e,t,r?Ud:Qd)}))}return n.finish()}},{decorations:e=>e.decorations});function Hd(e){return t=>{let i=t.state.field(jd,!1);return i&&i.query.spec.valid?e(t,i):tu(t)}}const Vd=Hd(((e,{query:t})=>{let{to:i}=e.state.selection.main,n=t.nextMatch(e.state,i,i);if(!n)return!1;let r=j.single(n.from,n.to),s=e.state.facet(Td);return e.dispatch({selection:r,effects:[lu(e,n),s.scrollToMatch(r.main,e)],userEvent:"select.search"}),eu(e),!0})),Wd=Hd(((e,{query:t})=>{let{state:i}=e,{from:n}=i.selection.main,r=t.prevMatch(i,n,n);if(!r)return!1;let s=j.single(r.from,r.to),o=e.state.facet(Td);return e.dispatch({selection:s,effects:[lu(e,r),o.scrollToMatch(s.main,e)],userEvent:"select.search"}),eu(e),!0})),Xd=Hd(((e,{query:t})=>{let i=t.matchAll(e.state,1e3);return!(!i||!i.length||(e.dispatch({selection:j.create(i.map((e=>j.range(e.from,e.to)))),userEvent:"select.search.matches"}),0))})),Gd=Hd(((e,{query:t})=>{let{state:i}=e,{from:n,to:r}=i.selection.main;if(i.readOnly)return!1;let s=t.nextMatch(i,n,n);if(!s)return!1;let o,a,l=s,c=[],h=[];if(l.from==n&&l.to==r&&(a=i.toText(t.getReplacement(l)),c.push({from:l.from,to:l.to,insert:a}),l=t.nextMatch(i,l.from,l.to),h.push(ss.announce.of(i.phrase("replaced match on line $",i.doc.lineAt(n).number)+"."))),l){let t=0==c.length||c[0].from>=s.to?0:s.to-s.from-a.length;o=j.single(l.from-t,l.to-t),h.push(lu(e,l)),h.push(i.facet(Td).scrollToMatch(o.main,e))}return e.dispatch({changes:c,selection:o,effects:h,userEvent:"input.replace"}),!0})),Yd=Hd(((e,{query:t})=>{if(e.state.readOnly)return!1;let i=t.matchAll(e.state,1e9).map((e=>{let{from:i,to:n}=e;return{from:i,to:n,insert:t.getReplacement(e)}}));if(!i.length)return!1;let n=e.state.phrase("replaced $ matches",i.length)+".";return e.dispatch({changes:i,effects:ss.announce.of(n),userEvent:"input.replace.all"}),!0}));function Zd(e){return e.state.facet(Td).createPanel(e)}function Kd(e,t){var i,n,r,s,o;let a=e.selection.main,l=a.empty||a.to>a.from+100?"":e.sliceDoc(a.from,a.to);if(t&&!l)return t;let c=e.facet(Td);return new $d({search:(null!==(i=null==t?void 0:t.literal)&&void 0!==i?i:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(n=null==t?void 0:t.caseSensitive)&&void 0!==n?n:c.caseSensitive,literal:null!==(r=null==t?void 0:t.literal)&&void 0!==r?r:c.literal,regexp:null!==(s=null==t?void 0:t.regexp)&&void 0!==s?s:c.regexp,wholeWord:null!==(o=null==t?void 0:t.wholeWord)&&void 0!==o?o:c.wholeWord})}function Jd(e){let t=So(e,Zd);return t&&t.dom.querySelector("[main-field]")}function eu(e){let t=Jd(e);t&&t==e.root.activeElement&&t.select()}const tu=e=>{let t=e.state.field(jd,!1);if(t&&t.panel){let i=Jd(e);if(i&&i!=e.root.activeElement){let n=Kd(e.state,t.query.spec);n.valid&&e.dispatch({effects:Nd.of(n)}),i.focus(),i.select()}}else e.dispatch({effects:[Fd.of(!0),t?Nd.of(Kd(e.state,t.query.spec)):me.appendConfig.of(hu)]});return!0},iu=e=>{let t=e.state.field(jd,!1);if(!t||!t.panel)return!1;let i=So(e,Zd);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:Fd.of(!1)}),!0},nu=[{key:"Mod-f",run:tu,scope:"editor search-panel"},{key:"F3",run:Vd,shift:Wd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Vd,shift:Wd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:iu,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.main.empty)return!1;let{from:n,to:r}=i.main,s=[],o=0;for(let t=new cd(e.doc,e.sliceDoc(n,r));!t.next().done;){if(s.length>1e3)return!1;t.value.from==n&&(o=s.length),s.push(j.range(t.value.from,t.value.to))}return t(e.update({selection:j.create(s,o),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:e=>{let t=So(e,yd);if(!t){let i=[vd.of(!0)];null==e.state.field(xd,!1)&&i.push(me.appendConfig.of([xd,bd])),e.dispatch({effects:i}),t=So(e,yd)}return t&&t.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:e,dispatch:t})=>{let{ranges:i}=e.selection;if(i.some((e=>e.from===e.to)))return(({state:e,dispatch:t})=>{let{selection:i}=e,n=j.create(i.ranges.map((t=>e.wordAt(t.head)||j.cursor(t.head))),i.mainIndex);return!n.eq(i)&&(t(e.update({selection:n})),!0)})({state:e,dispatch:t});let n=e.sliceDoc(i[0].from,i[0].to);if(e.selection.ranges.some((t=>e.sliceDoc(t.from,t.to)!=n)))return!1;let r=function(e,t){let{main:i,ranges:n}=e.selection,r=e.wordAt(i.head),s=r&&r.from==i.from&&r.to==i.to;for(let i=!1,r=new cd(e.doc,t,n[n.length-1].to);;){if(r.next(),!r.done){if(i&&n.some((e=>e.from==r.value.from)))continue;if(s){let t=e.wordAt(r.value.from);if(!t||t.from!=r.value.from||t.to!=r.value.to)continue}return r.value}if(i)return null;r=new cd(e.doc,t,0,Math.max(0,n[n.length-1].from-1)),i=!0}}(e,n);return!!r&&(t(e.update({selection:e.selection.addRange(j.range(r.from,r.to),!1),effects:ss.scrollIntoView(r.to)})),!0)},preventDefault:!0}];class ru{constructor(e){this.view=e;let t=this.query=e.state.field(jd).query.spec;function i(e,t,i){return od("button",{class:"cm-button",name:e,onclick:t,type:"button"},i)}this.commit=this.commit.bind(this),this.searchField=od("input",{value:t.search,placeholder:su(e,"Find"),"aria-label":su(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=od("input",{value:t.replace,placeholder:su(e,"Replace"),"aria-label":su(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=od("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=od("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=od("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit}),this.dom=od("div",{onkeydown:e=>this.keydown(e),class:"cm-search"},[this.searchField,i("next",(()=>Vd(e)),[su(e,"next")]),i("prev",(()=>Wd(e)),[su(e,"previous")]),i("select",(()=>Xd(e)),[su(e,"all")]),od("label",null,[this.caseField,su(e,"match case")]),od("label",null,[this.reField,su(e,"regexp")]),od("label",null,[this.wordField,su(e,"by word")]),...e.state.readOnly?[]:[od("br"),this.replaceField,i("replace",(()=>Gd(e)),[su(e,"replace")]),i("replaceAll",(()=>Yd(e)),[su(e,"replace all")])],od("button",{name:"close",onclick:()=>iu(e),"aria-label":su(e,"close"),type:"button"},["×"])])}commit(){let e=new $d({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Nd.of(e)}))}keydown(e){var t,i;i=e,xs(ms((t=this.view).state),i,t,"search-panel")?e.preventDefault():13==e.keyCode&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Wd:Vd)(this.view)):13==e.keyCode&&e.target==this.replaceField&&(e.preventDefault(),Gd(this.view))}update(e){for(let t of e.transactions)for(let e of t.effects)e.is(Nd)&&!e.value.eq(this.query)&&this.setQuery(e.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Td).top}}function su(e,t){return e.state.phrase(t)}const ou=30,au=/[\s\.,:;?!]/;function lu(e,{from:t,to:i}){let n=e.state.doc.lineAt(t),r=e.state.doc.lineAt(i).to,s=Math.max(n.from,t-ou),o=Math.min(r,i+ou),a=e.state.sliceDoc(s,o);if(s!=n.from)for(let e=0;e<ou;e++)if(!au.test(a[e+1])&&au.test(a[e])){a=a.slice(e);break}if(o!=r)for(let e=a.length-1;e>a.length-ou;e--)if(!au.test(a[e-1])&&au.test(a[e])){a=a.slice(0,e);break}return ss.announce.of(`${e.state.phrase("current match")}. ${a} ${e.state.phrase("on line")} ${n.number}.`)}const cu=ss.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),hu=[jd,K.low(qd),cu];class du{constructor(e,t,i,n){this.state=e,this.pos=t,this.explicit=i,this.view=n,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=ll(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.text.slice(i-t.from,this.pos-t.from),r=n.search(gu(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,i){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function uu(e){let t=Object.keys(e).join(""),i=/\w/.test(t);return i&&(t=t.replace(/\w/g,"")),`[${i?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function pu(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[i,n]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:function(e){let t=Object.create(null),i=Object.create(null);for(let{label:n}of e){t[n[0]]=!0;for(let e=1;e<n.length;e++)i[n[e]]=!0}let n=uu(t)+uu(i)+"*$";return[new RegExp("^"+n),new RegExp(n)]}(t);return e=>{let r=e.matchBefore(n);return r||e.explicit?{from:r?r.from:e.pos,options:t,validFor:i}:null}}class fu{constructor(e,t,i,n){this.completion=e,this.source=t,this.match=i,this.score=n}}function mu(e){return e.selection.main.from}function gu(e,t){var i;let{source:n}=e,r=t&&"^"!=n[0],s="$"!=n[n.length-1];return r||s?new RegExp(`${r?"^":""}(?:${n})${s?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}const yu=ue.define(),vu=new WeakMap;function xu(e){if(!Array.isArray(e))return e;let t=vu.get(e);return t||vu.set(e,t=pu(e)),t}const bu=me.define(),wu=me.define();class Ou{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let i=C(e,t),n=I(i);this.chars.push(i);let r=e.slice(t,t+n),s=r.toUpperCase();this.folded.push(C(s==r?r.toLowerCase():s,0)),t+=n}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:s}=this;if(1==t.length){let n=C(e,0),r=I(n),s=r==e.length?0:-100;if(n==t[0]);else{if(n!=i[0])return null;s+=-200}return this.ret(s,[0,r])}let o=e.indexOf(this.pattern);if(0==o)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(o<0){for(let r=0,s=Math.min(e.length,200);r<s&&l<a;){let s=C(e,r);s!=t[l]&&s!=i[l]||(n[l++]=r),r+=I(s)}if(l<a)return null}let c=0,h=0,d=!1,u=0,p=-1,f=-1,m=/[a-z]/.test(e),g=!0;for(let n=0,l=Math.min(e.length,200),y=0;n<l&&h<a;){let l=C(e,n);o<0&&(c<a&&l==t[c]&&(r[c++]=n),u<a&&(l==t[u]||l==i[u]?(0==u&&(p=n),f=n+1,u++):u=0));let v,x=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(v=A(l))!=v.toLowerCase()?1:v!=v.toUpperCase()?2:0;(!n||1==x&&m||0==y&&0!=x)&&(t[h]==l||i[h]==l&&(d=!0)?s[h++]=n:s.length&&(g=!1)),y=x,n+=I(l)}return h==a&&0==s[0]&&g?this.result((d?-200:0)-100,s,e):u==a&&0==p?this.ret(-200-e.length+(f==e.length?0:-100),[0,f]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):u==a?this.ret(-900-e.length,[p,f]):h==a?this.result((d?-200:0)-100-700+(g?0:-1100),s,e):2==t.length?null:this.result((n[0]?-700:0)-200-1100,n,e)}result(e,t,i){let n=[],r=0;for(let e of t){let t=e+(this.astral?I(C(i,e)):1);r&&n[r-1]==e?n[r-1]=t:(n[r++]=e,n[r++]=t)}return this.ret(e-i.length,n)}}class Su{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),i=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==i?null:(this.matched=[0,t.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const ku=U.define({combine:e=>Ae(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:Cu,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>i=>Pu(e(i),t(i)),optionClass:(e,t)=>i=>Pu(e(i),t(i)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})});function Pu(e,t){return e?t?e+" "+t:e:t}function Cu(e,t,i,n,r,s){let o,a,l=e.textDirection==wi.RTL,c=l,h=!1,d="top",u=t.left-r.left,p=r.right-t.right,f=n.right-n.left,m=n.bottom-n.top;if(c&&u<Math.min(f,p)?c=!1:!c&&p<Math.min(f,u)&&(c=!0),f<=(c?u:p))o=Math.max(r.top,Math.min(i.top,r.bottom-m))-t.top,a=Math.min(400,c?u:p);else{h=!0,a=Math.min(400,(l?t.right:r.right-t.left)-30);let e=r.bottom-t.bottom;e>=m||e>t.top?o=i.bottom-t.top:(d="bottom",o=t.bottom-i.top)}return{style:`${d}: ${o/((t.bottom-t.top)/s.offsetHeight)}px; max-width: ${a/((t.right-t.left)/s.offsetWidth)}px`,class:"cm-completionInfo-"+(h?l?"left-narrow":"right-narrow":c?"left":"right")}}function Au(e,t,i){if(e<=i)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let n=Math.floor((e-t)/i);return{from:e-(n+1)*i,to:e-n*i}}class Iu{constructor(e,t,i){this.view=e,this.stateField=t,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let n=e.state.field(t),{options:r,selected:s}=n.open,o=e.state.facet(ku);this.optionContent=function(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,i,n){let r=document.createElement("span");r.className="cm-completionLabel";let s=e.displayLabel||e.label,o=0;for(let e=0;e<n.length;){let t=n[e++],i=n[e++];t>o&&r.appendChild(document.createTextNode(s.slice(o,t)));let a=r.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(s.slice(t,i))),a.className="cm-completionMatchedText",o=i}return o<s.length&&r.appendChild(document.createTextNode(s.slice(o))),r},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=Au(r.length,s,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(i=>{let{options:n}=e.state.field(t).open;for(let t,r=i.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(t=/-(\d+)$/.exec(r.id))&&+t[1]<n.length)return this.applyCompletion(e,n[+t[1]]),void i.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let i=e.state.field(this.stateField,!1);i&&i.tooltip&&e.state.facet(ku).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:wu.of(null)})})),this.showOptions(r,n.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let i=e.state.field(this.stateField),n=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=n){let{options:r,selected:s,disabled:o}=i.open;n.open&&n.open.options==r||(this.range=Au(r.length,s,e.state.facet(ku).maxRenderedOptions),this.showOptions(r,i.id)),this.updateSel(),o!=(null===(t=n.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=Au(t.options.length,t.selected,this.view.state.facet(ku).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:i}=t.options[t.selected],{info:n}=i;if(!n)return;let r="string"==typeof n?document.createTextNode(n):n(i);if(!r)return;"then"in r?r.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,i)})).catch((e=>tn(this.view.state,e,"completion info"))):this.addInfoPane(r,i)}}addInfoPane(e,t){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",null!=e.nodeType)i.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:n}=e;i.appendChild(t),this.infoDestroy=n||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)"LI"==i.nodeName&&i.id?n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected"):n--;return t&&function(e,t){let i=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=i.height/e.offsetHeight;n.top<i.top?e.scrollTop-=(i.top-n.top)/r:n.bottom>i.bottom&&(e.scrollTop+=(n.bottom-i.bottom)/r)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),n=e.getBoundingClientRect(),r=this.space;if(!r){let e=this.dom.ownerDocument.defaultView||window;r={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return n.top>Math.min(r.bottom,t.bottom)-10||n.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(ku).positionInfo(this.view,t,n,i,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,i){const n=document.createElement("ul");n.id=t,n.setAttribute("role","listbox"),n.setAttribute("aria-expanded","true"),n.setAttribute("aria-label",this.view.state.phrase("Completions"));let r=null;for(let s=i.from;s<i.to;s++){let{completion:o,match:a}=e[s],{section:l}=o;if(l){let e="string"==typeof l?l:l.name;e!=r&&(s>i.from||0==i.from)&&(r=e,"string"!=typeof l&&l.header?n.appendChild(l.header(l)):n.appendChild(document.createElement("completion-section")).textContent=e)}const c=n.appendChild(document.createElement("li"));c.id=t+"-"+s,c.setAttribute("role","option");let h=this.optionClass(o);h&&(c.className=h);for(let e of this.optionContent){let t=e(o,this.view.state,this.view,a);t&&c.appendChild(t)}}return i.from&&n.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&n.classList.add("cm-completionListIncompleteBottom"),n}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function Tu(e,t){return i=>new Iu(i,e,t)}function $u(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}class Mu{constructor(e,t,i,n,r,s){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r,this.disabled=s}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new Mu(this.options,Lu(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,i,n,r,s){if(n&&!s&&e.some((e=>e.isPending)))return n.setDisabled();let o=function(e,t){let i=[],n=null,r=e=>{i.push(e);let{section:t}=e.completion;if(t){n||(n=[]);let e="string"==typeof t?t:t.name;n.some((t=>t.name==e))||n.push("string"==typeof t?{name:e}:t)}},s=t.facet(ku);for(let n of e)if(n.hasResult()){let e=n.result.getMatch;if(!1===n.result.filter)for(let t of n.result.options)r(new fu(t,n.source,e?e(t):[],1e9-i.length));else{let i,o=t.sliceDoc(n.from,n.to),a=s.filterStrict?new Su(o):new Ou(o);for(let t of n.result.options)if(i=a.match(t.label)){let s=t.displayLabel?e?e(t,i.matched):[]:i.matched;r(new fu(t,n.source,s,i.score+(t.boost||0)))}}}if(n){let e=Object.create(null),t=0,r=(e,t)=>{var i,n;return(null!==(i=e.rank)&&void 0!==i?i:1e9)-(null!==(n=t.rank)&&void 0!==n?n:1e9)||(e.name<t.name?-1:1)};for(let i of n.sort(r))t-=1e5,e[i.name]=t;for(let t of i){let{section:i}=t.completion;i&&(t.score+=e["string"==typeof i?i:i.name])}}let o=[],a=null,l=s.compareCompletions;for(let e of i.sort(((e,t)=>t.score-e.score||l(e.completion,t.completion)))){let t=e.completion;!a||a.label!=t.label||a.detail!=t.detail||null!=a.type&&null!=t.type&&a.type!=t.type||a.apply!=t.apply||a.boost!=t.boost?o.push(e):$u(e.completion)>$u(a)&&(o[o.length-1]=e),a=e.completion}return o}(e,t);if(!o.length)return n&&e.some((e=>e.isPending))?n.setDisabled():null;let a=t.facet(ku).selectOnOpen?0:-1;if(n&&n.selected!=a&&-1!=n.selected){let e=n.options[n.selected].completion;for(let t=0;t<o.length;t++)if(o[t].completion==e){a=t;break}}return new Mu(o,Lu(i,a),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:qu,above:r.aboveCursor},n?n.timestamp:Date.now(),a,!1)}map(e){return new Mu(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new Mu(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Eu{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Eu(Bu,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(ku),n=(i.override||t.languageDataAt("autocomplete",mu(t)).map(xu)).map((t=>(this.active.find((e=>e.source==t))||new Nu(t,this.active.some((e=>0!=e.state))?1:0)).update(e,i)));n.length==this.active.length&&n.every(((e,t)=>e==this.active[t]))&&(n=this.active);let r=this.open,s=e.effects.some((e=>e.is(ju)));r&&e.docChanged&&(r=r.map(e.changes)),e.selection||n.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,n=0;;){for(;i<e.length&&!e[i].hasResult();)i++;for(;n<t.length&&!t[n].hasResult();)n++;let r=i==e.length,s=n==t.length;if(r||s)return r==s;if(e[i++].result!=t[n++].result)return!1}}(n,this.active)||s?r=Mu.build(n,t,this.id,r,i,s):r&&r.disabled&&!n.some((e=>e.isPending))&&(r=null),!r&&n.every((e=>!e.isPending))&&n.some((e=>e.hasResult()))&&(n=n.map((e=>e.hasResult()?new Nu(e.source,0):e)));for(let t of e.effects)t.is(zu)&&(r=r&&r.setSelected(t.value,this.id));return n==this.active&&r==this.open?this:new Eu(n,this.id,r)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?_u:Du}}const _u={"aria-autocomplete":"list"},Du={};function Lu(e,t){let i={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(i["aria-activedescendant"]=e+"-"+t),i}const Bu=[];function Ru(e,t){if(e.isUserEvent("input.complete")){let i=e.annotation(yu);if(i&&t.activateOnCompletion(i))return 12}let i=e.isUserEvent("input.type");return i&&t.activateOnTyping?5:i?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class Nu{constructor(e,t,i=!1){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let i=Ru(e,t),n=this;(8&i||16&i&&this.touches(e))&&(n=new Nu(n.source,0)),4&i&&0==n.state&&(n=new Nu(this.source,1)),n=n.updateFor(e,i);for(let t of e.effects)if(t.is(bu))n=new Nu(n.source,1,t.value);else if(t.is(wu))n=new Nu(n.source,0);else if(t.is(ju))for(let e of t.value)e.source==n.source&&(n=e);return n}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(mu(e.state))}}class Fu extends Nu{constructor(e,t,i,n,r,s){super(e,3,t),this.limit=i,this.result=n,this.from=r,this.to=s}hasResult(){return!0}updateFor(e,t){var i;if(!(3&t))return this.map(e.changes);let n=this.result;n.map&&!e.changes.empty&&(n=n.map(n,e.changes));let r=e.changes.mapPos(this.from),s=e.changes.mapPos(this.to,1),o=mu(e.state);if(o>s||!n||2&t&&(mu(e.startState)==this.from||o<this.limit))return new Nu(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return function(e,t,i,n){if(!e)return!1;let r=t.sliceDoc(i,n);return"function"==typeof e?e(r,i,n,t):gu(e,!0).test(r)}(n.validFor,e.state,r,s)?new Fu(this.source,this.explicit,a,n,r,s):n.update&&(n=n.update(n,r,s,new du(e.state,o,!1)))?new Fu(this.source,this.explicit,a,n,n.from,null!==(i=n.to)&&void 0!==i?i:mu(e.state)):new Nu(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Fu(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Nu(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}const ju=me.define({map:(e,t)=>e.map((e=>e.map(t)))}),zu=me.define(),Qu=Y.define({create:()=>Eu.start(),update:(e,t)=>e.update(t),provide:e=>[po.from(e,(e=>e.tooltip)),ss.contentAttributes.from(e,(e=>e.attrs))]});function Uu(e,t){const i=t.completion.apply||t.completion.label;let n=e.state.field(Qu).active.find((e=>e.source==t.source));return n instanceof Fu&&("string"==typeof i?e.dispatch(Object.assign(Object.assign({},function(e,t,i,n){let{main:r}=e.selection,s=i-r.from,o=n-r.from;return Object.assign(Object.assign({},e.changeByRange((a=>{if(a!=r&&i!=n&&e.sliceDoc(a.from+s,a.from+o)!=e.sliceDoc(i,n))return{range:a};let l=e.toText(t);return{changes:{from:a.from+s,to:n==r.from?a.to:a.from+o,insert:l},range:j.cursor(a.from+s+l.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})}(e.state,i,n.from,n.to)),{annotations:yu.of(t.completion)})):i(e,t.completion,n.from,n.to),!0)}const qu=Tu(Qu,Uu);function Hu(e,t="option"){return i=>{let n=i.state.field(Qu,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<i.state.facet(ku).interactionDelay)return!1;let r,s=1;"page"==t&&(r=bo(i,n.open.tooltip))&&(s=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+s*(e?1:-1):e?0:o-1;return a<0?a="page"==t?0:o-1:a>=o&&(a="page"==t?o-1:0),i.dispatch({effects:zu.of(a)}),!0}}const Vu=e=>!!e.state.field(Qu,!1)&&(e.dispatch({effects:bu.of(!0)}),!0);class Wu{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const Xu=on.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(Qu).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(Qu),i=e.state.facet(ku);if(!e.selectionSet&&!e.docChanged&&e.startState.field(Qu)==t)return;let n=e.transactions.some((e=>{let t=Ru(e,i);return 8&t||(e.selection||e.docChanged)&&!(3&t)}));for(let t=0;t<this.running.length;t++){let i=this.running[t];if(n||i.context.abortOnDocChange&&e.docChanged||i.updates.length+e.transactions.length>50&&Date.now()-i.time>1e3){for(let e of i.context.abortListeners)try{e()}catch(e){tn(this.view.state,e)}i.context.abortListeners=null,this.running.splice(t--,1)}else i.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((e=>e.effects.some((e=>e.is(bu)))))&&(this.pendingStart=!0);let r=this.pendingStart?50:i.activateOnTypingDelay;if(this.debounceUpdate=t.active.some((e=>e.isPending&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),r):-1,0!=this.composing)for(let t of e.transactions)t.isUserEvent("input.type")?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(Qu);for(let e of t.active)e.isPending&&!this.running.some((t=>t.active.source==e.source))&&this.startQuery(e);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(ku).updateSyncTime))}startQuery(e){let{state:t}=this.view,i=mu(t),n=new du(t,i,e.explicit,this.view),r=new Wu(e,n);this.running.push(r),Promise.resolve(e.source(n)).then((e=>{r.context.aborted||(r.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:wu.of(null)}),tn(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(ku).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(ku),n=this.view.state.field(Qu);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(void 0===s.done)continue;if(this.running.splice(r--,1),s.done){let n=mu(s.updates.length?s.updates[0].startState:this.view.state),r=Math.min(n,s.done.from+(s.active.explicit?0:1)),o=new Fu(s.active.source,s.active.explicit,r,s.done,s.done.from,null!==(e=s.done.to)&&void 0!==e?e:n);for(let e of s.updates)o=o.update(e,i);if(o.hasResult()){t.push(o);continue}}let o=n.active.find((e=>e.source==s.active.source));if(o&&o.isPending)if(null==s.done){let e=new Nu(s.active.source,0);for(let t of s.updates)e=e.update(t,i);e.isPending||t.push(e)}else this.startQuery(o)}(t.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:ju.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(Qu,!1);if(t&&t.tooltip&&this.view.state.facet(ku).closeOnBlur){let i=t.open&&bo(this.view,t.open.tooltip);i&&i.dom.contains(e.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:wu.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:bu.of(!1)})),20),this.composing=0}}}),Gu="object"==typeof navigator&&/Win/.test(navigator.platform),Yu=K.highest(ss.domEventHandlers({keydown(e,t){let i=t.state.field(Qu,!1);if(!i||!i.open||i.open.disabled||i.open.selected<0||e.key.length>1||e.ctrlKey&&(!Gu||!e.altKey)||e.metaKey)return!1;let n=i.open.options[i.open.selected],r=i.active.find((e=>e.source==n.source)),s=n.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(e.key)>-1&&Uu(t,n),!1}})),Zu=ss.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Ku={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ju=me.define({map(e,t){let i=t.mapPos(e,-1,$.TrackAfter);return null==i?void 0:i}}),ep=new class extends Ie{};ep.startSide=1,ep.endSide=-1;const tp=Y.define({create:()=>Ee.empty,update(e,t){if(e=e.map(t.changes),t.selection){let i=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=i.from&&e<=i.to})}for(let i of t.effects)i.is(Ju)&&(e=e.update({add:[ep.range(i.value,i.value+1)]}));return e}}),ip="()[]{}<>";function np(e){for(let t=0;t<8;t+=2)if(ip.charCodeAt(t)==e)return ip.charAt(t+1);return A(e<128?e:e+1)}function rp(e,t){return e.languageDataAt("closeBrackets",t)[0]||Ku}const sp="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),op=ss.inputHandler.of(((e,t,i,n)=>{if((sp?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let r=e.state.selection.main;if(n.length>2||2==n.length&&1==I(C(n,0))||t!=r.from||i!=r.to)return!1;let s=function(e,t){let i=rp(e,e.selection.main.head),n=i.brackets||Ku.brackets;for(let r of n){let s=np(C(r,0));if(t==r)return s==r?up(e,r,n.indexOf(r+r+r)>-1,i):hp(e,r,s,i.before||Ku.before);if(t==s&&lp(e,e.selection.main.from))return dp(e,0,s)}return null}(e.state,n);return!!s&&(e.dispatch(s),!0)})),ap=[{key:"Backspace",run:({state:e,dispatch:t})=>{if(e.readOnly)return!1;let i=rp(e,e.selection.main.head).brackets||Ku.brackets,n=null,r=e.changeByRange((t=>{if(t.empty){let n=function(e,t){let i=e.sliceString(t-2,t);return I(C(i,0))==i.length?i:i.slice(1)}(e.doc,t.head);for(let r of i)if(r==n&&cp(e.doc,t.head)==np(C(r,0)))return{changes:{from:t.head-r.length,to:t.head+r.length},range:j.cursor(t.head-r.length)}}return{range:n=t}}));return n||t(e.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!n}}];function lp(e,t){let i=!1;return e.field(tp).between(0,e.doc.length,(e=>{e==t&&(i=!0)})),i}function cp(e,t){let i=e.sliceString(t,t+2);return i.slice(0,I(C(i,0)))}function hp(e,t,i,n){let r=null,s=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:i,from:s.to}],effects:Ju.of(s.to+t.length),range:j.range(s.anchor+t.length,s.head+t.length)};let o=cp(e.doc,s.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:t+i,from:s.head},effects:Ju.of(s.head+t.length),range:j.cursor(s.head+t.length)}:{range:r=s}}));return r?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function dp(e,t,i){let n=null,r=e.changeByRange((t=>t.empty&&cp(e.doc,t.head)==i?{changes:{from:t.head,to:t.head+i.length,insert:i},range:j.cursor(t.head+i.length)}:n={range:t}));return n?null:e.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function up(e,t,i,n){let r=n.stringPrefixes||Ku.stringPrefixes,s=null,o=e.changeByRange((n=>{if(!n.empty)return{changes:[{insert:t,from:n.from},{insert:t,from:n.to}],effects:Ju.of(n.to+t.length),range:j.range(n.anchor+t.length,n.head+t.length)};let o,a=n.head,l=cp(e.doc,a);if(l==t){if(pp(e,a))return{changes:{insert:t+t,from:a},effects:Ju.of(a+t.length),range:j.cursor(a+t.length)};if(lp(e,a)){let n=i&&e.sliceDoc(a,a+3*t.length)==t+t+t?t+t+t:t;return{changes:{from:a,to:a+n.length,insert:n},range:j.cursor(a+n.length)}}}else{if(i&&e.sliceDoc(a-2*t.length,a)==t+t&&(o=fp(e,a-2*t.length,r))>-1&&pp(e,o))return{changes:{insert:t+t+t+t,from:a},effects:Ju.of(a+t.length),range:j.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=Se.Word&&fp(e,a,r)>-1&&!function(e,t,i,n){let r=ll(e).resolveInner(t,-1),s=n.reduce(((e,t)=>Math.max(e,t.length)),0);for(let o=0;o<5;o++){let o=e.sliceDoc(r.from,Math.min(r.to,r.from+i.length+s)),a=o.indexOf(i);if(!a||a>-1&&n.indexOf(o.slice(0,a))>-1){let t=r.firstChild;for(;t&&t.from==r.from&&t.to-t.from>i.length+a;){if(e.sliceDoc(t.to-i.length,t.to)==i)return!1;t=t.firstChild}return!0}let l=r.to==t&&r.parent;if(!l)break;r=l}return!1}(e,a,t,r))return{changes:{insert:t+t,from:a},effects:Ju.of(a+t.length),range:j.cursor(a+t.length)}}return{range:s=n}}));return s?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function pp(e,t){let i=ll(e).resolveInner(t+1);return i.parent&&i.from==t}function fp(e,t,i){let n=e.charCategorizer(t);if(n(e.sliceDoc(t-1,t))!=Se.Word)return t;for(let r of i){let i=t-r.length;if(e.sliceDoc(i,t)==r&&n(e.sliceDoc(i-1,i))!=Se.Word)return i}return-1}function mp(e={}){return[Yu,Qu,ku.of(e),Xu,yp,Zu]}const gp=[{key:"Ctrl-Space",run:Vu},{mac:"Alt-`",run:Vu},{key:"Escape",run:e=>{let t=e.state.field(Qu,!1);return!(!t||!t.active.some((e=>0!=e.state))||(e.dispatch({effects:wu.of(null)}),0))}},{key:"ArrowDown",run:Hu(!0)},{key:"ArrowUp",run:Hu(!1)},{key:"PageDown",run:Hu(!0,"page")},{key:"PageUp",run:Hu(!1,"page")},{key:"Enter",run:e=>{let t=e.state.field(Qu,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(ku).interactionDelay)&&Uu(e,t.open.options[t.open.selected])}}],yp=K.highest(ps.computeN([ku],(e=>e.facet(ku).defaultKeymap?[gp]:[])));class vp{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class xp{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}static init(e,t,i){let n=e,r=i.facet(Ep).markerFilter;r&&(n=r(n,i));let s=e.slice().sort(((e,t)=>e.from-t.from||e.to-t.to)),o=new _e,a=[],l=0;for(let e=0;;){let t,n,r=e==s.length?null:s[e];if(!r&&!a.length)break;for(a.length?(t=l,n=a.reduce(((e,t)=>Math.min(e,t.to)),r&&r.from>t?r.from:1e8)):(t=r.from,n=r.to,a.push(r),e++);e<s.length;){let i=s[e];if(i.from!=t||!(i.to>i.from||i.to==t)){n=Math.min(i.from,n);break}a.push(i),e++,n=Math.min(i.to,n)}let c=Qp(a);if(a.some((e=>e.from==e.to||e.from==e.to-1&&i.doc.lineAt(e.from).to==e.from)))o.add(t,t,ci.widget({widget:new Bp(c),diagnostics:a.slice()}));else{let e=a.reduce(((e,t)=>t.markClass?e+" "+t.markClass:e),"");o.add(t,n,ci.mark({class:"cm-lintRange cm-lintRange-"+c+e,diagnostics:a.slice(),inclusiveEnd:a.some((e=>e.to>n))}))}l=n;for(let e=0;e<a.length;e++)a[e].to<=l&&a.splice(e--,1)}let c=o.finish();return new xp(c,t,bp(c))}}function bp(e,t=null,i=0){let n=null;return e.between(i,1e9,((e,i,{spec:r})=>{if(!(t&&r.diagnostics.indexOf(t)<0))if(n){if(r.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new vp(n.from,i,n.diagnostic)}else n=new vp(e,i,t||r.diagnostics[0])})),n}function wp(e,t){return e.field(Pp,!1)?t:t.concat(me.appendConfig.of(Up))}const Op=me.define(),Sp=me.define(),kp=me.define(),Pp=Y.define({create:()=>new xp(ci.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let i=e.diagnostics.map(t.changes),n=null,r=e.panel;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);n=bp(i,e.selected.diagnostic,r)||bp(i,null,r)}!i.size&&r&&t.state.facet(Ep).autoPanel&&(r=null),e=new xp(i,r,n)}for(let i of t.effects)if(i.is(Op)){let n=t.state.facet(Ep).autoPanel?i.value.length?Np.open:null:e.panel;e=xp.init(i.value,n,t.state)}else i.is(Sp)?e=new xp(e.diagnostics,i.value?Np.open:null,e.selected):i.is(kp)&&(e=new xp(e.diagnostics,e.panel,i.value));return e},provide:e=>[Ao.from(e,(e=>e.panel)),ss.decorations.from(e,(e=>e.diagnostics))]}),Cp=ci.mark({class:"cm-lintRange cm-lintRange-active"});function Ap(e,t,i){let n,{diagnostics:r}=e.state.field(Pp),s=-1,o=-1;r.between(t-(i<0?1:0),t+(i>0?1:0),((e,r,{spec:a})=>{if(t>=e&&t<=r&&(e==r||(t>e||i>0)&&(t<r||i<0)))return n=a.diagnostics,s=e,o=r,!1}));let a=e.state.facet(Ep).tooltipFilter;return n&&a&&(n=a(n,e.state)),n?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create:()=>({dom:Ip(e,n)})}:null}function Ip(e,t){return od("ul",{class:"cm-tooltip-lint"},t.map((t=>Lp(e,t,!1))))}const Tp=e=>{let t=e.state.field(Pp,!1);return!(!t||!t.panel||(e.dispatch({effects:Sp.of(!1)}),0))},$p=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(Pp,!1);t&&t.panel||e.dispatch({effects:wp(e.state,[Sp.of(!0)])});let i=So(e,Np.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(Pp,!1);if(!t)return!1;let i=e.state.selection.main,n=t.diagnostics.iter(i.to+1);return!(!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==i.from&&n.to==i.to)||(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),0))}}],Mp=on.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(Ep);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){clearTimeout(this.timeout);let e=Date.now();if(e<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(Ep);t.length&&function(e,t,i){let n=[],r=-1;for(let s of e)s.then((i=>{n.push(i),clearTimeout(r),n.length==e.length?t(n):r=setTimeout((()=>t(n)),200)}),i)}(t.map((e=>Promise.resolve(e(this.view)))),(t=>{this.view.state.doc==e.doc&&this.view.dispatch(function(e,t){return{effects:wp(e,[Op.of(t)])}}(this.view.state,t.reduce(((e,t)=>e.concat(t)))))}),(e=>{tn(this.view.state,e)}))}}update(e){let t=e.state.facet(Ep);(e.docChanged||t!=e.startState.facet(Ep)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Ep=U.define({combine:e=>Object.assign({sources:e.map((e=>e.source)).filter((e=>null!=e))},Ae(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?i=>e(i)||t(i):e:t}))});function _p(e,t={}){return[Ep.of({source:e,config:t}),Mp,Up]}function Dp(e){let t=[];if(e)e:for(let{name:i}of e){for(let e=0;e<i.length;e++){let n=i[e];if(/[a-zA-Z]/.test(n)&&!t.some((e=>e.toLowerCase()==n.toLowerCase()))){t.push(n);continue e}}t.push("")}return t}function Lp(e,t,i){var n;let r=i?Dp(t.actions):[];return od("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},od("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(n=t.actions)||void 0===n?void 0:n.map(((i,n)=>{let s=!1,o=n=>{if(n.preventDefault(),s)return;s=!0;let r=bp(e.state.field(Pp).diagnostics,t);r&&i.apply(e,r.from,r.to)},{name:a}=i,l=r[n]?a.indexOf(r[n]):-1,c=l<0?a:[a.slice(0,l),od("u",a.slice(l,l+1)),a.slice(l+1)];return od("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${a}${l<0?"":` (access key "${r[n]})"`}.`},c)})),t.source&&od("div",{class:"cm-diagnosticSource"},t.source))}class Bp extends ai{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return od("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Rp{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Lp(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Np{constructor(e){this.view=e,this.items=[],this.list=od("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)Tp(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:i}=this.items[this.selectedIndex],n=Dp(i.actions);for(let r=0;r<n.length;r++)if(n[r].toUpperCase().charCodeAt(0)==t.keyCode){let t=bp(this.view.state.field(Pp).diagnostics,i);t&&i.actions[r].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=od("div",{class:"cm-panel-lint"},this.list,od("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Tp(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(Pp).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(Pp),i=0,n=!1,r=null,s=new Set;for(e.between(0,this.view.state.doc.length,((e,o,{spec:a})=>{for(let e of a.diagnostics){if(s.has(e))continue;s.add(e);let o,a=-1;for(let t=i;t<this.items.length;t++)if(this.items[t].diagnostic==e){a=t;break}a<0?(o=new Rp(this.view,e),this.items.splice(i,0,o),n=!0):(o=this.items[a],a>i&&(this.items.splice(i,a-i),n=!0)),t&&o.diagnostic==t.diagnostic?o.dom.hasAttribute("aria-selected")||(o.dom.setAttribute("aria-selected","true"),r=o):o.dom.hasAttribute("aria-selected")&&o.dom.removeAttribute("aria-selected"),i++}}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();0==this.items.length&&(this.items.push(new Rp(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let i=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/i:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/i)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=bp(this.view.state.field(Pp).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:kp.of(t)})}static open(e){return new Np(e)}}function Fp(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const jp=ss.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Fp("#d11")},".cm-lintRange-warning":{backgroundImage:Fp("orange")},".cm-lintRange-info":{backgroundImage:Fp("#999")},".cm-lintRange-hint":{backgroundImage:Fp("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function zp(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function Qp(e){let t="hint",i=1;for(let n of e){let e=zp(n.severity);e>i&&(i=e,t=n.severity)}return t}const Up=[Pp,ss.decorations.compute([Pp],(e=>{let{selected:t,panel:i}=e.field(Pp);return t&&i&&t.from!=t.to?ci.set([Cp.range(t.from,t.to)]):ci.none})),xo(Ap,{hideOn:function(e,t){let i=t.pos,n=t.end||i,r=e.state.facet(Ep).hideOn(e,i,n);if(null!=r)return r;let s=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(Op)))&&!e.changes.touchesRange(s.from,Math.max(s.to,n)))}}),jp],qp=(()=>[Xo(),Zo,Hs(),Hc(),ec(),Is(),[Bs,Rs],Ce.allowMultipleSelections.of(!0),Ce.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let i=e.newDoc,{head:n}=e.newSelection.main,r=i.lineAt(n);if(n>r.from+200)return e;let s=i.sliceString(r.from,n);if(!t.some((e=>e.test(s))))return e;let{state:o}=e,a=-1,l=[];for(let{head:e}of o.selection.ranges){let t=o.doc.lineAt(e);if(t.from==a)continue;a=t.from;let i=Sl(o,t.from);if(null==i)continue;let n=/^\s*/.exec(t.text)[0],r=Ol(o,i);n!=r&&l.push({from:t.from,to:t.from+n.length,insert:r})}return l.length?[e,{changes:l,sequential:!0}]:e})),oc(cc,{fallback:!0}),xc(),[op,tp],mp(),Js(),io(),Ys,Sd(),ps.of([...ap,...rd,...nu,...lh,...Hl,...gp,...$p])])();class Hp{constructor(e,t,i,n,r,s,o,a,l,c=0,h){this.p=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=s,this.buffer=o,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){let n=e.parser.context;return new Hp(e,[],t,i,i,0,[],0,n?new Vp(n,n.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let i=e>>19,n=65535&e,{parser:r}=this.p,s=this.reducePos<this.pos-25;s&&this.setLookAhead(this.pos);let o=r.dynamicPrecedence(n);if(o&&(this.score+=o),0==i)return this.pushState(r.getGoto(this.state,n,!0),this.reducePos),n<r.minRepeatTerm&&this.storeNode(n,this.reducePos,this.reducePos,s?8:4,!0),void this.reduceContext(n,this.reducePos);let a=this.stack.length-3*(i-1)-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[n])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let h=a?this.stack[a-1]:0,d=this.bufferBase+this.buffer.length-h;if(n<r.minRepeatTerm||131072&e){let e=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(n,l,e,d+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=r.getGoto(e,n,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(n,l)}storeNode(e,t,i,n=4,r=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==i)return;if(e.buffer[n-2]>=t)return void(e.buffer[n-2]=i)}}if(r&&this.pos!=i){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4]){let e=!1;for(let t=r;t>0&&this.buffer[t-2]>i;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,n>4&&(n-=4)}this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=i,this.buffer[r+3]=n}else this.buffer.push(e,t,i,n)}shift(e,t,i,n){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let r=e,{parser:s}=this.p;(n>this.pos||t<=s.maxNode)&&(this.pos=n,s.stateFlag(r,1)||(this.reducePos=n)),this.pushState(r,i),this.shiftContext(t,i),t<=s.maxNode&&this.buffer.push(t,i,n,4)}else this.pos=n,this.shiftContext(t,i),t<=this.p.parser.maxNode&&this.buffer.push(t,i,n,4)}apply(e,t,i,n){65536&e?this.reduce(e):this.shift(e,t,i,n)}useNode(e,t){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new Hp(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Wp(this);;){let i=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==i)return!1;if(0==(65536&i))return!0;t.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let n,r=0;r<t.length;r+=2)(n=t[r+1])!=this.state&&this.p.parser.hasAction(n,e)&&i.push(t[r],n);if(this.stack.length<120)for(let e=0;i.length<8&&e<t.length;e+=2){let n=t[e+1];i.some(((e,t)=>1&t&&e==n))||i.push(t[e],n)}t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e+=2){let n=t[e+1];if(n==this.state)continue;let r=this.split();r.pushState(n,this.pos),r.storeNode(0,r.pos,r.pos,4,!0),r.shiftContext(t[e],this.pos),r.reducePos=this.pos,r.score-=200,i.push(r)}return i}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let i=t>>19,n=65535&t,r=this.stack.length-3*i;if(r<0||e.getGoto(this.stack[r],n,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],i=(n,r)=>{if(!t.includes(n))return t.push(n),e.allActions(n,(t=>{if(393216&t);else if(65536&t){let i=(t>>19)-r;if(i>1){let n=65535&t,r=this.stack.length-3*i;if(r>=0&&e.getGoto(this.stack[r],n,!1)>=0)return i<<19|65536|n}}else{let e=i(t,r+1);if(null!=e)return e}}))};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Vp(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Vp{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Wp{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(i-1);let n=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=n}}class Xp{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Xp(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new Xp(this.stack,this.pos,this.index)}}function Gp(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let n=0,r=0;n<e.length;){let s=0;for(;;){let t=e.charCodeAt(n++),i=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let r=t-32;if(r>=46&&(r-=46,i=!0),s+=r,i)break;s*=46}i?i[r++]=s:i=new t(s)}return i}class Yp{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Zp=new Yp;class Kp{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Zp,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let i=this.range,n=this.rangeIndex,r=this.pos+e;for(;r<i.from;){if(!n)return null;let e=this.ranges[--n];r-=i.from-e.to,i=e}for(;t<0?r>i.to:r>=i.to;){if(n==this.ranges.length-1)return null;let e=this.ranges[++n];r+=e.from-i.to,i=e}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,i,n=this.chunkOff+e;if(n>=0&&n<this.chunk.length)t=this.pos+e,i=this.chunk.charCodeAt(n);else{let n=this.resolveOffset(e,1);if(null==n)return-1;if(t=n,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,n=this.range;for(;n.to<=t;)n=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>n.to&&(this.chunk2=this.chunk2.slice(0,n.to-t)),i=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),i}acceptToken(e,t=0){let i=t?this.resolveOffset(t,-1):this.pos;if(null==i||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Zp,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let i="";for(let n of this.ranges){if(n.from>=t)break;n.to>e&&(i+=this.input.read(Math.max(n.from,e),Math.min(n.to,t)))}return i}}class Jp{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:i}=t.p;tf(this.data,e,t,this.id,i.data,i.tokenPrecTable)}}Jp.prototype.contextual=Jp.prototype.fallback=Jp.prototype.extend=!1;class ef{constructor(e,t,i){this.precTable=t,this.elseToken=i,this.data="string"==typeof e?Gp(e):e}token(e,t){let i=e.pos,n=0;for(;;){let i=e.next<0,r=e.resolveOffset(1,1);if(tf(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(i||n++,null==r)break;e.reset(r,e.token)}n&&(e.reset(i,e.token),e.acceptToken(this.elseToken,n))}}function tf(e,t,i,n,r,s){let o=0,a=1<<n,{dialect:l}=i.p.parser;e:for(;0!=(a&e[o]);){let i=e[o+1];for(let n=o+3;n<i;n+=2)if((e[n+1]&a)>0){let i=e[n];if(l.allows(i)&&(-1==t.token.value||t.token.value==i||rf(i,t.token.value,r,s))){t.acceptToken(i);break}}let n=t.next,c=0,h=e[o+2];if(!(t.next<0&&h>c&&65535==e[i+3*h-3])){for(;c<h;){let r=c+h>>1,s=i+r+(r<<1),a=e[s],l=e[s+1]||65536;if(n<a)h=r;else{if(!(n>=l)){o=e[s+2],t.advance();continue e}c=r+1}}break}o=e[i+3*h-1]}}function nf(e,t,i){for(let n,r=t;65535!=(n=e[r]);r++)if(n==i)return r-t;return-1}function rf(e,t,i,n){let r=nf(i,n,t);return r<0||nf(i,n,e)<r}ef.prototype.contextual=Jp.prototype.fallback=Jp.prototype.extend=!1;const sf="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let of=null;function af(e,t,i){let n=e.cursor(la.IncludeAnonymous);for(n.moveTo(t);;)if(!(i<0?n.childBefore(t):n.childAfter(t)))for(;;){if((i<0?n.to<t:n.from>t)&&!n.type.isError)return i<0?Math.max(0,Math.min(n.to-1,t-25)):Math.min(e.length,Math.max(n.from+1,t+25));if(i<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return i<0?0:e.length}}class lf{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?af(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?af(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=i.children[n],s=this.start[t]+i.positions[n];if(s>e)return this.nextStart=s,null;if(r instanceof ca){if(s==e){if(s<this.safeFrom)return null;let e=s+r.length;if(e<=this.safeTo){let t=r.prop(ta.lookAhead);if(!t||e+t<this.fragment.to)return r}}this.index[t]++,s+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(s),this.index.push(0))}else this.index[t]++,this.nextStart=s+r.length}}}class cf{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new Yp))}getActions(e){let t=0,i=null,{parser:n}=e.p,{tokenizers:r}=n,s=n.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,a=0;for(let n=0;n<r.length;n++){if(0==(1<<n&s))continue;let l=r[n],c=this.tokens[n];if((!i||l.fallback)&&((l.contextual||c.start!=e.pos||c.mask!=s||c.context!=o)&&(this.updateCachedToken(c,l,e),c.mask=s,c.context=o),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let n=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!l.extend&&(i=c,t>n))break}}for(;this.actions.length>t;)this.actions.pop();return a&&e.setLookAhead(a),i||e.pos!=this.stream.end||(i=new Yp,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,t=this.addActions(e,i.value,i.end,t)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Yp,{pos:i,p:n}=e;return t.start=i,t.end=Math.min(i+1,n.stream.end),t.value=i==n.stream.end?n.parser.eofTerm:0,t}updateCachedToken(e,t,i){let n=this.stream.clipPos(i.pos);if(t.token(this.stream.reset(n,e),i),e.value>-1){let{parser:t}=i.p;for(let n=0;n<t.specialized.length;n++)if(t.specialized[n]==e.value){let r=t.specializers[n](this.stream.read(e.start,e.end),i);if(r>=0&&i.p.parser.dialect.allows(r>>1)){0==(1&r)?e.value=r>>1:e.extended=r>>1;break}}}else e.value=0,e.end=this.stream.clipPos(n+1)}putAction(e,t,i,n){for(let t=0;t<n;t+=3)if(this.actions[t]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:s}=e.p,{data:o}=s;for(let e=0;e<2;e++)for(let a=s.stateSlot(r,e?2:1);;a+=3){if(65535==o[a]){if(1!=o[a+1]){0==n&&2==o[a+1]&&(n=this.putAction(mf(o,a+2),t,i,n));break}a=mf(o,a+2)}o[a]==t&&(n=this.putAction(mf(o,a+1),t,i,n))}return n}}class hf{constructor(e,t,i,n){this.parser=e,this.input=t,this.ranges=n,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Kp(t,n),this.tokens=new cf(e,this.stream),this.topTerm=e.top[1];let{from:r}=n[0];this.stacks=[Hp.start(this,e.top[0],r)],this.fragments=i.length&&this.stream.end-r>4*e.bufferLength?new lf(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,i=this.stacks,n=this.minStackPos,r=this.stacks=[];if(this.bigReductionCount>300&&1==i.length){let[e]=i;for(;e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let s=0;s<i.length;s++){let o=i[s];for(;;){if(this.tokens.mainToken=null,o.pos>n)r.push(o);else{if(this.advanceStack(o,r,i))continue;{e||(e=[],t=[]),e.push(o);let i=this.tokens.getMainToken(o);t.push(i.value,i.end)}}break}}if(!r.length){let t=e&&function(e){let t=null;for(let i of e){let e=i.p.stoppedAt;(i.pos==i.p.stream.end||null!=e&&i.pos>e)&&i.p.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i)}return t}(e);if(t)return sf&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw sf&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,r);if(i)return sf&&console.log("Force-finish "+this.stackID(i)),this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(r.length>e)for(r.sort(((e,t)=>t.score-e.score));r.length>e;)r.pop();r.some((e=>e.reducePos>n))&&this.recovering--}else if(r.length>1){e:for(let e=0;e<r.length-1;e++){let t=r[e];for(let i=e+1;i<r.length;i++){let n=r[i];if(t.sameState(n)||t.buffer.length>500&&n.buffer.length>500){if(!((t.score-n.score||t.buffer.length-n.buffer.length)>0)){r.splice(e--,1);continue e}r.splice(i--,1)}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let e=1;e<r.length;e++)r[e].pos<this.minStackPos&&(this.minStackPos=r[e].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,i){let n=e.pos,{parser:r}=this,s=sf?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&n>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,i=t?e.curContext.hash:0;for(let o=this.fragments.nodeAt(n);o;){let n=this.parser.nodeSet.types[o.type.id]==o.type?r.getGoto(e.state,o.type.id):-1;if(n>-1&&o.length&&(!t||(o.prop(ta.contextHash)||0)==i))return e.useNode(o,n),sf&&console.log(s+this.stackID(e)+` (via reuse of ${r.getName(o.type.id)})`),!0;if(!(o instanceof ca)||0==o.children.length||o.positions[0]>0)break;let a=o.children[0];if(!(a instanceof ca&&0==o.positions[0]))break;o=a}}let o=r.stateSlot(e.state,4);if(o>0)return e.reduce(o),sf&&console.log(s+this.stackID(e)+` (via always-reduce ${r.getName(65535&o)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let o=0;o<a.length;){let l=a[o++],c=a[o++],h=a[o++],d=o==a.length||!i,u=d?e:e.split(),p=this.tokens.mainToken;if(u.apply(l,c,p?p.start:u.pos,h),sf&&console.log(s+this.stackID(u)+` (via ${0==(65536&l)?"shift":`reduce of ${r.getName(65535&l)}`} for ${r.getName(c)} @ ${n}${u==e?"":", split"})`),d)return!0;u.pos>n?t.push(u):i.push(u)}return!1}advanceFully(e,t){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return df(e,t),!0}}runRecovery(e,t,i){let n=null,r=!1;for(let s=0;s<e.length;s++){let o=e[s],a=t[s<<1],l=t[1+(s<<1)],c=sf?this.stackID(o)+" -> ":"";if(o.deadEnd){if(r)continue;if(r=!0,o.restart(),sf&&console.log(c+this.stackID(o)+" (restarted)"),this.advanceFully(o,i))continue}let h=o.split(),d=c;for(let e=0;h.forceReduce()&&e<10&&(sf&&console.log(d+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));e++)sf&&(d=this.stackID(h)+" -> ");for(let e of o.recoverByInsert(a))sf&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.stream.end>o.pos?(l==o.pos&&(l++,a=0),o.recoverByDelete(a,l),sf&&console.log(c+this.stackID(o)+` (via recover-delete ${this.parser.getName(a)})`),df(o,i)):(!n||n.score<o.score)&&(n=o)}return n}stackToTree(e){return e.close(),ca.build({buffer:Xp.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(of||(of=new WeakMap)).get(e);return t||of.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function df(e,t){for(let i=0;i<t.length;i++){let n=t[i];if(n.pos==e.pos&&n.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class uf{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}const pf=e=>e;class ff extends Ia{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let i=0;i<e.repeatNodeCount;i++)t.push("");let i=Object.keys(e.topRules).map((t=>e.topRules[t][1])),n=[];for(let e=0;e<t.length;e++)n.push([]);function r(e,t,i){n[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];"string"==typeof e&&(e=ta[e]);for(let i=1;i<t.length;){let n=t[i++];if(n>=0)r(n,e,t[i++]);else{let s=t[i+-n];for(let o=-n;o>0;o--)r(t[i++],e,s);i++}}}this.nodeSet=new sa(t.map(((t,r)=>ra.define({name:r>=this.minRepeatTerm?void 0:t,id:r,props:n[r],top:i.indexOf(r)>-1,error:0==r,skipped:e.skippedNodes&&e.skippedNodes.indexOf(r)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Ko;let s=Gp(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let e=0;e<this.specializerSpecs.length;e++)this.specialized[e]=this.specializerSpecs[e].term;this.specializers=this.specializerSpecs.map(gf),this.states=Gp(e.states,Uint32Array),this.data=Gp(e.stateData),this.goto=Gp(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Jp(s,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,i){let n=new hf(this,e,t,i);for(let r of this.wrappers)n=r(n,e,t,i);return n}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let t=n[r++],s=1&t,o=n[r++];if(s&&i)return o;for(let i=r+(t>>1);r<i;r++)if(n[r]==e)return o;if(s)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r,s=this.stateSlot(e,n?2:1);;s+=3){if(65535==(r=i[s])){if(1!=i[s+1]){if(2==i[s+1])return mf(i,s+2);break}r=i[s=mf(i,s+2)]}if(r==t||0==r)return mf(i,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let i=this.stateSlot(e,4),n=i?t(i):void 0;for(let i=this.stateSlot(e,1);null==n;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=mf(this.data,i+2)}n=t(mf(this.data,i+1))}return n}nextStates(e){let t=[];for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=mf(this.data,i+2)}if(0==(1&this.data[i+2])){let e=this.data[i+1];t.some(((t,i)=>1&i&&t==e))||t.push(this.data[i],e)}}return t}configure(e){let t=Object.assign(Object.create(ff.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((i,n)=>{let r=e.specializers.find((e=>e.from==i.external));if(!r)return i;let s=Object.assign(Object.assign({},i),{external:r.to});return t.specializers[n]=gf(s),s}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let n of e.split(" ")){let e=t.indexOf(n);e>=0&&(i[e]=!0)}let n=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i,r=this.dialects[t[e]];65535!=(i=this.data[r++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[i]=1;return new uf(e,i,n)}static deserialize(e){return new ff(e)}}function mf(e,t){return e[t]|e[t+1]<<16}function gf(e){if(e.external){let t=e.extend?1:0;return(i,n)=>e.external(i,n)<<1|t}return e.get}const yf=new class{constructor(e){this.start=e.start,this.shift=e.shift||pf,this.reduce=e.reduce||pf,this.reuse=e.reuse||pf,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}({start:!1,shift:(e,t)=>1==t||2==t||82==t?e:83==t,strict:!1}),vf=new class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}(((e,t)=>{let{next:i}=e;(125==i||-1==i||t.context)&&e.acceptToken(80)}),{contextual:!0,fallback:!0}),xf={__proto__:null,local:10,this:20,null:22,true:24,false:26,for:72,while:78,if:84,else:88,struct:124,func:138},bf=ff.deserialize({version:14,states:"!+xQ`QQOOP!sOQOOO$iQRO'#CbO%{OSO'#CdO&WOWO'#CdO&cO!bO'#CjO&qQ`O'#CoO'PQQO'#C}O)OQRO'#DjOOQP'#Cp'#CpO*ZQQO'#DZO,zQRO'#EZO*eQRO'#EZO-[QQO'#DgO-cQQO'#DdOOQP'#EZ'#EZOOQP'#EW'#EWOOQO'#Du'#DuQ`QQOOO'PQQO'#CxO-hQQO'#DPO-mQQO'#DSO-rQQO'#DVO-wQQO'#DkO-|QQO'#C`O-wQQO'#DrP.RO#tO'#C^POOO)C?u)C?uOOOO'#Dv'#DvO.^OSO,59OOOQP,59O,59OOOOO'#Dw'#DwO.iOWO,59OO/xQpO'#ClOOOO'#Dx'#DxO0PO!bO,59UOOQP,59U,59UOOQP,59Z,59ZO1cQRO,59iO'PQQO,59[O'PQQO,59[O'PQQO,59[O'PQQO,59[O'PQQO,59[O'PQQO,59[O'PQQO,59[O-|QQO,59vO2{QQO'#DcOOQP,59|,59|OOQP'#Eq'#EqOOQP,5:U,5:UO'PQQO,59[O4QQQO,59uO4XQQO'#EoO4dQQO,5:PO'PQQO,59wOOQP,59x,59xOOQP,59y,59yO4iQQO,59zO4iQQO,59{OOQP,5:R,5:RO4|QQO,5:RO5TQQO,5:OOOQO-E7s-E7sO7SQRO,59dO8tQQO'#DRO4iQQO,59kO9OQQO'#DUO4iQQO,59nO9RQQO'#DXO4iQQO,59qOOQO'#Dm'#DmO9YQQO,5:VOOQP'#Cb'#CbO;nQQO,58zO;uQQO,5:^POOO'#Dt'#DtP;zO#tO,58xPOOO,58x,58xOOOO-E7t-E7tOOQP1G.j1G.jOOOO-E7u-E7uO<VQaO'#CbOOOO,59W,59WO>hQ`O,59WO?sQ`O'#EZO@QQ`O'#EZOOOO-E7v-E7vOOQP1G.p1G.pOBhQRO1G.vOEOQRO1G.vOGfQRO1G.vOI|QRO1G.vOJZQRO1G.vOLqQRO1G.vOLxQRO1G.vOOQP1G/b1G/bOMPQQO'#EmOMZQQO,59}OM`QRO1G.vOOQP1G/a1G/aOMgQQO'#DzOMrQQO,5;ZOOQO1G/k1G/kOMzQRO1G/cOOQP1G/f1G/fOOQP1G/g1G/gOOQP1G/m1G/mOOQP1G/j1G/jO! gQQO,59mO! nQQO,59mO!!nQQO,59mOOQP1G/V1G/VO!!uQQO,59pO!!zQQO,59pOOQP1G/Y1G/YO!#RQQO,59sO!%fQRO1G/]O!%pQQO'#DnOOQP1G/q1G/qO7pQQO1G.fO!%xQQO'#DeO5TQQO1G/xPOOO-E7r-E7rPOOO1G.d1G.dOOOO1G.r1G.rO!&QQaO,59iO!'sQ`O,59dO!(WQQO'#DyO!(eQQO,5;XOOQP1G/i1G/iOOQO'#Df'#DfOOQO,5:f,5:fOOQO-E7x-E7xO!(mQQO1G/XO!(wQQO1G/XO!)OQQO1G/XOOQO1G/[1G/[OOQO1G/_1G/_O4iQQO7+$wO!)VQQO'#DmO!)_QQO'#DoO!)dQQO'#D{O!)oQQO,5:YO;uQQO'#DqOOQO'#D|'#D|O!)wQQO,5:YOOQP,5:Y,5:YO!*PQQO7+$QO!+iQQO'#EoOOQP7+%d7+%dO!,lQ`O1G.vO!,sQ`O1G.vO!.RQ`O1G.vO!.YQaO1G.vO!/^Q`O1G.vO!/eQ`O1G.vO!/xQ`O1G.vO!0]Q`O1G.vO!0dQ`O1G/cO!1iQpO1G/]O!1pQQO,5:eOOQO-E7w-E7wOOQO7+$s7+$sO!1zQQO7+$sO!2RQQO7+$sO!2]QQO7+$sO!4sQRO<<HcOOQP<<Hc<<HcO9RQQO,5:ZOOQO,5:g,5:gOOQO-E7y-E7yO!5QQQO1G/tOOQP1G/t1G/tO5TQQO,5:]OOQO-E7z-E7zO!6WQ`O,58zO!6_QpO,58zOOQO<<H_<<H_O!6iQQO<<H_O!6pQQO<<H_O!6zQQO1G/uPOQO'#Dp'#DpOOQP7+%`7+%`OOQO1G/w1G/wO!7XQaO<<HcOOQOAN=yAN=yO!8]QQOAN=yO!8dQ`O7+$QO!8kQqO'#CbO!9mQpO7+$QO!9wQpO'#EZO!:XQpO'#EZOOQOG23eG23eO!:cQqO,59iO!;XQpO,59dO!<mQpO1G.vO!<tQpO1G.vO!>YQpO1G.vO!>aQqO1G.vO!>hQpO1G.vO!>oQpO1G.vO!?VQpO1G.vO!?mQpO1G.vO!?tQpO1G/cO!@OQqO<<HcO!@VQRO'#CbO9RQQO'#C}O.tQQO'#C}O!@^QQO'#C}O9RQQO'#CxO.tQQO'#CxO!@^QQO'#CxO-|QQO'#C`O-|QQO'#C`O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59[O.tQQO,59[O!@^QQO,59[O9RQQO,59wO.tQQO,59wO!@^QQO,59wO!AbQQO,59zO!AuQQO,59zO!AbQQO,59{O!AuQQO,59{O!B}QQO,59dO!AbQQO,59kO!AuQQO,59kO!AbQQO,59nO!AuQQO,59nO!AuQQO,59qO!DoQQO1G.vO!E}QQO1G.vO!G]QQO1G.vO!GdQQO1G.vO!HrQQO1G.vO!HyQQO1G.vO!IQQQO1G.vO!IXQQO1G/cO9RQQO1G.fO.tQQO1G.fO!IlQQO1G.fO!LQQQO7+$wO!MiQQO7+$wO!MpQQO7+$wO!NTQQO7+$QO!NhQpO1G/]O# vQRO<<HcO#!TQRO<<HcO#![QaO<<HcO##`QqO<<HcO#$wQQO'#EZO#%UQQO'#EZO-hQQO'#DPO-hQQO'#DPO-mQQO'#DSO-mQQO'#DSO-rQQO'#DVO#&gQQO,58zO#'uQQO1G/]O`QQO7+$wO!AuQQO,59qO#'|QQO7+$wO#(TQQO7+$wO#([QQO7+$wO#(oQqO1G/]O-|QQO'#C`O#(|QQO,59zO#(|QQO,59{O#(|QQO,59kO#(|QQO,59nO#(|QQO,59qO#)aQQO1G/]O#)hQqO1G/]O#)uQQO,59qO-rQQO'#DVO-rQQO'#DVO#*YQRO1G/]O#)uQQO,59qO-hQQO'#DPO-mQQO'#DSO-rQQO'#DVO`QQO,59qO#*gQQO'#C}O#*gQQO'#CxO#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59[O#*gQQO,59wO#*gQQO1G.fO#+kQQO,59qO-rQQO'#DVO-rQQO'#DVO7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59[O7pQQO,59wO#,OQQO,59dO#,iQaO'#EZO#,|QaO'#EZO#/gQQO1G.vO#1zQQO1G.vO#4_QQO1G.vO#4fQQO1G.vO#6yQQO1G.vO#7QQQO1G.vO#7XQQO1G.vO#7`QQO1G/cO'PQQO1G.fO#9gQaO,59dO#:QQRO7+$QO#<nQaO1G.vO#<uQaO1G.vO#>aQaO1G.vO#>hQaO1G.vO#>oQaO1G.vO#?YQaO1G.vO#?sQaO1G.vO#?zQaO1G/cO#@eQaO,58zO#@rQaO7+$QO!IlQQO'#C}O!IlQQO'#CxO-|QQO'#C`O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59[O!IlQQO,59wO#A]QQO,59zO#A]QQO,59{O#A]QQO,59kO#A]QQO,59nO!@^QQO1G.fO-hQQO'#DPO-mQQO'#DSO-rQQO'#DVO7pQQO'#C}O#DSQQO'#EZO#ApQQO'#EZO7pQQO'#CxO#DdQRO,58zO#DnQqO,58zO#EyQqO7+$QO#FZQqO'#EZO#FqQqO'#EZO#GpQqO,59dO#IbQqO1G.vO#IiQqO1G.vO#KZQqO1G.vO#KbQqO1G.vO#KiQqO1G.vO#LVQqO1G.vO#LsQqO1G.vO#LzQqO1G/cO#M[QQO'#C}O#M[QQO'#CxO-|QQO'#C`O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59[O#M[QQO,59wO#)uQQO,59zO#)uQQO,59{O#N`QRO,59dO#)uQQO,59kO#)uQQO,59nO$!^QRO1G.vO$#rQRO1G.vO$%WQRO1G.vO$%_QRO1G.vO$&sQRO1G.vO$&zQRO1G.vO$'RQRO1G.vO$(TQRO1G/cO#M[QQO1G.fO$(nQRO7+$QO$)XQRO'#EZO$)lQRO'#EZO-hQQO'#DPO-mQQO'#DSO$)yQRO,58zO-|QQO'#C`O#+kQQO,59zO#+kQQO,59{O#+kQQO,59kO#+kQQO,59nO-hQQO'#DPO-mQQO'#DSO-|QQO'#C`O`QQO,59zO`QQO,59{O`QQO,59kO`QQO,59nO-hQQO'#DPO-mQQO'#DS",stateData:"$*b~O!tOS!uOSPOS!vPQ~OThOV_OY_OZ_O[_O]_OhcOrVOtdOweOzfO![]O!`gO!giO!{QO#ORO#QSO#STO#VUO#XYO#Y`O~O!vjO~OeUXfUXgUXhUXiUXjUXkUXmUXnUXoUXpUX!rUX!|UX#XUX#YUX#[UX#]UX#^UX#_UX#`UX#d!YX#ZUX!{UX!]UX|UX~O#Z!YX#b!YXTUXVUXYUXZUX[UX]UXrUXtUXwUXzUX![UX!`UX!gUX!qUX#OUX#QUX#SUX#VUX~P!xOXlO#OnO#PlO~OXoO#QnO#RoO~O_rOaqO#TrO#UtO~O#ORO#QSO#STO#WuO~OV_OY_OZ_O[_O]_OhcOrVOtdOweOzfO!{QO#ORO#QSO#STO#VUO#XYO~OewOfwOgwOh!TOixOjxOkyOmzOn{Oo|Op}O#X!PO#[!OO~O!r!RO#Y!RO~P(TOV_OY_OZ_O[_O]_Oh%jOr%gOt'hOw'iOz'jO#ORO#QSO#STO#VUO#XYO~O!{QO#Z#cP~P)YO!|!XOe!}Xf!}Xg!}Xh!}Xi!}Xj!}Xk!}Xm!}Xn!}Xo!}Xp!}X!r!}X#X!}X#Y!}X#[!}X|!}XT!}XV!}XY!}XZ!}X[!}X]!}Xr!}Xt!}Xw!}Xz!}X![!}X!`!}X!g!}X!q!}X!{!}X#O!}X#Q!}X#S!}X#V!}X!]!}X~O#]!YO#^!ZO#_![O#`!]O~P*eO!]!^O~P`O#d!`O~O#X!cO~O#X!eO~O#X!gO~O!{!iO~O!{!kO~O!w!nO!x!nO!y!pO~OXlO#O!rO#PlO~OXoO#Q!rO#RoO~OV_OY_OZ_O[_O]_Oh%kOr%hOt&|Ow'OOz'QO!{!tO#ORO#QSO#STO#VUO#XYO~Ob!uO~P.tO_rOaqO#TrO#U!zO~O#X!PO#[!OOeqafqagqahqaiqajqakqamqanqaoqapqa!rqa#Yqa|qa~O#Zqa#bqaTqaVqaYqaZqa[qa]qarqatqawqazqa![qa!`qa!gqa!qqa!{qa#Oqa#Qqa#Sqa#Vqa!]qa~P0_O!{%fO#Z#aP~P)YOe%oOf%oOg%oOh&UOi%rOj%rOk%uOm%xOn%{Oo&OOp&RO#X!PO#[!OO~O#Z#WO~P3VO#b#XO#d!`O#Z#cX~O#Z#ZO~OT*_O![]O!`gO!giO#Y`O~P'PO!]#_O~P`O![]O~O#X!PO#[!OOilajlaolapla#Yla|laTlaVlaYlaZla[la]larlatlawlazla![la!`la!gla!qla!{la#Ola#Qla#Sla#Vla!]la~OewOfwOgwOh!TOkyOmzOn{O!rla~P5YOV_OY_OZ_O[_O]_Oh)VOr)SOt*dOw*eOz'zO!{QO#ORO#QSO#STO#VUO#XYO~OThO#Y#aO~P7pOT'ZO!{%fO~P)YO![#jO~OTSaVSaYSaZSa[Sa]SahSarSatSawSazSa![Sa!`Sa!gSa!qSa!{Sa#OSa#QSa#SSa#VSa#XSa#YSa!]SaeSafSagSaiSajSakSamSanSaoSapSa#[Sa|Sa~O!|#lO~P9_O#X#mO~O!w!nO!x!nO!y#pO~ObUXeUXfUXgUXhUXiUXjUXkUXmUXnUXoUXpUX!|UX#XUX#[UX#]UX#^UX#_UX#`UX#d!YX!rUX#YUX~Oe%pOf%pOg%pOh&VOi%sOj%sOk%vOm%yOn%|Oo&POp&SO#X!PO#[!OO~Ob#qO~P=mO#]!YO#^!ZOb!}Xe!}Xf!}Xg!}Xh!}Xi!}Xj!}Xk!}Xm!}Xn!}Xo!}Xp!}X#X!}X#[!}X~O!|&YO#_&[O#`&^O~P>oO!|&YO~P>uOmzO#X!PO#[!OOedifdigdihdiidijdikdiodipdi!rdi#Ydi|diTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di~On{O~P@XOewOfwOgwOkyOmzOn{O#X!PO#[!OOidijdiodipdi!rdi#Ydi|diTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di~Oh!TO~PBoOewOfwOgwOmzOn{O#X!PO#[!OOhdiidijdiodipdi!rdi#Ydi|diTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di~Okdi~PEVO#X!PO#[!OOedifdigdihdiidijdikdindiodipdi!rdi#YdiTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di|di~Omdi#Zdi#bdi~PGmOndi~P@XOewOfwOgwOh!TOixOjxOkyOmzOn{O#X!PO#[!OOpdi!rdi#Ydi|diTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di~Oodi~PJbOo|O~PJbO#b#tO#Z#aX~P3VO#Z#vO~Ohdi~PBoO!{#wO#Z!nX#b!nX~O#b#XO#Z#ca~O!r!Pi#Y!Pi|!PiT!PiV!PiY!PiZ!Pi[!Pi]!Pir!Pit!Piw!Piz!Pi![!Pi!`!Pi!g!Pi!q!Pi!{!Pi#O!Pi#Q!Pi#S!Pi#V!Pi!]!Pi~P(TO#Y#zO~P7pO#Y#|O~Oe'{Of'{Og'{Oh(SOi'|Oj'|Ok'}Om(OOn(POo(QOp(RO#X!PO#[!OO~O#Y#|O~P! sO#Z#}O~O#Z#}O~P3VO#Z$OO~P3VOeyifyigyihyiiyijyikyimyinyioyipyi#Xyi#Yyi#[yiTyiVyiYyiZyi[yi]yiryityiwyizyi![yi!`yi!gyi!qyi!{yi#Oyi#Qyi#Syi#Vyi!]yi~O|$PO!ryi~P!#YO!]$XO!{$QO~O!{#wO#Z#cP~O#X!PO#[!OObqaeqafqagqahqaiqajqakqamqanqaoqapqa!rqa#Yqa~Oe%pOf%pOg%pOh&VOk%vOm%yOn%|O#X!PO#[!OO~Oblailajlaolapla~P!'UO!{%fO#Z!mX#b!mX~P)YO#b#tO#Z#aa~O!{%fO#Z$iO~P)YO#Y$kO~P! sO#Y$kO~P7pO#X!aX#f!dX~O#f$oO~O#b$pO!]!oX!{!oX~O!]$sO!{$QO~O!]$sO!{!iO~OTSqVSqYSqZSq[Sq]SqrSqtSqwSqzSq![Sq!`Sq!gSq!qSq!{Sq#OSq#QSq#SSq#VSq#YSq!]Sq|Sq~P! sO#b#XO#Z#cX~Om%yO#X!PO#[!OObdiedifdigdihdiidijdikdiodipdi~On%|O~P!+qObdiidijdiodipdi~P!'UOe%pOf%pOg%pOm%yOn%|O#X!PO#[!OObdihdiidijdiodipdi~Okdi~P!-WO#X!PO#[!OObdiedifdigdihdiidijdikdimdindiodipdi!rdi#Ydi~Ondi~P!+qOi%sOj%sObdiodipdi~P!'UOi%sOj%sOo&PObdipdi~P!'UOk%vO~P!-WOb!Pi~P=mObyieyifyigyihyiiyijyikyimyinyioyipyi#Xyi#[yi~O|&rO~P!0kO#Z!ma#b!ma~P3VO#Z$xO~P3VO!{%fO#Z$xO~P)YO#Y$zO~P! sO#X!POeyyfyygyyhyyiyyjyykyymyynyyoyypyy#Yyy#[yy|yyTyyVyyYyyZyy[yy]yyryytyywyyzyy![yy!`yy!gyy!qyy!{yy#Oyy#Qyy#Syy#Vyy!]yy~O!ryy#Zyy#byy~P!2dO!]$}O!{!iO~ObSaeSafSagSahSaiSajSakSamSanSaoSapSa#XSa#[Sa~O!|&oO~P!5YO!|&pO|Sa~P!5YO#Z%QO~P3VO!{%fO#Z%QO~P)YO!]!ci!{!ci#b!ci~P3VO!r!RO#X!PO#Y!RObyyeyyfyygyyhyyiyyjyykyymyynyyoyypyy#[yy~O#Z%XO~P3VObSq~P=mO|UX~P<VOe(qOf(qOg(qOh(xOi(rOj(rOk(sOm(tOn(uOo(vOp(wO#X!PO#[!OO~ObSq|Sq~P!8rO!|(yO#_&]O#`&_O|!}X~P>oO!|(yO|!}X~P>uObqa~P0_Oe(qOf(qOg(qOh(xOk(sOm(tOn(uO#X!PO#[!OO~Oblailajlaolapla|la~P!:jOm(tO#X!PO#[!OObdiedifdigdihdiidijdikdiodipdi|di~On(uO~P!;oObdiidijdiodipdi|di~P!:jOe(qOf(qOg(qOm(tOn(uO#X!PO#[!OObdihdiidijdiodipdi|di~Okdi~P!=[O|di~P!.YOndi~P!;oOi(rOj(rObdiodipdi|di~P!:jOi(rOj(rOo(vObdipdi|di~P!:jOk(sO~P!=[Ob!Pi|!Pi~P!8rO|yy~P!7XO#bUX~P!xOV_OY_OZ_O[_O]_Oh%lOr%iOt*TOw*UOz'eO!{%TO#ORO#QSO#STO#VUO#XYO~OT%mO![]O!`gO!giO#Y`O~P'POT%nO![]O!`gO!giO#Y`O~P'PO#X!PO#[!OOilajlaolapla#Zla#bla!]la!{la|la~Oe%oOf%oOg%oOh&UOk%uOm%xOn%{O~P!BYOm%xO#X!PO#[!OOedifdigdihdiidijdikdiodipdi#Zdi#bdi!]di!{di|di~On%{O~P!ChOe%oOf%oOg%oOk%uOm%xOn%{O#X!PO#[!OOidijdiodipdi#Zdi#bdi!]di!{di|di~Oh&UO~P!DvOe%oOf%oOg%oOm%xOn%{O#X!PO#[!OOhdiidijdiodipdi#Zdi#bdi!]di!{di|di~Okdi~P!FUOndi~P!ChOe%oOf%oOg%oOh&UOi%rOj%rOk%uOm%xOn%{O#X!PO#[!OOpdi#Zdi#bdi!]di!{di|di~Oodi~P!GkOo&OO~P!GkOhdi~P!DvO#Z!Pi#b!Pi!]!Pi!{!Pi|!Pi~P3VOV_OY_OZ_O[_O]_Oh(oOr(nOt&}Ow'POz'yO!{%TO#ORO#QSO#STO#VUO#XYO~OV_OY_OZ_O[_O]_Oh)gOr)fOt*]Ow*^Oz)RO![]O!`gO!giO!{%fO#ORO#QSO#STO#VUO#XYO#Y`O~OT'ZO~P!JpOV_OY_OZ_O[_O]_Oh'mOr'lOt)POw)QOz'dO![]O!`gO!giO!{!tO#ORO#QSO#STO#VUO#XYO#Y`O~OT%mO~P!LXOT)hO![]O!`gO!giO#Y`O~P!@^O#ZSq|Sq#bSq!]Sq!{Sq~P3VO|'XO~P!0kO!r!RO#X!POeyyfyygyyhyyiyyjyykyymyynyyoyypyy#[yy!]yy!{yy|yy~O#Y!RO#Zyy#byy~P!NoO!r!RO~P!2dO#X!PObyyeyyfyygyyhyyiyyjyykyymyynyyoyypyy!ryy#Yyy#[yy~O|yy~P#![O#]!YO#^!ZOe!}Xf!}Xg!}Xh!}Xi!}Xj!}Xk!}Xm!}Xn!}Xo!}Xp!}X#X!}X#Z!}X#[!}X#b!}X!]!}X!{!}X|!}X~O!|&XO#_'[O#`']O~P##gO!|&XO~P##mO#ZSaeSafSagSahSaiSajSakSamSanSaoSapSa#XSa#[Sa|Sa#bSa!]Sa!{Sa~O!|&nO~P#%]Oeyifyigyihyiiyijyikyimyinyioyipyi#Xyi#Zyi#[yi#byi!]yi!{yi~O|&qO~P#&nOT*WO~P!JpOT(pO~P!LXOT%nO![]O!`gO!giO#Y`O~P!@^O|&sO!ryi#Yyi~P!0kOT'ZO![]O!`gO!giO#Y`O~P'PO|'TO~P!#YO|'WO!ryi#Yyi~P!0kOT)hO![]O!`gO!giO#Y`O~P'PO|'VO!ryi#Yyi~P#&nOV_OY_OZ_O[_O]_Oh'mOr'lOt)POw)QOz'dO!{!tO#ORO#QSO#STO#VUO#XYO~OT*WO![]O!`gO!giO#Y`O~P'POe'{Of'{Og'{Oh(SOk'}Om(OOn(PO~P5YO!|'vO#_(zO#`({O!r!}X#Y!}X~P>oO!|'vO!r!}X#Y!}X~P>uOm(OO#X!PO#[!OOedifdigdihdiidijdikdiodipdi#YdiTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di|di~On(PO~P#-ZOe'{Of'{Og'{Ok'}Om(OOn(PO#X!PO#[!OOidijdiodipdi#YdiTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di|di~Oh(SO~P#/nOe'{Of'{Og'{Om(OOn(PO#X!PO#[!OOhdiidijdiodipdi#YdiTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di|di~Okdi~P#2ROndi~P#-ZOe'{Of'{Og'{Oh(SOi'|Oj'|Ok'}Om(OOn(PO#X!PO#[!OOpdi#YdiTdiVdiYdiZdi[di]dirditdiwdizdi![di!`di!gdi!qdi!{di#Odi#Qdi#Sdi#Vdi!]di|di~Oodi~P#4mOo(QO~P#4mOhdi~P#/nO#Y!PiT!PiV!PiY!PiZ!Pi[!Pi]!Pir!Pit!Piw!Piz!Pi![!Pi!`!Pi!g!Pi!q!Pi!{!Pi#O!Pi#Q!Pi#S!Pi#V!Pi!]!Pi|!Pi~P! sOe'nOf'nOg'nOh'uOk'pOm'qOn'rO#X!PO#[!OO~Oblailajlaolapla!rla#Yla~P#8xO!rSq#YSq|SqTSqVSqYSqZSq[Sq]SqrSqtSqwSqzSq![Sq!`Sq!gSq!qSq!{Sq#OSq#QSq#SSq#VSq!]Sq~P(TOm'qO#X!PO#[!OObdiedifdigdihdiidijdikdiodipdi!rdi#Ydi~On'rO~P#;mObdiidijdiodipdi!rdi#Ydi~P#8xOe'nOf'nOg'nOm'qOn'rO#X!PO#[!OObdihdiidijdiodipdi!rdi#Ydi~Okdi~P#=`Ondi~P#;mOi'oOj'oObdiodipdi!rdi#Ydi~P#8xOi'oOj'oOo'sObdipdi!rdi#Ydi~P#8xOk'pO~P#=`Oi'oOj'oOo'sOp'tOb!Pi!r!Pi#Y!Pi~P#8xO!|'wO!rSa#YSa~P!5YOi'oOj'oOo'sOp'tObSq!rSq#YSq~P#8xOT(pO![]O!`gO!giO#Y`O~P'PO!|(TOe!}Xf!}Xg!}Xh!}Xi!}Xj!}Xk!}Xm!}Xn!}Xo!}Xp!}X#X!}X#Y!}X#[!}XT!}XV!}XY!}XZ!}X[!}X]!}Xr!}Xt!}Xw!}Xz!}X![!}X!`!}X!g!}X!q!}X!{!}X#O!}X#Q!}X#S!}X#V!}X!]!}X|!}X~O#]!YO#^!ZO#_*`O#`*aO~P#ApO!|(aO!rSa~P9_O!|)OO|Sa!rSa#YSa~P!5YOe%qOf%qOg%qOh&WOi%tOj%tOk%wOm%zOn%}Oo&QOp&TO#X!PO#[!OO~ObSq|Sq!rSq#YSq~P#EOO!|&ZO#_)rO#`)sO|!}X!r!}X#Y!}X~P>oO!|&ZO|!}X!r!}X#Y!}X~P>uOe%qOf%qOg%qOh&WOk%wOm%zOn%}O#X!PO#[!OO~Oblailajlaolapla|la!rla#Yla~P#GROm%zO#X!PO#[!OObdiedifdigdihdiidijdikdiodipdi|di!rdi#Ydi~On%}O~P#H^Obdiidijdiodipdi|di!rdi#Ydi~P#GROe%qOf%qOg%qOm%zOn%}O#X!PO#[!OObdihdiidijdiodipdi|di!rdi#Ydi~Okdi~P#JVOndi~P#H^Oi%tOj%tObdiodipdi|di!rdi#Ydi~P#GROi%tOj%tOo&QObdipdi|di!rdi#Ydi~P#GROk%wO~P#JVOb!Pi|!Pi!r!Pi#Y!Pi~P#EOOV_OY_OZ_O[_O]_Oh)gOr)fOt*]Ow*^Oz)RO!{%fO#ORO#QSO#STO#VUO#XYO~Oe)iOf)iOg)iOh)pOk)kOm)lOn)mO!rla#Yla~P!BYOm)lO#X!PO#[!OOedifdigdihdiidijdikdiodipdi!rdi#Ydi#Zdi#bdi!]di!{di|di~On)mO~P$ POe)iOf)iOg)iOk)kOm)lOn)mO#X!PO#[!OOidijdiodipdi!rdi#Ydi#Zdi#bdi!]di!{di|di~Oh)pO~P$!eOe)iOf)iOg)iOm)lOn)mO#X!PO#[!OOhdiidijdiodipdi!rdi#Ydi#Zdi#bdi!]di!{di|di~Okdi~P$#yOndi~P$ POe)iOf)iOg)iOh)pOi)jOj)jOk)kOm)lOn)mO#X!PO#[!OOpdi!rdi#Ydi#Zdi#bdi!]di!{di|di~Oodi~P$%fOo)nO~P$%fOhdi~P$!eOe)iOf)iOg)iOh)pOi)jOj)jOk)kOm)lOn)mOo)nOp)oO#X!PO#[!OO~O!r!Pi#Y!Pi#Z!Pi#b!Pi!]!Pi!{!Pi|!Pi~P$'YO!rSq#YSq#ZSq|Sq#bSq!]Sq!{Sq~P$'YO!|)qO#_*XO#`*YO!r!}X#Y!}X~P##gO!|)qO!r!}X#Y!}X~P##mO!|*PO!rSa#YSa~P#%]O!vPe!t!u!{V#[V~",goto:"!$O#fPP#gP#jP$xP)^PPPPP)^P,zPP-O-OPPPPPPP0iPPPP0iP0iP4S0iP4l0iP5UP-O5n-O-O-O-O-O-O9g-O;x?iC[PPDmDmPEuFRFUFYF^DmPFdFjFtFzGQGWG^GeGkPPPPPPPPPGuPPIiPPPPPPPPPPPPPPPPP!#pP!#sP!#wRkP#[`O]b![!]!_!d!f!h$P&[&]&^&_&a&b&c&d&e&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'x(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cQ#b!cR#e!e#hZOV]bcwxyz{|}!T!X![!]!_!d!f!h$P&[&]&^&_&a&b&c&d&e'T'U'[']'^'_'`'c'g'k'x(a(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cQ!lhj!wq%h%k%p%s%v%y%|&P&S&V&Y&oQ#S!OQ$v%mQ$w%nh%V&p(n(o(q(r(s(t(u(v(w(x(yz&zY!P!e!g#t#z$k$o$z%g%j%o%r%u%x%{&O&R&U&X&nQ'R'Zl(V&r'W'l'm'n'o'p'q'r's't'u'v'wQ(l(pn)T!c#a#l#|'{'|'}(O(P(Q(R(S(T)S)VQ)W*_Q)X)hl)Z%i%l%q%t%w%z%}&Q&T&W&Z&s'X)Ol*R&q'V)f)g)i)j)k)l)m)n)o)p)q*PR*V*W(O_OVY]bcqwxyz{|}!P!T!X![!]!_!c!d!e!f!g!h#a#l#t#z#|$P$k$o$z%g%h%i%j%k%l%o%p%q%r%s%t%u%v%w%x%y%z%{%|%}&O&P&Q&R&S&T&U&V&W&X&Y&Z&[&]&^&_&a&b&c&d&e&n&o&p&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'l'm'n'o'p'q'r's't'u'v'w'x'{'|'}(O(P(Q(R(S(T(a(n(o(q(r(s(t(u(v(w(x(y(z({(|(})O)S)V)f)g)i)j)k)l)m)n)o)p)q)r)s)u)v*P*X*Y*Z*[*`*a*b*cRuUTrTs(P_OVY]bcqwxyz{|}!P!T!X![!]!_!c!d!e!f!g!h#a#l#t#z#|$P$k$o$z%g%h%i%j%k%l%o%p%q%r%s%t%u%v%w%x%y%z%{%|%}&O&P&Q&R&S&T&U&V&W&X&Y&Z&[&]&^&_&a&b&c&d&e&n&o&p&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'l'm'n'o'p'q'r's't'u'v'w'x'{'|'}(O(P(Q(R(S(T(a(n(o(q(r(s(t(u(v(w(x(y(z({(|(})O)S)V)f)g)i)j)k)l)m)n)o)p)q)r)s)u)v*P*X*Y*Z*[*`*a*b*c(PXOVY]bcqwxyz{|}!P!T!X![!]!_!c!d!e!f!g!h#a#l#t#z#|$P$k$o$z%g%h%i%j%k%l%o%p%q%r%s%t%u%v%w%x%y%z%{%|%}&O&P&Q&R&S&T&U&V&W&X&Y&Z&[&]&^&_&a&b&c&d&e&n&o&p&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'l'm'n'o'p'q'r's't'u'v'w'x'{'|'}(O(P(Q(R(S(T(a(n(o(q(r(s(t(u(v(w(x(y(z({(|(})O)S)V)f)g)i)j)k)l)m)n)o)p)q)r)s)u)v*P*X*Y*Z*[*`*a*b*cQ!ddQ&a&|Q&b&}Q'^'hQ(|)PQ)u*TQ*Z*]R*b*dQ!feQ&c'OQ&d'PQ'_'iQ(})QQ)v*UQ*[*^R*c*eQ!hfQ&e'QQ'U'yQ'`'jQ'c'dQ'g'eQ'k'zR'x)R#h[OV]bcwxyz{|}!T!X![!]!_!d!f!h$P&[&]&^&_&a&b&c&d&e'T'U'[']'^'_'`'c'g'k'x(a(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cj!xq%h%k%p%s%v%y%|&P&S&V&Y&oh%W&p(n(o(q(r(s(t(u(v(w(x(yz&{Y!P!e!g#t#z$k$o$z%g%j%o%r%u%x%{&O&R&U&X&nl(W&r'W'l'm'n'o'p'q'r's't'u'v'wn)U!c#a#l#|'{'|'}(O(P(Q(R(S(T)S)Vl)[%i%l%q%t%w%z%}&Q&T&W&Z&s'X)Om*S&q'V)f)g)i)j)k)l)m)n)o)p)q*P%o!QWv!U!b!v!{!|!}#O#P#Q#R#T#V#[#c#f#h#r#s#{$Y$]$^$_$`$a$b$c$d$e$g$j$l$m$y${%P%R%S%U%Y%Z%[%]%^%_%`%a%b%c%d%e&`&f&g&h&i&j&k&l&m&t&v&w&x&y(U(X(Y(Z([(](^(_(`(b(c(d(e(f(g(h(i(j(k(m)Y)])^)_)`)a)b)c)d)e)t)w)x)y)z){)|)}*O*Q(O^OVY]bcqwxyz{|}!P!T!X![!]!_!c!d!e!f!g!h#a#l#t#z#|$P$k$o$z%g%h%i%j%k%l%o%p%q%r%s%t%u%v%w%x%y%z%{%|%}&O&P&Q&R&S&T&U&V&W&X&Y&Z&[&]&^&_&a&b&c&d&e&n&o&p&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'l'm'n'o'p'q'r's't'u'v'w'x'{'|'}(O(P(Q(R(S(T(a(n(o(q(r(s(t(u(v(w(x(y(z({(|(})O)S)V)f)g)i)j)k)l)m)n)o)p)q)r)s)u)v*P*X*Y*Z*[*`*a*b*cQ#n!mR$t$U'|^OV]bcqwxyz{|}!P!T!X![!]!_!c!d!e!f!g!h#a#l#t#z#|$P$k$o$z%g%h%i%j%k%l%o%p%q%r%s%t%u%v%w%x%y%z%{%|%}&O&P&Q&R&S&T&U&V&W&X&Y&Z&[&]&^&_&a&b&c&d&e&n&o&p&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'l'm'n'o'p'q'r's't'u'v'w'x'{'|'}(O(P(Q(R(S(T(a(n(o(q(r(s(t(u(v(w(x(y(z({(|(})O)S)V)f)g)i)j)k)l)m)n)o)p)q)r)s)u)v*P*X*Y*Z*[*`*a*b*cQ!VYQ#x#XR$Z#m#[`O]b![!]!_!d!f!h$P&[&]&^&_&a&b&c&d&e&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'x(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cQ#`!`Q$[#nR%O$t#]`O]b![!]!_!d!f!h$P&[&]&^&_&a&b&c&d&e&q&r&s'T'U'V'W'X'[']'^'_'`'c'g'k'x(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cQ!jgQ!miX$U#j$T$W$rR#k!jT$S#j$TT$R#j$TX$V#j$T$W$rQ!ojR#o!oQbOQ!_]T!ab!_QmRR!qmQpSR!spQsTR!ysQ#u#TR$h#uS#Y!V$ZR#y#YQ$T#jR$q$TQ$W#jQ$r$TT$u$W$rWaO]b!_`#]![&[&]'[(z)r*X*``#^!]&^&_']({)s*Y*a`#d!d&a&b'^(|)u*Z*b`#g!f&c&d'_(})v*[*cQ#i!hQ$f&e`$n$P&q&r&s'T'V'W'XQ&u'UQ'S'`Q'Y'gQ'a'kQ'b'cR'f'x!zWO]b![!]!_!d!f!h&[&]&^&_&a&b&c&d&e'U'[']'^'_'`'c'g'k'x(z({(|(})r)s)u)v*X*Y*Z*[*`*a*b*cWvV%g)S)fQ!UYQ!bcQ!vqQ!{wQ!|xQ!}yW#Oz%x(O)lQ#P{Q#Q|Q#R}Q#T!PQ#V!TQ#[!XQ#c!cQ#f!eQ#h!gS#r%h'lQ#s%kQ#{#aQ$Y#lQ$]%pQ$^%sQ$_%vS$`%y'qQ$a%|Q$b&PQ$c&SQ$d&VQ$e&YQ$g#tQ$j#zQ$l#|S$m$P'VQ$y$kQ${$oQ%P&rQ%R$zQ%S&oQ%U&pS%Y%i(nQ%Z(oQ%[(qQ%](rQ%^(sS%_%z(tQ%`(uQ%a(vQ%b(wQ%c(xQ%d(yQ%e'XQ&`%jQ&f%oQ&g%rQ&h%uQ&i%{Q&j&OQ&k&RQ&l&UQ&m&XQ&t&nQ&v&qQ&w'TQ&x'WQ&y&sQ(U)VQ(X'{Q(Y'|Q(Z'}Q([(PQ(](QQ(^(RQ(_(SQ(`(TQ(b'mQ(c(aQ(d'nQ(e'oQ(f'pQ(g'rQ(h'sQ(i'tQ(j'uQ(k'vQ(m'wQ)Y)OQ)]%lQ)^%qQ)_%tQ)`%wQ)a%}Q)b&QQ)c&TQ)d&WQ)e&ZQ)t)gQ)w)iQ)x)jQ)y)kQ)z)mQ){)nQ)|)oQ)})pQ*O)qR*Q*PR#U!PT!WY#mZ!SW%P%e&v&w",nodeNames:"⚠ LineComment BlockComment Script VariableDeclaration local VariableName Number String Escape this null true false TemplateString Escape Interpolation InterpolationStart InterpolationEnd ExternalObjectReference BinaryExpression ArithOp ArithOp ArithOp ArithOp CompareOp CompareOp ArithOp Negation LogicOp LogicOp LogicOp LogicOp PostfixExpression LogicOp ForStatement for ForSpec WhileStatement while WhileSpec IfStatement if IfSpec else ParenthesizedExpression MemberExpression AssignmentExpression Increment Decrement IncrementByExpression DecrementByExpression CallExpression ArgList ArrowFunction ParamList FuncArgName Block { } ExpressionStatement StructDefinition struct FuncName StructSpec StructProperty StructPropertyName StructFunction FuncDeclaration func",maxTerm:114,context:yf,nodeProps:[["isolate",-5,1,2,8,14,16,""],["group",-5,4,57,60,61,68,"Statement"],["closedBy",17,"InterpolationEnd"],["openedBy",18,"InterpolationStart"]],skippedNodes:[0,1,2,70],repeatNodeCount:9,tokenData:"!(`~R!ZOX$tXY&zYZ(xZ[&z[p$tpq&zqr(}rs*ost$ttu+Yuv,wvw-mwx/Yxy/syz0iz{1_{|2T|}4q}!O5g!O!P8T!P!Q9{!Q![>w![!]Bg!]!^C]!^!_DR!_!`Es!`!aH^!a!bIY!b!cJx!c!}Kn!}#O$t#O#PMX#P#Q$t#Q#R! n#R#SKn#S#T!!d#T#oKn#o#p!#Y#p#q!$O#q#r!$x#r$f$t$f$g&z$g#BY+Y#BY#BZ!%p#BZ$IS+Y$IS$I_!%p$I_$JT+Y$JT$JU!%p$JU$KV+Y$KV$KW!%p$KW&FU+Y&FU&FV!%p&FV;'S+Y;'S;=`,q<%l?HT+Y?HT?HU!%p?HUO+Yh${X#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t`%mU#R`OY%hZw%hx#O%h#P;'S%h;'S;=`&P<%lO%h`&SP;=`<%l%hW&[U#PWOY&VZr&Vs#O&V#P;'S&V;'S;=`&n<%lO&VW&qP;=`<%l&Vh&wP;=`<%l$t#p'Tk#PW#R`!t#WOX$tXY&zZ[&z[p$tpq&zqr$trs%hsw$twx&Vx#O$t#P$f$t$f$g&z$g#BY$t#BY#BZ&z#BZ$IS$t$IS$I_&z$I_$JT$t$JT$JU&z$JU$KV$t$KV$KW&z$KW&FU$t&FU&FV&z&FV;'S$t;'S;=`&t<%l?HT$t?HT?HU&z?HUO$t~(}O!u~#p)WZr!f#PW#R`OY$tZr$trs%hsw$twx&Vx!_$t!_!`)y!`#O$t#P;'S$t;'S;=`&t<%lO$t#p*SXn#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p*vU#O#`#R`OY%hZw%hx#O%h#P;'S%h;'S;=`&P<%lO%h#O+cd#PW#R`!{!fOY$tZr$trs%hst$ttu+Yuw$twx&Vx!Q$t!Q![+Y![!c$t!c!}+Y!}#O$t#P#R$t#R#S+Y#S#T$t#T#o+Y#o$g$t$g;'S+Y;'S;=`,q<%lO+Y#O,tP;=`<%l+Y#p-QXf#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p-tY#PW#R`OY$tZr$trs%hsv$tvw.dwx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p.mXo#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p/aU#Q#h#PWOY&VZr&Vs#O&V#P;'S&V;'S;=`&n<%lO&V#p/|X#X#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$tl0rX#ZS#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p1hXg#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p2^]h#W#PW#R`OY$tZr$trs%hsw$twx&Vx{$t{|3V|!_$t!_!`3{!`#O$t#P;'S$t;'S;=`&t<%lO$t#p3`X#]#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p4UX#_#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$tl4zX#bS#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p5p]h#W#PW#R`OY$tZr$trs%hsw$twx&Vx}$t}!O6i!O!_$t!_!`7_!`#O$t#P;'S$t;'S;=`&t<%lO$t#p6rX#^#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p7hX#`#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p8^Z#PW#R`#[#WOY$tZr$trs%hsw$twx&Vx!Q$t!Q![9P![#O$t#P;'S$t;'S;=`&t<%lO$t#O9YZ#PW#R`V!fOY$tZr$trs%hsw$twx&Vx!Q$t!Q![9P![#O$t#P;'S$t;'S;=`&t<%lO$t#p:U]#PW#R`e#WOY$tZr$trs%hsw$twx&Vxz$tz{:}{!P$t!P!Q;s!Q#O$t#P;'S$t;'S;=`&t<%lO$t#p;WX#PW#R`!v#WOY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p;|Y#PW#R`P#WOY;sZr;srs<lsw;swx=zx#O;s#O#P=]#P;'S;s;'S;=`>q<%lO;s#h<sW#R`P#WOY<lZw<lwx=]x#O<l#O#P=]#P;'S<l;'S;=`=t<%lO<l#W=bSP#WOY=]Z;'S=];'S;=`=n<%lO=]#W=qP;=`<%l=]#h=wP;=`<%l<l#`>RW#PWP#WOY=zZr=zrs=]s#O=z#O#P=]#P;'S=z;'S;=`>k<%lO=z#`>nP;=`<%l=z#p>tP;=`<%l;s#p?Sc#Wp#PW#R`V!fOY$tZr$trs%hsw$twx&Vx!O$t!O!P@_!P!Q$t!Q![>w![!c$t!c!}AX!}#O$t#P#R$t#R#SAX#S#T$t#T#oAX#o;'S$t;'S;=`&t<%lO$t#O@fZ#PW#R`OY$tZr$trs%hsw$twx&Vx!Q$t!Q![9P![#O$t#P;'S$t;'S;=`&t<%lO$t!YAba#Wp#PW#R`OY$tZr$trs%hsw$twx&Vx!Q$t!Q![AX![!c$t!c!}AX!}#O$t#P#R$t#R#SAX#S#T$t#T#oAX#o;'S$t;'S;=`&t<%lO$tlBpX#fS#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pCfX#Y#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pD[Zi#W#PW#R`OY$tZr$trs%hsw$twx&Vx!_$t!_!`D}!`#O$t#P;'S$t;'S;=`&t<%lO$t#pEWXj#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pE|[!|#W#PW#R`OY$tZr$trs%hsw$twx&Vx!_$t!_!`Fr!`!aGh!a#O$t#P;'S$t;'S;=`&t<%lO$t#pF{Xm#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pGqX#d#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pHgZj#W#PW#R`OY$tZr$trs%hsw$twx&Vx!_$t!_!`D}!`#O$t#P;'S$t;'S;=`&t<%lO$t#pIaZ#PW#R`OY$tZr$trs%hsw$twx&Vx!a$t!a!bJS!b#O$t#P;'S$t;'S;=`&t<%lO$t#pJ]Xp#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#OKRX#V!f#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#pKyd#Wp#PW#R`!{!fOY$tZr$trs%hst$ttu+Yuw$twx&Vx!Q$t!Q![Kn![!c$t!c!}Kn!}#O$t#P#R$t#R#SKn#S#T$t#T#oKn#o$g$t$g;'S+Y;'S;=`,q<%lO+Y~M[VO#iMq#i#jMv#j#lMq#l#mNc#m;'SMq;'S;=`! h<%lOMq~MvOX~~MyS!Q![NV!c!iNV#T#ZNV#o#pN{~NYR!Q![Nc!c!iNc#T#ZNc~NfR!Q![No!c!iNo#T#ZNo~NrR!Q![Mq!c!iMq#T#ZMq~! OR!Q![! X!c!i! X#T#Z! X~! [S!Q![! X!c!i! X#T#Z! X#q#rMq~! kP;=`<%lMq#p! wXk#W#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p!!mX#PW#R`#S#WOY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$tl!#cX![S#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p!$VZ#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P#p$t#p#qJS#q;'S$t;'S;=`&t<%lO$t#p!%TX!]Sb#S#PW#R`OY$tZr$trs%hsw$twx&Vx#O$t#P;'S$t;'S;=`&t<%lO$t#p!%{u#PW#R`!t#W!{!fOX$tXY&zZ[&z[p$tpq&zqr$trs%hst$ttu+Yuw$twx&Vx!Q$t!Q![+Y![!c$t!c!}+Y!}#O$t#P#R$t#R#S+Y#S#T$t#T#o+Y#o$f$t$f$g&z$g#BY+Y#BY#BZ!%p#BZ$IS+Y$IS$I_!%p$I_$JT+Y$JT$JU!%p$JU$KV+Y$KV$KW!%p$KW&FU+Y&FU&FV!%p&FV;'S+Y;'S;=`,q<%l?HT+Y?HT?HU!%p?HUO+Y",tokenizers:[vf,2,3,4,5,6,new ef("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOa~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO_~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO#U~~",141,97),new ef("j~RQYZXz{^~^O!x~~aP!P!Qd~iO!y~~",25,85)],topRules:{Script:[0,3]},specialized:[{term:89,get:e=>xf[e]||-1}],tokenPrec:6770}),wf=al.define({parser:bf.configure({props:[Pl.add({IfStatement:function({except:e,units:t=1}={}){return i=>{let n=e&&e.test(i.textAfter);return i.baseIndent+(n?0:t*i.unit)}}({except:/^\s*({|else\b)/}),Block:function({closing:e,align:t=!0,units:i=1}){return n=>Ml(n,t,i,e)}({closing:"}"}),ArrowFunction:e=>e.baseIndent+e.unit,"TemplateString BlockComment":()=>null}),_l.add({Block:function(e){let t=e.firstChild,i=e.lastChild;return t&&t.to<i.from?{from:t.to,to:i.type.isError?e.to:i.from}:null}}),Da({VariableName:tl.variableName,true:tl.bool,false:tl.bool,null:tl.null,String:tl.string,TemplateString:tl.special(tl.string),"for while if else struct local func this":tl.keyword,FuncName:tl.function(tl.strong),FuncArgName:tl.attributeName,Number:tl.number,CallExpression:tl.constant(tl.variableName),LineComment:tl.lineComment,BlockComment:tl.blockComment,ExternalObjectReference:tl.macroName,StructPropertyName:tl.propertyName,"( )":tl.paren})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/}}),Of=wf.data.of({autocomplete:pu([{label:"func",type:"keyword"},{label:"struct",type:"keyword"},{label:"local",type:"keyword"},{label:"for",type:"keyword"},{label:"while",type:"keyword"},{label:"if",type:"keyword"},{label:"else",type:"keyword"}].concat("\n  acos\n  asin\n  atan\n  ceil\n  cos\n  debugItem\n  duplicate\n  findChildItemByName\n  findChildItemsByTag\n  findItemById\n  findItemByName\n  findParent\n  floor\n  getAngle\n  getEventArg\n  getEventName\n  getHeight\n  getId\n  getName\n  getOpacity\n  getPos\n  getPosX\n  getPosY\n  getScaleX\n  getScaleY\n  getSelfOpacity\n  getShape\n  getTags\n  getValue\n  getVar\n  getWidth\n  getWorldPos\n  hide\n  ifcond\n  isVisible\n  List\n  localPoint\n  log\n  log10\n  log2\n  logn\n  Map\n  matchWorld\n  min\n  mount\n  mountChild\n  mountRoot\n  parseFloat\n  parseInt\n  PI\n  pow\n  remove\n  removeChildItemsByTag\n  rgba\n  rnd\n  round\n  sendEvent\n  setAngle\n  setHeight\n  setOpacity\n  setPos\n  setPosX\n  setPosY\n  setScaleX\n  setScaleY\n  setSelfOpacity\n  setText\n  setTextColor\n  setTextSize\n  setValue\n  setVar\n  setWidth\n  setWorldPos\n  show\n  sin\n  sqrt\n  tag\n  tan\n  uid\n  worldPoint\n".split(/\s+/).filter((e=>e)).map((e=>({label:e,type:"function"})))))}),Sf=({variant:e,settings:t,styles:i})=>[ss.theme({"&":{backgroundColor:t.background,color:t.foreground},".cm-content":{caretColor:t.caret},".cm-cursor, .cm-dropCursor":{borderLeftColor:t.caret},"&.cm-focused .cm-selectionBackgroundm .cm-selectionBackground, .cm-content ::selection":{backgroundColor:t.selection},".cm-activeLine":{backgroundColor:t.lineHighlight},".cm-gutters":{backgroundColor:t.gutterBackground,color:t.gutterForeground},".cm-activeLineGutter":{backgroundColor:t.lineHighlight}},{dark:"dark"===e}),oc(ic.define(i))],kf=(Sf({variant:"dark",settings:{background:"#200020",foreground:"#D0D0FF",caret:"#7070FF",selection:"#80000080",gutterBackground:"#200020",gutterForeground:"#C080C0",lineHighlight:"#80000040"},styles:[{tag:tl.comment,color:"#404080"},{tag:[tl.string,tl.regexp],color:"#999999"},{tag:tl.number,color:"#7090B0"},{tag:[tl.bool,tl.null],color:"#8080A0"},{tag:[tl.punctuation,tl.derefOperator],color:"#805080"},{tag:tl.keyword,color:"#60B0FF"},{tag:tl.definitionKeyword,color:"#B0FFF0"},{tag:tl.moduleKeyword,color:"#60B0FF"},{tag:tl.operator,color:"#A0A0FF"},{tag:[tl.variableName,tl.self],color:"#008080"},{tag:tl.operatorKeyword,color:"#A0A0FF"},{tag:tl.controlKeyword,color:"#80A0FF"},{tag:tl.className,color:"#70E080"},{tag:[tl.function(tl.propertyName),tl.propertyName],color:"#50A0A0"},{tag:tl.tagName,color:"#009090"},{tag:tl.modifier,color:"#B0FFF0"},{tag:[tl.squareBracket,tl.attributeName],color:"#D0D0FF"}]}),Sf({variant:"light",settings:{background:"#fcfcfc",foreground:"#5c6166",caret:"#ffaa33",selection:"#036dd626",gutterBackground:"#fcfcfc",gutterForeground:"#8a919966",lineHighlight:"#8a91991a"},styles:[{tag:tl.comment,color:"#787b8099"},{tag:tl.string,color:"#86b300"},{tag:tl.regexp,color:"#4cbf99"},{tag:[tl.number,tl.bool,tl.null],color:"#ffaa33"},{tag:tl.variableName,color:"#5c6166"},{tag:[tl.definitionKeyword,tl.modifier],color:"#fa8d3e"},{tag:[tl.keyword,tl.special(tl.brace)],color:"#fa8d3e"},{tag:tl.operator,color:"#ed9366"},{tag:tl.separator,color:"#5c6166b3"},{tag:tl.punctuation,color:"#5c6166"},{tag:[tl.definition(tl.propertyName),tl.function(tl.variableName)],color:"#f2ae49"},{tag:[tl.className,tl.definition(tl.typeName)],color:"#22a4e6"},{tag:[tl.tagName,tl.typeName,tl.self,tl.labelName],color:"#55b4d4"},{tag:tl.angleBracket,color:"#55b4d480"},{tag:tl.attributeName,color:"#f2ae49"}]}),Sf({variant:"dark",settings:{background:"#15191EFA",foreground:"#EEF2F7",caret:"#C4C4C4",selection:"#90B2D557",gutterBackground:"#15191EFA",gutterForeground:"#aaaaaa95",lineHighlight:"#57575712"},styles:[{tag:tl.comment,color:"#6E6E6E"},{tag:[tl.string,tl.regexp,tl.special(tl.brace)],color:"#5C81B3"},{tag:tl.number,color:"#C1E1B8"},{tag:tl.bool,color:"#53667D"},{tag:[tl.definitionKeyword,tl.modifier,tl.function(tl.propertyName)],color:"#A3D295",fontWeight:"bold"},{tag:[tl.keyword,tl.moduleKeyword,tl.operatorKeyword,tl.operator],color:"#697A8E",fontWeight:"bold"},{tag:[tl.variableName,tl.attributeName],color:"#708E67"},{tag:[tl.function(tl.variableName),tl.definition(tl.propertyName),tl.derefOperator],color:"#fff"},{tag:tl.tagName,color:"#A3D295"}]}),Sf({variant:"dark",settings:{background:"#2e241d",foreground:"#BAAE9E",caret:"#A7A7A7",selection:"#DDF0FF33",gutterBackground:"#28211C",gutterForeground:"#BAAE9E90",lineHighlight:"#FFFFFF08"},styles:[{tag:tl.comment,color:"#666666"},{tag:[tl.string,tl.special(tl.brace)],color:"#54BE0D"},{tag:tl.regexp,color:"#E9C062"},{tag:tl.number,color:"#CF6A4C"},{tag:[tl.keyword,tl.operator],color:"#5EA6EA"},{tag:tl.variableName,color:"#7587A6"},{tag:[tl.definitionKeyword,tl.modifier],color:"#F9EE98"},{tag:[tl.propertyName,tl.function(tl.variableName)],color:"#937121"},{tag:[tl.typeName,tl.angleBracket,tl.tagName],color:"#9B859D"}]}),Sf({variant:"dark",settings:{background:"#3b2627",foreground:"#E6E1C4",caret:"#E6E1C4",selection:"#16120E",gutterBackground:"#3b2627",gutterForeground:"#E6E1C490",lineHighlight:"#1F1611"},styles:[{tag:tl.comment,color:"#6B4E32"},{tag:[tl.keyword,tl.operator,tl.derefOperator],color:"#EF5D32"},{tag:tl.className,color:"#EFAC32",fontWeight:"bold"},{tag:[tl.typeName,tl.propertyName,tl.function(tl.variableName),tl.definition(tl.variableName)],color:"#EFAC32"},{tag:tl.definition(tl.typeName),color:"#EFAC32",fontWeight:"bold"},{tag:tl.labelName,color:"#EFAC32",fontWeight:"bold"},{tag:[tl.number,tl.bool],color:"#6C99BB"},{tag:[tl.variableName,tl.self],color:"#7DAF9C"},{tag:[tl.string,tl.special(tl.brace),tl.regexp],color:"#D9D762"},{tag:[tl.angleBracket,tl.tagName,tl.attributeName],color:"#EFCB43"}]}),Sf({variant:"dark",settings:{background:"#000205",foreground:"#FFFFFF",caret:"#E60065",selection:"#E60C6559",gutterBackground:"#000205",gutterForeground:"#ffffff90",lineHighlight:"#4DD7FC1A"},styles:[{tag:tl.comment,color:"#404040"},{tag:[tl.string,tl.special(tl.brace),tl.regexp],color:"#00D8FF"},{tag:tl.number,color:"#E62286"},{tag:[tl.variableName,tl.attributeName,tl.self],color:"#E62286",fontWeight:"bold"},{tag:tl.function(tl.variableName),color:"#fff",fontWeight:"bold"}]}),Sf({variant:"light",settings:{background:"#fff",foreground:"#000",caret:"#000",selection:"#BDD5FC",gutterBackground:"#fff",gutterForeground:"#00000070",lineHighlight:"#FFFBD1"},styles:[{tag:tl.comment,color:"#BCC8BA"},{tag:[tl.string,tl.special(tl.brace),tl.regexp],color:"#5D90CD"},{tag:[tl.number,tl.bool,tl.null],color:"#46A609"},{tag:tl.keyword,color:"#AF956F"},{tag:[tl.definitionKeyword,tl.modifier],color:"#C52727"},{tag:[tl.angleBracket,tl.tagName,tl.attributeName],color:"#606060"},{tag:tl.self,color:"#000"}]}));Sf({variant:"dark",settings:{background:"#00254b",foreground:"#FFFFFF",caret:"#FFFFFF",selection:"#B36539BF",gutterBackground:"#00254b",gutterForeground:"#FFFFFF70",lineHighlight:"#00000059"},styles:[{tag:tl.comment,color:"#0088FF"},{tag:tl.string,color:"#3AD900"},{tag:tl.regexp,color:"#80FFC2"},{tag:[tl.number,tl.bool,tl.null],color:"#FF628C"},{tag:[tl.definitionKeyword,tl.modifier],color:"#FFEE80"},{tag:tl.variableName,color:"#CCCCCC"},{tag:tl.self,color:"#FF80E1"},{tag:[tl.className,tl.definition(tl.propertyName),tl.function(tl.variableName),tl.definition(tl.typeName),tl.labelName],color:"#FFDD00"},{tag:[tl.keyword,tl.operator],color:"#FF9D00"},{tag:[tl.propertyName,tl.typeName],color:"#80FFBB"},{tag:tl.special(tl.brace),color:"#EDEF7D"},{tag:tl.attributeName,color:"#9EFFFF"},{tag:tl.derefOperator,color:"#fff"}]}),Sf({variant:"dark",settings:{background:"#060521",foreground:"#E0E0E0",caret:"#FFFFFFA6",selection:"#122BBB",gutterBackground:"#060521",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:tl.comment,color:"#AEAEAE"},{tag:[tl.string,tl.special(tl.brace),tl.regexp],color:"#8DFF8E"},{tag:[tl.className,tl.definition(tl.propertyName),tl.function(tl.variableName),tl.function(tl.definition(tl.variableName)),tl.definition(tl.typeName)],color:"#A3EBFF"},{tag:[tl.number,tl.bool,tl.null],color:"#62E9BD"},{tag:[tl.keyword,tl.operator],color:"#2BF1DC"},{tag:[tl.definitionKeyword,tl.modifier],color:"#F8FBB1"},{tag:[tl.variableName,tl.self],color:"#B683CA"},{tag:[tl.angleBracket,tl.tagName,tl.typeName,tl.propertyName],color:"#60A4F1"},{tag:tl.derefOperator,color:"#E0E0E0"},{tag:tl.attributeName,color:"#7BACCA"}]}),Sf({variant:"dark",settings:{background:"#2d2f3f",foreground:"#f8f8f2",caret:"#f8f8f0",selection:"#44475a",gutterBackground:"#282a36",gutterForeground:"rgb(144, 145, 148)",lineHighlight:"#44475a"},styles:[{tag:tl.comment,color:"#6272a4"},{tag:[tl.string,tl.special(tl.brace)],color:"#f1fa8c"},{tag:[tl.number,tl.self,tl.bool,tl.null],color:"#bd93f9"},{tag:[tl.keyword,tl.operator],color:"#ff79c6"},{tag:[tl.definitionKeyword,tl.typeName],color:"#8be9fd"},{tag:tl.definition(tl.typeName),color:"#f8f8f2"},{tag:[tl.className,tl.definition(tl.propertyName),tl.function(tl.variableName),tl.attributeName],color:"#50fa7b"}]}),Sf({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#80C7FF",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#C1E2F8"},styles:[{tag:tl.comment,color:"#AAAAAA"},{tag:[tl.keyword,tl.operator,tl.typeName,tl.tagName,tl.propertyName],color:"#2F6F9F",fontWeight:"bold"},{tag:[tl.attributeName,tl.definition(tl.propertyName)],color:"#4F9FD0"},{tag:[tl.className,tl.string,tl.special(tl.brace)],color:"#CF4F5F"},{tag:tl.number,color:"#CF4F5F",fontWeight:"bold"},{tag:tl.variableName,fontWeight:"bold"}]}),Sf({variant:"light",settings:{background:"#f2f1f8",foreground:"#0c006b",caret:"#5c49e9",selection:"#d5d1f2",gutterBackground:"#f2f1f8",gutterForeground:"#0c006b70",lineHighlight:"#e1def3"},styles:[{tag:tl.comment,color:"#9995b7"},{tag:tl.keyword,color:"#ff5792",fontWeight:"bold"},{tag:[tl.definitionKeyword,tl.modifier],color:"#ff5792"},{tag:[tl.className,tl.tagName,tl.definition(tl.typeName)],color:"#0094f0"},{tag:[tl.number,tl.bool,tl.null,tl.special(tl.brace)],color:"#5842ff"},{tag:[tl.definition(tl.propertyName),tl.function(tl.variableName)],color:"#0095a8"},{tag:tl.typeName,color:"#b3694d"},{tag:[tl.propertyName,tl.variableName],color:"#fa8900"},{tag:tl.operator,color:"#ff5792"},{tag:tl.self,color:"#e64100"},{tag:[tl.string,tl.regexp],color:"#00b368"},{tag:[tl.paren,tl.bracket],color:"#0431fa"},{tag:tl.labelName,color:"#00bdd6"},{tag:tl.attributeName,color:"#e64100"},{tag:tl.angleBracket,color:"#9995b7"}]}),Sf({variant:"light",settings:{background:"#faf4ed",foreground:"#575279",caret:"#575279",selection:"#6e6a8614",gutterBackground:"#faf4ed",gutterForeground:"#57527970",lineHighlight:"#6e6a860d"},styles:[{tag:tl.comment,color:"#9893a5"},{tag:[tl.bool,tl.null],color:"#286983"},{tag:tl.number,color:"#d7827e"},{tag:tl.className,color:"#d7827e"},{tag:[tl.angleBracket,tl.tagName,tl.typeName],color:"#56949f"},{tag:tl.attributeName,color:"#907aa9"},{tag:tl.punctuation,color:"#797593"},{tag:[tl.keyword,tl.modifier],color:"#286983"},{tag:[tl.string,tl.regexp],color:"#ea9d34"},{tag:tl.variableName,color:"#d7827e"}]}),Sf({variant:"light",settings:{background:"#FFFFFF",foreground:"#000000",caret:"#000000",selection:"#FFFD0054",gutterBackground:"#FFFFFF",gutterForeground:"#00000070",lineHighlight:"#00000008"},styles:[{tag:tl.comment,color:"#CFCFCF"},{tag:[tl.number,tl.bool,tl.null],color:"#E66C29"},{tag:[tl.className,tl.definition(tl.propertyName),tl.function(tl.variableName),tl.labelName,tl.definition(tl.typeName)],color:"#2EB43B"},{tag:tl.keyword,color:"#D8B229"},{tag:tl.operator,color:"#4EA44E",fontWeight:"bold"},{tag:[tl.definitionKeyword,tl.modifier],color:"#925A47"},{tag:tl.string,color:"#704D3D"},{tag:tl.typeName,color:"#2F8996"},{tag:[tl.variableName,tl.propertyName],color:"#77ACB0"},{tag:tl.self,color:"#77ACB0",fontWeight:"bold"},{tag:tl.regexp,color:"#E3965E"},{tag:[tl.tagName,tl.angleBracket],color:"#BAA827"},{tag:tl.attributeName,color:"#B06520"},{tag:tl.derefOperator,color:"#000"}]}),Sf({variant:"light",settings:{background:"#fef7e5",foreground:"#586E75",caret:"#000000",selection:"#073642",gutterBackground:"#fef7e5",gutterForeground:"#586E7580",lineHighlight:"#EEE8D5"},styles:[{tag:tl.comment,color:"#93A1A1"},{tag:tl.string,color:"#2AA198"},{tag:tl.regexp,color:"#D30102"},{tag:tl.number,color:"#D33682"},{tag:tl.variableName,color:"#268BD2"},{tag:[tl.keyword,tl.operator,tl.punctuation],color:"#859900"},{tag:[tl.definitionKeyword,tl.modifier],color:"#073642",fontWeight:"bold"},{tag:[tl.className,tl.self,tl.definition(tl.propertyName)],color:"#268BD2"},{tag:tl.function(tl.variableName),color:"#268BD2"},{tag:[tl.bool,tl.null],color:"#B58900"},{tag:tl.tagName,color:"#268BD2",fontWeight:"bold"},{tag:tl.angleBracket,color:"#93A1A1"},{tag:tl.attributeName,color:"#93A1A1"},{tag:tl.typeName,color:"#859900"}]}),Sf({variant:"light",settings:{background:"#FFFFFF",foreground:"#4D4D4C",caret:"#AEAFAD",selection:"#D6D6D6",gutterBackground:"#FFFFFF",gutterForeground:"#4D4D4C80",lineHighlight:"#EFEFEF"},styles:[{tag:tl.comment,color:"#8E908C"},{tag:[tl.variableName,tl.self,tl.propertyName,tl.attributeName,tl.regexp],color:"#C82829"},{tag:[tl.number,tl.bool,tl.null],color:"#F5871F"},{tag:[tl.className,tl.typeName,tl.definition(tl.typeName)],color:"#C99E00"},{tag:[tl.string,tl.special(tl.brace)],color:"#718C00"},{tag:tl.operator,color:"#3E999F"},{tag:[tl.definition(tl.propertyName),tl.function(tl.variableName)],color:"#4271AE"},{tag:tl.keyword,color:"#8959A8"},{tag:tl.derefOperator,color:"#4D4D4C"}]});var Pf=i(6583),Cf=i(2659),Af=i(3754);const If="\n    local for while if else func struct this\n".split(/\s+/).filter((e=>e)).map((e=>({label:e,type:"keyword"}))),Tf="\n  acos\n  asin\n  atan\n  Area\n  ceil\n  cos\n  Color\n  debugItem\n  decodeTree\n  decodeColor\n  duplicate\n  findChildItemByName\n  findChildItemsByTag\n  findItemById\n  findItemByName\n  findParent\n  floor\n  fromJSON\n  getAngle\n  getEventArg\n  getEventName\n  getHeight\n  getId\n  getName\n  getOpacity\n  getPos\n  getPosX\n  getPosY\n  getScaleX\n  getScaleY\n  getSelfOpacity\n  getShape\n  getTags\n  getValue\n  getVar\n  getWidth\n  getWorldPos\n  hide\n  ifcond\n  isVisible\n  isNumber\n  List\n  localPoint\n  log\n  log10\n  log2\n  logn\n  Map\n  matchWorld\n  matchesRegex\n  max\n  min\n  mount\n  mountChild\n  mountRoot\n  parseFloat\n  parseInt\n  PI\n  pow\n  remove\n  removeChildItemsByTag\n  rgba\n  rnd\n  rndInt\n  round\n  sendEvent\n  Set\n  setAngle\n  setHeight\n  setOpacity\n  setPos\n  setPosX\n  setPosY\n  setScaleX\n  setScaleY\n  setSelfOpacity\n  setText\n  setTextColor\n  setTextSize\n  setValue\n  setVar\n  setWidth\n  setWorldPos\n  setFill\n  setStrokeColor\n  setStrokeSize\n  setStrokePattern\n  show\n  sin\n  sqrt\n  splitString\n  tag\n  tan\n  TreeNode\n  toJSON\n  uid\n  Vector\n  worldPoint\n".split(/\s+/).filter((e=>e)).map((e=>({label:e,type:"function",detail:""})));function $f(e,t,i){let n=If.concat(Tf);n=n.concat(i.map((e=>({label:e.name,type:"variable"})))),t.forEach((e=>{n=n.concat(function(e){if(!e)return[];const t=[],i=e=>{e instanceof Cf.uZ?e.a instanceof Cf.pK&&t.push({label:e.a.varName,type:e.b instanceof Cf.Hb?"function":"variable"}):e instanceof Cf.iR?t.push({label:e.varName,type:"variable"}):e instanceof Af.C&&t.push({label:e.name,type:"function",detail:"struct"})};try{const t=(0,Pf.YK)(e);t instanceof Cf.qp?t.nodes.forEach(i):i(t)}catch(e){}return t}(e))}));const r=e.getItemNames(),s=r.map((e=>{const t={label:e,type:"object",detail:"object"};return e.match(/^[0-9a-zA-Z_]+$/)||(t.apply=`"${e}"`),t})),o=r.map((e=>{const t={label:"@"+e,type:"object",detail:"object"};return e.match(/^[0-9a-zA-Z_]+$/)||(t.apply=`@"${e}"`),t}));return e=>{const t=ll(e.state).resolveInner(e.pos,-1);if(!t)return null;const i=e.matchBefore(/(\w+|@)/);return i&&(e.explicit||i)?"ExternalObjectReference"===t.name?i&&"@"===i.text?{from:i?i.from:e.pos,options:o,validFor:/^(@\w*)?$/}:{from:i?i.from:e.pos,options:s,validFor:/^(@\w*)?$/}:"VariableName"===t.name?{from:i?i.from:e.pos,options:n,validFor:/^\w*$/}:null:null}}const Mf=Sf({variant:"dark",settings:{background:"#202230",foreground:"#D5E1E2",caret:"#FFFFFF45",selection:"#42AAA9",gutterBackground:"#282A36",gutterForeground:"#E0E0E090",lineHighlight:"#FFFFFF0F"},styles:[{tag:tl.comment,color:"#6272A4"},{tag:[tl.string,tl.special(tl.brace),tl.regexp],color:"#F1FA8C"},{tag:[tl.className,tl.definition(tl.propertyName),tl.function(tl.variableName),tl.function(tl.definition(tl.variableName)),tl.definition(tl.typeName)],color:"#A3EBFF"},{tag:[tl.number,tl.bool,tl.null],color:"#62E9BD"},{tag:[tl.keyword,tl.operator],color:"#FF79C6"},{tag:[tl.definitionKeyword,tl.modifier],color:"#F8FBB1"},{tag:[tl.angleBracket,tl.tagName,tl.typeName,tl.propertyName],color:"#60A4F1"},{tag:tl.derefOperator,color:"#E0E0E0"},{tag:tl.macroName,color:"#F5B360"},{tag:tl.attributeName,color:"#7BACCA"}]});function Ef(e){let t=[];return ll(e.state).cursor().iterate((e=>{e.type.isError&&t.push({from:e.from,to:e.to,severity:"error",message:null})})),t}const _f={props:{schemeContainer:{type:Object,required:!0},previousScripts:{type:Array,default:[]},scopeArgs:{type:Array,default:()=>[]},value:{type:String,default:""},height:{type:Number,default:400}},data(){return{enlarged:!1,script:this.value}},created(){const e=new ee;let t="dark"===document.body.getAttribute("data-theme")?Mf:kf;this.editorState=Ce.create({doc:this.script,extensions:[Ce.tabSize.of(4),bl.of("\t"),ps.of(rd),ps.of(sd),qp,new vl(wf,[Of]),_p(Ef),e.of(t),ss.updateListener.of((e=>{e.docChanged&&this.$emit("changed",this.editor.state.doc.toString())})),ss.theme({"&":{height:"100%"},".cm-scroller":{overflow:"auto"}}),mp({override:[$f(this.schemeContainer,this.previousScripts,this.scopeArgs)]})]}),this.editor=null,this.themeObserver=new MutationObserver((()=>{const t="dark"===document.body.getAttribute("data-theme")?Mf:kf;this.editor&&this.editor.dispatch({effects:e.reconfigure(t)})})),this.themeObserver.observe(document.body,{attributeFilter:["data-theme"],attributeOldValue:!0,subtree:!1,childList:!1})},beforeDestroy(){this.themeObserver.disconnect()},mounted(){this.editor=new ss({state:this.editorState,parent:this.$refs.scriptEditor}),this.editor.setTabFocusMode(!1)},methods:{},watch:{value(e){this.script=e}}},Df=_f,Lf=(0,i(4486).A)(Df,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"script-editor-container",class:{"script-editor-enlarged":e.enlarged},style:{height:e.enlarged?"100%":`${e.height}px`}},[t("div",{ref:"scriptEditor",staticClass:"codemirror-container"}),e._v(" "),t("span",{staticClass:"text-editor-enlarge",on:{click:function(t){e.enlarged=!e.enlarged}}},[e.enlarged?t("i",{staticClass:"fa-solid fa-compress"}):t("i",{staticClass:"fas fa-expand"})])])}),[],!1,null,null,null).exports},7550:(e,t,i)=>{"use strict";function n(e,t){return e?"solid"===e.type?e.color:"image"===e.type&&e.image||"gradient"===e.type&&e.gradient?`url(#${t})`:"none":"none"}function r(e){return n(e.shapeProps.fill,`fill-pattern-${e.id}`)}i.d(t,{oy:()=>r,fD:()=>n,Ay:()=>o});const s={props:["fillId","fill","area"],computed:{direction(){let e=parseInt(this.fill.gradient.direction);if(isFinite(e)||(e=0),"gradient"===this.fill.type&&this.fill.gradient){const t=50*Math.cos(Math.PI*(e-90)/180),i=50*Math.sin(Math.PI*(e-90)/180);return{x1:50-t,y1:50-i,x2:50+t,y2:50+i}}return{x1:0,y1:0,x2:100,y2:0}},imagePreserveAspectRatio(){return this.fill.stretch?"none":"xMidYMid meet"},imageBox(){return"image"===this.fill.type&&this.fill.imageBox?this.fill.imageBox:{x:0,y:0,w:1,h:1}}}},o=(0,i(4486).A)(s,(function(){var e=this,t=e._self._c;return t("g",["image"===e.fill.type&&e.fill.image?t("defs",[t("pattern",{attrs:{id:e.fillId,patternUnits:"userSpaceOnUse",width:e.area.w,height:e.area.h}},[t("image",{attrs:{"xlink:href":e.fill.image,x:e.area.w*e.imageBox.x,y:e.area.h*e.imageBox.y,width:e.area.w*e.imageBox.w,height:e.area.h*e.imageBox.h,preserveAspectRatio:e.imagePreserveAspectRatio}})])]):e._e(),e._v(" "),"gradient"===e.fill.type&&e.fill.gradient?t("defs",["linear"===e.fill.gradient.type?t("linearGradient",{attrs:{id:e.fillId,x1:`${e.direction.x1}%`,y1:`${e.direction.y1}%`,x2:`${e.direction.x2}%`,y2:`${e.direction.y2}%`}},e._l(e.fill.gradient.colors,(function(e){return t("stop",{key:e.id,style:{"stop-color":e.c},attrs:{offset:`${e.p}%`}})})),1):e._e(),e._v(" "),"radial"===e.fill.gradient.type?t("radialGradient",{attrs:{id:e.fillId,cx:"50%",cy:"50%",r:"50%",fx:"50%",fy:"50%"}},e._l(e.fill.gradient.colors,(function(e){return t("stop",{key:e.id,style:{"stop-color":e.c},attrs:{offset:`${e.p}%`}})})),1):e._e()],1):e._e()])}),[],!1,null,null,null).exports},1578:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(4912),r=i(7550);const s=e=>{const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/4,e.area.h/4);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`},o="rgba(40, 40, 40, 1.0)";function a(e,t,i){const n=l[t.shapeProps.lang];if(!n)return;let r=e.state.assetsPath;"/"===r&&(r=""),e.state.routePrefix&&(r=e.state.routePrefix+r);const s=new Worker(`${r}/js/syntax-highlight-worker.js`);s.onmessage=e=>{const t=i.querySelector(".item-text-element");t&&(t.innerHTML=e.data)};const o=document.createElement("code");o.appendChild(document.createTextNode(t.textSlots.body.text)),s.postMessage({text:o.innerText,lang:n})}const l={Bash:"bash",C:"c","C++":"cpp","C#":"csharp",CSS:"css",Diff:"diff",GO:"go",GraphQL:"graphql",Ini:"ini",Java:"java",JavaScript:"javascript",JSON:"json",Kotlin:"kotlin",Less:"less",Lua:"lua",Makefile:"makefile",Markdown:"markdown","Objective C":"objectivec",Perl:"perl",PHP:"php","PHP Template":"php-template",Text:"plaintext",Python:"python","Python REPL":"python-repl",R:"r",Ruby:"ruby",Rust:"rust",SCSS:"scss",Shell:"shell",SQL:"sql",Swift:"swift",TypeScript:"typescript","VB.NET":"vbnet",WebAssembly:"wasm",XML:"xml",YAML:"yaml"},c=Object.keys(l),h={props:["item","editorId"],components:{AdvancedFill:r.Ay},shapeConfig:{shapeType:"vue",id:"code_block",menuItems:[{group:"General",name:"Code Block",iconUrl:"/assets/images/items/code-block.svg",item:{textSlots:{title:{text:"<b>Code</b>",halign:"center",valign:"middle",color:"rgba(245, 245, 245, 1.0)",paddingTop:4,paddingLeft:10,paddingRight:10,paddingBottom:4},body:{font:"Courier New",text:"",color:"rgba(245, 245, 245, 1.0)",halign:"left",valign:"top",whiteSpace:"pre-wrap",paddingTop:10,paddingLeft:10,paddingRight:10,paddingBottom:10}}}}],getPins:e=>(0,n.aO)(e),computePath:s,onTextSlotTextUpdate(e,t,i,n){"body"===i&&a(e,t,n)},getTextSlots(e){const t="none"===e.shapeProps.frame?0:e.shapeProps.headerHeight,i=[{name:"body",markupDisabled:!0,cssClass:`syntax-theme-${e.shapeProps.theme}`,area:{x:0,y:t,w:e.area.w,h:Math.max(1,e.area.h-t)}}];return"none"!==e.shapeProps.frame&&i.push({name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.headerHeight)}}),i},editorProps:{},args:{theme:{type:"choice",value:"dark",options:["dark","light"],name:"Theme",onUpdate:function(e,t,i,n){"dark"===i?(t.shapeProps.fill={type:"solid",color:o},t.textSlots.title.color="rgba(245, 245, 245, 1.0)",t.textSlots.body.color="rgba(245, 245, 245, 1.0)"):(t.shapeProps.fill={type:"solid",color:"rgba(240, 240, 240, 1.0)"},t.textSlots.title.color="rgba(0, 0, 0, 1.0)",t.textSlots.body.color="rgba(0, 0, 0, 1.0)")}},frame:{type:"choice",value:"mac",options:["mac","none"],name:"Frame"},lang:{type:"choice",value:"JavaScript",options:c,name:"Language",onUpdate:function(e,t,i,n){const r=document.getElementById(`item-text-slot-${t.id}-body`);r&&a(e,t,r)}},fill:{type:"advanced-color",value:{type:"solid",color:o},name:"Fill"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:1,name:"Stroke size"},cornerRadius:{type:"number",value:4,name:"Corner radius",min:0},headerHeight:{type:"number",value:30,name:"Header hight",min:0}},mounted(e,t,i){Array.isArray(i)&&i.forEach((i=>{"body"===i.getAttribute("data-text-slot-name")&&a(e,t,i)}))}},computed:{shapePath(){return s(this.item)},svgFill(){return(0,r.oy)(this.item)}}},d=(0,i(4486).A)(h,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgFill}}),e._v(" "),"mac"===e.item.shapeProps.frame?t("g",[t("circle",{attrs:{cx:"15",cy:"15",r:"5",fill:"#EC6762"}}),e._v(" "),t("circle",{attrs:{cx:"30",cy:"15",r:"5",fill:"#F4BE5E"}}),e._v(" "),t("circle",{attrs:{cx:"45",cy:"15",r:"5",fill:"#61C761"}})]):e._e()],1)}),[],!1,null,null,null).exports},711:(e,t,i)=>{"use strict";i.d(t,{C:()=>y,Ej:()=>g,TW:()=>m,bd:()=>f,Ay:()=>b,qk:()=>v});var n=i(4912),r=i(4286),s=i(7550),o=i(5999),a=i(6935),l=i(1570),c=i(5824),h=i.n(c),d=i(8176);const u=e=>{const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`};function p(e,t,i){const n=e.area.w-10,r=e.area.h-10,s=Math.min(t,n),o=Math.min(i,r);return{x:(e.area.w-s)/2,y:Math.max(5,e.area.h-o-10),w:s,h:o}}function f(e){const t=p(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight),i=Math.min(e.shapeProps.buttonCornerRadius,t.w/2,t.h/2),n=t.x,r=t.y,s=t.w,o=t.h;return`M ${n+s-i} ${r+o}  L ${n+i} ${r+o} a ${i} ${i} 0 0 1 ${-i} ${-i}  L ${n} ${r+i}  a ${i} ${i} 0 0 1 ${i} ${-i}   L ${n+s-i} ${r}   a ${i} ${i} 0 0 1 ${i} ${i}  L ${n+s} ${r+o-i}   a ${i} ${i} 0 0 1 ${-i} ${i} Z`}const m="Component Loaded",g="Component Failed",y="Component Destroyed";function v(e,t,i){if(!e.shapeProps.showBackButton||"external"!==e.shapeProps.kind)return null;const n=e.area.w/1100,r=e.area.h/600,s=Math.max(n,r)*e.shapeProps.backButtonScale,o=h().generate();return{id:o,shape:"rect",area:{x:0+e.area.w-(55+e.shapeProps.backButtonHPad)*s,y:(30-e.shapeProps.backButtonVPad)*s,w:55,h:30,sx:s,sy:s,r:0,px:0,py:0},textSlots:{},selfOpacity:50,visible:!0,cursor:"pointer",shapeProps:{cornerRadius:e.shapeProps.backButtonCornerRadius,strokeSize:0,fill:e.shapeProps.backButtonFill},childItems:[{id:h().generate(),name:"back button icon",area:{x:12,y:5,w:28,h:18,r:0,sx:1,sy:1,px:.5,py:.5},shape:"path",shapeProps:{paths:[{id:h().generate(),closed:!0,points:[{t:"L",x:39.39,y:19.05,id:h().generate()},{t:"L",x:39.39,y:0,id:h().generate()},{t:"L",x:0,y:28.57,id:h().generate()},{t:"L",x:39.39,y:57.14,id:h().generate()},{t:"L",x:39.39,y:38.1,id:h().generate()},{t:"A",x:75.76,y:38.1,h:50,id:h().generate()},{t:"L",x:75.76,y:80.95,id:h().generate()},{t:"L",x:51.52,y:80.95,id:h().generate()},{t:"L",x:51.52,y:100,id:h().generate()},{t:"A",x:75.76,y:100,h:-47.05,id:h().generate()},{t:"L",x:75.76,y:19.05,id:h().generate()}],pos:"relative"}],fill:{type:"solid",color:e.shapeProps.backButtonTextColor},strokeColor:e.shapeProps.backButtonTextColor,strokeSize:2,strokePattern:"solid"},textSlots:{},opacity:100,selfOpacity:100,visible:!0,blendMode:"normal",cursor:"default",clip:!1,mount:!0,effects:[],description:"",interactionMode:"tooltip",autoLayout:{on:!1,rules:{}},behavior:{events:[],dragging:"none",dropTo:"",dragPath:"",dragPathAlign:!1,dragPathRotation:0},tooltipBackground:"rgba(230,230,230,1.0)",tooltipColor:"rgba(30,30,30,1.0)",classes:[]},{id:h().generate(),name:"back button overlay",shape:"rect",area:{x:0,y:0,w:55,h:30,sx:1,sy:1,r:0,px:0,py:0},cursor:"pointer",shapeProps:{fill:{type:"solid",color:"rgba(255,255,255,0.0)"},cornerRadius:e.shapeProps.backButtonCornerRadius,strokeSize:0},behavior:{events:[{id:h().generate(),event:"clicked",actions:[{id:h().generate(),element:"#"+e.id,method:"_transformScreen",args:{x:i.x,y:i.y,scale:i.scale,inBackground:!0}},{id:h().generate(),element:"#"+t.id,method:"hide",args:{}},{id:h().generate(),element:"#"+e.id,method:"destroyComponent",args:{}}]},{id:h().generate(),event:"mousein",actions:[{id:h().generate(),element:`#${o}`,method:"set",args:{field:"selfOpacity",value:100,animated:!0,animationDuration:.2,transition:"ease-in-out",inBackground:!1}}]},{id:h().generate(),element:`#${o}`,actions:[{id:h().generate(),element:"self",method:"set",args:{field:"selfOpacity",value:50,animated:!0,animationDuration:.2,transition:"ease-in-out",inBackground:!1}}]}]}}]}}const x={props:["item","editorId"],components:{AdvancedFill:s.Ay},shapeConfig:{shapeType:"vue",id:"component",menuItems:[{group:"General",name:"Component",iconUrl:"/assets/images/items/component.svg",description:"\n                Lets you embed other documents into this item.\n            ",item:{textSlots:{body:{text:"Component",valign:"middle",halign:"center",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0},button:{text:"Load more",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}}}}],getPins:e=>(0,n.aO)(e),getTextSlots(e){if("embedded"===e.shapeProps.kind)return[];const t=p(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);let i=e.area.h,n=!1;"external"===e.shapeProps.kind&&e.shapeProps.showButton&&(i=t.y,n=!0);const r=[{name:"body",area:{x:0,y:0,w:e.area.w,h:i}}];return n&&r.push({name:"button",area:t}),r},onMouseDown(e,t,i,n,r){d.A.item.custom.$emit("mouse-down",e,t.id,i)},onMouseMove(e,t,i,n,r){d.A.item.custom.$emit("mouse-move",e,t.id,i)},computeCustomAreas:e=>"embedded"===e.shapeProps.kind||e.meta&&e.meta.componentLoadFailed?[]:[{id:"load-button",cursor:"pointer",path:f(e)}],computePath:u,controlPoints:{make(e){const t={cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}};if("external"===e.shapeProps.kind&&e.shapeProps.showButton){const i=p(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);t.buttonCornerRadius={x:i.x+i.w-Math.min(e.shapeProps.buttonCornerRadius,i.w/2,i.h/2),y:i.y}}return t},handleDrag(e,t,i,n,r,s){if("cornerRadius"===t)e.shapeProps.cornerRadius=Math.max(0,l.A.roundPrecise(e.area.w-Math.max(e.area.w/2,i+r),1));else if("buttonCornerRadius"===t){const t=p(e,e.shapeProps.buttonWidth,e.shapeProps.buttonHeight);e.shapeProps.buttonCornerRadius=Math.min(t.h/2,t.w/2,Math.max(0,l.A.roundPrecise(t.x+t.w-i-r)))}}},args:{kind:{type:"choice",value:"external",name:"Kind",options:["external","embedded"],description:"External - allows to fetch other documents and render them inside the component. Embedded - uses the items in the same document"},schemeId:{type:"scheme-ref",value:"",name:"External Document",depends:{kind:"external"},description:"ID of the document that this component should load"},referenceItem:{type:"element",name:"Item",depends:{kind:"embedded"},description:"Reference item that this component should render"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1)"},name:"Fill"},strokeColor:{type:"color",value:"#466AAA",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},cornerRadius:{type:"number",value:0,name:"Corner radius",min:0},placement:{type:"choice",value:"centered",options:["centered","stretch"],name:"Placement"},autoZoom:{type:"boolean",value:!0,name:"Auto zoom",description:"Zoom into component when it is loaded",depends:{kind:"external"}},showButton:{type:"boolean",value:!0,name:"Show button",description:"Displays a button which user can click to load component in view mode",depends:{kind:"external"}},buttonFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.15)"},name:"Button Fill",depends:{showButton:!0,kind:"external"}},buttonStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Button stroke color",depends:{showButton:!0,kind:"external"}},buttonHoverFill:{type:"advanced-color",value:{type:"solid",color:"rgba(14,195,255,0.45)"},name:"Hovered button Fill",depends:{showButton:!0,kind:"external"}},buttonHoverStrokeColor:{type:"color",value:"rgba(24,127,191,0.9)",name:"Hovered button stroke color",depends:{showButton:!0,kind:"external"}},buttonStrokeSize:{type:"number",value:2,name:"Button stroke size",depends:{showButton:!0,kind:"external"}},buttonCornerRadius:{type:"number",value:0,name:"Button Corner radius",min:0,depends:{showButton:!0,kind:"external"}},buttonWidth:{type:"number",value:180,name:"Button width",depends:{showButton:!0,kind:"external"}},buttonHeight:{type:"number",value:40,name:"Button height",depends:{showButton:!0,kind:"external"}},showProgressBar:{type:"boolean",value:!0,name:"Show progress bar",depends:{kind:"external"}},progressColor1:{type:"color",value:"rgba(24,127,191,1)",name:"Progress bar color 1",depends:{showProgressBar:!0,kind:"external"}},progressColor2:{type:"color",value:"rgba(140,214,219,1)",name:"Progress bar color 2",depends:{showProgressBar:!0,kind:"external"}},showBackButton:{type:"boolean",value:!0,name:"Show back button",depends:{kind:"external"}},backButtonFill:{type:"advanced-color",value:{type:"solid",color:"rgba(102,102,102,1.0)"},name:"Button Fill",depends:{showBackButton:!0,kind:"external"}},backButtonTextColor:{type:"color",value:"rgba(245,245,245,1.0)",name:"Back button icon color",depends:{showBackButton:!0,kind:"external"}},backButtonVPad:{type:"number",value:20,name:"Back button vertical padding",depends:{showBackButton:!0,kind:"external"}},backButtonHPad:{type:"number",value:20,name:"Back button horizontal padding",depends:{showBackButton:!0,kind:"external"}},backButtonCornerRadius:{type:"number",value:15,name:"Back button corner radius",depends:{showBackButton:!0,kind:"external"}},backButtonScale:{type:"number",value:1,name:"Back button scale",depends:{showBackButton:!0,kind:"external"}}},editorProps:{customTextRendering:!0},getEvents:e=>[{name:m},{name:g},{name:y}]},beforeMount(){d.A.item.custom.$on("mouse-move",this.editorId,this.item.id,this.onMouseMove),d.A.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onMouseDown),d.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),d.A.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),d.A.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled),d.A.component.loadRequested.specific.$on(this.editorId,this.item.id,this.onComponentLoadRequested),d.A.component.loadFailed.specific.$on(this.editorId,this.item.id,this.onComponentLoadFailed)},beforeDestroy(){d.A.item.custom.$off("mouse-move",this.editorId,this.item.id,this.onMouseMove),d.A.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onMouseDown),d.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),d.A.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),d.A.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled),d.A.component.loadRequested.specific.$off(this.editorId,this.item.id,this.onComponentLoadRequested),d.A.component.loadFailed.specific.$off(this.editorId,this.item.id,this.onComponentLoadFailed)},data(){const e=this.item._childItems&&this.item._childItems.length>0;return{buttonHovered:!1,buttonShown:"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton&&!e,bodyTextShown:!e,isLoading:!1,hideTextSlot:null,textStyle:this.createTextStyle(),bodyTextStyle:this.createBodyTextStyle()}},methods:{onMouseMove(e){"load-button"===e?this.onButtonMouseOver():this.onButtonMouseLeave()},onMouseDown(e){!this.isLoading&&this.item.meta&&this.item.meta.componentLoadFailed?this.resetFailureMessage():"load-button"===e&&this.onLoadSchemeClick()},onLoadSchemeClick(){this.isLoading=!0,this.$emit("component-load-requested",this.item)},onItemChanged(){"shape"===this.item.shape&&(this.item._childItems&&this.item._childItems.length>0&&(this.buttonShown=!1,this.bodyTextShown=!1),this.isLoading=!1,this.buttonHovered=!1,this.textStyle=this.createTextStyle(),this.bodyTextStyle=this.createBodyTextStyle())},createBodyTextStyle(){let e={};if(this.item.textSlots&&this.item.textSlots.body){e=(0,o.E)(this.item.textSlots.body);const t=p(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);e.width=`${this.item.area.w}px`;let i=this.item.area.h;"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton&&(i=t.y),e.height=`${i}px`}return e},createTextStyle(){let e={};if(this.item.textSlots&&this.item.textSlots.button){e=(0,o.E)(this.item.textSlots.button);const t=p(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);e.width=`${t.w}px`,e.height=`${t.h}px`}return e},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=t},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=null},onButtonMouseOver(){this.buttonHovered=!0,this.$forceUpdate()},onButtonMouseLeave(){this.buttonHovered=!1,this.$forceUpdate()},onComponentLoadRequested(){this.isLoading=!0},onComponentLoadFailed(){this.isLoading=!1},onComponentMounted(){this.isLoading=!1},resetFailureMessage(){this.item.meta.componentLoadFailed=!1,this.$forceUpdate()}},computed:{buttonPath(){return f(this.item)},shapePath(){return u(this.item)},svgFill(){return(0,s.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},svgButtonFill(){return(0,s.fD)(this.item.shapeProps.buttonFill,`fill-pattern-button-${this.item.id}`)},svgButtonHoverFill(){return(0,s.fD)(this.item.shapeProps.buttonHoverFill,`fill-pattern-button-hovered-${this.item.id}`)},strokeDashArray(){return r.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},buttonArea(){return p(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight)},bodyTextSlotHeight(){const e=p(this.item,this.item.shapeProps.buttonWidth,this.item.shapeProps.buttonHeight);return"external"===this.item.shapeProps.kind&&this.item.shapeProps.showButton?e.y:this.item.area.h},sanitizedBodyText(){return this.item.textSlots&&this.item.textSlots.body?(0,a.A)(this.item.textSlots.body.text):""},sanitizedButtonText(){if(this.isLoading)return"Loading ...";let e="";return this.item.textSlots&&this.item.textSlots.button&&(e=this.item.textSlots.button.text),(0,a.A)(e)},failureMessageStyle(){return{color:"rgb(255, 255, 255)","font-size":"14px","font-family":"Arial, Helvetica, sans-serif",padding:"10px","text-align":"center","vertical-align":"middle","white-space":"normal",display:"table-cell","box-sizing":"border-box",width:`${this.item.area.w}px`,height:`${this.item.area.h}px`}},progressBar(){return p(this.item,180,10)},progressBarStyle(){return{background:`linear-gradient(90deg, ${this.item.shapeProps.progressColor1} 0%, ${this.item.shapeProps.progressColor2} 25%, ${this.item.shapeProps.progressColor2} 50%, ${this.item.shapeProps.progressColor1} 75%) 0% 0% / 60% 100%`}},progressBarHeight(){return Math.min(20,this.item.area.h)}}},b=(0,i(4486).A)(x,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("advanced-fill",{attrs:{fillId:`fill-pattern-button-${e.item.id}`,fill:e.item.shapeProps.buttonFill,area:e.item.area}}),e._v(" "),t("advanced-fill",{attrs:{fillId:`fill-pattern-button-hovered-${e.item.id}`,fill:e.item.shapeProps.buttonHoverFill,area:e.item.area}}),e._v(" "),"embedded"!==e.item.shapeProps.kind?t("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.svgFill}}):e._e(),e._v(" "),"embedded"!==e.item.shapeProps.kind&&"body"!==e.hideTextSlot&&e.bodyTextShown?t("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.bodyTextSlotHeight}},[t("div",{staticClass:"item-text-container",style:e.bodyTextStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedBodyText)}})]):e._e(),e._v(" "),(!e.isLoading||!e.item.shapeProps.showProgressBar)&&e.buttonShown&&e.buttonArea.w>0&&e.buttonArea.h>0?t("g",{staticStyle:{cursor:"pointer"}},[e.buttonHovered?t("path",{attrs:{fill:e.svgButtonHoverFill,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonStrokeColor,d:e.buttonPath}}):t("path",{attrs:{fill:e.svgButtonFill,"stroke-width":e.item.shapeProps.buttonStrokeSize+"px",stroke:e.item.shapeProps.buttonHoverStrokeColor,d:e.buttonPath}}),e._v(" "),"button"!==e.hideTextSlot?t("foreignObject",{attrs:{x:e.buttonArea.x,y:e.buttonArea.y,width:e.buttonArea.w,height:e.buttonArea.h}},[t("div",{staticClass:"item-text-container",style:e.textStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedButtonText)}})]):e._e()]):e._e(),e._v(" "),e.isLoading&&e.item.shapeProps.showProgressBar&&e.progressBar.w>0&&e.progressBar.h>0?t("foreignObject",{attrs:{x:e.progressBar.x,y:e.progressBar.y,width:e.progressBar.w,height:e.progressBar.h}},[t("div",{staticClass:"progress-bar",style:e.progressBarStyle})]):e._e(),e._v(" "),!e.isLoading&&e.item.meta&&e.item.meta.componentLoadFailed?t("g",{staticStyle:{cursor:"pointer"}},[t("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),t("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[t("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("b",[e._v("Loading failed")])])])]):e._e(),e._v(" "),e.item.meta&&e.item.meta.cyclicComponent?t("g",[t("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h,fill:"rgba(250, 70, 70)"}}),e._v(" "),t("foreignObject",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.area.h}},[t("div",{staticClass:"item-text-container",style:e.failureMessageStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("b",[e._v("Cyclic dependency!")])])])]):e._e()],1)}),[],!1,null,null,null).exports},4993:(e,t,i)=>{"use strict";i.d(t,{A:()=>K});var n=i(269),r=i(4286),s=i(6354),o=i(1570);function a(e){return{hollow:!1,renderFunc:e}}function l(e){return{hollow:!0,renderFunc:e}}const c={empty:null,triangle:a(((e,t,i,n)=>d(e,t,i,n,1,2,!0))),"triangle-1":a(((e,t,i,n)=>d(e,t,i,n,1,1,!0))),"triangle-2":a(((e,t,i,n)=>d(e,t,i,n,1,3,!0))),arrow:a(((e,t,i,n)=>d(e,t,i,n,1,2,!1))),"arrow-1":a(((e,t,i,n)=>d(e,t,i,n,1,1,!1))),"arrow-2":a(((e,t,i,n)=>d(e,t,i,n,1,3,!1))),"triangle-h":l(((e,t,i,n)=>d(e,t,i,n,1,2,!0))),"triangle-h-1":l(((e,t,i,n)=>d(e,t,i,n,1,1,!0))),"triangle-h-2":l(((e,t,i,n)=>d(e,t,i,n,1,3,!0))),circle:a(((e,t,i,n)=>{const r=i*i+n*n;if(r>.01){let s=Math.sqrt(r)/2;return{path:` M ${e+i/2-s}, ${t+n/2} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0`,hollow:!1,entryPoint:{x:e+i,y:t+n}}}return null})),"circle-cross":l(((e,t,i,n)=>{const r=i*i+n*n;if(r>.01){let s=Math.sqrt(r)/2;const o=e+i/2,a=t+n/2,l=Math.cos(Math.PI/4)*s;return{path:` M ${o-s}, ${a} a ${s},${s} 0 1,0 ${2*s},0 a ${s},${s} 0 1,0 -${2*s},0 z M ${o-l} ${a-l} L ${o+l} ${a+l}  M ${o+l} ${a-l} L ${o-l} ${a+l}`,hollow:!0,entryPoint:{x:e+i,y:t+n}}}return null})),"double-arrow":a(((e,t,i,n)=>d(e,t,i,n,2,2,!1))),"double-arrow-1":a(((e,t,i,n)=>d(e,t,i,n,2,1,!1))),"double-arrow-2":a(((e,t,i,n)=>d(e,t,i,n,2,3,!1))),"double-triangle":a(((e,t,i,n)=>d(e,t,i,n,2,2,!0))),"double-triangle-1":a(((e,t,i,n)=>d(e,t,i,n,2,1,!0))),"double-triangle-2":a(((e,t,i,n)=>d(e,t,i,n,2,3,!0))),"double-triangle-h":l(((e,t,i,n)=>d(e,t,i,n,2,2,!0))),"double-triangle-h-1":l(((e,t,i,n)=>d(e,t,i,n,2,1,!0))),"double-triangle-h-2":l(((e,t,i,n)=>d(e,t,i,n,2,3,!0))),diamond:a(((e,t,i,n)=>u(e,t,i,n,.5))),"diamond-1":a(((e,t,i,n)=>u(e,t,i,n,1))),"diamond-2":a(((e,t,i,n)=>u(e,t,i,n,1.5))),"diamond-h":l(((e,t,i,n)=>u(e,t,i,n,.5))),"diamond-h-1":l(((e,t,i,n)=>u(e,t,i,n,1))),"diamond-h-2":l(((e,t,i,n)=>u(e,t,i,n,1.5))),line:a(((e,t,i,n)=>h(e,t,i,n,1))),"double-line":a(((e,t,i,n)=>h(e,t,i,n,2))),"tripple-line":a(((e,t,i,n)=>h(e,t,i,n,3)))};function h(e,t,i,n,r){let s="";const o=n/2,a=-i/2;for(let l=0;l<r;l++){const c=e+i*(l+1)/(r+1),h=t+n*(l+1)/(r+1);s+=`M ${c+o} ${h+a} L ${c-o} ${h-a} `}return{path:s,hollow:!0,prolongLine:!0,entryPoint:{x:e+i,y:t+n}}}function d(e,t,i,n,r,s,o){let a="";const l=n/(2*s),c=-i/(2*s);for(let s=0;s<r;s++){const h=e+i*s/r,d=t+n*s/r;a+=`M ${h+i/r+l} ${d+n/r+c} L ${h} ${d} L ${h+i/r-l} ${d+n/r-c} `,o&&(a+=" z ")}return{path:a,hollow:!o,prolongLine:!o,entryPoint:{x:e+i,y:t+n}}}function u(e,t,i,n,r){const s=r*n/2,o=-r*i/2;return{path:`M ${e} ${t} L ${e+i/2-s} ${t+n/2-o} L ${e+i} ${t+n} L ${e+i/2+s} ${t+n/2+o} z`,hollow:!1,entryPoint:{x:e+i,y:t+n}}}Object.keys(c);var p=i(2063),f=i(7550),m=i(8176),g=i(869),y=(i(7298),i(5244));function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){b(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w=new s.Vy("Connector");function O(e){return o.A.roundPrecise2(e)}const S=0,k=1,P=2,C=3,A=4,I=5,T=6,$=[k,S,C,P,A];function M(e,t){return e<=-.5?P:e>=.5?C:t<=-.5?S:t>=.5?k:void 0}const E=[[0,0,-1,1],[0,0,1,-1],[1,-1,0,0],[-1,1,0,0]];function _(e){return e===C||e===P?T:e===S||e===k?I:A}function D(e){return $[e]}function L(e,t){return{way:t>e?k:S,value:Math.abs(t-e)}}function B(e,t){return{way:t>e?C:P,value:Math.abs(t-e)}}const R=(e,t,i,n)=>{const r=(t+n)/2;return[L(t,r),B(e,i),L(r,n)]},N=(e,t,i,n)=>[B(e,i),L(t,n)],F=(e,t,i,n)=>[L(t,n),B(e,i)],j=(e,t,i,n)=>{const r=(e+i)/2;return[B(e,r),L(t,n),B(r,i)]};function z(e,t,i,n,r,s){const a=D(i);let l=[];const c=n-e,h=r-t;o.A.tooSmall(c)||l.push(n>e?C:P),o.A.tooSmall(h)||l.push(r>t?k:S),2===l.length&&(l[0]===a||s===l[0]&&l[1]!==a||s===A&&l[1]===i)&&(l=[l[1],l[0]]);const d=_(i),u=_(l[0]),p=_(s);if(u===p||d===p)if(p===I){if(r<t&&i!==k||r>t&&i!==S)return R(e,t,n,r)}else if(n<e&&i!==C||n>e&&i!==P)return j(e,t,n,r);return u===T?N(e,t,n,r):F(e,t,n,r)}function Q(e,t,i,n){return i===C?e+=n:i===P?e-=n:i===S?t-=n:i===k&&(t+=n),{x:e,y:t}}function U(e,t,i){const r=p.A.clone(e.shapeProps.points),s=[];let o=S,a=A;r[0].hasOwnProperty("nx")&&(o=M(r[0].nx,r[0].ny));const l=r[r.length-1];if(l.hasOwnProperty("nx")&&(a=M(l.nx,l.ny)),e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=Q(0,0,o,e.shapeProps.sourceCapSize),i=W(r[0].x,r[0].y,r[0].x+t.x,r[0].y+t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap);i&&(i.prolongLine||(r[0].x=i.entryPoint.x,r[0].y=i.entryPoint.y),s.push(i))}const c=[];let h=o,d=r[0];const u=e=>{(0,n.jJ)(e,(e=>{c.push(e),d=Q(d.x,d.y,e.way,e.value)})),h=e[e.length-1].way};for(let e=1;e<r.length-1;e++)u(z(d.x,d.y,h,r[e].x,r[e].y,A));u(z(d.x,d.y,h,l.x,l.y,D(a)));let f=`M ${r[0].x} ${r[0].y}`;if(d=r[0],!t)return(0,n.jJ)(c,((t,i)=>{const n=Q(d.x,d.y,t.way,t.value);let r=null;i===c.length-1&&e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(r=W(n.x,n.y,d.x,d.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),r?(f+=` L ${r.entryPoint.x} ${r.entryPoint.y}`,s.push(r)):(f+=` L ${n.x} ${n.y}`,d=n)})),{path:f,caps:s};const m=Math.max(0,e.shapeProps.stepSize);let g=0;for(let e=0;e<c.length-1;e++){const t=c[e],n=c[e+1],r=Math.min(t.value,n.value);if(r>1&&n.way!==t.way){const e=Math.min(m,r/2),s=Q(d.x,d.y,t.way,t.value-g),o=Q(d.x,d.y,t.way,t.value-e-g),a=Q(s.x,s.y,n.way,e);if(i){const i=(y=t.way,v=n.way,E[y][v]>0?1:0);f+=` L ${o.x} ${o.y} A ${e} ${e} 0 0 ${i} ${a.x} ${a.y}`}else f+=` L ${o.x} ${o.y} L ${a.x} ${a.y}`;g=e,d=a}else{const e=Q(d.x,d.y,t.way,t.value-g);f+=` L ${e.x} ${e.y}`,d=e,g=0}}var y,v;const x=c[c.length-1],b=Q(d.x,d.y,x.way,x.value-g);let w=null;return e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap&&(w=W(b.x,b.y,d.x,d.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)),w?(f+=` L ${w.entryPoint.x} ${w.entryPoint.y}`,w.prolongLine&&(f+=` L ${b.x} ${b.y}`),s.push(w)):f+=` L ${b.x} ${b.y}`,{path:f,caps:s}}function q(e){if(e.shapeProps.points.length<2)return"";let t="";const i=[],r=[],s=[],a=[],l=[],c=[];(0,n.jJ)(e.shapeProps.points,((t,n)=>{if(n<e.shapeProps.points.length-1){const o=e.shapeProps.points[n+1];i[n]={x:o.x-t.x,y:o.y-t.y};const h=i[n].x*i[n].x+i[n].y*i[n].y;if(h>.001){const e=Math.sqrt(h);r[n]={x:i[n].x/e,y:i[n].y/e}}else r[n]=i[n];s[n]={x:r[n].y*e.shapeProps.thickWidth,y:-r[n].x*e.shapeProps.thickWidth},a[n]={x:-s[n].x,y:-s[n].y},l[n]={x:t.x+s[n].x,y:t.y+s[n].y},c[n]={x:t.x+a[n].x,y:t.y+a[n].y}}}));const h=[];let d=!1,u=!1;(0,n.jJ)(e.shapeProps.points,((n,a)=>{if(0!==a){if(a>0&&a<e.shapeProps.points.length-1)if(h[a]=o.A.angleBetweenVectors(i[a].x,i[a].y,-i[a-1].x,-i[a-1].y),h[a]<0){const e=o.A.linesIntersection(o.A.createLineEquation(l[a-1].x,l[a-1].y,l[a-1].x+i[a-1].x,l[a-1].y+i[a-1].y),o.A.createLineEquation(l[a].x,l[a].y,l[a].x+i[a].x,l[a].y+i[a].y));e&&h[a]<-.1?t+=` L ${e.x} ${e.y}`:t+=` L ${l[a].x} ${l[a].y}`}else t+=` L ${n.x+s[a-1].x} ${n.y+s[a-1].y}  L ${n.x+s[a].x} ${n.y+s[a].y}`;if(a===e.shapeProps.points.length-1&&a>0){const o=i[a-1].x*i[a-1].x+i[a-1].y*i[a-1].y,l=3*e.shapeProps.thickWidth;if("triangle"===e.shapeProps.destinationCap&&Math.sqrt(o)>l){d=!0;const e=n.x-r[a-1].x*l,i=n.y-r[a-1].y*l;t+=` L ${e+s[a-1].x} ${i+s[a-1].y} L ${e+2*s[a-1].x} ${i+2*s[a-1].y} L ${n.x} ${n.y}`}else t+=` L ${n.x+s[a-1].x} ${n.y+s[a-1].y}`}}else{const o=i[0].x*i[0].x+i[0].y*i[0].y,c=3*e.shapeProps.thickWidth;if("triangle"===e.shapeProps.sourceCap&&Math.sqrt(o)>c){u=!0;const i=n.x+r[0].x*e.shapeProps.thickWidth*3,o=n.y+r[0].y*e.shapeProps.thickWidth*3;t+=` M ${O(n.x)} ${O(n.y)}  L ${i+2*s[0].x} ${o+2*s[0].y} L ${i+s[0].x} ${o+s[0].y}`}else t=`M ${O(l[a].x)} ${O(l[a].y)}`}}));for(let n=e.shapeProps.points.length-1;n>=0;n--){const s=e.shapeProps.points[n];if(n===e.shapeProps.points.length-1)if(d){const i=s.x-r[n-1].x*e.shapeProps.thickWidth*3,o=s.y-r[n-1].y*e.shapeProps.thickWidth*3;t+=` L ${i+2*a[n-1].x} ${o+2*a[n-1].y} L ${i+a[n-1].x} ${o+a[n-1].y}`}else t+=` L ${s.x+a[n-1].x} ${s.y+a[n-1].y}`;else if(n>0)if(h[n]>0){const e=o.A.linesIntersection(o.A.createLineEquation(c[n-1].x,c[n-1].y,c[n-1].x+i[n-1].x,c[n-1].y+i[n-1].y),o.A.createLineEquation(c[n].x,c[n].y,c[n].x+i[n].x,c[n].y+i[n].y));e&&h[n]>.1?t+=` L ${e.x} ${e.y}`:t+=` L ${c[n].x} ${c[n].y}`}else t+=` L ${s.x+a[n].x} ${s.y+a[n].y} L ${s.x+a[n-1].x} ${s.y+a[n-1].y}`;else if(0===n)if(u){const i=s.x+r[0].x*e.shapeProps.thickWidth*3,n=s.y+r[0].y*e.shapeProps.thickWidth*3;t+=` L ${i+a[0].x} ${n+a[0].y} L ${i+2*a[0].x} ${n+2*a[0].y} Z`}else t+=`L ${s.x+a[n].x} ${s.y+a[n].y} z`}return t}function H(e){return e.shapeProps.points.length<2?null:e.shapeProps.thick?{path:q(e),caps:[]}:"smooth"===e.shapeProps.smoothing?function(e){const t=p.A.clone(e.shapeProps.points);if(t.length<2)return{path:null,caps:[]};let i="";const r=[];let s=null,a=null,l=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){let i=t[1].x,n=t[1].y;void 0!==t[0].nx&&(i=t[0].x+t[0].nx*e.shapeProps.sourceCapSize,n=t[0].y+t[0].ny*e.shapeProps.sourceCapSize),s=W(t[0].x,t[0].y,i,n,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap),s&&(t[0].x=s.entryPoint.x,t[0].y=s.entryPoint.y,r.push(s))}if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const i=t.length-1;let n=t[i-1].x,s=t[i-1].y;void 0!==t[i].nx&&(n=t[i].x+t[i].nx*e.shapeProps.destinationCapSize,s=t[i].y+t[i].ny*e.shapeProps.destinationCapSize),a=W(t[i].x,t[i].y,n,s,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap,e.shapeProps.fill),a&&(t[i].x=a.entryPoint.x,t[i].y=a.entryPoint.y,r.push(a))}if(2===t.length&&e.shapeProps.sourceItem&&e.shapeProps.destinationItem&&void 0!==t[0].nx&&void 0!==t[1].nx){const i=t[0],n=t[1],l=o.A.distanceBetweenPoints(i.x,i.y,n.x,n.y);let c=l/3;const h=o.A.vectorLength(i.nx+n.nx,i.ny+n.ny),d=o.A.distanceBetweenPoints(i.x+i.nx,i.y+i.ny,n.x+n.nx,n.y+n.ny);if(h<.2&&d<l){const e=o.A.rotateVector90Clockwise(i.nx,i.ny),t=o.A.createLineEquation(i.x,i.y,i.x+e.x,i.y+e.y);c=o.A.distanceFromPointToLine(n.x,n.y,t)/1.5}let u="";if(u=s&&s.prolongLine?`M ${i.x} ${O(i.y)} L ${O(i.x)} ${O(i.y)} `:`M ${O(i.x)} ${O(i.y)} `,u+=`C ${O(i.x+c*i.nx)} ${O(i.y+c*i.ny)} ${O(n.x+c*n.nx)}  ${O(n.y+c*n.ny)} ${O(n.x)} ${O(n.y)} `,a&&a.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];u+=`L ${O(t.x)} ${O(t.y)}`}return{path:u,caps:r}}const c=[];if((0,n.jJ)(t,((e,i)=>{let n=e;i>0&&(n=t[i-1]);let r=e;i<t.length-1&&(r=t[i+1]);let s=r.x-n.x,o=r.y-n.y;const a=Math.sqrt(s*s+o*o);a>1e-5&&(s/=a,o/=a),c[i]={x:s,y:o}})),(0,n.jJ)(t,((n,r)=>{if(0===r)i=s&&s.prolongLine?`M ${O(e.shapeProps.points[0].x)} ${O(e.shapeProps.points[0].y)} L ${O(n.x)} ${O(n.y)} `:`M ${O(n.x)} ${O(n.y)} `;else if(1===r&&e.shapeProps.sourceItem&&void 0!==l.nx){const e=o.A.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let s=0,a=0;r<t.length-1&&(s=c[r].x,a=c[r].y),i+=` C ${O(l.x+e*l.nx)} ${O(l.y+e*l.ny)} ${O(n.x-e*s)} ${O(n.y-e*a)} ${O(n.x)} ${O(n.y)}`}else if(r===t.length-1&&e.shapeProps.destinationItem&&void 0!==n.nx){const e=o.A.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let t=0,s=0;r>1&&(t=c[r-1].x,s=c[r-1].y),i+=` C ${O(l.x+e*t)} ${O(l.y+e*s)}  ${O(n.x+e*n.nx)} ${O(n.y+e*n.ny)} ${O(n.x)} ${O(n.y)}`}else{const e=o.A.distanceBetweenPoints(l.x,l.y,n.x,n.y)/3.5;let t=c[r-1].x,s=c[r-1].y,a=c[r].x,h=c[r].y;i+=` C ${O(l.x+e*t)} ${O(l.y+e*s)}  ${O(n.x-e*a)} ${O(n.y-e*h)} ${O(n.x)} ${O(n.y)}`}l=n})),a&&a.prolongLine){const t=e.shapeProps.points[e.shapeProps.points.length-1];i+=`L ${t.x} ${t.y}`}return{path:i,caps:r}}(e):"step"===e.shapeProps.smoothing?U(e,!1,!1):"step-cut"===e.shapeProps.smoothing?U(e,!0,!1):"step-smooth"===e.shapeProps.smoothing?U(e,!0,!0):function(e){let t="";const i=[];return(0,n.jJ)(e.shapeProps.points,((n,r)=>{if(0===r){let r=null;if(e.shapeProps.sourceCap&&"empty"!==e.shapeProps.sourceCap){const t=e.shapeProps.points[1];r=W(n.x,n.y,t.x,t.y,e.shapeProps.sourceCapSize,e.shapeProps.sourceCap)}r?(t=r.prolongLine?`M ${n.x} ${n.y} L ${r.entryPoint.x} ${r.entryPoint.y} `:`M ${r.entryPoint.x} ${r.entryPoint.y} `,i.push(r)):t=`M ${n.x} ${n.y} `}else if(r===e.shapeProps.points.length-1){let s=null;if(e.shapeProps.destinationCap&&"empty"!==e.shapeProps.destinationCap){const t=e.shapeProps.points[r-1];s=W(n.x,n.y,t.x,t.y,e.shapeProps.destinationCapSize,e.shapeProps.destinationCap)}s?(t+=`L ${s.entryPoint.x} ${s.entryPoint.y} `,s.prolongLine&&(t+=`L ${n.x} ${n.y} `),i.push(s)):t+=`L ${n.x} ${n.y} `}else t+=` L ${n.x} ${n.y} `})),{path:t,caps:i}}(e)}function V(e){const t=H(e);return t?t.path:null}function W(e,t,i,n,r,s){if("empty"!==s){const o=i-e,a=n-t,l=o*o+a*a;if(l>1e-4){const i=Math.sqrt(l);return function(e,t,i,n,r){const s=c[r];if(s){const r=s.renderFunc(e,t,i,n);return s.hollow&&(r.hollow=!0),r}return null}(e,t,o*r/i,a*r/i,s)}}return null}function X(e,t){if(e.hasOwnProperty("nx")&&e.hasOwnProperty("ny")&&t){const i=t.x-e.x,n=t.y-e.y;180*o.A.cosineAngleBetweenVectors(e.nx,e.ny,i,n)/Math.PI>90&&(e.nx=-e.nx,e.ny=-e.ny)}}const G=[{t:"L",x:4,y:88},{t:"L",x:136,y:4}],Y="Connections",Z={props:["item","editorId"],components:{AdvancedFill:f.Ay},shapeConfig:{shapeType:"vue",id:"connector",computePath:V,readjustItem:function(e,t,i,r,s){return w.info("readjustItem",e.id,e.name,{item:e,isSoft:i,context:r},s),i||function(e,t){if(w.info("readjustItemArea",e.id,e.name,{item:e},t),e.shapeProps.points.length<1)return;const i=[];(0,n.jJ)(e.shapeProps.points,(t=>{i.push((0,g.xS)(t.x,t.y,e))}));let r=i[0].x,s=i[0].y,a=i[0].x,l=i[0].y;(0,n.jJ)(i,(e=>{r=Math.min(r,e.x),s=Math.min(s,e.y),a=Math.max(a,e.x),l=Math.max(l,e.y)}));const c=[];(0,n.jJ)(i,((t,i)=>{const n=e.shapeProps.points[i];c.push(x(x({},n),{},{x:t.x-r,y:t.y-s}))})),e.shapeProps.points=c,e.area.r=0,e.area.w=Math.max(0,a-r),e.area.h=Math.max(0,l-s);const h=o.A.findTranslationMatchingWorldPoint(r,s,0,0,e.area,e.meta.transformMatrix);e.area.x=h.x,e.area.y=h.y}(e,s),e.shapeProps.sourceItem&&e.shapeProps.points.length>1&&X(e.shapeProps.points[0],e.shapeProps.points[1]),e.shapeProps.destinationItem&&e.shapeProps.points.length>1&&X(e.shapeProps.points[e.shapeProps.points.length-1],e.shapeProps.points[e.shapeProps.points.length-2]),!0},getSnappers:function(e){const t=[];return(0,n.jJ)(e.shapeProps.points,(i=>{const n=(0,g.xS)(i.x,i.y,e);t.push({item:e,snapperType:"horizontal",value:n.y}),t.push({item:e,snapperType:"vertical",value:n.x})})),t},scriptFunctions:function(e,t,i){const n=(e,t)=>{if(e<0||e>=i.shapeProps.points.length)throw new Error(`Invalid point index: ${e}`);return t(i.shapeProps.points[e])},r=e=>{const t=V(i);i.meta.scriptCache||(i.meta.scriptCache=new Map);const n=i.meta.scriptCache.get("svgPath");if(n&&n.encodedPath===t)return e(n.svgElement);const r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),i.meta.scriptCache.set("svgPath",{encodedPath:t,svgElement:r}),e(r)},s=()=>{t.readjustItemAndDescendants(i.id,!0),m.A.item.changed.specific.$emit(e,i.id)};return{totalPoints:()=>i.shapeProps.points.length,getPointWorldPos:e=>n(e,(e=>y.M.fromPoint((0,g.xS)(e.x,e.y,i)))),setPointWorldPos:(e,t,r)=>n(e,(n=>{0===e?i.shapeProps.sourceItem=null:e===i.shapeProps.points.length-1&&(i.shapeProps.destinationItem=null);const o=(0,g.Qb)(t,r,i);n.x=o.x,n.y=o.y,s()})),addWorldPoint(e,t){i.shapeProps.destinationItem=null;const n=(0,g.Qb)(e,t,i);return i.shapeProps.points.push({x:n.x,y:n.y}),s(),i.shapeProps.points.length-1},removePoint(e){e<0||e>=i.shapeProps.points.length||(i.shapeProps.points.splice(e,1),s())},getLength:()=>r((e=>e.getTotalLength())),getWorldPosAtLength:e=>r((t=>{const n=t.getPointAtLength(e);return y.M.fromPoint((0,g.xS)(n.x,n.y,i))}))}},menuItems:[{group:Y,name:"Empty Connector",iconUrl:"/assets/images/items/connector-empty.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",points:G}}},{group:Y,name:"Step Connector",iconUrl:"/assets/images/items/connector-step.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:Y,name:"Step Connector",iconUrl:"/assets/images/items/connector-step-smooth.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"empty",smoothing:"step-smooth",points:[{x:4,y:88},{x:70,y:51},{x:136,y:4}]}}},{group:Y,name:"Triangle Connector",iconUrl:"/assets/images/items/connector-triangle.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"triangle",points:G}}},{group:Y,name:"Triangle Connector",iconUrl:"/assets/images/items/connector-triangle-white.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"triangle-h",points:G}}},{group:Y,name:"Arrow Connector",iconUrl:"/assets/images/items/connector-arrow.svg",item:{shapeProps:{thick:!1,sourceCap:"empty",destinationCap:"arrow",points:G}}},{group:Y,name:"Triangle Connector (Both Sides)",iconUrl:"/assets/images/items/connector-triangle-both.svg",item:{shapeProps:{thick:!1,sourceCap:"triangle",destinationCap:"triangle",points:G}}},{group:Y,name:"Triangle Connector (Both Sides)",iconUrl:"/assets/images/items/connector-triangle-white-both.svg",item:{shapeProps:{thick:!1,sourceCap:"triangle-h",destinationCap:"triangle-h",points:G}}},{group:Y,name:"Arrow Connector (Both Sides)",iconUrl:"/assets/images/items/connector-arrow-both.svg",item:{shapeProps:{thick:!1,sourceCap:"arrow",destinationCap:"arrow",points:G}}},{group:Y,name:"Thick Connector",iconUrl:"/assets/images/items/connector-arrow-thick.svg",item:{shapeProps:{sourceCap:"empty",destinationCap:"triangle",points:G,thick:!0,thickWidth:10}}},{group:Y,name:"Thick Connector (Both Arrows)",iconUrl:"/assets/images/items/connector-arrow-thick-both.svg",item:{shapeProps:{sourceCap:"triangle",destinationCap:"triangle",points:G,thick:!0,thickWidth:10}}}],getTextSlots:()=>[],getPins(e){const t={};return(0,n.jJ)(e.shapeProps.points,(e=>{t[e.id]={x:e.x,y:e.y}})),t},editorProps:{description:"rich"},args:{strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},points:{type:"path-points",value:[],name:"Path points",hidden:!0},sourceCap:{type:"path-cap",value:"empty",name:"Source Cap"},sourceCapSize:{type:"number",value:20,name:"Source Cap Size"},destinationCap:{type:"path-cap",value:"empty",name:"Destination Cap"},destinationCapSize:{type:"number",value:20,name:"Destination Cap Size"},smoothing:{type:"choice",value:"smooth",options:["linear","smooth","step","step-cut","step-smooth"],name:"Smoothing Type"},stepSize:{type:"number",value:10,name:"Step size",depends:{smoothing:["step-cut","step-smooth"]}},thick:{type:"boolean",value:!1,name:"Thick"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1.0)"},name:"Fill",depends:{thick:!0}},thickWidth:{type:"number",value:10,name:"Thick Width",min:1,max:1e3,depends:{thick:!0}},autoAttach:{type:"boolean",value:!0,name:"Attach automatically",description:"Let connector attach to other items. Disable this property if you don't want your connector to stick to other items"},sourceItem:{type:"element",value:null,name:"Source Item",description:"Attach this curve to an item as a source",hidden:!0},destinationItem:{type:"element",value:null,name:"Destination Item",description:"Attach this curve to an item as a destination",hidden:!0},sourceItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0},destinationItemPosition:{type:"number",value:0,name:"Position On Source Item",description:"Distance on the path of the item where this curve should be attached to",hidden:!0},sourcePin:{type:"string",value:"",name:"Source Item Pin",description:"If non-empty it means that the connector is attached to a specific pin",hidden:!0},destinationPin:{type:"string",value:"",name:"Destination Item Pin",description:"If non-empty it means that the connector is attached to a specific pin",hidden:!0}}},mounted(){m.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChange)},beforeDestroy(){m.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChange)},data(){const e=H(this.item);return{shapePath:e?e.path:null,caps:e?e.caps:null}},methods:{onItemChange(){if(w.info("onItemChange",this.item.id,this.item.name,this.item),"connector"!==this.item.shape)return;const e=H(this.item);e&&(this.shapePath=e.path,this.caps=e.caps),w.info("computed path and caps",this.item.id,this.item.name,this.shapePath,this.caps),this.$forceUpdate()}},computed:{strokeDashArray(){return r.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},svgFill(){return this.item.shapeProps.thick?(0,f.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`):"none"}}},K=(0,i(4486).A)(Z,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.svgFill}}),e._v(" "),e.item.shapeProps.thick?e._e():t("g",e._l(e.caps,(function(i){return t("path",{attrs:{d:i.path,"data-item-id":e.item.id,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize,fill:i.hollow?"none":e.item.shapeProps.strokeColor,"stroke-linejoin":"round"}})})),0)],1)}),[],!1,null,null,null).exports},4232:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(4286),r=i(3627);const s={props:["item"],shapeConfig:{shapeType:"vue",id:"dummy",menuItems:[{group:"General",name:"Dummy",ignoreRecentProps:!0,iconUrl:"/assets/images/items/dummy.svg",description:"\n                Dummy item can be used in order to group mulitple items together.\n                It is only visible in the edit mode and completely transparent in view mode.\n            ",item:{name:"Dummy",shapeProps:{}},previewArea:{x:3,y:30,w:150,h:120}},{group:"General",name:"Screen bounds",ignoreRecentProps:!0,iconUrl:"/assets/images/items/screen-bounds.svg",description:"\n                Specifies the bounds of the screen. Users will not be able to scroll outside of it in view mode.\n                If the document is loaded inside of a component it will also work as view box and limit the rendering of the component items to the view box area.\n            ",item:{name:"Bounds",shapeProps:{screenBounds:!0,strokeColor:"#E8821B87",strokePattern:"dotted"}},previewArea:{x:3,y:30,w:150,h:120}}],getTextSlots:e=>[],computePath:r.Po,computeOutline:r.gE,editorProps:{onlyEditMode:!0},args:{strokeColor:{name:"Stroke",type:"color",value:"rgba(50, 175, 209, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:2},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},showName:{type:"boolean",value:!0,name:"Display Name"},screenBounds:{type:"boolean",value:!1,name:"Screen bounds",description:"If set to true, this item specifies the bounds of the screen. Users will not be able to scroll outside of it in view mode.If the document is loaded inside of a component it will also work as view box and limit the rendering of the component items to the view box area."}}},computed:{shapePath(){return(0,r.Po)(this.item)},screenBoundsPath(){const e=this.item.area.w,t=this.item.area.h,i=Math.min(e,t)/6;return`M 0 ${i} l 0 ${-i} l ${i} 0 M ${e-i} 0 l ${i} 0 l 0 ${i}M ${e} ${t-i} l 0 ${i} l ${-i} 0M ${i} ${t} l ${-i} 0 l 0 ${-i}`},strokeDashArray(){return n.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},boundsCorrection(){return this.item.shapeProps.screenBounds?this.item.shapeProps.strokeSize+1:0}}},o=(0,i(4486).A)(s,(function(){var e=this,t=e._self._c;return t("g",{attrs:{"data-preview-ignore":"true"}},[e.item.shapeProps.showName?t("foreignObject",{attrs:{x:0,y:-20-e.boundsCorrection,width:e.item.area.w,height:20}},[t("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"nowrap"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]):e._e(),e._v(" "),t("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,"data-item-id":e.item.id,fill:"none"}}),e._v(" "),e.item.shapeProps.screenBounds?t("path",{attrs:{d:e.screenBoundsPath,"stroke-width":2*e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:"none","data-item-id":e.item.id}}):e._e()])}),[],!1,null,null,null).exports},773:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(269),r=i(8176);function s(e){const t=e.shapeProps.sections.length>0?5:1,i=e.area.w/2-(t/2*20+4*(t-1)/2),n=e.shapeProps.sections.length>0?60:30,r=Math.max(0,e.area.h-n),s=(e,t,n,s)=>({id:t,icon:n,iconPlaying:s,path:`M ${i+24*e} ${r+10} a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0 z`,x:i+24*e,y:r,size:20});return e.shapeProps.sections.length>0?[s(0,"fast-backward","fas fa-fast-backward","fas fa-fast-backward"),s(1,"step-backward","fas fa-step-backward","fas fa-step-backward"),s(2,"play-stop","fas fa-play","fas fa-pause"),s(3,"step-forward","fas fa-step-forward","fas fa-step-forward"),s(4,"fast-forward","fas fa-fast-forward","fas fa-fast-forward")]:[s(0,"play-stop","fas fa-play","fas fa-pause")]}const o={props:["item","editorId"],shapeConfig:{shapeType:"vue",id:"frame_player",menuItems:[{group:"General",name:"Frame Player",iconUrl:"/assets/images/items/frame-player.svg",size:{w:140,h:100},item:{textSlots:{title:{text:"<b>Frame Player</b>",color:"#000000",fontSize:14}}}}],getPins:e=>({}),getTextSlots(e){const t=e.shapeProps.sections.length>0?60:30;return[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.area.h-t)}}]},computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${i}  L 0 ${i} z`},onMouseMove(e,t,i){r.A.item.custom.$emit("mouse-move",e,t.id,i)},onMouseOut(e,t){r.A.item.custom.$emit("mouse-out",e,t.id)},onMouseDown(e,t,i){r.A.item.custom.$emit("mouse-down",e,t.id,i)},computeCustomAreas:e=>s(e).map((e=>({id:e.id,cursor:"pointer",path:e.path}))),args:{totalFrames:{type:"number",value:5,name:"Total frames"},fps:{type:"number",value:1,name:"Frames per second"},fillColor:{type:"color",value:"rgba(220, 220, 220, 1.0)",name:"Fill color"},hoverFillColor:{type:"color",value:"rgba(190, 190, 190, 1.0)",name:"Hover fill color"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},animations:{type:"animations",value:[],name:"Animations",hidden:!0},functions:{type:"animation-functions",value:{},name:"Animation Functions",hidden:!0},sections:{type:"animation-sections",value:[],name:"Sections",hidden:!0}}},beforeMount(){r.A.framePlayer.prepared.$emit(this.editorId,this.item,this.createFrameCallbacks()),r.A.item.custom.$on("mouse-move",this.editorId,this.item.id,this.onMouseMove),r.A.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onMouseDown),r.A.item.custom.$on("mouse-out",this.editorId,this.item.id,this.onMouseOut)},beforeDestroy(){r.A.item.custom.$off("mouse-move",this.editorId,this.item.id,this.onMouseMove),r.A.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onMouseDown),r.A.item.custom.$off("mouse-out",this.editorId,this.item.id,this.onMouseOut)},data(){const e=[],t=new Map,i=new Map;this.item.shapeProps.sections.sort(((e,t)=>e.frame-t.frame)),(0,n.jJ)(this.item.shapeProps.sections,((e,n)=>{const r={number:n+1,name:e.value,frame:e.frame};t.set(e.frame,r),i.set(r.number,r)}));let r=null,o=null;for(let i=0;i<this.item.shapeProps.totalFrames;i++){const n=i+1;t.has(n)&&(o=t.get(n),r||(r=o)),e[i]=o}return{currentFrame:1,isPlaying:!1,intervalId:null,buttonFontSize:"10px",sectionsMapping:e,sectionsByNumber:i,currentSection:r,totalSections:this.item.shapeProps.sections.length,hoveredButtonId:null,buttons:s(this.item),buttonSize:20}},methods:{onMouseMove(e){this.hoveredButtonId=e},onMouseOut(){this.hoveredButtonId=null},onMouseDown(e){"fast-backward"===e?this.onClickedToBegin():"step-backward"===e?this.onClickedLeft():"play-stop"===e?this.onClickedTogglePlay():"step-forward"===e?this.onClickPlayToNext():"fast-forward"===e&&this.onClickFastRight()},onClickedToBegin(){const e=this.sectionsByNumber.get(1);e&&(this.currentFrame=1,this.currentSection=e,this.emitCurrentFrameEvent())},onClickFastRight(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number+1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},onClickedLeft(){if(this.currentSection){const e=this.sectionsByNumber.get(this.currentSection.number-1);if(e){const t=e.frame;t>=0&&(this.currentFrame=t,this.currentSection=e,this.emitCurrentFrameEvent())}}},createFrameCallbacks(){return{onFrame:e=>{this.currentFrame=e,e<=this.sectionsMapping.length&&e>0&&(this.currentSection=this.sectionsMapping[e-1])},onFinish:()=>{this.isPlaying=!1}}},onClickPlayToNext(){if(this.currentSection){let e=-1;const t=this.sectionsByNumber.get(this.currentSection.number+1);if(t){const i=t.frame;i<=this.item.shapeProps.totalFrames&&(e=i)}this.$emit("frame-animator",{operation:"play",item:this.item,frame:this.currentFrame,stopFrame:e,callbacks:this.createFrameCallbacks()})}},onClickedTogglePlay(){if(this.isPlaying)this.$emit("frame-animator",{operation:"stop",item:this.item});else{this.isPlaying=!0;let e=this.currentFrame;this.currentFrame>=this.item.shapeProps.totalFrames&&(e=1),this.$emit("frame-animator",{operation:"play",item:this.item,frame:e,callbacks:this.createFrameCallbacks()})}},emitCurrentFrameEvent(){this.$emit("frame-animator",{operation:"setFrame",item:this.item,frame:this.currentFrame})}},computed:{framesTextStyle(){return{color:this.item.textSlots.title.color,"font-size":`${this.item.textSlots.title.fontSize}px`,"text-align":"center"}},topOffset(){return Math.max(0,this.item.area.h-60)},shoulShowCurrentSectionName(){return!!this.currentSection&&""+this.currentSection.number!==this.currentSection.name}}},a=(0,i(4486).A)(o,(function(){var e=this,t=e._self._c;return t("g",[e._l(e.buttons,(function(i){return t("g",[t("path",{staticStyle:{"-webkit-transition":"fill 200ms linear","-ms-transition":"fill 200ms linear",transition:"fill 200ms linear"},attrs:{d:i.path,fill:e.hoveredButtonId===i.id?e.item.shapeProps.hoverFillColor:e.item.shapeProps.fillColor,stroke:e.item.shapeProps.strokeColor,"stroke-width":"1"}}),e._v(" "),t("foreignObject",{attrs:{x:i.x,y:i.y,width:i.size,height:i.size}},[t("div",{staticStyle:{display:"flex","align-items":"center",height:"100%","text-align":"center","vertical-align":"middle"},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("i",{class:[e.isPlaying?i.iconPlaying:i.icon],style:{display:"inline-block",width:"100%","text-align":"center","font-size":e.buttonFontSize,color:e.item.shapeProps.strokeColor}})])])])})),e._v(" "),e.currentSection?t("foreignObject",{attrs:{x:"0",y:e.buttonSize+6+e.topOffset,width:e.item.area.w,height:"60",xmlns:"http://www.w3.org/1999/xhtml"}},[t("div",{style:e.framesTextStyle},[t("div",[e._v(e._s(e.currentSection.number)+" / "+e._s(e.totalSections))]),e._v(" "),e.shoulShowCurrentSectionName?t("div",[e._v(e._s(e.currentSection.name))]):e._e()])]):e._e()],2)}),[],!1,null,null,null).exports},6295:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(4912),r=i(7550);function s(e,t){const i=e/t;return Array.from(Array(t-1).keys()).map((e=>i*(e+1)))}const o={props:["item","editorId"],components:{AdvancedFill:r.Ay},shapeConfig:{id:"grid",shapeType:"vue",menuItems:[{group:"Tables",name:"Grid",iconUrl:"/assets/images/items/grid.svg",item:{shapeProps:{}}}],computePath:e=>(0,n.WS)(e.area.w,e.area.h),args:{gridCols:{type:"number",value:10,min:1,name:"Columns"},gridRows:{type:"number",value:10,min:1,name:"Rows"},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255, 255, 255, 1.0)"},name:"Fill"},edges:{type:"boolean",value:!0,name:"Edges"},strokeColor:{type:"color",value:"rgba(230, 230, 230, 1.0)",name:"Stroke"},strokeSize:{type:"number",value:1,name:"Stroke size"}}},data(){return{xLines:s(this.item.area.w,Math.max(1,this.item.shapeProps.gridCols)),yLines:s(this.item.area.h,Math.max(1,this.item.shapeProps.gridRows))}},computed:{svgFill(){return(0,r.oy)(this.item)},edgeStroke(){return this.item.shapeProps.edges?this.item.shapeProps.strokeColor:"none"}}},a=(0,i(4486).A)(o,(function(){var e=this,t=e._self._c;return t("g",[t("AdvancedFill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("rect",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h,stroke:e.edgeStroke,"stroke-width":e.item.shapeProps.strokeSize,fill:e.svgFill}}),e._v(" "),e._l(e.xLines,(function(i){return t("line",{attrs:{x1:i,y1:"0",x2:i,y2:e.item.area.h,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize}})})),e._v(" "),e._l(e.yLines,(function(i){return t("line",{attrs:{x1:"0",y1:i,x2:e.item.area.w,y2:i,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize}})}))],2)}),[],!1,null,null,null).exports},128:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});var n=i(4286),r=i(3627);const s={props:["item"],shapeConfig:{shapeType:"vue",components:{},id:"hud",menuItems:[{group:"General",name:"HUD",iconUrl:"/assets/images/items/hud.svg",description:"\n                HUD stands for Heads Up Display.\n                When going into view mode, HUD item will always be rendered in the viewport.\n                This lets you design your own menu on top of the scene, which will always stay in the same spot"}],getTextSlots:e=>[],computePath:r.Po,computeOutline:r.gE,editorProps:{onlyEditMode:!0},args:{strokeColor:{name:"Stroke",type:"color",value:"#32D143"},strokeSize:{name:"Stroke Size",type:"number",value:2},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},horizontalPosition:{type:"choice",value:"left",options:["left","right","center"],name:"Horizontal Position"},verticalPosition:{type:"choice",value:"top",options:["top","bottom","center"],name:"Vertical Position"}}},computed:{shapePath(){return(0,r.Po)(this.item)},strokeDashArray(){return n.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)}}},o=(0,i(4486).A)(s,(function(){var e=this,t=e._self._c;return t("g",{attrs:{"data-preview-ignore":"true"}},[t("foreignObject",{attrs:{x:0,y:-20,width:e.item.area.w,height:20}},[t("div",{staticStyle:{"font-size":"12px","font-weight":"bold",display:"table-cell",padding:"2px 5px",height:"20px","font-family":"Arial, Helvetica, sans-serif","text-align":"left","vertical-align":"bottom","white-space":"normal"},style:{background:e.item.shapeProps.strokeColor,color:"white"},attrs:{"data-item-id":e.item.id}},[e._v("\n            "+e._s(e.item.name)+"\n        ")])]),e._v(" "),t("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:"none"}})])}),[],!1,null,null,null).exports},1003:(e,t,i)=>{"use strict";i.d(t,{A:()=>a});var n=i(4912),r=i(7550);const s=e=>{const t=e.area.w,i=e.area.h;return`M 0 0  L ${t} 0  L ${t} ${i} L 0 ${i} Z`},o={props:["item"],components:{AdvancedFill:r.Ay},shapeConfig:{shapeType:"vue",id:"image",menuItems:[{group:"General",name:"Image",imageProperty:"shapeProps.image",iconUrl:"/assets/images/items/image.svg",description:"It lets you upload an image or specify a link to external image",item:{shapeProps:{image:""}}}],getPins:e=>(0,n.aO)(e),computePath:s,getTextSlots:e=>[{name:"title",area:{x:0,y:0,w:e.area.w,h:Math.max(0,e.shapeProps.titleHeight)}}],editorProps:{},args:{image:{type:"image",name:"Image"},stretch:{type:"boolean",value:!1,name:"Stretch"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:0,name:"Stroke size"},showTitle:{type:"boolean",value:!1,name:"Title"},crop:{type:"crop-area",value:{x:0,y:0,w:0,h:0},name:"Crop",hidden:!0},titleHeight:{type:"number",value:36,name:"Title height",min:0,depends:{showTitle:!0}},titleFill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Title Background",depends:{showTitle:!0}},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240,240,240,1.0)"},name:"Background",depends:{showTitle:!0}}}},computed:{shapePath(){return s(this.item)},svgTitleFill(){return(0,r.fD)(this.item.shapeProps.titleFill,`titlefill-pattern-${this.item.id}`)},svgFill(){return(0,r.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},imagePreserveAspectRatio(){return this.item.shapeProps.stretch?"none":"xMidYMid meet"},titleArea(){return{x:0,y:0,w:this.item.area.w,h:this.item.shapeProps.titleHeight}},imageX:()=>0,imageY(){return this.item.shapeProps.showTitle?this.item.shapeProps.titleHeight:0},imageWidth(){return this.item.area.w},imageHeight(){return this.item.shapeProps.showTitle?Math.max(0,this.item.area.h-this.item.shapeProps.titleHeight):this.item.area.h},imagePath(){return this.item.shapeProps.image?this.item.shapeProps.image:this.$store.getters.assetsPath+"/images/missing-scheme-preview.png"}}},a=(0,i(4486).A)(o,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.titleArea}}),e._v(" "),t("advanced-fill",{attrs:{fillId:`titlefill-pattern-${e.item.id}`,fill:e.item.shapeProps.titleFill,area:e.item.area}}),e._v(" "),e.item.shapeProps.showTitle?t("rect",{attrs:{x:0,y:0,width:e.item.area.w,height:e.item.shapeProps.titleHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgTitleFill}}):e._e(),e._v(" "),e.item.shapeProps.showTitle?t("rect",{attrs:{x:e.imageX,y:e.imageY,width:e.imageWidth,height:e.imageHeight,"stroke-width":0,stroke:"none",fill:e.svgFill}}):e._e(),e._v(" "),t("g",{attrs:{transform:`translate(0 ${e.imageY})`}},[t("clipPath",{attrs:{id:`image-crop-clip-path-${e.item.id}`}},[t("path",{attrs:{d:`M 0 0  L ${e.item.area.w} 0   L ${e.item.area.w} ${e.item.area.h}  L 0 ${e.item.area.h} Z`,"data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}})]),e._v(" "),t("pattern",{attrs:{id:`image-fill-${e.item.id}`,patternUnits:"userSpaceOnUse",width:e.imageWidth,height:e.imageHeight}},[t("image",{attrs:{"xlink:href":e.imagePath,x:-e.item.shapeProps.crop.x*e.imageWidth,y:-e.item.shapeProps.crop.y*e.imageHeight,width:e.imageWidth*(1+e.item.shapeProps.crop.x+e.item.shapeProps.crop.w),height:e.imageHeight*(1+e.item.shapeProps.crop.y+e.item.shapeProps.crop.h),preserveAspectRatio:e.imagePreserveAspectRatio}})]),e._v(" "),t("g",{style:{"clip-path":`url(#image-crop-clip-path-${e.item.id})`}},[t("rect",{attrs:{x:0,y:0,width:e.imageWidth,height:e.imageHeight,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:`url(#image-fill-${e.item.id})`}})])])],1)}),[],!1,null,null,null).exports},6849:(e,t,i)=>{"use strict";i.d(t,{A:()=>c});var n=i(269),r=i(7562),s=i(6935),o=i(5999),a=i(8176);const l={props:["item","editorId"],shapeConfig:{shapeType:"vue",id:"link",menuItems:[{group:"General",name:"Link",iconUrl:"/assets/images/items/link.svg",item:{textSlots:{link:{text:"Link",fontSize:16,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,color:"#047EFB",halign:"left",valign:"top"}},cursor:"pointer"}}],computePath(e){const t=e.area.w,i=e.area.h;return`M 0 0   L ${t} 0  L ${t} ${i}  L 0 ${i} z`},editorProps:{customTextRendering:!0},getTextSlots:e=>[{name:"link",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],onMouseDown(e,t){a.A.item.custom.$emit("mouse-down",e,t.id)},args:{url:{type:"string",value:"",name:"URL"},otherTab:{type:"boolean",value:!0,name:"In Other Tab",description:"Open the link in another tab"},underline:{type:"boolean",value:!0,name:"Underline"},showIcon:{type:"boolean",value:!0,name:"Show Icon"},icon:{type:"choice",value:"default",name:"Icon",options:(0,n.kH)(r.A.knownTypes,(e=>e.name))},iconColor:{type:"color",value:"#666666",name:"Color",depends:{showIcon:!0}}}},beforeMount(){a.A.item.custom.$on("mouse-down",this.editorId,this.item.id,this.onLinkClick),a.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),a.A.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),a.A.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},beforeDestroy(){a.A.item.custom.$off("mouse-down",this.editorId,this.item.id,this.onLinkClick),a.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),a.A.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),a.A.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},data(){return{linkStyle:this.createLinkStyle(),hideTextSlot:!1}},methods:{createLinkStyle(){const e=(0,o.E)(this.item.textSlots.link);return e["text-decoration"]=this.item.shapeProps.underline?"underline":"none",e},onLinkClick(){this.item.shapeProps.otherTab?window.open(this.item.shapeProps.url,"_blank")||window.location.replace(this.item.shapeProps.url):window.location=this.item.shapeProps.url},calculateTextOffset(){return this.item.shapeProps.showIcon?1.4*this.item.textSlots.link.fontSize:0},onItemChanged(){"link"===this.item.shape&&(this.linkStyle=this.createLinkStyle())},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=!0},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=!1}},computed:{target(){return this.item.shapeProps.otherTab?"_blank":"_self"},iconStyle(){return{color:this.item.shapeProps.iconColor,"padding-top":this.linkStyle["padding-left"],"padding-bottom":this.linkStyle["padding-left"]}},linkHtml(){return(0,s.A)(this.item.textSlots.link.text)},textOffset(){return this.calculateTextOffset()},textWidth(){return this.item.area.w-this.calculateTextOffset()},iconClass(){return r.A.findTypeByNameOrDefault(this.item.shapeProps.icon).cssClass}}},c=(0,i(4486).A)(l,(function(){var e=this,t=e._self._c;return t("g",[e.hideTextSlot?e._e():t("a",{staticClass:"item-link",attrs:{"xlink:href":e.item.shapeProps.url,target:e.target}},[e.item.shapeProps.showIcon?t("foreignObject",{style:e.iconStyle,attrs:{x:"0",y:"0",width:e.textOffset,height:e.item.area.h}},[t("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("i",{class:e.iconClass})])]):e._e(),e._v(" "),e.textWidth>0?t("foreignObject",{style:e.linkStyle,attrs:{x:e.textOffset,y:"0",width:e.textWidth,height:e.item.area.h}},[t("div",{attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.linkHtml)}})]):e._e()])])}),[],!1,null,null,null).exports},5672:(e,t,i)=>{"use strict";i.d(t,{A:()=>f});var n=i(4912),r=i(8590),s=i(8176),o=i(3651),a=i(6222);const l={props:{editorId:{type:String,required:!0},item:{type:Object},refreshKey:{type:String}},components:{NumberTextfield:o.A,ColorPicker:a.A},data(){return{expression:this.item.shapeProps.expression,fontSize:this.item.shapeProps.fontSize,halign:this.item.shapeProps.halign,valign:this.item.shapeProps.valign,halignOptions:[{name:"Left",value:"left",iconCss:"fas fa-align-left"},{name:"Center",value:"center",iconCss:"fas fa-align-center"},{name:"Right",value:"right",iconCss:"fas fa-align-right"}],valignOptions:[{name:"Top",value:"top",iconCss:"schemio-icon schemio-icon-valign-top"},{name:"Middle",value:"middle",iconCss:"schemio-icon schemio-icon-valign-middle"},{name:"Bottom",value:"bottom",iconCss:"schemio-icon schemio-icon-valign-bottom"}]}},methods:{emitChange(e){s.A.item.changed.specific.$emit(this.editorId,this.item.id,e),s.A.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.shapeProps.${e}`)},onColorUpdate(e){this.item.shapeProps.color=e,this.emitChange("color")},updateHAlign(e){this.halign=e,this.item.shapeProps.halign=e,this.emitChange("halign")},updateVAlign(e){this.valign=e,this.item.shapeProps.valign=e,this.emitChange("valign")},onFontSizeUpdate(e){this.fontSize=e,this.item.shapeProps.fontSize=e,this.emitChange("fontSize")}},watch:{expression(e){this.item.shapeProps.expression=e,s.A.item.changed.specific.$emit(this.editorId,this.item.id,"expression"),s.A.schemeChangeCommitted.$emit(this.editorId,`item.${this.item.id}.shapeProps.expression`)}}};var c=i(4486);const h=(0,c.A)(l,(function(){var e=this,t=e._self._c;return t("div",[e._m(0),e._v(" "),t("div",{staticClass:"ctrl-label"},[e._v("Expression")]),e._v(" "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.expression,expression:"expression"}],staticStyle:{width:"100%"},attrs:{cols:"12"},domProps:{value:e.expression},on:{input:function(t){t.target.composing||(e.expression=t.target.value)}}}),e._v(" "),t("table",{staticClass:"properties-table"},[t("tbody",[t("tr",[t("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                    Font size\n                ")]),e._v(" "),t("td",{staticClass:"value",attrs:{width:"50%"}},[t("ColorPicker",{attrs:{editorId:e.editorId,color:e.item.shapeProps.color},on:{input:e.onColorUpdate}})],1)]),e._v(" "),t("tr",[t("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("\n                    Font size\n                ")]),e._v(" "),t("td",{staticClass:"value",attrs:{width:"50%"}},[t("NumberTextfield",{attrs:{value:e.fontSize,min:1},on:{changed:function(t){return e.onFontSizeUpdate(arguments[0])}}})],1)]),e._v(" "),t("tr",[t("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Horizontal Align")]),e._v(" "),t("td",{staticClass:"value",attrs:{width:"50%"}},[t("ul",{staticClass:"button-group"},e._l(e.halignOptions,(function(i){return t("li",[t("span",{staticClass:"toggle-button",class:{toggled:e.halign===i.value},attrs:{title:i.name},on:{click:function(t){return e.updateHAlign(i.value)}}},[t("i",{class:i.iconCss})])])})),0)])]),e._v(" "),t("tr",[t("td",{staticClass:"label",attrs:{width:"50%"}},[e._v("Vertical Align")]),e._v(" "),t("td",{staticClass:"value",attrs:{width:"50%"}},[t("ul",{staticClass:"button-group"},e._l(e.valignOptions,(function(i){return t("li",[t("span",{staticClass:"toggle-button",class:{toggled:e.valign===i.value},attrs:{title:i.name},on:{click:function(t){return e.updateVAlign(i.value)}}},[t("i",{class:i.iconCss})])])})),0)])])])])])}),[function(){var e=this,t=e._self._c;return t("div",{staticClass:"hint hint-small"},[e._v("\n        Uses "),t("a",{attrs:{href:"https://katex.org/"}},[e._v("KaTeX")]),e._v(" library (TeX math syntax) for generating beautyful mathematical expressions.\n        To see all supported functions visit "),t("a",{staticClass:"link",attrs:{target:"_blank",href:"https://katex.org/docs/supported.html"}},[e._v("this documentation page")])])}],!1,null,null,null).exports,d=new r.D9,u=new r.D9,p={props:["item","editorId"],components:{MathBlockPropertiesEditor:h},mounted(){(function(e,t){let i=e.state.assetsPath;"/"===i&&(i=""),e.state.routePrefix&&(i=e.state.routePrefix+i);const n=t.shapeProps.expression;return d.get(n,(()=>new Promise(((t,r)=>{const s=new Worker(`${i}/js/katex-worker.js`);s.onmessage=e=>{t(e.data)},s.postMessage({expression:n,routePrefix:e.state.routePrefix})}))))})(this.$store,this.item).then((e=>{this.expressionHTML=e,u.set(this.item.id,e)}))},data(){return{expressionHTML:u.getInstant(this.item.id,""),htmlStyle:{color:this.item.shapeProps.color,fontSize:`${this.item.shapeProps.fontSize}px`,width:`${this.item.area.w}px`,height:`${this.item.area.h}px`,display:"table-cell","text-align":this.item.shapeProps.halign,"vertical-align":this.item.shapeProps.valign}}},shapeConfig:{shapeType:"vue",id:"math_block",menuItems:[{group:"General",name:"Math Expression",iconUrl:"/assets/images/items/math-block.svg",item:{shapeProps:{expression:"c = \\pm\\sqrt{a^2 + b^2}"}}}],editorProps:{shapePropsEditor:{component:h}},getTextSlots:e=>[],computePath:e=>(0,n.Ew)(e.area.w,e.area.h,0),args:{expression:{type:"string",value:"",name:"Expression"},color:{type:"color",value:"rgba(0,0,0,1.0)",name:"Color"},fontSize:{type:"number",value:15,name:"Font size",min:1},halign:{type:"choice",value:"center",options:["left","center","right"],name:"Horizontal Align"},valign:{type:"choice",value:"middle",options:["top","middle","bottom"],name:"Vertical Align"}}}},f=(0,c.A)(p,(function(){var e=this,t=e._self._c;return t("g",[t("foreignObject",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}},[t("div",{ref:"expressionContainer",staticClass:"item-text-container",style:e.htmlStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id},domProps:{innerHTML:e._s(e.expressionHTML)}})])])}),[],!1,null,null,null).exports},7689:(e,t,i)=>{"use strict";i.d(t,{A:()=>p});var n=i(7550),r=i(4286),s=i(6354),o=(i(1570),i(7298)),a=i(8176),l=i(5244),c=i(869);const h=new s.Vy("Path");function d(e){let t="";return e.shapeProps.paths.forEach((i=>{const n=(0,o.Sf)(e.area.w,e.area.h,i.points,i.closed);n&&(t+=n+" ")})),t}const u={props:["item","editorId"],components:{AdvancedFill:n.Ay},shapeConfig:{shapeType:"vue",id:"path",menuItems:[],computePath:d,getSnappers:function(e){const t=[];return e.shapeProps.paths.forEach((i=>{i.points.forEach((i=>{const n=(0,c.xS)(i.x,i.y,e);t.push({item:e,snapperType:"horizontal",value:n.y}),t.push({item:e,snapperType:"vertical",value:n.x})}))})),t},getPins(e){const t={};return e.shapeProps.paths.forEach((i=>{i.points.forEach((i=>{const n=(0,o.rt)(i,e.area.w,e.area.h);t[i.id]={x:n.x,y:n.y}}))})),t},getTextSlots:()=>[],editorProps:{description:"rich"},controlPoints:null,args:{fill:{type:"advanced-color",value:{type:"none"},name:"Fill"},strokeColor:{type:"color",value:"rgba(30,30,30,1.0)",name:"Stroke color"},strokeSize:{type:"number",value:2,name:"Stroke size"},strokePattern:{type:"stroke-pattern",value:"solid",name:"Stroke pattern"},paths:{type:"path-array",value:[],name:"Paths",hidden:!0}},scriptFunctions:function(e,t,i){const n=()=>{t.readjustItemAndDescendants(i.id,!0),a.A.item.changed.specific.$emit(e,i.id)},r=(e,t)=>{if(e<0||e>=i.shapeProps.length)throw new Error(`Invalid path index: ${e}`);return t(i.shapeProps.paths[e])},s=(e,t,i)=>{if(t<0||t>=e.points.length)throw new Error(`Invalid point index: ${t}`);return i(e.points[t])},h=()=>{if(i.area.w<1||i.area.h<1){const e=i.shapeProps.paths.map((e=>e.points.map((e=>{const t=(0,o.rt)(e,i.area.w,i.area.h);return(0,c.xS)(t.x,t.y,i)}))));i.area.w=100,i.area.h=100,i.shapeProps.paths.forEach(((t,n)=>{t.points.forEach(((t,r)=>{const s=e[n][r],a=(0,c.Qb)(s.x,s.y,i),l=(0,o.Sn)(a,i.area.w,i.area.h);t.x=l.x,t.y=l.y}))}))}},d=(e,t)=>r(e,(n=>{const r=(0,o.Sf)(i.area.w,i.area.h,n.points,n.closed),s="svgPath"+e;i.meta.scriptCache||(i.meta.scriptCache=new Map);const a=i.meta.scriptCache.get(s);if(a&&a.encodedPath===r)return t(a.svgElement);const l=document.createElementNS("http://www.w3.org/2000/svg","path");return l.setAttribute("d",r),i.meta.scriptCache.set(s,{encodedPath:r,svgElement:l}),t(l)}));return{totalPaths:()=>i.shapeProps.paths.length,totalPathPoints:e=>r(e,(e=>e.points.length)),isPathClosed:e=>r(e,(e=>e.closed)),closePath(e){r(e,(e=>{e.closed=!0,n()}))},openPath(e){r(e,(e=>{e.closed=!1,n()}))},getPathPointWorldPos:(e,t)=>r(e,(e=>s(e,t,(e=>{const t=(0,o.rt)(e,i.area.w,i.area.h);return l.M.fromPoint((0,c.xS)(t.x,t.y,i))})))),setPathPointWorldPos:(e,t,a,l)=>(h(),r(e,(e=>s(e,t,(e=>{const t=(0,c.Qb)(a,l,i),r=(0,o.Sn)(t,i.area.w,i.area.h);e.x=r.x,e.y=r.y,n()}))))),addPath:()=>(h(),i.shapeProps.paths.push({closed:!1,points:[]}),i.shapeProps.paths.length-1),addPoint:(e,t,s)=>r(e,(e=>{const r=(0,c.Qb)(t,s,i),a=(0,o.Sn)(r,i.area.w,i.area.h);e.points.push({t:"L",x:a.x,y:a.y}),n()})),addBeizerPoint:(e,t,s,a,l,h,d)=>r(e,(e=>{const r=(0,c.Qb)(t,s,i),u=(0,c.Qb)(t+a,s+l,i),p=(0,c.Qb)(t+h,s+d,i),f=(0,o.Sn)({t:"B",x:r.x,y:r.y,x1:u.x-r.x,y1:u.y-r.y,x2:p.x-r.x,y2:p.y-r.y},i.area.w,i.area.h);return e.points.push(f),n(),e.points.length-1})),getPathLength:e=>d(e,(e=>e.getTotalLength())),getPathWorldPosAtLength:(e,t)=>d(e,(e=>{const n=e.getPointAtLength(t);return l.M.fromPoint((0,c.xS)(n.x,n.y,i))}))}}},mounted(){a.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChange)},beforeDestroy(){a.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChange)},data(){return{shapePath:d(this.item)}},methods:{onItemChange(){h.info("onItemChange",this.item.id,this.item.name,this.item),"path"===this.item.shape&&(this.shapePath=d(this.item),this.$forceUpdate())}},computed:{strokeDashArray(){return r.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},fill(){return(0,n.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},p=(0,i(4486).A)(u,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("path",{staticStyle:{"stroke-linejoin":"round"},attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,fill:e.fill}})],1)}),[],!1,null,null,null).exports},1182:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var n=i(4912),r=i(7550),s=i(269);function o(e){const t=e.area.w,i=e.area.h;return`M ${t} ${i}  L 0 ${i} L 0 0   L ${t} 0 L ${t} ${i} Z`}const a={props:["item"],components:{AdvancedFill:r.Ay},shapeConfig:{shapeType:"vue",id:"sticky_note",menuItems:(0,s.kH)([{name:"yellow",color:"rgba(240,234,55,1)"},{name:"red",color:"rgba(255,98,55,1)"},{name:"lime",color:"rgba(175,255,105,1)"},{name:"green",color:"rgba(148,255,112,1)"},{name:"blue",color:"rgba(116,255,255,1)"},{name:"purple",color:"rgba(212,184,255,1)"},{name:"pink",color:"rgba(255,184,235,1)"},{name:"white",color:"rgba(250,250,250,1)"},{name:"grey",color:"rgba(200,200,200,1)"}],(e=>({group:"Sticky Notes",name:`Sticky Note (${e.name})`,iconSVG:`<path fill="${e.color}" d="M 1 1  L 41 1  L 41 31  L 1 31 Z"/>`,item:{shapeProps:{fill:{type:"solid",color:e.color}}},size:{w:180,h:180}}))),getPins:e=>(0,n.aO)(e),getTextSlots:e=>[{name:"body",area:{x:0,y:0,w:e.area.w,h:e.area.h}}],computePath:o,args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(240, 234, 55, 1.0)"},name:"Fill"}}},data:()=>({}),computed:{shapePath(){return o(this.item)},shadowPath(){const e=.1*this.item.area.w,t=.99*this.item.area.w,i=.1*this.item.area.h,n=.99*this.item.area.h;return`M ${e} ${i}  L ${t} ${i} L ${1.03*this.item.area.w} ${1.03*this.item.area.h}  L ${e} ${n} Z`},svgFill(){return(0,r.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},l=(0,i(4486).A)(a,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("defs",[t("linearGradient",{attrs:{id:`sticky-note-gradient-${e.item.id}`,x1:"50%",y1:"100%",x2:"50%",y2:"0%"}},[t("stop",{staticStyle:{"stop-color":"rgba(196, 196, 196, 0.14)"},attrs:{offset:"0%"}}),e._v(" "),t("stop",{staticStyle:{"stop-color":"rgba(128, 128, 128, 0.4)"},attrs:{offset:"80.56%"}}),e._v(" "),t("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.23)"},attrs:{offset:"87.22%"}}),e._v(" "),t("stop",{staticStyle:{"stop-color":"rgba(0, 0, 0, 0.3)"},attrs:{offset:"100%"}})],1)],1),e._v(" "),t("defs",[t("filter",{attrs:{id:`sticky-note-shadow-filter-${e.item.id}`}},[t("feGaussianBlur",{attrs:{in:"SourceGraphic",stdDeviation:"4"}})],1)]),e._v(" "),t("g",{style:{opacity:.2},attrs:{filter:`url(#sticky-note-shadow-filter-${e.item.id})`}},[t("path",{attrs:{d:e.shadowPath,stroke:"none",fill:"rgba(0, 0, 0, 1)"}})]),e._v(" "),t("path",{attrs:{d:e.shapePath,stroke:"none",fill:e.svgFill}}),e._v(" "),t("path",{style:{opacity:.5,"mix-blend-mode":"multiply"},attrs:{d:e.shapePath,stroke:"none",fill:`url(#sticky-note-gradient-${e.item.id})`}})],1)}),[],!1,null,null,null).exports},8679:(e,t,i)=>{"use strict";i.d(t,{A:()=>G});var n=i(7550),r=i(1570),s=i(8176),o=i(3651),a=i(6222),l=i(5824),c=i.n(l),h=i(8078),d=i.n(h);function u(e){return e.changedTouches&&e.changedTouches.length>0?{pageX:e.changedTouches[0].pageX,pageY:e.changedTouches[0].pageY}:e.touches&&e.touches.length>0?{pageX:e.touches[0].pageX,pageY:e.touches[0].pageY}:{pageX:e.pageX,pageY:e.pageY}}function p(e,t,i,n){return e+t<n?n-t:i-e<n?i-n:e}const f=50,m={},g={props:{title:{type:String,default:""},width:{type:Number,default:600},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},stretchWidth:{type:Boolean,default:!1},primaryButton:{type:String,default:null},primaryButtonDisabled:{type:Boolean,default:!1},secondaryButton:{type:String,default:null},secondaryButtonStyle:{type:String,default:"btn-secondary"},extraButton:{type:String,default:null},extraButtonStyle:{type:String,default:"btn-secondary"},useMask:{type:Boolean,default:!0},showHeader:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},closable:{type:Boolean,default:!0},closeName:{type:String,default:"Close"},repositionId:{type:Number,default:0}},beforeMount(){this.stretchWidth&&(this.actualWidth=window.innerWidth-80,this.maxWidth>0&&(this.actualWidth=Math.min(this.actualWidth,this.maxWidth))),document.addEventListener("keydown",this.onKeyPress)},mounted(){const e=this.$refs.modalContainer.getBoundingClientRect();let t=(window.innerWidth-e.width)/2,i=(window.innerHeight-e.height)/2;const n=m[this.title];n&&(t=n.x,i=n.y),this.x=p(t,e.width,window.innerWidth,f),this.y=p(i,40,window.innerHeight,f)},beforeDestroy(){document.removeEventListener("keydown",this.onKeyPress)},data(){return{x:100,y:100,actualWidth:Math.min(this.width,window.innerWidth-20),dragging:!1}},methods:{onKeyPress(e){if("Escape"===e.key){if(e.target.classList.contains("script-editor"))return;this.$emit("close")}},initModalDrag(e){let t=this.x,i=this.y;const n=this.$refs.modalContainer.getBoundingClientRect();(function(e){const t=u(e);return{originalEvent:e,originalPageX:t.pageX,originalPageY:t.pageY,draggedElement:null,droppableClass:null,scrollableElemet:null,callbacks:{onDrag:()=>{},onDragOver:()=>{},onDrop:()=>{},onDragStart:()=>{},onSimpleClick:()=>{},onDone:()=>{}},withScrollableElement(e){return this.scrollableElemet=e,this},withDraggedElement(e){return this.draggedElement=e,this},withDroppableClass(e){return this.droppableClass=e,this},onDragStart(e){return this.callbacks.onDragStart=e,this},onDrag(e){return this.callbacks.onDrag=e,this},onDragOver(e){return this.callbacks.onDragOver=e,this},onDrop(e){return this.callbacks.onDrop=e,this},onSimpleClick(e){return this.callbacks.onSimpleClick=e,this},onDone(e){return this.callbacks.onDone=e,this},build(){let t=0,i=!1,n=e.touches?"touchmove":"mousemove",r=e.touches?"touchend":"mouseup";const s=t=>{document.removeEventListener(n,m),document.removeEventListener(r,g),i||2===e.button||this.callbacks.onSimpleClick(t),i=!1,this.callbacks.onDone()},o=(e,t)=>{if(this.droppableClass){const i=e.target.closest(`.${this.droppableClass}`);i&&t(i)}};let a=null,l=0;const c=e=>{a&&l===e||(h(),l=e,a=setInterval((()=>{this.scrollableElemet.scrollTop+=e}),10))},h=()=>{a&&(clearInterval(a),a=null,l=0)},d=u(this.originalEvent),p=d.pageX,f=d.pageY,m=e=>{if(0===e.buttons)return void s(e);const{pageX:n,pageY:r}=u(e);if(t+=Math.abs(n-this.originalPageX)+Math.abs(r-this.originalPageY),i){if(this.draggedElement&&(this.draggedElement.style.left=`${n+4}px`,this.draggedElement.style.top=`${r+4}px`),this.callbacks.onDrag(e,n,r,p,f),o(e,(t=>this.callbacks.onDragOver(e,t,n,r))),this.scrollableElemet){const e=this.scrollableElemet.getBoundingClientRect();e.bottom-r<20?c(2):e.top-r>-20?c(-2):h()}}else t>5&&(i=!0,this.callbacks.onDragStart(e,p,f))},g=e=>{const{pageX:t,pageY:n}=u(e);h();try{i&&o(e,(i=>this.callbacks.onDrop(e,i,t,n)))}catch(e){console.error(e)}s(e)};document.addEventListener(n,m),document.addEventListener(r,g)}}})(e).onDragStart((()=>{this.dragging=!0})).onDrag(((e,r,s,o,a)=>{const l=r-o,c=s-a;this.x=p(t+l,n.width,window.innerWidth,f),this.y=p(i+c,40,window.innerHeight,f),m[this.title]={x:this.x,y:this.y}})).onDone((()=>{this.dragging=!1})).build()},repositionModal(){const e=this.$refs.modalContainer.getBoundingClientRect();if(e.right>window.innerWidth){const t=e.left-e.right+window.innerWidth;this.x=p(t,e.width,window.innerWidth,f)}if(e.bottom>window.innerHeight){const t=e.top-e.bottom+window.innerHeight;this.y=p(t,40,window.innerHeight,f)}}},computed:{modalBodyStyles(){const e={};return this.maxHeight>0?e["max-height"]=`${Math.min(this.maxHeight,window.innerHeight-120)}px`:e["max-height"]=window.innerHeight-120+"px",e}},watch:{repositionId(){this.$nextTick((()=>{this.repositionModal()}))}}};var y=i(4486);const v=(0,y.A)(g,(function(){var e=this,t=e._self._c;return t("div",[e.useMask?t("div",{staticClass:"modal-mask"}):e._e(),e._v(" "),t("div",{ref:"modalContainer",staticClass:"modal-container",style:{width:e.actualWidth+"px",top:`${e.y}px`,left:`${e.x}px`}},[e.showHeader?t("div",{staticClass:"modal-header",class:{dragging:e.dragging},on:{touchstart:e.initModalDrag,mousedown:e.initModalDrag}},[t("h3",[e._v(e._s(e.title))]),e._v(" "),e.closable?t("span",{staticClass:"modal-close",on:{click:function(t){return e.$emit("close")}}},[t("i",{staticClass:"fas fa-times"})]):e._e()]):e._e(),e._v(" "),t("div",{staticClass:"modal-body",style:e.modalBodyStyles},[e._t("default")],2),e._v(" "),e.showFooter?t("div",{staticClass:"modal-footer"},[t("div",{staticClass:"modal-controls"},[e.primaryButton?t("span",{staticClass:"btn btn-primary",class:{disabled:e.primaryButtonDisabled},on:{click:function(t){return e.$emit("primary-submit")}}},[e._v(e._s(e.primaryButton))]):e._e(),e._v(" "),e.extraButton?t("span",{class:`btn ${e.extraButtonStyle}`,on:{click:function(t){return e.$emit("extra-submit")}}},[e._v(e._s(e.extraButton))]):e._e(),e._v(" "),e.secondaryButton?t("span",{class:`btn ${e.secondaryButtonStyle}`,on:{click:function(t){return e.$emit("secondary-submit")}}},[e._v(e._s(e.secondaryButton))]):e.closable?t("span",{staticClass:"btn btn-secondary",on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.closeName))]):e._e()])]):e._e()])])}),[],!1,null,null,null).exports;var x=i(5894),b=i(2063),w=i(3550);const O={props:{editorId:{type:String,required:!0},value:{type:Object,required:!0},width:{type:String,default:"100%"},height:{type:String,default:"26px"},disabled:{type:Boolean,default:!1}},components:{ColorPicker:d().Chrome,Modal:v,NumberTextfield:o.A},beforeMount(){this.updateCurrentColor(this.value)},mounted(){document.body.addEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},beforeDestroy(){document.body.removeEventListener("mousemove",this.onMouseMove),document.body.addEventListener("mouseup",this.onMouseUp)},data(){return{id:c().generate(),revision:0,colorTypes:["none","solid","image","gradient"],color:b.A.clone(this.value),modal:{shown:!1,pickerColor:{hex:this.value.color||"#fff"},image:{path:this.value.image||""}},gradient:{selectedSliderIdx:0,isDragging:!1,selectedColor:{hex:"#fff"},originalClickPoint:{x:0},originalKnobPosition:0},gradientPreview:"",isUploading:!1,uploadErrorMessage:null}},watch:{value(e){this.updateCurrentColor(e)}},methods:{updateRotation(e){this.color.gradient.direction=e,this.$forceUpdate(),this.emitChange()},onGradientRotationKnobMouseDown(e){let t=e.touches?"touchmove":"mousemove",i=e.touches?"touchend":"mouseup";const n=e=>{if(0===e.buttons)return void o(e);const t=this.$refs.gradientRotationKnob.getBoundingClientRect(),i=u(e),n=i.pageX-t.left-t.width/2,s=i.pageY-t.top-t.height/2;Math.abs(n)+Math.abs(s)<1||(this.color.gradient.direction=Math.round(180*r.A.fullAngleForVector(n,s)/Math.PI)+90,this.$forceUpdate(),this.emitChange())},s=e=>{o(),n(e)},o=()=>{document.removeEventListener(t,n),document.removeEventListener(i,s)};document.addEventListener(t,n),document.addEventListener(i,s),n(e)},showModal(){this.disabled||(this.modal.shown=!0)},updateCurrentColor(e){"gradient"===e.type&&(this.gradient.selectedColor.hex=e.gradient.colors[this.gradient.selectedSliderIdx].c,this.gradientPreview=this.computeGradientPreview(e.gradient)),this.color=b.A.clone(e),this.modal.pickerColor={hex:e.color||"#fff"},"image"===this.color.type&&(this.modal.image.path=this.color.image),this.image={path:e.image||""}},onImageStretchChange(e){this.color.stretch=e.target.checked,this.emitChange()},onGradientTypeChange(){this.emitChange(),this.$forceUpdate()},emitChange(){this.$emit("changed",b.A.clone(this.color))},updateSolidColor(e){this.color.color=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.emitChange()},selectColorType(e){if(this.color.type=e,"image"!==e||this.color.image||(this.color.image="",this.color.stretch=!1,this.color.imageBox={x:0,y:0,w:1,h:1}),"solid"!==e||this.color.color||(this.color.color="rgba(255,255,255,1.0)"),"gradient"===e&&!this.color.gradient){let e="rgba(0,0,0,1.0)",t="rgba(255,255,255,1.0)";this.color.color&&(e=this.color.color,t=this.color.color),this.color.gradient={colors:[{c:e,p:0},{c:t,p:100}],type:"linear",direction:0},this.gradientPreview=this.computeGradientPreview(this.color.gradient)}this.emitChange()},onImagePathChange(e){this.color.image=e.target.value,this.emitChange()},onImageUpload(e){if(!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;const t=e.target.files[0];t&&(this.isUploading=!0,this.uploadErrorMessage=null,this.$store.state.apiClient.uploadFile(t).then((e=>{this.isUploading=!1,this.color.image=e,this.modal.image.path=e,this.emitChange()})).catch((e=>{this.isUploading=!1,this.uploadErrorMessage="Failed to upload image",e.data&&e.data.message&&w.A.addErrorSystemMessage(this.$store,e.data.message)})))},onMouseUp(e){this.gradient.isDragging&&"gradient"===this.color.type&&(this.gradient.isDragging=!1,this.color.gradient.colors.sort(((e,t)=>e.p-t.p)))},onMouseMove(e){if(this.gradient.isDragging){if(0===e.buttons)return void(this.gradient.isDragging=!1);const t=e.clientX,i=this.$refs.gradientSliderContainer.getBoundingClientRect();let n=0;n=t<i.left?0:t>i.right?100:Math.round(1e4*(t-i.left)/i.width)/100,this.color.gradient.colors[this.gradient.selectedSliderIdx].p=n,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.$forceUpdate(),this.emitChange()}},onGradientContainerDblClick(e){const t=e.clientX,i=this.$refs.gradientSliderContainer.getBoundingClientRect();if(t<i.left||t>i.right)return;const n=Math.round(1e4*(t-i.left)/i.width)/100;this.color.gradient.colors.sort(((e,t)=>e.p-t.p));let r=0,s=!1;for(let e=0;e<this.color.gradient.colors.length&&!s;e++)n>this.color.gradient.colors[e].p?r=e+1:(r=e,s=!0);this.color.gradient.colors.splice(r,0,{c:"rgba(0,0,0,1.0)",p:n}),0===r&&this.color.gradient.colors.length>1?this.color.gradient.colors[0].c=this.color.gradient.colors[1].c:r===this.color.gradient.colors.length-1&&this.color.gradient.colors.length>1?this.color.gradient.colors[r].c=this.color.gradient.colors[r-1].c:this.color.gradient.colors.length>2&&(this.color.gradient.colors[r].c=function(e,t,i){let n=i.p-t.p;if(Math.abs(n)<.001)return t.c;let r=Math.max(0,Math.min((e.p-t.p)/n,1));const s=(0,x.H0)(t.c),o=(0,x.H0)(i.c),a=Math.max(0,Math.min(Math.round(s.r*(1-r)+o.r*r),255)),l=Math.max(0,Math.min(Math.round(s.g*(1-r)+o.g*r),255)),c=Math.max(0,Math.min(Math.round(s.b*(1-r)+o.b*r),255)),h=Math.max(0,Math.min(Math.round(s.a*(1-r)+o.a*r),1));return(0,x._T)({r:a,g:l,b:c,a:h})}(this.color.gradient.colors[r],this.color.gradient.colors[r-1],this.color.gradient.colors[r+1])),this.gradient.selectedSliderIdx=r,this.gradient.selectedColor.hex=this.color.gradient.colors[r].c,this.revision+=1,this.gradient.isDragging=!1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},onGradientSliderKnobClick(e,t){this.gradient.isDragging=!0,this.gradient.originalClickPoint.x=t.clientX,this.gradient.selectedColor.hex=this.color.gradient.colors[e].c,this.gradient.selectedSliderIdx=e,this.gradient.originalKnobPosition=this.color.gradient.colors[e].p},onGradientSliderKnobDblClick(e){this.color.gradient.colors.length>2&&(this.color.gradient.colors.splice(e,1),e>0&&(e-=1),this.color.gradient.selectedColor=this.color.gradient.colors[e].c,this.revision+=1,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange())},updateGradientSliderColor(e){this.color.gradient.colors[this.gradient.selectedSliderIdx].c=`rgba(${e.rgba.r}, ${e.rgba.g}, ${e.rgba.b}, ${e.rgba.a})`,this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},invertGradient(){this.color.gradient.colors.reverse();for(let e=0;e<this.color.gradient.colors.length;e++)this.color.gradient.colors[e].p=r.A.clamp(100-this.color.gradient.colors[e].p,0,100);this.gradientPreview=this.computeGradientPreview(this.color.gradient),this.emitChange()},computeGradientPreview(e){let t="linear-gradient(90deg, ",i=e.colors,n=!1;for(let e=0;e<i.length-1;e++)i[e].p>i[e+1].p&&(n=!0);n&&(i=e.colors.slice(),i.sort(((e,t)=>e.p-t.p)));for(let e=0;e<i.length;e++)e>0&&(t+=", "),t+=`${i[e].c} ${i[e].p}%`;return t+=")",t}},computed:{isUploadEnabled(){return this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile}}},S=O,k=(0,y.A)(S,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"advanced-color-editor",class:{disabled:e.disabled},style:{width:e.width,height:e.height}},[e.color.type&&"none"!==e.color.type?e._e():t("span",{staticClass:"none-picker-toggle-button",on:{click:function(t){return e.showModal()}}}),e._v(" "),"solid"===e.color.type?t("span",{staticClass:"color-picker-toggle-button",style:{background:e.color.color},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),"image"===e.color.type?t("div",{staticClass:"image-container",on:{click:function(t){return e.showModal()}}},[t("img",{attrs:{src:e.color.image}})]):e._e(),e._v(" "),"gradient"===e.color.type?t("div",{staticClass:"gradient-container",style:{background:e.gradientPreview},on:{click:function(t){return e.showModal()}}}):e._e(),e._v(" "),e.modal.shown?t("modal",{attrs:{title:"Color",width:400,"use-mask":!1},on:{close:function(t){e.modal.shown=!1}}},[t("ul",{staticClass:"tabs"},e._l(e.colorTypes,(function(i){return t("li",[t("span",{staticClass:"tab",class:{active:e.color.type===i},on:{click:function(t){return e.selectColorType(i)}}},[e._v("\n                    "+e._s(i)+"\n                ")])])})),0),e._v(" "),t("div",{staticClass:"tabs-body",staticStyle:{"min-height":"320px"}},["none"===e.color.type?t("div",[t("p",[e._v("\n                    This setting disables the fill\n                ")])]):e._e(),e._v(" "),"solid"===e.color.type?t("div",[t("ColorPicker",{attrs:{palette:[],pressets:[]},on:{input:e.updateSolidColor},model:{value:e.modal.pickerColor,callback:function(t){e.$set(e.modal,"pickerColor",t)},expression:"modal.pickerColor"}})],1):e._e(),e._v(" "),"image"===e.color.type?t("div",[t("div",{staticClass:"image-control"},[t("input",{staticClass:"textfield",attrs:{placeholder:"Image URL..."},domProps:{value:e.modal.image.path},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onImagePathChange.apply(null,arguments)},blur:e.onImagePathChange}}),e._v(" "),e.isUploadEnabled?t("div",{staticClass:"file-upload-button"},[t("i",{staticClass:"fas fa-file-upload icon"}),e._v(" "),t("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.onImageUpload}})]):e._e()]),e._v(" "),t("div",{staticClass:"ctrl-group"},[t("input",{attrs:{type:"checkbox",id:`image-stretch-${e.id}`},domProps:{checked:e.color.stretch||!1},on:{input:e.onImageStretchChange}}),t("label",{attrs:{for:`image-stretch-${e.id}`}},[e._v(" Stretch")])]),e._v(" "),e.isUploading?t("div",{staticClass:"msg msg-info"},[t("i",{staticClass:"fas fa-spinner fa-spin"}),e._v(" Uploading...\n                ")]):e._e(),e._v(" "),e.uploadErrorMessage?t("div",{staticClass:"msg msg-error"},[e._v(e._s(e.uploadErrorMessage))]):e._e(),e._v(" "),"image"===e.color.type&&e.color.image?t("img",{staticStyle:{"max-width":"360px","max-height":"360px"},attrs:{src:e.color.image}}):e._e()]):e._e(),e._v(" "),"gradient"===e.color.type?t("div",[t("div",{ref:"gradientSliderContainer",staticClass:"gradient-slider-container text-nonselectable"},[t("div",{staticClass:"gradient-container large",style:{background:e.gradientPreview},on:{dblclick:e.onGradientContainerDblClick}}),e._v(" "),e._l(e.color.gradient.colors,(function(i,n){return t("div",{staticClass:"gradient-slider",style:{left:`${i.p}%`}},[t("div",{staticClass:"gradient-slider-knob",class:{selected:n===e.gradient.selectedSliderIdx},style:{background:i.c},on:{mousedown:function(t){return e.onGradientSliderKnobClick(n,arguments[0])},dblclick:function(t){return e.onGradientSliderKnobDblClick(n)}}})])}))],2),e._v(" "),t("div",{staticClass:"gradient-controls"},[t("div",{staticClass:"ctrl-group"},[t("div",{staticClass:"ctrl-label"},[e._v("Gradient Type")]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.color.gradient.type,expression:"color.gradient.type"}],on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.color.gradient,"type",t.target.multiple?i:i[0])},e.onGradientTypeChange]}},[t("option",{attrs:{value:"linear"}},[e._v("Linear")]),e._v(" "),t("option",{attrs:{value:"radial"}},[e._v("Radial")])])]),e._v(" "),"linear"===e.color.gradient.type?t("div",{staticClass:"ctrl-group"},[t("div",{staticClass:"ctrl-label"},[e._v("Direction")]),e._v(" "),t("NumberTextfield",{attrs:{value:e.color.gradient.direction},on:{changed:e.updateRotation}}),e._v(" "),t("div",{staticClass:"gradient-rotation-knob-container"},[t("div",{staticClass:"gradient-rotation-knob",on:{mousedown:e.onGradientRotationKnobMouseDown}},[t("svg",{ref:"gradientRotationKnob",attrs:{viewBox:"0 0 24 24",width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg"}},[t("g",{attrs:{transform:`translate(12 12) rotate(${e.color.gradient.direction})`}},[t("circle",{staticClass:"hollow",attrs:{cx:"0",cy:"0",r:"9",fill:"rgba(0,0,0,0)"}}),e._v(" "),t("circle",{staticClass:"full",attrs:{cx:"0",cy:"-9",r:"2",stroke:"none"}}),e._v(" "),t("circle",{staticClass:"center",attrs:{cx:"0",cy:"0",r:"0.5",stroke:"none"}}),e._v(" "),t("line",{attrs:{x1:"0",y1:"0",x2:"0",y2:"-9"}})])])])])],1):e._e(),e._v(" "),t("div",{staticClass:"ctrl-group"},[t("span",{staticClass:"btn btn-secondary",on:{click:e.invertGradient}},[e._v("Invert")])])]),e._v(" "),t("div",{staticClass:"gradient-color-picker"},[t("ColorPicker",{key:`gradient-${e.id}-${e.gradient.selectedSliderIdx}-${e.revision}`,attrs:{value:e.gradient.selectedColor},on:{input:e.updateGradientSliderColor}})],1)]):e._e()])]):e._e()],1)}),[],!1,null,null,null).exports;var P=i(269);const C=[{name:"Standard",shapeProps:{style:"simple",oddEvenFill:!1,header:"none",cutCorner:!1}},{name:"Flat",shapeProps:{style:"flat",oddEvenFill:!1,header:"none",cutCorner:!1}},{name:"Standard with header",shapeProps:{style:"simple",oddEvenFill:!1,header:"columns",cutCorner:!1}},{name:"Flat with header",shapeProps:{style:"flat",oddEvenFill:!1,header:"columns",cutCorner:!1}},{name:"Standard with vertical header",shapeProps:{style:"simple",oddEvenFill:!1,header:"rows",cutCorner:!1}},{name:"Flat with vertical header",shapeProps:{style:"flat",oddEvenFill:!1,header:"rows",cutCorner:!1}},{name:"Standard with header, odd/even",shapeProps:{style:"simple",oddEvenFill:!0,header:"columns",cutCorner:!1}},{name:"Flat with header, odd/even rows",shapeProps:{style:"flat",oddEvenFill:!0,header:"columns",cutCorner:!1}},{name:"Standard with both headers",shapeProps:{style:"simple",oddEvenFill:!1,header:"both",cutCorner:!1}},{name:"Flat with both headers",shapeProps:{style:"flat",oddEvenFill:!1,header:"both",cutCorner:!1}},{name:"Standard with both headers, no corner",shapeProps:{style:"simple",oddEvenFill:!1,header:"both",cutCorner:!0}},{name:"Flat with both headers, no corner",shapeProps:{style:"flat",oddEvenFill:!1,header:"both",cutCorner:!0}}];C.forEach((e=>{e.cells=[];const t="simple"===e.shapeProps.style?0:1;for(let i=0;i<4;i++)for(let n=0;n<3;n++){const r={color:"#ffffff",margin:"simple"===e.shapeProps.style?0:2,hasBorder:"simple"===e.shapeProps.style,x:20*n+t,w:20-2*t,y:12*i+t,h:12-2*t};e.shapeProps.oddEvenFill&&i>0&&i%2==0&&(r.color="#e3e3f3"),("columns"===e.shapeProps.header&&0===i||"rows"===e.shapeProps.header&&0===n||"both"===e.shapeProps.header&&(0===i||0===n))&&(r.color="#bbbbbb"),e.shapeProps.cutCorner&&0===i&&0===n||e.cells.push(r)}if(e.gridLines=[],"simple"===e.shapeProps.style){for(let t=0;t<=4;t++)e.gridLines.push({x1:e.shapeProps.cutCorner&&0===t?20:0,x2:60,y1:12*t,y2:12*t});for(let t=0;t<=3;t++)e.gridLines.push({x1:20*t,x2:20*t,y1:e.shapeProps.cutCorner&&0===t?12:0,y2:48})}e.iconWidth=66,e.iconHeight=54}));const A={props:{editorId:{type:String,required:!0},item:{type:Object},refreshKey:{type:String}},components:{NumberTextfield:o.A,ColorPicker:a.A,AdvancedColorEditor:k},data:()=>({tableStyles:C}),methods:{applyTableStyle(e){(0,P.jJ)(e.shapeProps,((e,t)=>{this.item.shapeProps[t]=e})),this.$emit("item-mutated")}},watch:{refreshKey(){this.$forceUpdate()}}},I=(0,y.A)(A,(function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-1 padded"},[t("NumberTextfield",{attrs:{value:e.item.shapeProps.columns,min:1,max:100,name:"Columns"},on:{changed:function(t){return e.$emit("shape-prop-changed","columns","number",arguments[0])}}})],1),e._v(" "),t("div",{staticClass:"col-1 padded"},[t("NumberTextfield",{attrs:{value:e.item.shapeProps.rows,min:1,max:100,name:"Rows"},on:{changed:function(t){return e.$emit("shape-prop-changed","rows","number",arguments[0])}}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-1 padded",attrs:{title:"Fill"}},[t("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.fill,disabled:!1},on:{changed:function(t){return e.$emit("shape-prop-changed","fill","advanced-color",arguments[0])}}})],1),e._v(" "),t("div",{staticClass:"col-1 padded",attrs:{title:"Secondary fill"}},[t("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.rowSecondaryFill,disabled:!e.item.shapeProps.oddEvenFill},on:{changed:function(t){return e.$emit("shape-prop-changed","rowSecondaryFill","advanced-color",arguments[0])}}})],1),e._v(" "),t("div",{staticClass:"col-1 padded",attrs:{title:"Header fill"}},[t("AdvancedColorEditor",{attrs:{editorId:e.editorId,value:e.item.shapeProps.headerFill,disabled:"none"===e.item.shapeProps.header},on:{changed:function(t){return e.$emit("shape-prop-changed","headerFill","advanced-color",arguments[0])}}})],1),e._v(" "),t("div",{staticClass:"col-1 padded",attrs:{title:"Stroke color"}},[t("ColorPicker",{attrs:{editorId:e.editorId,color:e.item.shapeProps.stroke,disabled:"flat"===e.item.shapeProps.style},on:{input:function(t){return e.$emit("shape-prop-changed","stroke","color",arguments[0])}}})],1)]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-1 padded"},[t("NumberTextfield",{attrs:{value:e.item.shapeProps.strokeSize,min:1,max:100,name:"Stroke size",disabled:"flat"===e.item.shapeProps.style},on:{changed:function(t){return e.$emit("shape-prop-changed","strokeSize","number",arguments[0])}}})],1)]),e._v(" "),t("div",{staticClass:"hint hint-small text-centered"},[e._v("\n            Choose table style\n    ")]),e._v(" "),e._l(e.tableStyles,(function(i){return t("div",{staticClass:"toggle-button",on:{click:function(t){return e.applyTableStyle(i)}}},[t("svg",{attrs:{width:`${i.iconWidth}px`,height:`${i.iconHeight}px`}},[t("g",{attrs:{transform:"translate(3,3)"}},[e._l(i.cells,(function(e){return t("rect",{attrs:{x:e.x,y:e.y,width:e.w,height:e.h,fill:e.color,stroke:"none"}})})),e._v(" "),e._l(i.gridLines,(function(e){return t("line",{attrs:{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stroke:"#aaaaaa"}})}))],2)])])})),e._v(" "),t("div",{staticStyle:{clear:"both"}})],2)}),[],!1,null,null,null).exports;var T=i(3627),$=i(6403);function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function E(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){_(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const D=100;function L(e,t,i){const n=t.shapeProps.columns;t.shapeProps.columns=i,R(0,t,i,n),s.A.item.changed.specific.$emit(e,t.id,"shapeProps.column"),s.A.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.columns`)}function B(e,t,i){const n=t.shapeProps.rows;t.shapeProps.rows=i,N(0,t,i,n),s.A.item.changed.specific.$emit(e,t.id,"shapeProps.rows"),s.A.schemeChangeCommitted.$emit(e,`item.${t.id}.shapeProps.rows`)}function R(e,t,i,n){const s=[];let o=100,a=0;for(let e=0;e<n-1;e++){const i=t.area.w*t.shapeProps.colWidths[e]/100;a+=i,s[e]=i}if(o=Math.max(t.area.w/(2*Math.max(1,n)),t.area.w-a),i>n&&i>0&&!r.A.tooSmall(t.area.w)){for(let e=n-1;e<i-1;e++)s.push(o),t.area.w+=o;for(let e=n-1;e<i;e++)for(let i=0;i<t.shapeProps.rows;i++){const n=`c_${i}_${e}`;t.textSlots.hasOwnProperty(n)||(t.textSlots[n]=e>0?E(E({},b.A.clone(t.textSlots[`c_${i}_${e-1}`])),{},{text:""}):b.A.clone(T.lM))}}if(i<n&&i>0&&!r.A.tooSmall(t.area.w)){let e=0;for(let n=0;n<i;n++)e+=t.shapeProps.colWidths[n]*t.area.w/100;t.area.w=e}t.shapeProps.colWidths.length>i&&(t.shapeProps.colWidths=t.shapeProps.colWidths.slice(0,i));let l=t.area.w;r.A.tooSmall(l)&&(l=1);for(let e=0;e<i&&e<s.length;e++)t.shapeProps.colWidths[e]=100*s[e]/l}function N(e,t,i,n){const s=[];let o=0,a=100;for(let e=0;e<n-1;e++){const i=t.area.h*t.shapeProps.rowWidths[e]/100;o+=i,s[e]=i}if(a=Math.max(t.area.h/(2*Math.max(1,n)),t.area.h-o),i>n&&i>0&&!r.A.tooSmall(t.area.h)){for(let e=n-1;e<i-1;e++)s.push(a),t.area.h+=a;for(let e=n-1;e<i;e++)for(let i=0;i<t.shapeProps.columns;i++){const n=`c_${e}_${i}`;t.textSlots.hasOwnProperty(n)||(t.textSlots[n]=e>0?E(E({},b.A.clone(t.textSlots[`c_${e-1}_${i}`])),{},{text:""}):b.A.clone(T.lM))}}if(i<n&&i>0&&!r.A.tooSmall(t.area.h)){let e=0;for(let n=0;n<i;n++)e+=t.shapeProps.rowWidths[n]*t.area.h/100;t.area.h=e}t.shapeProps.rowWidths.length>i&&(t.shapeProps.rowWidths=t.shapeProps.rowWidths.slice(0,i));let l=t.area.h;r.A.tooSmall(l)&&(l=1);for(let e=0;e<i&&e<s.length;e++)t.shapeProps.rowWidths[e]=100*s[e]/l}function F(e){if("both"===e.shapeProps.header&&e.shapeProps.cutCorner){const t=e.area.w*e.shapeProps.colWidths[0]/100,i=e.area.h*e.shapeProps.rowWidths[0]/100;return`M ${t} 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h}  L 0 ${i} L ${t} ${i} Z`}return`M 0 0 L ${e.area.w} 0 L ${e.area.w} ${e.area.h} L 0 ${e.area.h} Z`}function j(e){const t=[];let i=0,n=e.area.h,r=0,s=0;"columns-single"===e.shapeProps.header&&(s=1),"rows-single"===e.shapeProps.header&&(r=1);for(let o=r;o<e.shapeProps.rows;o++){const r=Math.min(n,o<e.shapeProps.rows-1?e.shapeProps.rowWidths[o]*e.area.h/100:n);let a=0,l=e.area.w;for(let n=s;n<e.shapeProps.columns;n++){const s=Math.min(l,n<e.shapeProps.columns-1?e.shapeProps.colWidths[n]*e.area.w/100:l);let c=a,h=a+s,d=i,u=i+r,p=0;"flat"===e.shapeProps.tableStyle&&(p=e.shapeProps.cellPadding),c=Math.min(c+p,h),d=Math.min(d+p,u),"both"===e.shapeProps.header&&e.shapeProps.cutCorner&&0===o&&0===n||t.push({row:o,col:n,area:{x:c,y:d,w:Math.max(0,h-p-c),h:Math.max(0,u-p-d)}}),a+=s,l-=s}i+=r,n-=r}return t}function z(e){const t=[];let i=0;for(let n=0;n<e.shapeProps.columns-1&&n<e.shapeProps.colWidths.length;n++)t[n]=e.shapeProps.colWidths[n]*e.area.w/100,i+=t[n];const n=Math.max(0,e.area.w-i);return t.push(n),t}function Q(e,t){e.shapeProps.colWidths=[];for(let i=0;i<e.shapeProps.columns-1;i++){const n=r.A.tooSmall(e.area.w)?1:e.area.w;e.shapeProps.colWidths[i]=100*t[i]/n}}function U(e){const t=[];let i=0;for(let n=0;n<e.shapeProps.rows-1&&n<e.shapeProps.rowWidths.length;n++)t[n]=e.shapeProps.rowWidths[n]*e.area.h/100,i+=t[n];const n=Math.max(0,e.area.h-i);return t.push(n),t}function q(e,t){e.shapeProps.rowWidths=[];for(let i=0;i<e.shapeProps.rows-1;i++){const n=r.A.tooSmall(e.area.h)?1:e.area.h;e.shapeProps.rowWidths[i]=100*t[i]/n}}function H(e,t){const i=z(e),n=t<i.length?i[t]:i[i.length-1];i.splice(t,0,n),e.area.w+=n,e.shapeProps.columns+=1,Q(e,i);for(let i=e.shapeProps.columns-1;i>=t;i--)for(let t=0;t<e.shapeProps.rows;t++)e.textSlots[`c_${t}_${i}`]=e.textSlots[`c_${t}_${i-1}`];for(let i=0;i<e.shapeProps.rows;i++)t<e.shapeProps.columns-1?e.textSlots[`c_${i}_${t}`]=E(E({},b.A.clone(e.textSlots[`c_${i}_${t+1}`])),{},{text:""}):e.textSlots[`c_${i}_${t}`]=t>0?E(E({},b.A.clone(e.textSlots[`c_${i}_${t-1}`])),{},{text:""}):b.A.clone(T.lM);return!0}function V(e,t){const i=U(e),n=t<i.length?i[t]:i[i.length-1];i.splice(t,0,n),e.area.h+=n,e.shapeProps.rows+=1,q(e,i);for(let i=e.shapeProps.rows-1;i>=t;i--)for(let t=0;t<e.shapeProps.columns;t++)e.textSlots[`c_${i}_${t}`]=e.textSlots[`c_${i-1}_${t}`];for(let i=0;i<e.shapeProps.columns;i++)t<e.shapeProps.rows-1?e.textSlots[`c_${t}_${i}`]=E(E({},b.A.clone(e.textSlots[`c_${t+1}_${i}`])),{},{text:""}):e.textSlots[`c_${t}_${i}`]=t>0?E(E({},b.A.clone(e.textSlots[`c_${t-1}_${i}`])),{},{text:""}):b.A.clone(T.lM);return!0}function W(e,t,i){return{group:"Tables",name:e,iconUrl:`/assets/images/items/${t}`,item:{shapeProps:i},previewArea:{x:5,y:5,w:200,h:100},size:{w:200,h:100}}}const X={props:["item"],components:{AdvancedFill:n.Ay},shapeConfig:{shapeType:"vue",id:"uml_table",menuItems:[W("Table","table-simple.svg",{columns:3,rows:3,header:"none"}),W("Table with header","table-h-header.svg",{columns:3,rows:3,header:"columns"}),W("Table with vertical header","table-v-header.svg",{columns:3,rows:3,header:"rows"}),W("Table with double header","table-dbl-header.svg",{columns:3,rows:3,header:"both",cutCorner:!1}),W("Table with double header","table-dbl-header-2.svg",{columns:3,rows:3,header:"both",cutCorner:!0})],getPins:function(e){return{}},computeOutline:F,getTextSlots:function(e){return j(e).map((e=>({name:`c_${e.row}_${e.col}`,area:e.area})))},fixItem:function(e){if(e.shapeProps.columns<1&&(e.shapeProps.columns=1),e.shapeProps.rows<1&&(e.shapeProps.rows=1),e.shapeProps.colWidths.length>e.shapeProps.columns-1)e.shapeProps.colWidths=e.shapeProps.colWidths.slice(0,e.shapeProps.columns-1);else if(e.shapeProps.colWidths.length<e.shapeProps.columns-1){const t=e.shapeProps.columns-1-e.shapeProps.colWidths.length;let i=0;for(let t=0;t<e.shapeProps.colWidths.length;t++)i+=e.shapeProps.colWidths[t]*e.area.w/100;let n=e.area.w;if(r.A.tooSmall(n)&&(n=1),t>0){const r=100*Math.max(0,e.area.w-i)/(n*(t+1));for(let i=0;i<t;i++)e.shapeProps.colWidths.push(r)}}if(e.shapeProps.rowWidths.length>e.shapeProps.rows-1)e.shapeProps.rowWidths=e.shapeProps.rowWidths.slice(0,e.shapeProps.rows-1);else if(e.shapeProps.rowWidths.length<e.shapeProps.rows-1){const t=e.shapeProps.rows-1-e.shapeProps.rowWidths.length;let i=0;for(let t=0;t<e.shapeProps.rowWidths.length;t++)i+=e.shapeProps.rowWidths[t]*e.area.h/100;let n=e.area.h;if(r.A.tooSmall(n)&&(n=1),t>0){const r=100*Math.max(0,e.area.h-i)/(n*(t+1));for(let i=0;i<t;i++)e.shapeProps.rowWidths.push(r)}}},controlPoints:{make(e){const t={};let i=0;for(let n=0;n<e.shapeProps.columns-1;n++)i+=e.shapeProps.colWidths[n]*e.area.w/100,t[`c_${n}`]={x:r.A.clamp(i,0,e.area.w),y:0};i=0;for(let n=0;n<e.shapeProps.rows-1;n++)i+=e.shapeProps.rowWidths[n]*e.area.h/100,t[`r_${n}`]={x:0,y:r.A.clamp(i,0,e.area.h)};return t},handleDrag(e,t,i,n,s,o){if(t.startsWith("c_")){let n=i+s;const o=e.area.w,a=Math.max(1,e.shapeProps.columns);if(r.A.tooSmall(o))return;const l=parseInt(t.substr(2));let c=0;for(let t=0;t<l;t++)c+=e.shapeProps.colWidths[t]*o/100;const h=Math.max(0,n-c),d=5/a,u=100-5/a;e.shapeProps.colWidths[l]=r.A.clamp(100*h/o,d,u)}else if(t.startsWith("r_")){let i=n+o;const s=e.area.h,a=Math.max(1,e.shapeProps.rows);if(r.A.tooSmall(s))return;const l=parseInt(t.substr(2));let c=0;for(let t=0;t<l;t++)c+=e.shapeProps.rowWidths[t]*s/100;const h=Math.max(0,i-c),d=5/a,u=100-5/a;e.shapeProps.rowWidths[l]=r.A.clamp(100*h/s,d,u)}}},args:{tableStyle:{type:"choice",value:"simple",options:["simple","flat"],name:"Style"},columns:{type:"number",value:3,name:"Columns",min:1,max:D,onUpdate:R},rows:{type:"number",value:3,name:"Rows",min:1,max:D,onUpdate:N},fill:{type:"advanced-color",value:{type:"solid",color:"rgba(245, 245, 245, 1.0)"},name:"Fill"},stroke:{type:"color",value:"rgba(145, 178, 196, 1.0)",name:"Stroke",depends:{tableStyle:"simple"}},strokeSize:{type:"number",value:1,name:"Stroke size",depends:{tableStyle:"simple"}},cellPadding:{type:"number",value:2,name:"Cell padding",depends:{tableStyle:"flat"}},header:{type:"choice",value:"columns",options:["none","columns","columns-single","rows","rows-single","both"],name:"Header fill override"},headerFill:{type:"advanced-color",value:{type:"solid",color:"rgba(168, 193, 219, 1.0)"},name:"Header fill"},cutCorner:{type:"boolean",value:!1,name:"Cut corner",depends:{header:"both"}},oddEvenFill:{type:"boolean",value:!1,name:"Odd/even fill"},rowSecondaryFill:{type:"advanced-color",value:{type:"solid",color:"rgba(234, 241, 246, 1.0)"},name:"Row secondary fill",depends:{oddEvenFill:!0}},colWidths:{type:"custom",value:[33.3,33.3],hidden:!0},rowWidths:{type:"custom",value:[33.3,33.3],hidden:!0}},editorProps:{textSlotTabsDisabled:!0,contextMenu(e,t,i){const{row:n,col:r}=function(e,t,i){let n=0,r=0,s=0;for(let i=0;i<e.shapeProps.columns-1&&(r=i,s+=e.shapeProps.colWidths[i]*e.area.w/100,!(t<s));i++);t>s&&(r+=1),s=0;for(let t=0;t<e.shapeProps.rows-1&&(n=t,s+=e.shapeProps.rowWidths[t]*e.area.h/100,!(i<s));t++);return i>s&&(n+=1),{row:n,col:r}}(i,e,t),s=n+1,o=r+1;let a=[{name:`Insert column before #${o}`,clicked:()=>H(i,r)},{name:`Insert column after #${o}`,clicked:()=>H(i,r+1)},{name:`Insert row before #${s}`,clicked:()=>V(i,n)},{name:`Insert row after #${s}`,clicked:()=>V(i,n+1)}];return i.shapeProps.columns>1&&a.push({name:`Delete column #${o}`,iconClass:"fas fa-trash",clicked:()=>function(e,t){if(e.shapeProps.columns<2)return!1;const i=z(e);if(e.shapeProps.columns-=1,t<e.shapeProps.colWidths.length){const n=i[t];e.area.w=Math.max(0,e.area.w-n),e.shapeProps.colWidths.splice(t,1),i.splice(t,1)}else t===e.shapeProps.colWidths.length&&(e.shapeProps.colWidths.length-=1,e.area.w=Math.max(0,e.area.w-i[i.length-1]));Q(e,i);for(let i=t;i<e.shapeProps.columns;i++)for(let t=0;t<e.shapeProps.rows;t++)e.textSlots[`c_${t}_${i}`]=e.textSlots[`c_${t}_${i+1}`];for(let t=0;t<e.shapeProps.rows;t++)delete e.textSlots[`c_${t}_${e.shapeProps.columns}`];return!0}(i,r)}),i.shapeProps.rows>1&&a.push({name:`Delete row #${s}`,iconClass:"fas fa-trash",clicked:()=>function(e,t){if(e.shapeProps.rows<2)return!1;const i=U(e);e.shapeProps.rows-=1,t<e.shapeProps.rowWidths.length?(e.area.h=Math.max(0,e.area.h-i[t]),e.shapeProps.rowWidths.splice(t,1),i.splice(t,1)):t===e.shapeProps.rowWidths.length&&(e.shapeProps.rowWidths.length-=1,e.area.h=Math.max(0,e.area.h-i[i.length-1])),q(e,i);for(let i=t;i<e.shapeProps.rows;i++)for(let t=0;t<e.shapeProps.columns;t++)e.textSlots[`c_${i}_${t}`]=e.textSlots[`c_${i+1}_${t}`];for(let t=0;t<e.shapeProps.columns;t++)delete e.textSlots[`c_${e.shapeProps.rows}_${t}`];return!0}(i,n)}),a=a.concat([{name:"Copy text style to column",clicked:()=>function(e,t,i){const n=b.A.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.rows;r++)if(r!=t){const t=`c_${r}_${i}`,s=e.textSlots[t].text;e.textSlots[t]=E(E({},n),{},{text:s})}return!0}(i,n,r)},{name:"Copy text style to row",clicked:()=>function(e,t,i){const n=b.A.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.columns;r++)if(r!=i){const i=`c_${t}_${r}`,s=e.textSlots[i].text;e.textSlots[i]=E(E({},n),{},{text:s})}return!0}(i,n,r)},{name:"Copy text style to all cells",clicked:()=>function(e,t,i){const n=b.A.clone(e.textSlots[`c_${t}_${i}`]);for(let r=0;r<e.shapeProps.rows;r++)for(let s=0;s<e.shapeProps.columns;s++)if(s!==i||r!==t){const t=`c_${r}_${s}`,i=e.textSlots[t].text;e.textSlots[t]=E(E({},n),{},{text:i})}return!0}(i,n,r)}]),"none"!==i.shapeProps.header&&(a=a.concat([{name:"Copy text style to header cells",clicked:()=>function(e,t,i){const n=e.shapeProps.header,r=b.A.clone(e.textSlots[`c_${t}_${i}`]);for(let s=0;s<e.shapeProps.rows;s++)for(let o=0;o<e.shapeProps.columns;o++)if(!(("columns"!==n&&"both"!==n||0!==s)&&("rows"!==n&&"both"!==n||0!==o)||o===i&&s===t)){const t=`c_${s}_${o}`,i=e.textSlots[t].text;e.textSlots[t]=E(E({},r),{},{text:i})}return!0}(i,n,r)},{name:"Copy text style to regular cells",clicked:()=>function(e,t,i){const n=e.shapeProps.header,r=b.A.clone(e.textSlots[`c_${t}_${i}`]);for(let s=0;s<e.shapeProps.rows;s++)for(let o=0;o<e.shapeProps.columns;o++)if(("columns"!==n&&"both"!==n||0!==s)&&("rows"!==n&&"both"!==n||0!==o)&&(o!==i||s!==t)){const t=`c_${s}_${o}`,i=e.textSlots[t].text;e.textSlots[t]=E(E({},r),{},{text:i})}return!0}(i,n,r)}])),[{name:"Table",subOptions:a}]},shapePropsEditor:{component:I},editBoxControls:(e,t)=>{const i=[];return t.shapeProps.columns<D&&i.push({name:"Add Column",type:"button",hPlace:"right",vPlace:"center",iconClass:"fa-solid fa-plus",position:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.columns>=D||L(e,t,t.shapeProps.columns+1)}(e,t)}}),t.shapeProps.columns>1&&i.push({name:"Remove Column",type:"button",hPlace:"right",vPlace:"top",iconClass:"fa-solid fa-minus",position:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.columns<=1||L(e,t,t.shapeProps.columns-1)}(e,t)}}),t.shapeProps.rows<D&&i.push({name:"Add Row",type:"button",hPlace:"center",vPlace:"bottom",iconClass:"fa-solid fa-plus",position:{x:0,y:30},click:()=>{!function(e,t){t.shapeProps.rows>=D||B(e,t,t.shapeProps.rows+1)}(e,t)}}),t.shapeProps.rows>1&&i.push({name:"Remove Row",type:"button",hPlace:"left",vPlace:"bottom",iconClass:"fa-solid fa-minus",position:{x:30,y:0},click:()=>{!function(e,t){t.shapeProps.rows<=1||B(e,t,t.shapeProps.rows-1)}(e,t)}}),i}},scriptFunctions:function(e,t,i){return{setCellText(t,n,r){if(t<0||t>=i.shapeProps.rows)throw new Error(`Cannot set cell text in a table. Row (${t}) is out of bounds [0,${i.shapeProps.rows}]: `);if(n<0||n>=i.shapeProps.columns)throw new Error(`Cannot set cell text in a table. Cell (${n}) is out of bounds [0,${i.shapeProps.columns}]: `);const o=`c_${t}_${n}`;i.textSlots[o]?i.textSlots[o].text=""+r:(i.textSlots[o]={text:""+r},(0,$.AG)(i.textSlots[o])),s.A.item.changed.specific.$emit(e,i.id)},getCellText(e,t){if(e<0||e>=i.shapeProps.rows)throw new Error(`Cannot get cell text in a table. Row (${e}) is out of bounds [0,${i.shapeProps.rows}]: `);if(t<0||t>=i.shapeProps.columns)throw new Error(`Cannot get cell text in a table. Cell (${t}) is out of bounds [0,${i.shapeProps.columns}]: `);const n=`c_${e}_${t}`;return i.textSlots[n]?i.textSlots[n].text:""}}}},data:()=>({}),computed:{svgFill(){return(0,n.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},outlinePath(){return F(this.item)},gridLines(){const e=[];let t=0;const i="both"===this.item.shapeProps.header&&this.item.shapeProps.cutCorner,n=this.item.area.w*this.item.shapeProps.colWidths[0]/100,r=this.item.area.h*this.item.shapeProps.rowWidths[0]/100;for(let r=1;r<this.item.shapeProps.rows;r++)t+=this.item.shapeProps.rowWidths[r-1]*this.item.area.h/100,e.push({x1:1===r&&i?n:0,x2:this.item.area.w,y1:t,y2:t});t=0;for(let n=1;n<this.item.shapeProps.columns;n++)t+=this.item.shapeProps.colWidths[n-1]*this.item.area.w/100,e.push({x1:t,x2:t,y1:1===n&&i?r:0,y2:this.item.area.h});return e},cells(){const e=(0,n.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`),t=(0,n.fD)(this.item.shapeProps.headerFill,`fill-pattern-${this.item.id}-header`),i=(0,n.fD)(this.item.shapeProps.rowSecondaryFill,`fill-pattern-${this.item.id}-secondary-fill`),r=this.item.shapeProps.header;return j(this.item).map((n=>((0!==n.row||"columns"!==r&&"columns-single"!==r&&"both"!==r)&&(0!==n.col||"rows"!==r&&"rows-single"!==r&&"both"!==r)?this.item.shapeProps.oddEvenFill&&n.row%2==1?n.fill=i:n.fill=e:n.fill=t,n)))}}},G=(0,y.A)(X,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}-header`,fill:e.item.shapeProps.headerFill,area:e.item.area}}),e._v(" "),t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}-secondary-fill`,fill:e.item.shapeProps.rowSecondaryFill,area:e.item.area}}),e._v(" "),t("g",e._l(e.cells,(function(e){return t("rect",{attrs:{x:e.area.x,y:e.area.y,width:e.area.w,height:e.area.h,stroke:"none",fill:e.fill}})})),0),e._v(" "),"simple"===e.item.shapeProps.tableStyle?t("g",[t("path",{attrs:{d:e.outlinePath,stroke:e.item.shapeProps.stroke,"stroke-width":`${e.item.shapeProps.strokeSize}px`,fill:"none"}}),e._v(" "),e._l(e.gridLines,(function(i){return t("line",{attrs:{stroke:e.item.shapeProps.stroke,"stroke-width":`${e.item.shapeProps.strokeSize}px`,x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2}})}))],2):e._e()],1)}),[],!1,null,null,null).exports},7224:(e,t,i)=>{"use strict";i.d(t,{A:()=>d});var n=i(4912),r=i(7550),s=i(5999),o=i(8176),a=i(6935),l=i(2958);function c(e){const t=e.area.w,i=e.area.h,n=Math.min(e.shapeProps.cornerRadius,e.area.w/2,e.area.h/2);return`M ${t-n} ${i}  L ${n} ${i} a ${n} ${n} 0 0 1 ${-n} ${-n}  L 0 ${n}  a ${n} ${n} 0 0 1 ${n} ${-n}   L ${t-n} 0   a ${n} ${n} 0 0 1 ${n} ${n}  L ${t} ${i-n}   a ${n} ${n} 0 0 1 ${-n} ${n} Z`}const h={props:["item","editorId","mode"],components:{AdvancedFill:r.Ay},shapeConfig:{shapeType:"vue",id:"textfield",menuItems:[{group:"General",name:"Textfield",iconUrl:"/assets/images/items/textfield.svg",item:{cursor:"text",textSlots:{placeholder:{text:"",color:"rgba(160,160,160,1.0)",halign:"left"}}},previewArea:{x:5,y:5,w:200,h:40},size:{w:200,h:40}}],getPins:e=>(0,n.aO)(e),getTextSlots(e){const t=Math.max(0,e.shapeProps.cornerRadius);return[{name:"placeholder",area:{x:t,y:0,w:Math.max(0,e.area.w-2*t),h:e.area.h}}]},computePath:c,editorProps:{customTextRendering:!0,disableEventLayer:!0},controlPoints:{make:e=>({cornerRadius:{x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}}),handleDrag(e,t,i,n,r,s){"cornerRadius"===t&&(e.shapeProps.cornerRadius=Math.max(0,myMath.roundPrecise(e.area.w-Math.max(e.area.w/2,i+r),1)))}},args:{fill:{type:"advanced-color",value:{type:"solid",color:"rgba(255,255,255,1.0)"},name:"Fill"},textColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Text color"},strokeColor:{type:"color",value:"rgba(80, 80, 80, 1.0)",name:"Stroke color"},strokeSize:{type:"number",value:1,name:"Stroke size"},cornerRadius:{type:"number",value:5,name:"Corner radius",min:0},multiline:{type:"boolean",value:!1,name:"Multiline"},type:{type:"choice",value:"text",name:"Type",options:["text","number"],depends:{multiline:!1}}}},beforeMount(){o.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),o.A.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),o.A.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},beforeDestroy(){o.A.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),o.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),o.A.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled)},data(){return{hideTextSlot:null,placeholderTextStyle:this.createPlaceholderTextStyle(),inputStyle:this.createInputStyle()}},methods:{createInputStyle(){let e={};return Math.max(0,this.item.shapeProps.cornerRadius),this.item.textSlots&&this.item.textSlots.placeholder&&(e=(0,s.E)(this.item.textSlots.placeholder)),e.display="block",e.width="100%",e.height="100%",e.color=this.item.shapeProps.color,e.border="none",e.background="none",e.outline="none",e},onPlaceholderClick(){"view"===this.mode&&(this.hideTextSlot="placeholder",document.getElementById(`textfield-item-${this.item.id}`).focus())},onBlur(e){"view"===this.mode&&(e.target.value||(this.hideTextSlot=null))},onItemTextSlotEditTriggered(e,t,i,n){this.hideTextSlot=t},onItemTextSlotEditCanceled(e,t){this.hideTextSlot=null},onItemChanged(){"textfield"===this.item.shape&&(this.placeholderTextStyle=this.createPlaceholderTextStyle(),this.$forceUpdate())},createPlaceholderTextStyle(){let e={};const t=Math.max(0,this.item.shapeProps.cornerRadius);return this.item.textSlots&&this.item.textSlots.placeholder&&(e=(0,s.E)(this.item.textSlots.placeholder),e.width=`${Math.max(0,this.item.area.w-2*t)}px`,e.height=`${this.item.area.h}px`,e.cursor=this.item.cursor),e},onTextfieldInput(e){this.item.args||(this.item.args={}),this.item.args.value=e.target.value,o.A.item.userEvent.$emit(this.editorId,this.item.id,l.A.standardEvents.valueChange.id,this.item.args.value)}},computed:{shapePath(){return c(this.item)},svgFill(){return(0,r.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},sanitizedBodyText(){return this.item.textSlots&&this.item.textSlots.placeholder?(0,a.A)(this.item.textSlots.placeholder.text):""},itemInputValue(){return this.item.args&&this.item.args.hasOwnProperty("value")?this.item.args.value:""}}},d=(0,i(4486).A)(h,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("path",{attrs:{d:e.shapePath,"stroke-width":e.item.shapeProps.strokeSize+"px",stroke:e.item.shapeProps.strokeColor,fill:e.svgFill}}),e._v(" "),"view"===e.mode?t("foreignObject",{attrs:{x:e.item.shapeProps.cornerRadius,y:0,width:Math.max(0,e.item.area.w-2*e.item.shapeProps.cornerRadius),height:e.item.area.h}},[e.item.shapeProps.multiline?t("textarea",{style:e.inputStyle,attrs:{id:`textfield-item-${e.item.id}`},domProps:{value:e.itemInputValue},on:{blur:e.onBlur,input:e.onTextfieldInput}}):t("input",{style:e.inputStyle,attrs:{id:`textfield-item-${e.item.id}`,type:e.item.shapeProps.type},domProps:{value:e.itemInputValue},on:{blur:e.onBlur,input:e.onTextfieldInput}})]):e._e(),e._v(" "),"placeholder"===e.hideTextSlot||e.item.args&&e.item.args.value?e._e():t("foreignObject",{attrs:{x:e.item.shapeProps.cornerRadius,y:0,width:Math.max(0,e.item.area.w-2*e.item.shapeProps.cornerRadius),height:e.item.area.h},on:{click:e.onPlaceholderClick}},[t("div",{staticClass:"item-text-container",style:e.placeholderTextStyle,attrs:{xmlns:"http://www.w3.org/1999/xhtml"},domProps:{innerHTML:e._s(e.sanitizedBodyText)}})])],1)}),[],!1,null,null,null).exports},9545:(e,t,i)=>{"use strict";i.d(t,{M:()=>r,A:()=>o});var n=i(7550);function r(e,t){const i=t/4,n=2*t/3,r=Math.min(e/4,t/8);return`M ${e/2} ${2*r}  L ${e/2} ${n}  M 0 ${i} L ${e} ${i}  M 0 ${t} L ${e/2} ${n} M ${e/2} ${n} L ${e} ${t}  M ${e/2} ${r} m ${r} 0 a ${r},${r} 0 1,0 -${2*r},0 a ${r},${r} 0 1,0  ${2*r},0`}const s={props:["item"],shapeConfig:{shapeType:"vue",components:{AdvancedFill:n.Ay},id:"uml_actor",menuItems:[{group:"UML",name:"Actor",iconUrl:"/assets/images/items/uml-actor.svg",previewArea:{x:0,y:0,w:30,h:90,r:0}}],computeOutline:e=>`M 0 0  l ${e.area.w} 0  l 0 ${e.area.h}  l ${-e.area.w} 0 z`,getTextSlots:e=>[],args:{fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(240, 240, 240, 1.0)"}},strokeColor:{name:"Stroke",type:"color",value:"rgba(0, 0, 0, 1)"},strokeSize:{name:"Stroke Size",type:"number",value:1}}},computed:{shapePath(){return r(this.item.area.w,this.item.area.h)},fill(){return(0,n.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)}}},o=(0,i(4486).A)(s,(function(){var e=this,t=e._self._c;return t("g",[t("advanced-fill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.item.area}}),e._v(" "),t("path",{attrs:{d:e.shapePath,fill:e.fill,stroke:e.item.shapeProps.strokeColor,"stroke-width":e.item.shapeProps.strokeSize+"px"}})],1)}),[],!1,null,null,null).exports},1058:(e,t,i)=>{"use strict";i.d(t,{A:()=>h});var n=i(1570),r=i(8176),s=i(7550),o=i(4286),a=i(4912),l=i(9545);const c={props:["item","editorId"],components:{AdvancedFill:s.Ay},shapeConfig:{shapeType:"vue",id:"uml_lifeline",menuItems:[{group:"UML",name:"Lifeline",iconUrl:"/assets/images/items/lifeline-rect.svg",item:{shapeProps:{lifelineType:"rect"}},size:{w:120,h:300}},{group:"UML",name:"Lifeline Entity",iconUrl:"/assets/images/items/lifeline-entity.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"entity"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Border",iconUrl:"/assets/images/items/lifeline-border.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"border"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Control",iconUrl:"/assets/images/items/lifeline-control.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"control"}},size:{w:80,h:300}},{group:"UML",name:"Lifeline Actor",iconUrl:"/assets/images/items/lifeline-actor.svg",item:{area:{x:0,y:0,w:60,h:200},shapeProps:{lifelineType:"actor"}},size:{w:20,h:300},previewArea:{x:0,y:0,w:20,h:90,r:0}}],computeOutline(e){const t=n.A.clamp(e.shapeProps.size,0,e.area.h);return`M ${e.area.w/2} ${t} L ${e.area.w/2} ${e.area.h} `+(0,a.Ew)(e.area.w,t,e.shapeProps.cornerRadius)},getPins:e=>[],getTextSlots(e){const t=n.A.clamp(e.shapeProps.size,0,e.area.h);let i=null;if("entity"===e.shapeProps.lifelineType||"control"===e.shapeProps.lifelineType){const n=Math.min(e.area.w/2,t/2);i={x:e.area.w/2-n,y:0,w:2*n,h:2*n}}else if("border"===e.shapeProps.lifelineType){const n=Math.min(3*e.area.w/4/2,t/2);i={x:e.area.w/2-n,y:0,w:2*n,h:2*n}}else i={x:0,y:0,w:e.area.w,h:t};return[{name:"body",area:i}]},controlPoints:{make(e){const t={size:{x:e.area.w/2,y:n.A.clamp(e.shapeProps.size,0,e.area.h)}};return"rect"===e.shapeProps.lifelineType&&(t.cornerRadius={x:Math.min(e.area.w,Math.max(e.area.w-e.shapeProps.cornerRadius,e.area.w/2)),y:0}),t},handleDrag(e,t,i,r,s,o){if("cornerRadius"===t)e.shapeProps.cornerRadius=Math.max(0,n.A.roundPrecise(e.area.w-Math.max(e.area.w/2,i+s),1));else if("size"===t){if("entity"===e.shapeProps.lifelineType||"control"===e.shapeProps.lifelineType)return void(e.shapeProps.size=n.A.clamp(r+o,0,Math.min(e.area.h,e.area.w)));if("border"===e.shapeProps.lifelineType)return void(e.shapeProps.size=n.A.clamp(r+o,0,Math.min(e.area.h,3*e.area.w/4)));e.shapeProps.size=n.A.clamp(r+o,0,e.area.h)}}},args:{size:{name:"Size",type:"number",value:40,min:0},fill:{name:"Fill",type:"advanced-color",value:{type:"solid",color:"rgba(240, 240, 240, 1.0)"}},lifelineType:{name:"Type",type:"choice",value:"rect",options:["rect","entity","border","control","actor"]},strokeColor:{name:"Stroke",type:"color",value:"rgba(0, 0, 0, 1)"},rectStroke:{name:"Rect stroke",type:"boolean",value:!0,depends:{lifelineType:"rect"}},strokePattern:{type:"stroke-pattern",value:"dashed",name:"Stroke pattern"},strokeSize:{name:"Stroke Size",type:"number",value:2},cornerRadius:{name:"Stroke Size",type:"number",value:1,depends:{type:"rect"},min:0}}},beforeMount(){r.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged)},beforeDestroy(){r.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged)},methods:{onItemChanged(){"uml_lifeline"===this.item.shape&&this.$forceUpdate()}},computed:{shapePath(){return function(e){const t=n.A.clamp(e.shapeProps.size,0,e.area.h);if("entity"===e.shapeProps.lifelineType){const i=Math.min(e.area.w/2,t/2);return`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0  M ${e.area.w/2-i} ${2*i} l ${2*i} 0`}if("border"===e.shapeProps.lifelineType){let i=Math.min(e.area.w/2,t/2),n=i/3;const r=e.area.w/2;return i+n>r&&(i=3*r/4,n=r/4),`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0 M ${e.area.w/2-i-n} 0 l 0 ${2*i}M ${e.area.w/2-i-n} ${i} l ${n} 0`}if("control"===e.shapeProps.lifelineType){const i=Math.min(e.area.w/2,t/2),n=i/4;return`M ${e.area.w/2} ${i}  m ${i}, 0 a ${i},${i} 0 1,0 -${2*i},0 a ${i},${i} 0 1,0  ${2*i},0 M ${e.area.w/2} 0 l ${n} ${-n} M ${e.area.w/2} 0 l ${n} ${n}`}return"actor"===e.shapeProps.lifelineType?(0,l.M)(e.area.w,t):(0,a.Ew)(e.area.w,t,e.shapeProps.cornerRadius)}(this.item)},strokeDashArray(){return o.A.createDashArray(this.item.shapeProps.strokePattern,this.item.shapeProps.strokeSize)},svgFill(){return(0,s.fD)(this.item.shapeProps.fill,`fill-pattern-${this.item.id}`)},rectArea(){const e=n.A.clamp(this.item.shapeProps.size,0,this.item.area.h);return{x:0,y:0,w:this.item.area.w,h:e}},shapeStroke(){return"rect"!==this.item.shapeProps.lifelineType||this.item.shapeProps.rectStroke?this.item.shapeProps.strokeColor:"none"}}},h=(0,i(4486).A)(c,(function(){var e=this,t=e._self._c;return t("g",[t("AdvancedFill",{attrs:{fillId:`fill-pattern-${e.item.id}`,fill:e.item.shapeProps.fill,area:e.rectArea}}),e._v(" "),t("path",{attrs:{d:e.shapePath,stroke:e.shapeStroke,"stroke-width":e.item.shapeProps.strokeSize+"px",fill:e.svgFill}}),e._v(" "),t("line",{attrs:{x1:e.item.area.w/2,y1:Math.max(0,Math.min(e.item.shapeProps.size,e.item.area.h)),x2:e.item.area.w/2,y2:e.item.area.h,stroke:e.item.shapeProps.strokeColor,"stroke-dasharray":e.strokeDashArray,"stroke-dashoffset":e.item.meta.strokeOffset,"stroke-width":e.item.shapeProps.strokeSize+"px"}})],1)}),[],!1,null,null,null).exports},4486:(e,t,i)=>{"use strict";function n(e,t,i,n,r,s,o,a){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),o?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),r&&r.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=l):r&&(l=a?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var h=c.render;c.render=function(e,t){return l.call(t),h(e,t)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:e,options:c}}i.d(t,{A:()=>n})},6678:function(e,t,i){e.exports=function(){"use strict";var e=Object.freeze({}),t=Array.isArray;function n(e){return null==e}function r(e){return null!=e}function s(e){return!0===e}function o(e){return"string"==typeof e||"number"==typeof e||"symbol"==typeof e||"boolean"==typeof e}function a(e){return"function"==typeof e}function l(e){return null!==e&&"object"==typeof e}var c=Object.prototype.toString;function h(e){return"[object Object]"===c.call(e)}function d(e){var t=parseFloat(String(e));return t>=0&&Math.floor(t)===t&&isFinite(e)}function u(e){return r(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function p(e){return null==e?"":Array.isArray(e)||h(e)&&e.toString===c?JSON.stringify(e,f,2):String(e)}function f(e,t){return t&&t.__v_isRef?t.value:t}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e,t){for(var i=Object.create(null),n=e.split(","),r=0;r<n.length;r++)i[n[r]]=!0;return t?function(e){return i[e.toLowerCase()]}:function(e){return i[e]}}var y=g("slot,component",!0),v=g("key,ref,slot,slot-scope,is");function x(e,t){var i=e.length;if(i){if(t===e[i-1])return void(e.length=i-1);var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function w(e,t){return b.call(e,t)}function O(e){var t=Object.create(null);return function(i){return t[i]||(t[i]=e(i))}}var S=/-(\w)/g,k=O((function(e){return e.replace(S,(function(e,t){return t?t.toUpperCase():""}))})),P=O((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),C=/\B([A-Z])/g,A=O((function(e){return e.replace(C,"-$1").toLowerCase()})),I=Function.prototype.bind?function(e,t){return e.bind(t)}:function(e,t){function i(i){var n=arguments.length;return n?n>1?e.apply(t,arguments):e.call(t,i):e.call(t)}return i._length=e.length,i};function T(e,t){t=t||0;for(var i=e.length-t,n=new Array(i);i--;)n[i]=e[i+t];return n}function $(e,t){for(var i in t)e[i]=t[i];return e}function M(e){for(var t={},i=0;i<e.length;i++)e[i]&&$(t,e[i]);return t}function E(e,t,i){}var _=function(e,t,i){return!1},D=function(e){return e};function L(e,t){if(e===t)return!0;var i=l(e),n=l(t);if(!i||!n)return!i&&!n&&String(e)===String(t);try{var r=Array.isArray(e),s=Array.isArray(t);if(r&&s)return e.length===t.length&&e.every((function(e,i){return L(e,t[i])}));if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(r||s)return!1;var o=Object.keys(e),a=Object.keys(t);return o.length===a.length&&o.every((function(i){return L(e[i],t[i])}))}catch(e){return!1}}function B(e,t){for(var i=0;i<e.length;i++)if(L(e[i],t))return i;return-1}function R(e){var t=!1;return function(){t||(t=!0,e.apply(this,arguments))}}function N(e,t){return e===t?0===e&&1/e!=1/t:e==e||t==t}var F="data-server-rendered",j=["component","directive","filter"],z=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch","renderTracked","renderTriggered"],Q={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:_,isReservedAttr:_,isUnknownElement:_,getTagNamespace:E,parsePlatformTagName:D,mustUseProp:_,async:!0,_lifecycleHooks:z},U=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function q(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function H(e,t,i,n){Object.defineProperty(e,t,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var V=new RegExp("[^".concat(U.source,".$_\\d]")),W="__proto__"in{},X="undefined"!=typeof window,G=X&&window.navigator.userAgent.toLowerCase(),Y=G&&/msie|trident/.test(G),Z=G&&G.indexOf("msie 9.0")>0,K=G&&G.indexOf("edge/")>0;G&&G.indexOf("android");var J=G&&/iphone|ipad|ipod|ios/.test(G);G&&/chrome\/\d+/.test(G),G&&/phantomjs/.test(G);var ee,te=G&&G.match(/firefox\/(\d+)/),ie={}.watch,ne=!1;if(X)try{var re={};Object.defineProperty(re,"passive",{get:function(){ne=!0}}),window.addEventListener("test-passive",null,re)}catch(e){}var se=function(){return void 0===ee&&(ee=!X&&void 0!==i.g&&i.g.process&&"server"===i.g.process.env.VUE_ENV),ee},oe=X&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ae(e){return"function"==typeof e&&/native code/.test(e.toString())}var le,ce="undefined"!=typeof Symbol&&ae(Symbol)&&"undefined"!=typeof Reflect&&ae(Reflect.ownKeys);le="undefined"!=typeof Set&&ae(Set)?Set:function(){function e(){this.set=Object.create(null)}return e.prototype.has=function(e){return!0===this.set[e]},e.prototype.add=function(e){this.set[e]=!0},e.prototype.clear=function(){this.set=Object.create(null)},e}();var he=null;function de(e){void 0===e&&(e=null),e||he&&he._scope.off(),he=e,e&&e._scope.on()}var ue=function(){function e(e,t,i,n,r,s,o,a){this.tag=e,this.data=t,this.children=i,this.text=n,this.elm=r,this.ns=void 0,this.context=s,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=t&&t.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1}return Object.defineProperty(e.prototype,"child",{get:function(){return this.componentInstance},enumerable:!1,configurable:!0}),e}(),pe=function(e){void 0===e&&(e="");var t=new ue;return t.text=e,t.isComment=!0,t};function fe(e){return new ue(void 0,void 0,void 0,String(e))}function me(e){var t=new ue(e.tag,e.data,e.children&&e.children.slice(),e.text,e.elm,e.context,e.componentOptions,e.asyncFactory);return t.ns=e.ns,t.isStatic=e.isStatic,t.key=e.key,t.isComment=e.isComment,t.fnContext=e.fnContext,t.fnOptions=e.fnOptions,t.fnScopeId=e.fnScopeId,t.asyncMeta=e.asyncMeta,t.isCloned=!0,t}"function"==typeof SuppressedError&&SuppressedError;var ge=0,ye=[],ve=function(){for(var e=0;e<ye.length;e++){var t=ye[e];t.subs=t.subs.filter((function(e){return e})),t._pending=!1}ye.length=0},xe=function(){function e(){this._pending=!1,this.id=ge++,this.subs=[]}return e.prototype.addSub=function(e){this.subs.push(e)},e.prototype.removeSub=function(e){this.subs[this.subs.indexOf(e)]=null,this._pending||(this._pending=!0,ye.push(this))},e.prototype.depend=function(t){e.target&&e.target.addDep(this)},e.prototype.notify=function(e){for(var t=this.subs.filter((function(e){return e})),i=0,n=t.length;i<n;i++)t[i].update()},e}();xe.target=null;var be=[];function we(e){be.push(e),xe.target=e}function Oe(){be.pop(),xe.target=be[be.length-1]}var Se=Array.prototype,ke=Object.create(Se);["push","pop","shift","unshift","splice","sort","reverse"].forEach((function(e){var t=Se[e];H(ke,e,(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var r,s=t.apply(this,i),o=this.__ob__;switch(e){case"push":case"unshift":r=i;break;case"splice":r=i.slice(2)}return r&&o.observeArray(r),o.dep.notify(),s}))}));var Pe=Object.getOwnPropertyNames(ke),Ce={},Ae=!0;function Ie(e){Ae=e}var Te={notify:E,depend:E,addSub:E,removeSub:E},$e=function(){function e(e,i,n){if(void 0===i&&(i=!1),void 0===n&&(n=!1),this.value=e,this.shallow=i,this.mock=n,this.dep=n?Te:new xe,this.vmCount=0,H(e,"__ob__",this),t(e)){if(!n)if(W)e.__proto__=ke;else for(var r=0,s=Pe.length;r<s;r++)H(e,a=Pe[r],ke[a]);i||this.observeArray(e)}else{var o=Object.keys(e);for(r=0;r<o.length;r++){var a;Ee(e,a=o[r],Ce,void 0,i,n)}}}return e.prototype.observeArray=function(e){for(var t=0,i=e.length;t<i;t++)Me(e[t],!1,this.mock)},e}();function Me(e,i,n){return e&&w(e,"__ob__")&&e.__ob__ instanceof $e?e.__ob__:!Ae||!n&&se()||!t(e)&&!h(e)||!Object.isExtensible(e)||e.__v_skip||Qe(e)||e instanceof ue?void 0:new $e(e,i,n)}function Ee(e,i,n,r,s,o,a){void 0===a&&(a=!1);var l=new xe,c=Object.getOwnPropertyDescriptor(e,i);if(!c||!1!==c.configurable){var h=c&&c.get,d=c&&c.set;h&&!d||n!==Ce&&2!==arguments.length||(n=e[i]);var u=s?n&&n.__ob__:Me(n,!1,o);return Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var i=h?h.call(e):n;return xe.target&&(l.depend(),u&&(u.dep.depend(),t(i)&&Le(i))),Qe(i)&&!s?i.value:i},set:function(t){var i=h?h.call(e):n;if(N(i,t)){if(d)d.call(e,t);else{if(h)return;if(!s&&Qe(i)&&!Qe(t))return void(i.value=t);n=t}u=s?t&&t.__ob__:Me(t,!1,o),l.notify()}}}),l}}function _e(e,i,n){if(!je(e)){var r=e.__ob__;return t(e)&&d(i)?(e.length=Math.max(e.length,i),e.splice(i,1,n),r&&!r.shallow&&r.mock&&Me(n,!1,!0),n):i in e&&!(i in Object.prototype)?(e[i]=n,n):e._isVue||r&&r.vmCount?n:r?(Ee(r.value,i,n,void 0,r.shallow,r.mock),r.dep.notify(),n):(e[i]=n,n)}}function De(e,i){if(t(e)&&d(i))e.splice(i,1);else{var n=e.__ob__;e._isVue||n&&n.vmCount||je(e)||w(e,i)&&(delete e[i],n&&n.dep.notify())}}function Le(e){for(var i=void 0,n=0,r=e.length;n<r;n++)(i=e[n])&&i.__ob__&&i.__ob__.dep.depend(),t(i)&&Le(i)}function Be(e){return Re(e,!0),H(e,"__v_isShallow",!0),e}function Re(e,t){je(e)||Me(e,t,se())}function Ne(e){return je(e)?Ne(e.__v_raw):!(!e||!e.__ob__)}function Fe(e){return!(!e||!e.__v_isShallow)}function je(e){return!(!e||!e.__v_isReadonly)}var ze="__v_isRef";function Qe(e){return!(!e||!0!==e.__v_isRef)}function Ue(e,t){if(Qe(e))return e;var i={};return H(i,ze,!0),H(i,"__v_isShallow",t),H(i,"dep",Ee(i,"value",e,null,t,se())),i}function qe(e,t,i){Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var e=t[i];if(Qe(e))return e.value;var n=e&&e.__ob__;return n&&n.dep.depend(),e},set:function(e){var n=t[i];Qe(n)&&!Qe(e)?n.value=e:t[i]=e}})}function He(e,t,i){var n=e[t];if(Qe(n))return n;var r={get value(){var n=e[t];return void 0===n?i:n},set value(i){e[t]=i}};return H(r,ze,!0),r}var Ve="__v_rawToReadonly",We="__v_rawToShallowReadonly";function Xe(e){return Ge(e,!1)}function Ge(e,t){if(!h(e))return e;if(je(e))return e;var i=t?We:Ve,n=e[i];if(n)return n;var r=Object.create(Object.getPrototypeOf(e));H(e,i,r),H(r,"__v_isReadonly",!0),H(r,"__v_raw",e),Qe(e)&&H(r,ze,!0),(t||Fe(e))&&H(r,"__v_isShallow",!0);for(var s=Object.keys(e),o=0;o<s.length;o++)Ye(r,e,s[o],t);return r}function Ye(e,t,i,n){Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:function(){var e=t[i];return n||!h(e)?e:Xe(e)},set:function(){}})}var Ze=O((function(e){var t="&"===e.charAt(0),i="~"===(e=t?e.slice(1):e).charAt(0),n="!"===(e=i?e.slice(1):e).charAt(0);return{name:e=n?e.slice(1):e,once:i,capture:n,passive:t}}));function Ke(e,i){function n(){var e=n.fns;if(!t(e))return xi(e,null,arguments,i,"v-on handler");for(var r=e.slice(),s=0;s<r.length;s++)xi(r[s],null,arguments,i,"v-on handler")}return n.fns=e,n}function Je(e,t,i,r,o,a){var l,c,h,d;for(l in e)c=e[l],h=t[l],d=Ze(l),n(c)||(n(h)?(n(c.fns)&&(c=e[l]=Ke(c,a)),s(d.once)&&(c=e[l]=o(d.name,c,d.capture)),i(d.name,c,d.capture,d.passive,d.params)):c!==h&&(h.fns=c,e[l]=h));for(l in t)n(e[l])&&r((d=Ze(l)).name,t[l],d.capture)}function et(e,t,i){var o;e instanceof ue&&(e=e.data.hook||(e.data.hook={}));var a=e[t];function l(){i.apply(this,arguments),x(o.fns,l)}n(a)?o=Ke([l]):r(a.fns)&&s(a.merged)?(o=a).fns.push(l):o=Ke([a,l]),o.merged=!0,e[t]=o}function tt(e,t,i,n,s){if(r(t)){if(w(t,i))return e[i]=t[i],s||delete t[i],!0;if(w(t,n))return e[i]=t[n],s||delete t[n],!0}return!1}function it(e){return o(e)?[fe(e)]:t(e)?rt(e):void 0}function nt(e){return r(e)&&r(e.text)&&!1===e.isComment}function rt(e,i){var a,l,c,h,d=[];for(a=0;a<e.length;a++)n(l=e[a])||"boolean"==typeof l||(h=d[c=d.length-1],t(l)?l.length>0&&(nt((l=rt(l,"".concat(i||"","_").concat(a)))[0])&&nt(h)&&(d[c]=fe(h.text+l[0].text),l.shift()),d.push.apply(d,l)):o(l)?nt(h)?d[c]=fe(h.text+l):""!==l&&d.push(fe(l)):nt(l)&&nt(h)?d[c]=fe(h.text+l.text):(s(e._isVList)&&r(l.tag)&&n(l.key)&&r(i)&&(l.key="__vlist".concat(i,"_").concat(a,"__")),d.push(l)));return d}var st=1,ot=2;function at(e,i,n,c,h,d){return(t(n)||o(n))&&(h=c,c=n,n=void 0),s(d)&&(h=ot),function(e,i,n,s,o){if(r(n)&&r(n.__ob__))return pe();if(r(n)&&r(n.is)&&(i=n.is),!i)return pe();var c,h;if(t(s)&&a(s[0])&&((n=n||{}).scopedSlots={default:s[0]},s.length=0),o===ot?s=it(s):o===st&&(s=function(e){for(var i=0;i<e.length;i++)if(t(e[i]))return Array.prototype.concat.apply([],e);return e}(s)),"string"==typeof i){var d=void 0;h=e.$vnode&&e.$vnode.ns||Q.getTagNamespace(i),c=Q.isReservedTag(i)?new ue(Q.parsePlatformTagName(i),n,s,void 0,void 0,e):n&&n.pre||!r(d=Cn(e.$options,"components",i))?new ue(i,n,s,void 0,void 0,e):gn(d,n,e,s,i)}else c=gn(i,n,e,s);return t(c)?c:r(c)?(r(h)&&lt(c,h),r(n)&&function(e){l(e.style)&&Xi(e.style),l(e.class)&&Xi(e.class)}(n),c):pe()}(e,i,n,c,h)}function lt(e,t,i){if(e.ns=t,"foreignObject"===e.tag&&(t=void 0,i=!0),r(e.children))for(var o=0,a=e.children.length;o<a;o++){var l=e.children[o];r(l.tag)&&(n(l.ns)||s(i)&&"svg"!==l.tag)&&lt(l,t,i)}}function ct(e,i){var n,s,o,a,c=null;if(t(e)||"string"==typeof e)for(c=new Array(e.length),n=0,s=e.length;n<s;n++)c[n]=i(e[n],n);else if("number"==typeof e)for(c=new Array(e),n=0;n<e;n++)c[n]=i(n+1,n);else if(l(e))if(ce&&e[Symbol.iterator]){c=[];for(var h=e[Symbol.iterator](),d=h.next();!d.done;)c.push(i(d.value,c.length)),d=h.next()}else for(o=Object.keys(e),c=new Array(o.length),n=0,s=o.length;n<s;n++)a=o[n],c[n]=i(e[a],a,n);return r(c)||(c=[]),c._isVList=!0,c}function ht(e,t,i,n){var r,s=this.$scopedSlots[e];s?(i=i||{},n&&(i=$($({},n),i)),r=s(i)||(a(t)?t():t)):r=this.$slots[e]||(a(t)?t():t);var o=i&&i.slot;return o?this.$createElement("template",{slot:o},r):r}function dt(e){return Cn(this.$options,"filters",e)||D}function ut(e,i){return t(e)?-1===e.indexOf(i):e!==i}function pt(e,t,i,n,r){var s=Q.keyCodes[t]||i;return r&&n&&!Q.keyCodes[t]?ut(r,n):s?ut(s,e):n?A(n)!==t:void 0===e}function ft(e,i,n,r,s){if(n&&l(n)){t(n)&&(n=M(n));var o=void 0,a=function(t){if("class"===t||"style"===t||v(t))o=e;else{var a=e.attrs&&e.attrs.type;o=r||Q.mustUseProp(i,a,t)?e.domProps||(e.domProps={}):e.attrs||(e.attrs={})}var l=k(t),c=A(t);l in o||c in o||(o[t]=n[t],s&&((e.on||(e.on={}))["update:".concat(t)]=function(e){n[t]=e}))};for(var c in n)a(c)}return e}function mt(e,t){var i=this._staticTrees||(this._staticTrees=[]),n=i[e];return n&&!t||yt(n=i[e]=this.$options.staticRenderFns[e].call(this._renderProxy,this._c,this),"__static__".concat(e),!1),n}function gt(e,t,i){return yt(e,"__once__".concat(t).concat(i?"_".concat(i):""),!0),e}function yt(e,i,n){if(t(e))for(var r=0;r<e.length;r++)e[r]&&"string"!=typeof e[r]&&vt(e[r],"".concat(i,"_").concat(r),n);else vt(e,i,n)}function vt(e,t,i){e.isStatic=!0,e.key=t,e.isOnce=i}function xt(e,t){if(t&&h(t)){var i=e.on=e.on?$({},e.on):{};for(var n in t){var r=i[n],s=t[n];i[n]=r?[].concat(r,s):s}}return e}function bt(e,i,n,r){i=i||{$stable:!n};for(var s=0;s<e.length;s++){var o=e[s];t(o)?bt(o,i,n):o&&(o.proxy&&(o.fn.proxy=!0),i[o.key]=o.fn)}return r&&(i.$key=r),i}function wt(e,t){for(var i=0;i<t.length;i+=2){var n=t[i];"string"==typeof n&&n&&(e[t[i]]=t[i+1])}return e}function Ot(e,t){return"string"==typeof e?t+e:e}function St(e){e._o=gt,e._n=m,e._s=p,e._l=ct,e._t=ht,e._q=L,e._i=B,e._m=mt,e._f=dt,e._k=pt,e._b=ft,e._v=fe,e._e=pe,e._u=bt,e._g=xt,e._d=wt,e._p=Ot}function kt(e,t){if(!e||!e.length)return{};for(var i={},n=0,r=e.length;n<r;n++){var s=e[n],o=s.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,s.context!==t&&s.fnContext!==t||!o||null==o.slot)(i.default||(i.default=[])).push(s);else{var a=o.slot,l=i[a]||(i[a]=[]);"template"===s.tag?l.push.apply(l,s.children||[]):l.push(s)}}for(var c in i)i[c].every(Pt)&&delete i[c];return i}function Pt(e){return e.isComment&&!e.asyncFactory||" "===e.text}function Ct(e){return e.isComment&&e.asyncFactory}function At(t,i,n,r){var s,o=Object.keys(n).length>0,a=i?!!i.$stable:!o,l=i&&i.$key;if(i){if(i._normalized)return i._normalized;if(a&&r&&r!==e&&l===r.$key&&!o&&!r.$hasNormal)return r;for(var c in s={},i)i[c]&&"$"!==c[0]&&(s[c]=It(t,n,c,i[c]))}else s={};for(var h in n)h in s||(s[h]=Tt(n,h));return i&&Object.isExtensible(i)&&(i._normalized=s),H(s,"$stable",a),H(s,"$key",l),H(s,"$hasNormal",o),s}function It(e,i,n,r){var s=function(){var i=he;de(e);var n=arguments.length?r.apply(null,arguments):r({}),s=(n=n&&"object"==typeof n&&!t(n)?[n]:it(n))&&n[0];return de(i),n&&(!s||1===n.length&&s.isComment&&!Ct(s))?void 0:n};return r.proxy&&Object.defineProperty(i,n,{get:s,enumerable:!0,configurable:!0}),s}function Tt(e,t){return function(){return e[t]}}function $t(t){return{get attrs(){if(!t._attrsProxy){var i=t._attrsProxy={};H(i,"_v_attr_proxy",!0),Mt(i,t.$attrs,e,t,"$attrs")}return t._attrsProxy},get listeners(){return t._listenersProxy||Mt(t._listenersProxy={},t.$listeners,e,t,"$listeners"),t._listenersProxy},get slots(){return function(e){return e._slotsProxy||_t(e._slotsProxy={},e.$scopedSlots),e._slotsProxy}(t)},emit:I(t.$emit,t),expose:function(e){e&&Object.keys(e).forEach((function(i){return qe(t,e,i)}))}}}function Mt(e,t,i,n,r){var s=!1;for(var o in t)o in e?t[o]!==i[o]&&(s=!0):(s=!0,Et(e,o,n,r));for(var o in e)o in t||(s=!0,delete e[o]);return s}function Et(e,t,i,n){Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){return i[n][t]}})}function _t(e,t){for(var i in t)e[i]=t[i];for(var i in e)i in t||delete e[i]}function Dt(){var e=he;return e._setupContext||(e._setupContext=$t(e))}var Lt,Bt,Rt=null;function Nt(e,t){return(e.__esModule||ce&&"Module"===e[Symbol.toStringTag])&&(e=e.default),l(e)?t.extend(e):e}function Ft(e){if(t(e))for(var i=0;i<e.length;i++){var n=e[i];if(r(n)&&(r(n.componentOptions)||Ct(n)))return n}}function jt(e,t){Lt.$on(e,t)}function zt(e,t){Lt.$off(e,t)}function Qt(e,t){var i=Lt;return function n(){null!==t.apply(null,arguments)&&i.$off(e,n)}}function Ut(e,t,i){Lt=e,Je(t,i||{},jt,zt,Qt,e),Lt=void 0}var qt=function(){function e(e){void 0===e&&(e=!1),this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=Bt,!e&&Bt&&(this.index=(Bt.scopes||(Bt.scopes=[])).push(this)-1)}return e.prototype.run=function(e){if(this.active){var t=Bt;try{return Bt=this,e()}finally{Bt=t}}},e.prototype.on=function(){Bt=this},e.prototype.off=function(){Bt=this.parent},e.prototype.stop=function(e){if(this.active){var t=void 0,i=void 0;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].teardown();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){var n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this.active=!1}},e}();function Ht(){return Bt}var Vt=null;function Wt(e){var t=Vt;return Vt=e,function(){Vt=t}}function Xt(e){for(;e&&(e=e.$parent);)if(e._inactive)return!0;return!1}function Gt(e,t){if(t){if(e._directInactive=!1,Xt(e))return}else if(e._directInactive)return;if(e._inactive||null===e._inactive){e._inactive=!1;for(var i=0;i<e.$children.length;i++)Gt(e.$children[i]);Zt(e,"activated")}}function Yt(e,t){if(!(t&&(e._directInactive=!0,Xt(e))||e._inactive)){e._inactive=!0;for(var i=0;i<e.$children.length;i++)Yt(e.$children[i]);Zt(e,"deactivated")}}function Zt(e,t,i,n){void 0===n&&(n=!0),we();var r=he,s=Ht();n&&de(e);var o=e.$options[t],a="".concat(t," hook");if(o)for(var l=0,c=o.length;l<c;l++)xi(o[l],e,i||null,e,a);e._hasHookEvent&&e.$emit("hook:"+t),n&&(de(r),s&&s.on()),Oe()}var Kt=[],Jt=[],ei={},ti=!1,ii=!1,ni=0,ri=0,si=Date.now;if(X&&!Y){var oi=window.performance;oi&&"function"==typeof oi.now&&si()>document.createEvent("Event").timeStamp&&(si=function(){return oi.now()})}var ai=function(e,t){if(e.post){if(!t.post)return 1}else if(t.post)return-1;return e.id-t.id};function li(){var e,t;for(ri=si(),ii=!0,Kt.sort(ai),ni=0;ni<Kt.length;ni++)(e=Kt[ni]).before&&e.before(),t=e.id,ei[t]=null,e.run();var i=Jt.slice(),n=Kt.slice();ni=Kt.length=Jt.length=0,ei={},ti=ii=!1,function(e){for(var t=0;t<e.length;t++)e[t]._inactive=!0,Gt(e[t],!0)}(i),function(e){for(var t=e.length;t--;){var i=e[t],n=i.vm;n&&n._watcher===i&&n._isMounted&&!n._isDestroyed&&Zt(n,"updated")}}(n),ve(),oe&&Q.devtools&&oe.emit("flush")}function ci(e){var t=e.id;if(null==ei[t]&&(e!==xe.target||!e.noRecurse)){if(ei[t]=!0,ii){for(var i=Kt.length-1;i>ni&&Kt[i].id>e.id;)i--;Kt.splice(i+1,0,e)}else Kt.push(e);ti||(ti=!0,Mi(li))}}var hi="watcher",di="".concat(hi," callback"),ui="".concat(hi," getter"),pi="".concat(hi," cleanup");function fi(e,t){return gi(e,null,{flush:"post"})}var mi={};function gi(i,n,r){var s=void 0===r?e:r,o=s.immediate,l=s.deep,c=s.flush,h=void 0===c?"pre":c;s.onTrack,s.onTrigger;var d,u,p=he,f=function(e,t,i){void 0===i&&(i=null);var n=xi(e,null,i,p,t);return l&&n&&n.__ob__&&n.__ob__.dep.depend(),n},m=!1,g=!1;if(Qe(i)?(d=function(){return i.value},m=Fe(i)):Ne(i)?(d=function(){return i.__ob__.dep.depend(),i},l=!0):t(i)?(g=!0,m=i.some((function(e){return Ne(e)||Fe(e)})),d=function(){return i.map((function(e){return Qe(e)?e.value:Ne(e)?(e.__ob__.dep.depend(),Xi(e)):a(e)?f(e,ui):void 0}))}):d=a(i)?n?function(){return f(i,ui)}:function(){if(!p||!p._isDestroyed)return u&&u(),f(i,hi,[v])}:E,n&&l){var y=d;d=function(){return Xi(y())}}var v=function(e){u=x.onStop=function(){f(e,pi)}};if(se())return v=E,n?o&&f(n,di,[d(),g?[]:void 0,v]):d(),E;var x=new Zi(he,d,E,{lazy:!0});x.noRecurse=!n;var b=g?[]:mi;return x.run=function(){if(x.active)if(n){var e=x.get();(l||m||(g?e.some((function(e,t){return N(e,b[t])})):N(e,b)))&&(u&&u(),f(n,di,[e,b===mi?void 0:b,v]),b=e)}else x.get()},"sync"===h?x.update=x.run:"post"===h?(x.post=!0,x.update=function(){return ci(x)}):x.update=function(){if(p&&p===he&&!p._isMounted){var e=p._preWatchers||(p._preWatchers=[]);e.indexOf(x)<0&&e.push(x)}else ci(x)},n?o?x.run():b=x.get():"post"===h&&p?p.$once("hook:mounted",(function(){return x.get()})):x.get(),function(){x.teardown()}}function yi(e){var t=e._provided,i=e.$parent&&e.$parent._provided;return i===t?e._provided=Object.create(i):t}function vi(e,t,i){we();try{if(t)for(var n=t;n=n.$parent;){var r=n.$options.errorCaptured;if(r)for(var s=0;s<r.length;s++)try{if(!1===r[s].call(n,e,t,i))return}catch(e){bi(e,n,"errorCaptured hook")}}bi(e,t,i)}finally{Oe()}}function xi(e,t,i,n,r){var s;try{(s=i?e.apply(t,i):e.call(t))&&!s._isVue&&u(s)&&!s._handled&&(s.catch((function(e){return vi(e,n,r+" (Promise/async)")})),s._handled=!0)}catch(e){vi(e,n,r)}return s}function bi(e,t,i){if(Q.errorHandler)try{return Q.errorHandler.call(null,e,t,i)}catch(t){t!==e&&wi(t)}wi(e)}function wi(e,t,i){if(!X||"undefined"==typeof console)throw e;console.error(e)}var Oi,Si=!1,ki=[],Pi=!1;function Ci(){Pi=!1;var e=ki.slice(0);ki.length=0;for(var t=0;t<e.length;t++)e[t]()}if("undefined"!=typeof Promise&&ae(Promise)){var Ai=Promise.resolve();Oi=function(){Ai.then(Ci),J&&setTimeout(E)},Si=!0}else if(Y||"undefined"==typeof MutationObserver||!ae(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Oi="undefined"!=typeof setImmediate&&ae(setImmediate)?function(){setImmediate(Ci)}:function(){setTimeout(Ci,0)};else{var Ii=1,Ti=new MutationObserver(Ci),$i=document.createTextNode(String(Ii));Ti.observe($i,{characterData:!0}),Oi=function(){Ii=(Ii+1)%2,$i.data=String(Ii)},Si=!0}function Mi(e,t){var i;if(ki.push((function(){if(e)try{e.call(t)}catch(e){vi(e,t,"nextTick")}else i&&i(t)})),Pi||(Pi=!0,Oi()),!e&&"undefined"!=typeof Promise)return new Promise((function(e){i=e}))}function Ei(e){return function(t,i){if(void 0===i&&(i=he),i)return function(e,t,i){var n=e.$options;n[t]=On(n[t],i)}(i,e,t)}}var _i=Ei("beforeMount"),Di=Ei("mounted"),Li=Ei("beforeUpdate"),Bi=Ei("updated"),Ri=Ei("beforeDestroy"),Ni=Ei("destroyed"),Fi=Ei("activated"),ji=Ei("deactivated"),zi=Ei("serverPrefetch"),Qi=Ei("renderTracked"),Ui=Ei("renderTriggered"),qi=Ei("errorCaptured"),Hi="2.7.16",Vi=Object.freeze({__proto__:null,version:Hi,defineComponent:function(e){return e},ref:function(e){return Ue(e,!1)},shallowRef:function(e){return Ue(e,!0)},isRef:Qe,toRef:He,toRefs:function(e){var i=t(e)?new Array(e.length):{};for(var n in e)i[n]=He(e,n);return i},unref:function(e){return Qe(e)?e.value:e},proxyRefs:function(e){if(Ne(e))return e;for(var t={},i=Object.keys(e),n=0;n<i.length;n++)qe(t,e,i[n]);return t},customRef:function(e){var t=new xe,i=e((function(){t.depend()}),(function(){t.notify()})),n=i.get,r=i.set,s={get value(){return n()},set value(e){r(e)}};return H(s,ze,!0),s},triggerRef:function(e){e.dep&&e.dep.notify()},reactive:function(e){return Re(e,!1),e},isReactive:Ne,isReadonly:je,isShallow:Fe,isProxy:function(e){return Ne(e)||je(e)},shallowReactive:Be,markRaw:function(e){return Object.isExtensible(e)&&H(e,"__v_skip",!0),e},toRaw:function e(t){var i=t&&t.__v_raw;return i?e(i):t},readonly:Xe,shallowReadonly:function(e){return Ge(e,!0)},computed:function(e,t){var i,n,r=a(e);r?(i=e,n=E):(i=e.get,n=e.set);var s=se()?null:new Zi(he,i,E,{lazy:!0}),o={effect:s,get value(){return s?(s.dirty&&s.evaluate(),xe.target&&s.depend(),s.value):i()},set value(e){n(e)}};return H(o,ze,!0),H(o,"__v_isReadonly",r),o},watch:function(e,t,i){return gi(e,t,i)},watchEffect:function(e,t){return gi(e,null,t)},watchPostEffect:fi,watchSyncEffect:function(e,t){return gi(e,null,{flush:"sync"})},EffectScope:qt,effectScope:function(e){return new qt(e)},onScopeDispose:function(e){Bt&&Bt.cleanups.push(e)},getCurrentScope:Ht,provide:function(e,t){he&&(yi(he)[e]=t)},inject:function(e,t,i){void 0===i&&(i=!1);var n=he;if(n){var r=n.$parent&&n.$parent._provided;if(r&&e in r)return r[e];if(arguments.length>1)return i&&a(t)?t.call(n):t}},h:function(e,t,i){return at(he,e,t,i,2,!0)},getCurrentInstance:function(){return he&&{proxy:he}},useSlots:function(){return Dt().slots},useAttrs:function(){return Dt().attrs},useListeners:function(){return Dt().listeners},mergeDefaults:function(e,i){var n=t(e)?e.reduce((function(e,t){return e[t]={},e}),{}):e;for(var r in i){var s=n[r];s?t(s)||a(s)?n[r]={type:s,default:i[r]}:s.default=i[r]:null===s&&(n[r]={default:i[r]})}return n},nextTick:Mi,set:_e,del:De,useCssModule:function(t){return e},useCssVars:function(e){if(X){var t=he;t&&fi((function(){var i=t.$el,n=e(t,t._setupProxy);if(i&&1===i.nodeType){var r=i.style;for(var s in n)r.setProperty("--".concat(s),n[s])}}))}},defineAsyncComponent:function(e){a(e)&&(e={loader:e});var t=e.loader,i=e.loadingComponent,n=e.errorComponent,r=e.delay,s=void 0===r?200:r,o=e.timeout;e.suspensible;var l=e.onError,c=null,h=0,d=function(){var e;return c||(e=c=t().catch((function(e){if(e=e instanceof Error?e:new Error(String(e)),l)return new Promise((function(t,i){l(e,(function(){return t((h++,c=null,d()))}),(function(){return i(e)}),h+1)}));throw e})).then((function(t){return e!==c&&c?c:(t&&(t.__esModule||"Module"===t[Symbol.toStringTag])&&(t=t.default),t)})))};return function(){return{component:d(),delay:s,timeout:o,error:n,loading:i}}},onBeforeMount:_i,onMounted:Di,onBeforeUpdate:Li,onUpdated:Bi,onBeforeUnmount:Ri,onUnmounted:Ni,onActivated:Fi,onDeactivated:ji,onServerPrefetch:zi,onRenderTracked:Qi,onRenderTriggered:Ui,onErrorCaptured:function(e,t){void 0===t&&(t=he),qi(e,t)}}),Wi=new le;function Xi(e){return Gi(e,Wi),Wi.clear(),e}function Gi(e,i){var n,r,s=t(e);if(!(!s&&!l(e)||e.__v_skip||Object.isFrozen(e)||e instanceof ue)){if(e.__ob__){var o=e.__ob__.dep.id;if(i.has(o))return;i.add(o)}if(s)for(n=e.length;n--;)Gi(e[n],i);else if(Qe(e))Gi(e.value,i);else for(n=(r=Object.keys(e)).length;n--;)Gi(e[r[n]],i)}}var Yi=0,Zi=function(){function e(e,t,i,n,r){!function(e,t){void 0===t&&(t=Bt),t&&t.active&&t.effects.push(e)}(this,Bt&&!Bt._vm?Bt:e?e._scope:void 0),(this.vm=e)&&r&&(e._watcher=this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync,this.before=n.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++Yi,this.active=!0,this.post=!1,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new le,this.newDepIds=new le,this.expression="",a(t)?this.getter=t:(this.getter=function(e){if(!V.test(e)){var t=e.split(".");return function(e){for(var i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e}}}(t),this.getter||(this.getter=E)),this.value=this.lazy?void 0:this.get()}return e.prototype.get=function(){var e;we(this);var t=this.vm;try{e=this.getter.call(t,t)}catch(e){if(!this.user)throw e;vi(e,t,'getter for watcher "'.concat(this.expression,'"'))}finally{this.deep&&Xi(e),Oe(),this.cleanupDeps()}return e},e.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},e.prototype.cleanupDeps=function(){for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},e.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ci(this)},e.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||l(e)||this.deep){var t=this.value;if(this.value=e,this.user){var i='callback for watcher "'.concat(this.expression,'"');xi(this.cb,this.vm,[e,t],this.vm,i)}else this.cb.call(this.vm,e,t)}}},e.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},e.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},e.prototype.teardown=function(){if(this.vm&&!this.vm._isBeingDestroyed&&x(this.vm._scope.effects,this),this.active){for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.onStop&&this.onStop()}},e}(),Ki={enumerable:!0,configurable:!0,get:E,set:E};function Ji(e,t,i){Ki.get=function(){return this[t][i]},Ki.set=function(e){this[t][i]=e},Object.defineProperty(e,i,Ki)}function en(e){var i=e.$options;if(i.props&&function(e,t){var i=e.$options.propsData||{},n=e._props=Be({}),r=e.$options._propKeys=[];!e.$parent||Ie(!1);var s=function(s){r.push(s);var o=An(s,t,i,e);Ee(n,s,o,void 0,!0),s in e||Ji(e,"_props",s)};for(var o in t)s(o);Ie(!0)}(e,i.props),function(e){var t=e.$options,i=t.setup;if(i){var n=e._setupContext=$t(e);de(e),we();var r=xi(i,null,[e._props||Be({}),n],e,"setup");if(Oe(),de(),a(r))t.render=r;else if(l(r))if(e._setupState=r,r.__sfc){var s=e._setupProxy={};for(var o in r)"__sfc"!==o&&qe(s,r,o)}else for(var o in r)q(o)||qe(e,r,o)}}(e),i.methods&&function(e,t){for(var i in e.$options.props,t)e[i]="function"!=typeof t[i]?E:I(t[i],e)}(e,i.methods),i.data)!function(e){var t=e.$options.data;h(t=e._data=a(t)?function(e,t){we();try{return e.call(t,t)}catch(e){return vi(e,t,"data()"),{}}finally{Oe()}}(t,e):t||{})||(t={});var i=Object.keys(t),n=e.$options.props;e.$options.methods;for(var r=i.length;r--;){var s=i[r];n&&w(n,s)||q(s)||Ji(e,"_data",s)}var o=Me(t);o&&o.vmCount++}(e);else{var n=Me(e._data={});n&&n.vmCount++}i.computed&&function(e,t){var i=e._computedWatchers=Object.create(null),n=se();for(var r in t){var s=t[r],o=a(s)?s:s.get;n||(i[r]=new Zi(e,o||E,E,tn)),r in e||nn(e,r,s)}}(e,i.computed),i.watch&&i.watch!==ie&&function(e,i){for(var n in i){var r=i[n];if(t(r))for(var s=0;s<r.length;s++)on(e,n,r[s]);else on(e,n,r)}}(e,i.watch)}var tn={lazy:!0};function nn(e,t,i){var n=!se();a(i)?(Ki.get=n?rn(t):sn(i),Ki.set=E):(Ki.get=i.get?n&&!1!==i.cache?rn(t):sn(i.get):E,Ki.set=i.set||E),Object.defineProperty(e,t,Ki)}function rn(e){return function(){var t=this._computedWatchers&&this._computedWatchers[e];if(t)return t.dirty&&t.evaluate(),xe.target&&t.depend(),t.value}}function sn(e){return function(){return e.call(this,this)}}function on(e,t,i,n){return h(i)&&(n=i,i=i.handler),"string"==typeof i&&(i=e[i]),e.$watch(t,i,n)}function an(e,t){if(e){for(var i=Object.create(null),n=ce?Reflect.ownKeys(e):Object.keys(e),r=0;r<n.length;r++){var s=n[r];if("__ob__"!==s){var o=e[s].from;if(o in t._provided)i[s]=t._provided[o];else if("default"in e[s]){var l=e[s].default;i[s]=a(l)?l.call(t):l}}}return i}}var ln=0;function cn(e){var t=e.options;if(e.super){var i=cn(e.super);if(i!==e.superOptions){e.superOptions=i;var n=function(e){var t,i=e.options,n=e.sealedOptions;for(var r in i)i[r]!==n[r]&&(t||(t={}),t[r]=i[r]);return t}(e);n&&$(e.extendOptions,n),(t=e.options=Pn(i,e.extendOptions)).name&&(t.components[t.name]=e)}}return t}function hn(i,n,r,o,a){var l,c=this,h=a.options;w(o,"_uid")?(l=Object.create(o))._original=o:(l=o,o=o._original);var d=s(h._compiled),u=!d;this.data=i,this.props=n,this.children=r,this.parent=o,this.listeners=i.on||e,this.injections=an(h.inject,o),this.slots=function(){return c.$slots||At(o,i.scopedSlots,c.$slots=kt(r,o)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return At(o,i.scopedSlots,this.slots())}}),d&&(this.$options=h,this.$slots=this.slots(),this.$scopedSlots=At(o,i.scopedSlots,this.$slots)),h._scopeId?this._c=function(e,i,n,r){var s=at(l,e,i,n,r,u);return s&&!t(s)&&(s.fnScopeId=h._scopeId,s.fnContext=o),s}:this._c=function(e,t,i,n){return at(l,e,t,i,n,u)}}function dn(e,t,i,n,r){var s=me(e);return s.fnContext=i,s.fnOptions=n,t.slot&&((s.data||(s.data={})).slot=t.slot),s}function un(e,t){for(var i in t)e[k(i)]=t[i]}function pn(e){return e.name||e.__name||e._componentTag}St(hn.prototype);var fn={init:function(e,t){if(e.componentInstance&&!e.componentInstance._isDestroyed&&e.data.keepAlive){var i=e;fn.prepatch(i,i)}else(e.componentInstance=function(e,t){var i={_isComponent:!0,_parentVnode:e,parent:t},n=e.data.inlineTemplate;return r(n)&&(i.render=n.render,i.staticRenderFns=n.staticRenderFns),new e.componentOptions.Ctor(i)}(e,Vt)).$mount(t?e.elm:void 0,t)},prepatch:function(t,i){var n=i.componentOptions;!function(t,i,n,r,s){var o=r.data.scopedSlots,a=t.$scopedSlots,l=!!(o&&!o.$stable||a!==e&&!a.$stable||o&&t.$scopedSlots.$key!==o.$key||!o&&t.$scopedSlots.$key),c=!!(s||t.$options._renderChildren||l),h=t.$vnode;t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=s;var d=r.data.attrs||e;t._attrsProxy&&Mt(t._attrsProxy,d,h.data&&h.data.attrs||e,t,"$attrs")&&(c=!0),t.$attrs=d,n=n||e;var u=t.$options._parentListeners;if(t._listenersProxy&&Mt(t._listenersProxy,n,u||e,t,"$listeners"),t.$listeners=t.$options._parentListeners=n,Ut(t,n,u),i&&t.$options.props){Ie(!1);for(var p=t._props,f=t.$options._propKeys||[],m=0;m<f.length;m++){var g=f[m],y=t.$options.props;p[g]=An(g,y,i,t)}Ie(!0),t.$options.propsData=i}c&&(t.$slots=kt(s,r.context),t.$forceUpdate())}(i.componentInstance=t.componentInstance,n.propsData,n.listeners,i,n.children)},insert:function(e){var t,i=e.context,n=e.componentInstance;n._isMounted||(n._isMounted=!0,Zt(n,"mounted")),e.data.keepAlive&&(i._isMounted?((t=n)._inactive=!1,Jt.push(t)):Gt(n,!0))},destroy:function(e){var t=e.componentInstance;t._isDestroyed||(e.data.keepAlive?Yt(t,!0):t.$destroy())}},mn=Object.keys(fn);function gn(i,o,a,c,h){if(!n(i)){var d=a.$options._base;if(l(i)&&(i=d.extend(i)),"function"==typeof i){var p;if(n(i.cid)&&(i=function(e,t){if(s(e.error)&&r(e.errorComp))return e.errorComp;if(r(e.resolved))return e.resolved;var i=Rt;if(i&&r(e.owners)&&-1===e.owners.indexOf(i)&&e.owners.push(i),s(e.loading)&&r(e.loadingComp))return e.loadingComp;if(i&&!r(e.owners)){var o=e.owners=[i],a=!0,c=null,h=null;i.$on("hook:destroyed",(function(){return x(o,i)}));var d=function(e){for(var t=0,i=o.length;t<i;t++)o[t].$forceUpdate();e&&(o.length=0,null!==c&&(clearTimeout(c),c=null),null!==h&&(clearTimeout(h),h=null))},p=R((function(i){e.resolved=Nt(i,t),a?o.length=0:d(!0)})),f=R((function(t){r(e.errorComp)&&(e.error=!0,d(!0))})),m=e(p,f);return l(m)&&(u(m)?n(e.resolved)&&m.then(p,f):u(m.component)&&(m.component.then(p,f),r(m.error)&&(e.errorComp=Nt(m.error,t)),r(m.loading)&&(e.loadingComp=Nt(m.loading,t),0===m.delay?e.loading=!0:c=setTimeout((function(){c=null,n(e.resolved)&&n(e.error)&&(e.loading=!0,d(!1))}),m.delay||200)),r(m.timeout)&&(h=setTimeout((function(){h=null,n(e.resolved)&&f(null)}),m.timeout)))),a=!1,e.loading?e.loadingComp:e.resolved}}(p=i,d),void 0===i))return function(e,t,i,n,r){var s=pe();return s.asyncFactory=e,s.asyncMeta={data:t,context:i,children:n,tag:r},s}(p,o,a,c,h);o=o||{},cn(i),r(o.model)&&function(e,i){var n=e.model&&e.model.prop||"value",s=e.model&&e.model.event||"input";(i.attrs||(i.attrs={}))[n]=i.model.value;var o=i.on||(i.on={}),a=o[s],l=i.model.callback;r(a)?(t(a)?-1===a.indexOf(l):a!==l)&&(o[s]=[l].concat(a)):o[s]=l}(i.options,o);var f=function(e,t,i){var s=t.options.props;if(!n(s)){var o={},a=e.attrs,l=e.props;if(r(a)||r(l))for(var c in s){var h=A(c);tt(o,l,c,h,!0)||tt(o,a,c,h,!1)}return o}}(o,i);if(s(i.options.functional))return function(i,n,s,o,a){var l=i.options,c={},h=l.props;if(r(h))for(var d in h)c[d]=An(d,h,n||e);else r(s.attrs)&&un(c,s.attrs),r(s.props)&&un(c,s.props);var u=new hn(s,c,a,o,i),p=l.render.call(null,u._c,u);if(p instanceof ue)return dn(p,s,u.parent,l);if(t(p)){for(var f=it(p)||[],m=new Array(f.length),g=0;g<f.length;g++)m[g]=dn(f[g],s,u.parent,l);return m}}(i,f,o,a,c);var m=o.on;if(o.on=o.nativeOn,s(i.options.abstract)){var g=o.slot;o={},g&&(o.slot=g)}!function(e){for(var t=e.hook||(e.hook={}),i=0;i<mn.length;i++){var n=mn[i],r=t[n],s=fn[n];r===s||r&&r._merged||(t[n]=r?yn(s,r):s)}}(o);var y=pn(i.options)||h;return new ue("vue-component-".concat(i.cid).concat(y?"-".concat(y):""),o,void 0,void 0,void 0,a,{Ctor:i,propsData:f,listeners:m,tag:h,children:c},p)}}}function yn(e,t){var i=function(i,n){e(i,n),t(i,n)};return i._merged=!0,i}var vn=E,xn=Q.optionMergeStrategies;function bn(e,t,i){if(void 0===i&&(i=!0),!t)return e;for(var n,r,s,o=ce?Reflect.ownKeys(t):Object.keys(t),a=0;a<o.length;a++)"__ob__"!==(n=o[a])&&(r=e[n],s=t[n],i&&w(e,n)?r!==s&&h(r)&&h(s)&&bn(r,s):_e(e,n,s));return e}function wn(e,t,i){return i?function(){var n=a(t)?t.call(i,i):t,r=a(e)?e.call(i,i):e;return n?bn(n,r):r}:t?e?function(){return bn(a(t)?t.call(this,this):t,a(e)?e.call(this,this):e)}:t:e}function On(e,i){var n=i?e?e.concat(i):t(i)?i:[i]:e;return n?function(e){for(var t=[],i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i]);return t}(n):n}function Sn(e,t,i,n){var r=Object.create(e||null);return t?$(r,t):r}xn.data=function(e,t,i){return i?wn(e,t,i):t&&"function"!=typeof t?e:wn(e,t)},z.forEach((function(e){xn[e]=On})),j.forEach((function(e){xn[e+"s"]=Sn})),xn.watch=function(e,i,n,r){if(e===ie&&(e=void 0),i===ie&&(i=void 0),!i)return Object.create(e||null);if(!e)return i;var s={};for(var o in $(s,e),i){var a=s[o],l=i[o];a&&!t(a)&&(a=[a]),s[o]=a?a.concat(l):t(l)?l:[l]}return s},xn.props=xn.methods=xn.inject=xn.computed=function(e,t,i,n){if(!e)return t;var r=Object.create(null);return $(r,e),t&&$(r,t),r},xn.provide=function(e,t){return e?function(){var i=Object.create(null);return bn(i,a(e)?e.call(this):e),t&&bn(i,a(t)?t.call(this):t,!1),i}:t};var kn=function(e,t){return void 0===t?e:t};function Pn(e,i,n){if(a(i)&&(i=i.options),function(e,i){var n=e.props;if(n){var r,s,o={};if(t(n))for(r=n.length;r--;)"string"==typeof(s=n[r])&&(o[k(s)]={type:null});else if(h(n))for(var a in n)s=n[a],o[k(a)]=h(s)?s:{type:s};e.props=o}}(i),function(e,i){var n=e.inject;if(n){var r=e.inject={};if(t(n))for(var s=0;s<n.length;s++)r[n[s]]={from:n[s]};else if(h(n))for(var o in n){var a=n[o];r[o]=h(a)?$({from:o},a):{from:a}}}}(i),function(e){var t=e.directives;if(t)for(var i in t){var n=t[i];a(n)&&(t[i]={bind:n,update:n})}}(i),!i._base&&(i.extends&&(e=Pn(e,i.extends,n)),i.mixins))for(var r=0,s=i.mixins.length;r<s;r++)e=Pn(e,i.mixins[r],n);var o,l={};for(o in e)c(o);for(o in i)w(e,o)||c(o);function c(t){var r=xn[t]||kn;l[t]=r(e[t],i[t],n,t)}return l}function Cn(e,t,i,n){if("string"==typeof i){var r=e[t];if(w(r,i))return r[i];var s=k(i);if(w(r,s))return r[s];var o=P(s);return w(r,o)?r[o]:r[i]||r[s]||r[o]}}function An(e,t,i,n){var r=t[e],s=!w(i,e),o=i[e],l=Mn(Boolean,r.type);if(l>-1)if(s&&!w(r,"default"))o=!1;else if(""===o||o===A(e)){var c=Mn(String,r.type);(c<0||l<c)&&(o=!0)}if(void 0===o){o=function(e,t,i){if(w(t,"default")){var n=t.default;return e&&e.$options.propsData&&void 0===e.$options.propsData[i]&&void 0!==e._props[i]?e._props[i]:a(n)&&"Function"!==Tn(t.type)?n.call(e):n}}(n,r,e);var h=Ae;Ie(!0),Me(o),Ie(h)}return o}var In=/^\s*function (\w+)/;function Tn(e){var t=e&&e.toString().match(In);return t?t[1]:""}function $n(e,t){return Tn(e)===Tn(t)}function Mn(e,i){if(!t(i))return $n(i,e)?0:-1;for(var n=0,r=i.length;n<r;n++)if($n(i[n],e))return n;return-1}function En(e){this._init(e)}function _n(e){return e&&(pn(e.Ctor.options)||e.tag)}function Dn(e,i){return t(e)?e.indexOf(i)>-1:"string"==typeof e?e.split(",").indexOf(i)>-1:(n=e,"[object RegExp]"===c.call(n)&&e.test(i));var n}function Ln(e,t){var i=e.cache,n=e.keys,r=e._vnode,s=e.$vnode;for(var o in i){var a=i[o];if(a){var l=a.name;l&&!t(l)&&Bn(i,o,n,r)}}s.componentOptions.children=void 0}function Bn(e,t,i,n){var r=e[t];!r||n&&r.tag===n.tag||r.componentInstance.$destroy(),e[t]=null,x(i,t)}!function(t){t.prototype._init=function(t){var i=this;i._uid=ln++,i._isVue=!0,i.__v_skip=!0,i._scope=new qt(!0),i._scope.parent=void 0,i._scope._vm=!0,t&&t._isComponent?function(e,t){var i=e.$options=Object.create(e.constructor.options),n=t._parentVnode;i.parent=t.parent,i._parentVnode=n;var r=n.componentOptions;i.propsData=r.propsData,i._parentListeners=r.listeners,i._renderChildren=r.children,i._componentTag=r.tag,t.render&&(i.render=t.render,i.staticRenderFns=t.staticRenderFns)}(i,t):i.$options=Pn(cn(i.constructor),t||{},i),i._renderProxy=i,i._self=i,function(e){var t=e.$options,i=t.parent;if(i&&!t.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(e)}e.$parent=i,e.$root=i?i.$root:e,e.$children=[],e.$refs={},e._provided=i?i._provided:Object.create(null),e._watcher=null,e._inactive=null,e._directInactive=!1,e._isMounted=!1,e._isDestroyed=!1,e._isBeingDestroyed=!1}(i),function(e){e._events=Object.create(null),e._hasHookEvent=!1;var t=e.$options._parentListeners;t&&Ut(e,t)}(i),function(t){t._vnode=null,t._staticTrees=null;var i=t.$options,n=t.$vnode=i._parentVnode,r=n&&n.context;t.$slots=kt(i._renderChildren,r),t.$scopedSlots=n?At(t.$parent,n.data.scopedSlots,t.$slots):e,t._c=function(e,i,n,r){return at(t,e,i,n,r,!1)},t.$createElement=function(e,i,n,r){return at(t,e,i,n,r,!0)};var s=n&&n.data;Ee(t,"$attrs",s&&s.attrs||e,null,!0),Ee(t,"$listeners",i._parentListeners||e,null,!0)}(i),Zt(i,"beforeCreate",void 0,!1),function(e){var t=an(e.$options.inject,e);t&&(Ie(!1),Object.keys(t).forEach((function(i){Ee(e,i,t[i])})),Ie(!0))}(i),en(i),function(e){var t=e.$options.provide;if(t){var i=a(t)?t.call(e):t;if(!l(i))return;for(var n=yi(e),r=ce?Reflect.ownKeys(i):Object.keys(i),s=0;s<r.length;s++){var o=r[s];Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))}}}(i),Zt(i,"created"),i.$options.el&&i.$mount(i.$options.el)}}(En),function(e){Object.defineProperty(e.prototype,"$data",{get:function(){return this._data}}),Object.defineProperty(e.prototype,"$props",{get:function(){return this._props}}),e.prototype.$set=_e,e.prototype.$delete=De,e.prototype.$watch=function(e,t,i){var n=this;if(h(t))return on(n,e,t,i);(i=i||{}).user=!0;var r=new Zi(n,e,t,i);if(i.immediate){var s='callback for immediate watcher "'.concat(r.expression,'"');we(),xi(t,n,[r.value],n,s),Oe()}return function(){r.teardown()}}}(En),function(e){var i=/^hook:/;e.prototype.$on=function(e,n){var r=this;if(t(e))for(var s=0,o=e.length;s<o;s++)r.$on(e[s],n);else(r._events[e]||(r._events[e]=[])).push(n),i.test(e)&&(r._hasHookEvent=!0);return r},e.prototype.$once=function(e,t){var i=this;function n(){i.$off(e,n),t.apply(i,arguments)}return n.fn=t,i.$on(e,n),i},e.prototype.$off=function(e,i){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(t(e)){for(var r=0,s=e.length;r<s;r++)n.$off(e[r],i);return n}var o,a=n._events[e];if(!a)return n;if(!i)return n._events[e]=null,n;for(var l=a.length;l--;)if((o=a[l])===i||o.fn===i){a.splice(l,1);break}return n},e.prototype.$emit=function(e){var t=this,i=t._events[e];if(i){i=i.length>1?T(i):i;for(var n=T(arguments,1),r='event handler for "'.concat(e,'"'),s=0,o=i.length;s<o;s++)xi(i[s],t,n,t,r)}return t}}(En),function(e){e.prototype._update=function(e,t){var i=this,n=i.$el,r=i._vnode,s=Wt(i);i._vnode=e,i.$el=r?i.__patch__(r,e):i.__patch__(i.$el,e,t,!1),s(),n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i);for(var o=i;o&&o.$vnode&&o.$parent&&o.$vnode===o.$parent._vnode;)o.$parent.$el=o.$el,o=o.$parent},e.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},e.prototype.$destroy=function(){var e=this;if(!e._isBeingDestroyed){Zt(e,"beforeDestroy"),e._isBeingDestroyed=!0;var t=e.$parent;!t||t._isBeingDestroyed||e.$options.abstract||x(t.$children,e),e._scope.stop(),e._data.__ob__&&e._data.__ob__.vmCount--,e._isDestroyed=!0,e.__patch__(e._vnode,null),Zt(e,"destroyed"),e.$off(),e.$el&&(e.$el.__vue__=null),e.$vnode&&(e.$vnode.parent=null)}}}(En),function(e){St(e.prototype),e.prototype.$nextTick=function(e){return Mi(e,this)},e.prototype._render=function(){var e=this,i=e.$options,n=i.render,r=i._parentVnode;r&&e._isMounted&&(e.$scopedSlots=At(e.$parent,r.data.scopedSlots,e.$slots,e.$scopedSlots),e._slotsProxy&&_t(e._slotsProxy,e.$scopedSlots)),e.$vnode=r;var s,o=he,a=Rt;try{de(e),Rt=e,s=n.call(e._renderProxy,e.$createElement)}catch(t){vi(t,e,"render"),s=e._vnode}finally{Rt=a,de(o)}return t(s)&&1===s.length&&(s=s[0]),s instanceof ue||(s=pe()),s.parent=r,s}}(En);var Rn=[String,RegExp,Array],Nn={name:"keep-alive",abstract:!0,props:{include:Rn,exclude:Rn,max:[String,Number]},methods:{cacheVNode:function(){var e=this,t=e.cache,i=e.keys,n=e.vnodeToCache,r=e.keyToCache;if(n){var s=n.tag,o=n.componentInstance,a=n.componentOptions;t[r]={name:_n(a),tag:s,componentInstance:o},i.push(r),this.max&&i.length>parseInt(this.max)&&Bn(t,i[0],i,this._vnode),this.vnodeToCache=null}}},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var e in this.cache)Bn(this.cache,e,this.keys)},mounted:function(){var e=this;this.cacheVNode(),this.$watch("include",(function(t){Ln(e,(function(e){return Dn(t,e)}))})),this.$watch("exclude",(function(t){Ln(e,(function(e){return!Dn(t,e)}))}))},updated:function(){this.cacheVNode()},render:function(){var e=this.$slots.default,t=Ft(e),i=t&&t.componentOptions;if(i){var n=_n(i),r=this.include,s=this.exclude;if(r&&(!n||!Dn(r,n))||s&&n&&Dn(s,n))return t;var o=this.cache,a=this.keys,l=null==t.key?i.Ctor.cid+(i.tag?"::".concat(i.tag):""):t.key;o[l]?(t.componentInstance=o[l].componentInstance,x(a,l),a.push(l)):(this.vnodeToCache=t,this.keyToCache=l),t.data.keepAlive=!0}return t||e&&e[0]}},Fn={KeepAlive:Nn};!function(e){var t={get:function(){return Q}};Object.defineProperty(e,"config",t),e.util={warn:vn,extend:$,mergeOptions:Pn,defineReactive:Ee},e.set=_e,e.delete=De,e.nextTick=Mi,e.observable=function(e){return Me(e),e},e.options=Object.create(null),j.forEach((function(t){e.options[t+"s"]=Object.create(null)})),e.options._base=e,$(e.options.components,Fn),function(e){e.use=function(e){var t=this._installedPlugins||(this._installedPlugins=[]);if(t.indexOf(e)>-1)return this;var i=T(arguments,1);return i.unshift(this),a(e.install)?e.install.apply(e,i):a(e)&&e.apply(null,i),t.push(e),this}}(e),function(e){e.mixin=function(e){return this.options=Pn(this.options,e),this}}(e),function(e){e.cid=0;var t=1;e.extend=function(e){e=e||{};var i=this,n=i.cid,r=e._Ctor||(e._Ctor={});if(r[n])return r[n];var s=pn(e)||pn(i.options),o=function(e){this._init(e)};return(o.prototype=Object.create(i.prototype)).constructor=o,o.cid=t++,o.options=Pn(i.options,e),o.super=i,o.options.props&&function(e){var t=e.options.props;for(var i in t)Ji(e.prototype,"_props",i)}(o),o.options.computed&&function(e){var t=e.options.computed;for(var i in t)nn(e.prototype,i,t[i])}(o),o.extend=i.extend,o.mixin=i.mixin,o.use=i.use,j.forEach((function(e){o[e]=i[e]})),s&&(o.options.components[s]=o),o.superOptions=i.options,o.extendOptions=e,o.sealedOptions=$({},o.options),r[n]=o,o}}(e),function(e){j.forEach((function(t){e[t]=function(e,i){return i?("component"===t&&h(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===t&&a(i)&&(i={bind:i,update:i}),this.options[t+"s"][e]=i,i):this.options[t+"s"][e]}}))}(e)}(En),Object.defineProperty(En.prototype,"$isServer",{get:se}),Object.defineProperty(En.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(En,"FunctionalRenderContext",{value:hn}),En.version=Hi;var jn=g("style,class"),zn=g("input,textarea,option,select,progress"),Qn=function(e,t,i){return"value"===i&&zn(e)&&"button"!==t||"selected"===i&&"option"===e||"checked"===i&&"input"===e||"muted"===i&&"video"===e},Un=g("contenteditable,draggable,spellcheck"),qn=g("events,caret,typing,plaintext-only"),Hn=function(e,t){return Yn(t)||"false"===t?"false":"contenteditable"===e&&qn(t)?t:"true"},Vn=g("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,truespeed,typemustmatch,visible"),Wn="http://www.w3.org/1999/xlink",Xn=function(e){return":"===e.charAt(5)&&"xlink"===e.slice(0,5)},Gn=function(e){return Xn(e)?e.slice(6,e.length):""},Yn=function(e){return null==e||!1===e};function Zn(e,t){return{staticClass:Kn(e.staticClass,t.staticClass),class:r(e.class)?[e.class,t.class]:t.class}}function Kn(e,t){return e?t?e+" "+t:e:t||""}function Jn(e){return Array.isArray(e)?function(e){for(var t,i="",n=0,s=e.length;n<s;n++)r(t=Jn(e[n]))&&""!==t&&(i&&(i+=" "),i+=t);return i}(e):l(e)?function(e){var t="";for(var i in e)e[i]&&(t&&(t+=" "),t+=i);return t}(e):"string"==typeof e?e:""}var er={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},tr=g("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),ir=g("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignobject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),nr=function(e){return tr(e)||ir(e)};function rr(e){return ir(e)?"svg":"math"===e?"math":void 0}var sr=Object.create(null),or=g("text,number,password,search,email,tel,url");function ar(e){return"string"==typeof e?document.querySelector(e)||document.createElement("div"):e}var lr=Object.freeze({__proto__:null,createElement:function(e,t){var i=document.createElement(e);return"select"!==e||t.data&&t.data.attrs&&void 0!==t.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(e,t){return document.createElementNS(er[e],t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,i){e.insertBefore(t,i)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t},setStyleScope:function(e,t){e.setAttribute(t,"")}}),cr={create:function(e,t){hr(t)},update:function(e,t){e.data.ref!==t.data.ref&&(hr(e,!0),hr(t))},destroy:function(e){hr(e,!0)}};function hr(e,i){var n=e.data.ref;if(r(n)){var s=e.context,o=e.componentInstance||e.elm,l=i?null:o,c=i?void 0:o;if(a(n))xi(n,s,[l],s,"template ref function");else{var h=e.data.refInFor,d="string"==typeof n||"number"==typeof n,u=Qe(n),p=s.$refs;if(d||u)if(h){var f=d?p[n]:n.value;i?t(f)&&x(f,o):t(f)?f.includes(o)||f.push(o):d?(p[n]=[o],dr(s,n,p[n])):n.value=[o]}else if(d){if(i&&p[n]!==o)return;p[n]=c,dr(s,n,l)}else if(u){if(i&&n.value!==o)return;n.value=l}}}}function dr(e,t,i){var n=e._setupState;n&&w(n,t)&&(Qe(n[t])?n[t].value=i:n[t]=i)}var ur=new ue("",{},[]),pr=["create","activate","update","remove","destroy"];function fr(e,t){return e.key===t.key&&e.asyncFactory===t.asyncFactory&&(e.tag===t.tag&&e.isComment===t.isComment&&r(e.data)===r(t.data)&&function(e,t){if("input"!==e.tag)return!0;var i,n=r(i=e.data)&&r(i=i.attrs)&&i.type,s=r(i=t.data)&&r(i=i.attrs)&&i.type;return n===s||or(n)&&or(s)}(e,t)||s(e.isAsyncPlaceholder)&&n(t.asyncFactory.error))}function mr(e,t,i){var n,s,o={};for(n=t;n<=i;++n)r(s=e[n].key)&&(o[s]=n);return o}var gr={create:yr,update:yr,destroy:function(e){yr(e,ur)}};function yr(e,t){(e.data.directives||t.data.directives)&&function(e,t){var i,n,r,s=e===ur,o=t===ur,a=xr(e.data.directives,e.context),l=xr(t.data.directives,t.context),c=[],h=[];for(i in l)n=a[i],r=l[i],n?(r.oldValue=n.value,r.oldArg=n.arg,wr(r,"update",t,e),r.def&&r.def.componentUpdated&&h.push(r)):(wr(r,"bind",t,e),r.def&&r.def.inserted&&c.push(r));if(c.length){var d=function(){for(var i=0;i<c.length;i++)wr(c[i],"inserted",t,e)};s?et(t,"insert",d):d()}if(h.length&&et(t,"postpatch",(function(){for(var i=0;i<h.length;i++)wr(h[i],"componentUpdated",t,e)})),!s)for(i in a)l[i]||wr(a[i],"unbind",e,e,o)}(e,t)}var vr=Object.create(null);function xr(e,t){var i,n,r=Object.create(null);if(!e)return r;for(i=0;i<e.length;i++){if((n=e[i]).modifiers||(n.modifiers=vr),r[br(n)]=n,t._setupState&&t._setupState.__sfc){var s=n.def||Cn(t,"_setupState","v-"+n.name);n.def="function"==typeof s?{bind:s,update:s}:s}n.def=n.def||Cn(t.$options,"directives",n.name)}return r}function br(e){return e.rawName||"".concat(e.name,".").concat(Object.keys(e.modifiers||{}).join("."))}function wr(e,t,i,n,r){var s=e.def&&e.def[t];if(s)try{s(i.elm,e,i,n,r)}catch(n){vi(n,i.context,"directive ".concat(e.name," ").concat(t," hook"))}}var Or=[cr,gr];function Sr(e,t){var i=t.componentOptions;if(!(r(i)&&!1===i.Ctor.options.inheritAttrs||n(e.data.attrs)&&n(t.data.attrs))){var o,a,l=t.elm,c=e.data.attrs||{},h=t.data.attrs||{};for(o in(r(h.__ob__)||s(h._v_attr_proxy))&&(h=t.data.attrs=$({},h)),h)a=h[o],c[o]!==a&&kr(l,o,a,t.data.pre);for(o in(Y||K)&&h.value!==c.value&&kr(l,"value",h.value),c)n(h[o])&&(Xn(o)?l.removeAttributeNS(Wn,Gn(o)):Un(o)||l.removeAttribute(o))}}function kr(e,t,i,n){n||e.tagName.indexOf("-")>-1?Pr(e,t,i):Vn(t)?Yn(i)?e.removeAttribute(t):(i="allowfullscreen"===t&&"EMBED"===e.tagName?"true":t,e.setAttribute(t,i)):Un(t)?e.setAttribute(t,Hn(t,i)):Xn(t)?Yn(i)?e.removeAttributeNS(Wn,Gn(t)):e.setAttributeNS(Wn,t,i):Pr(e,t,i)}function Pr(e,t,i){if(Yn(i))e.removeAttribute(t);else{if(Y&&!Z&&"TEXTAREA"===e.tagName&&"placeholder"===t&&""!==i&&!e.__ieph){var n=function(t){t.stopImmediatePropagation(),e.removeEventListener("input",n)};e.addEventListener("input",n),e.__ieph=!0}e.setAttribute(t,i)}}var Cr={create:Sr,update:Sr};function Ar(e,t){var i=t.elm,s=t.data,o=e.data;if(!(n(s.staticClass)&&n(s.class)&&(n(o)||n(o.staticClass)&&n(o.class)))){var a=function(e){for(var t=e.data,i=e,n=e;r(n.componentInstance);)(n=n.componentInstance._vnode)&&n.data&&(t=Zn(n.data,t));for(;r(i=i.parent);)i&&i.data&&(t=Zn(t,i.data));return function(e,t){return r(e)||r(t)?Kn(e,Jn(t)):""}(t.staticClass,t.class)}(t),l=i._transitionClasses;r(l)&&(a=Kn(a,Jn(l))),a!==i._prevClass&&(i.setAttribute("class",a),i._prevClass=a)}}var Ir,Tr,$r,Mr,Er,_r,Dr={create:Ar,update:Ar},Lr=/[\w).+\-_$\]]/;function Br(e){var t,i,n,r,s,o=!1,a=!1,l=!1,c=!1,h=0,d=0,u=0,p=0;for(n=0;n<e.length;n++)if(i=t,t=e.charCodeAt(n),o)39===t&&92!==i&&(o=!1);else if(a)34===t&&92!==i&&(a=!1);else if(l)96===t&&92!==i&&(l=!1);else if(c)47===t&&92!==i&&(c=!1);else if(124!==t||124===e.charCodeAt(n+1)||124===e.charCodeAt(n-1)||h||d||u){switch(t){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:u++;break;case 41:u--;break;case 91:d++;break;case 93:d--;break;case 123:h++;break;case 125:h--}if(47===t){for(var f=n-1,m=void 0;f>=0&&" "===(m=e.charAt(f));f--);m&&Lr.test(m)||(c=!0)}}else void 0===r?(p=n+1,r=e.slice(0,n).trim()):g();function g(){(s||(s=[])).push(e.slice(p,n).trim()),p=n+1}if(void 0===r?r=e.slice(0,n).trim():0!==p&&g(),s)for(n=0;n<s.length;n++)r=Rr(r,s[n]);return r}function Rr(e,t){var i=t.indexOf("(");if(i<0)return'_f("'.concat(t,'")(').concat(e,")");var n=t.slice(0,i),r=t.slice(i+1);return'_f("'.concat(n,'")(').concat(e).concat(")"!==r?","+r:r)}function Nr(e,t){console.error("[Vue compiler]: ".concat(e))}function Fr(e,t){return e?e.map((function(e){return e[t]})).filter((function(e){return e})):[]}function jr(e,t,i,n,r){(e.props||(e.props=[])).push(Gr({name:t,value:i,dynamic:r},n)),e.plain=!1}function zr(e,t,i,n,r){(r?e.dynamicAttrs||(e.dynamicAttrs=[]):e.attrs||(e.attrs=[])).push(Gr({name:t,value:i,dynamic:r},n)),e.plain=!1}function Qr(e,t,i,n){e.attrsMap[t]=i,e.attrsList.push(Gr({name:t,value:i},n))}function Ur(e,t,i,n,r,s,o,a){(e.directives||(e.directives=[])).push(Gr({name:t,rawName:i,value:n,arg:r,isDynamicArg:s,modifiers:o},a)),e.plain=!1}function qr(e,t,i){return i?"_p(".concat(t,',"').concat(e,'")'):e+t}function Hr(t,i,n,r,s,o,a,l){var c;(r=r||e).right?l?i="(".concat(i,")==='click'?'contextmenu':(").concat(i,")"):"click"===i&&(i="contextmenu",delete r.right):r.middle&&(l?i="(".concat(i,")==='click'?'mouseup':(").concat(i,")"):"click"===i&&(i="mouseup")),r.capture&&(delete r.capture,i=qr("!",i,l)),r.once&&(delete r.once,i=qr("~",i,l)),r.passive&&(delete r.passive,i=qr("&",i,l)),r.native?(delete r.native,c=t.nativeEvents||(t.nativeEvents={})):c=t.events||(t.events={});var h=Gr({value:n.trim(),dynamic:l},a);r!==e&&(h.modifiers=r);var d=c[i];Array.isArray(d)?s?d.unshift(h):d.push(h):c[i]=d?s?[h,d]:[d,h]:h,t.plain=!1}function Vr(e,t,i){var n=Wr(e,":"+t)||Wr(e,"v-bind:"+t);if(null!=n)return Br(n);if(!1!==i){var r=Wr(e,t);if(null!=r)return JSON.stringify(r)}}function Wr(e,t,i){var n;if(null!=(n=e.attrsMap[t]))for(var r=e.attrsList,s=0,o=r.length;s<o;s++)if(r[s].name===t){r.splice(s,1);break}return i&&delete e.attrsMap[t],n}function Xr(e,t){for(var i=e.attrsList,n=0,r=i.length;n<r;n++){var s=i[n];if(t.test(s.name))return i.splice(n,1),s}}function Gr(e,t){return t&&(null!=t.start&&(e.start=t.start),null!=t.end&&(e.end=t.end)),e}function Yr(e,t,i){var n=i||{},r=n.number,s="$$v",o=s;n.trim&&(o="(typeof ".concat(s," === 'string'")+"? ".concat(s,".trim()")+": ".concat(s,")")),r&&(o="_n(".concat(o,")"));var a=Zr(t,o);e.model={value:"(".concat(t,")"),expression:JSON.stringify(t),callback:"function (".concat(s,") {").concat(a,"}")}}function Zr(e,t){var i=function(e){if(e=e.trim(),Ir=e.length,e.indexOf("[")<0||e.lastIndexOf("]")<Ir-1)return(Mr=e.lastIndexOf("."))>-1?{exp:e.slice(0,Mr),key:'"'+e.slice(Mr+1)+'"'}:{exp:e,key:null};for(Tr=e,Mr=Er=_r=0;!Jr();)es($r=Kr())?is($r):91===$r&&ts($r);return{exp:e.slice(0,Er),key:e.slice(Er+1,_r)}}(e);return null===i.key?"".concat(e,"=").concat(t):"$set(".concat(i.exp,", ").concat(i.key,", ").concat(t,")")}function Kr(){return Tr.charCodeAt(++Mr)}function Jr(){return Mr>=Ir}function es(e){return 34===e||39===e}function ts(e){var t=1;for(Er=Mr;!Jr();)if(es(e=Kr()))is(e);else if(91===e&&t++,93===e&&t--,0===t){_r=Mr;break}}function is(e){for(var t=e;!Jr()&&(e=Kr())!==t;);}var ns,rs="__r",ss="__c";function os(e,t,i){var n=ns;return function r(){null!==t.apply(null,arguments)&&cs(e,r,i,n)}}var as=Si&&!(te&&Number(te[1])<=53);function ls(e,t,i,n){if(as){var r=ri,s=t;t=s._wrapper=function(e){if(e.target===e.currentTarget||e.timeStamp>=r||e.timeStamp<=0||e.target.ownerDocument!==document)return s.apply(this,arguments)}}ns.addEventListener(e,t,ne?{capture:i,passive:n}:i)}function cs(e,t,i,n){(n||ns).removeEventListener(e,t._wrapper||t,i)}function hs(e,t){if(!n(e.data.on)||!n(t.data.on)){var i=t.data.on||{},s=e.data.on||{};ns=t.elm||e.elm,function(e){if(r(e[rs])){var t=Y?"change":"input";e[t]=[].concat(e[rs],e[t]||[]),delete e[rs]}r(e[ss])&&(e.change=[].concat(e[ss],e.change||[]),delete e[ss])}(i),Je(i,s,ls,cs,os,t.context),ns=void 0}}var ds,us={create:hs,update:hs,destroy:function(e){return hs(e,ur)}};function ps(e,t){if(!n(e.data.domProps)||!n(t.data.domProps)){var i,o,a=t.elm,l=e.data.domProps||{},c=t.data.domProps||{};for(i in(r(c.__ob__)||s(c._v_attr_proxy))&&(c=t.data.domProps=$({},c)),l)i in c||(a[i]="");for(i in c){if(o=c[i],"textContent"===i||"innerHTML"===i){if(t.children&&(t.children.length=0),o===l[i])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===i&&"PROGRESS"!==a.tagName){a._value=o;var h=n(o)?"":String(o);fs(a,h)&&(a.value=h)}else if("innerHTML"===i&&ir(a.tagName)&&n(a.innerHTML)){(ds=ds||document.createElement("div")).innerHTML="<svg>".concat(o,"</svg>");for(var d=ds.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;d.firstChild;)a.appendChild(d.firstChild)}else if(o!==l[i])try{a[i]=o}catch(e){}}}}function fs(e,t){return!e.composing&&("OPTION"===e.tagName||function(e,t){var i=!0;try{i=document.activeElement!==e}catch(e){}return i&&e.value!==t}(e,t)||function(e,t){var i=e.value,n=e._vModifiers;if(r(n)){if(n.number)return m(i)!==m(t);if(n.trim)return i.trim()!==t.trim()}return i!==t}(e,t))}var ms={create:ps,update:ps},gs=O((function(e){var t={},i=/:(.+)/;return e.split(/;(?![^(]*\))/g).forEach((function(e){if(e){var n=e.split(i);n.length>1&&(t[n[0].trim()]=n[1].trim())}})),t}));function ys(e){var t=vs(e.style);return e.staticStyle?$(e.staticStyle,t):t}function vs(e){return Array.isArray(e)?M(e):"string"==typeof e?gs(e):e}var xs,bs=/^--/,ws=/\s*!important$/,Os=function(e,t,i){if(bs.test(t))e.style.setProperty(t,i);else if(ws.test(i))e.style.setProperty(A(t),i.replace(ws,""),"important");else{var n=ks(t);if(Array.isArray(i))for(var r=0,s=i.length;r<s;r++)e.style[n]=i[r];else e.style[n]=i}},Ss=["Webkit","Moz","ms"],ks=O((function(e){if(xs=xs||document.createElement("div").style,"filter"!==(e=k(e))&&e in xs)return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),i=0;i<Ss.length;i++){var n=Ss[i]+t;if(n in xs)return n}}));function Ps(e,t){var i=t.data,s=e.data;if(!(n(i.staticStyle)&&n(i.style)&&n(s.staticStyle)&&n(s.style))){var o,a,l=t.elm,c=s.staticStyle,h=s.normalizedStyle||s.style||{},d=c||h,u=vs(t.data.style)||{};t.data.normalizedStyle=r(u.__ob__)?$({},u):u;var p=function(e,t){for(var i,n={},r=e;r.componentInstance;)(r=r.componentInstance._vnode)&&r.data&&(i=ys(r.data))&&$(n,i);(i=ys(e.data))&&$(n,i);for(var s=e;s=s.parent;)s.data&&(i=ys(s.data))&&$(n,i);return n}(t);for(a in d)n(p[a])&&Os(l,a,"");for(a in p)o=p[a],Os(l,a,null==o?"":o)}}var Cs={create:Ps,update:Ps},As=/\s+/;function Is(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(As).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var i=" ".concat(e.getAttribute("class")||""," ");i.indexOf(" "+t+" ")<0&&e.setAttribute("class",(i+t).trim())}}function Ts(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(As).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var i=" ".concat(e.getAttribute("class")||""," "),n=" "+t+" ";i.indexOf(n)>=0;)i=i.replace(n," ");(i=i.trim())?e.setAttribute("class",i):e.removeAttribute("class")}}function $s(e){if(e){if("object"==typeof e){var t={};return!1!==e.css&&$(t,Ms(e.name||"v")),$(t,e),t}return"string"==typeof e?Ms(e):void 0}}var Ms=O((function(e){return{enterClass:"".concat(e,"-enter"),enterToClass:"".concat(e,"-enter-to"),enterActiveClass:"".concat(e,"-enter-active"),leaveClass:"".concat(e,"-leave"),leaveToClass:"".concat(e,"-leave-to"),leaveActiveClass:"".concat(e,"-leave-active")}})),Es=X&&!Z,_s="transition",Ds="animation",Ls="transition",Bs="transitionend",Rs="animation",Ns="animationend";Es&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Ls="WebkitTransition",Bs="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Rs="WebkitAnimation",Ns="webkitAnimationEnd"));var Fs=X?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(e){return e()};function js(e){Fs((function(){Fs(e)}))}function zs(e,t){var i=e._transitionClasses||(e._transitionClasses=[]);i.indexOf(t)<0&&(i.push(t),Is(e,t))}function Qs(e,t){e._transitionClasses&&x(e._transitionClasses,t),Ts(e,t)}function Us(e,t,i){var n=Hs(e,t),r=n.type,s=n.timeout,o=n.propCount;if(!r)return i();var a=r===_s?Bs:Ns,l=0,c=function(){e.removeEventListener(a,h),i()},h=function(t){t.target===e&&++l>=o&&c()};setTimeout((function(){l<o&&c()}),s+1),e.addEventListener(a,h)}var qs=/\b(transform|all)(,|$)/;function Hs(e,t){var i,n=window.getComputedStyle(e),r=(n[Ls+"Delay"]||"").split(", "),s=(n[Ls+"Duration"]||"").split(", "),o=Vs(r,s),a=(n[Rs+"Delay"]||"").split(", "),l=(n[Rs+"Duration"]||"").split(", "),c=Vs(a,l),h=0,d=0;return t===_s?o>0&&(i=_s,h=o,d=s.length):t===Ds?c>0&&(i=Ds,h=c,d=l.length):d=(i=(h=Math.max(o,c))>0?o>c?_s:Ds:null)?i===_s?s.length:l.length:0,{type:i,timeout:h,propCount:d,hasTransform:i===_s&&qs.test(n[Ls+"Property"])}}function Vs(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((function(t,i){return Ws(t)+Ws(e[i])})))}function Ws(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function Xs(e,t){var i=e.elm;r(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var s=$s(e.data.transition);if(!n(s)&&!r(i._enterCb)&&1===i.nodeType){for(var o=s.css,c=s.type,h=s.enterClass,d=s.enterToClass,u=s.enterActiveClass,p=s.appearClass,f=s.appearToClass,g=s.appearActiveClass,y=s.beforeEnter,v=s.enter,x=s.afterEnter,b=s.enterCancelled,w=s.beforeAppear,O=s.appear,S=s.afterAppear,k=s.appearCancelled,P=s.duration,C=Vt,A=Vt.$vnode;A&&A.parent;)C=A.context,A=A.parent;var I=!C._isMounted||!e.isRootInsert;if(!I||O||""===O){var T=I&&p?p:h,$=I&&g?g:u,M=I&&f?f:d,E=I&&w||y,_=I&&a(O)?O:v,D=I&&S||x,L=I&&k||b,B=m(l(P)?P.enter:P),N=!1!==o&&!Z,F=Zs(_),j=i._enterCb=R((function(){N&&(Qs(i,M),Qs(i,$)),j.cancelled?(N&&Qs(i,T),L&&L(i)):D&&D(i),i._enterCb=null}));e.data.show||et(e,"insert",(function(){var t=i.parentNode,n=t&&t._pending&&t._pending[e.key];n&&n.tag===e.tag&&n.elm._leaveCb&&n.elm._leaveCb(),_&&_(i,j)})),E&&E(i),N&&(zs(i,T),zs(i,$),js((function(){Qs(i,T),j.cancelled||(zs(i,M),F||(Ys(B)?setTimeout(j,B):Us(i,c,j)))}))),e.data.show&&(t&&t(),_&&_(i,j)),N||F||j()}}}function Gs(e,t){var i=e.elm;r(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var s=$s(e.data.transition);if(n(s)||1!==i.nodeType)return t();if(!r(i._leaveCb)){var o=s.css,a=s.type,c=s.leaveClass,h=s.leaveToClass,d=s.leaveActiveClass,u=s.beforeLeave,p=s.leave,f=s.afterLeave,g=s.leaveCancelled,y=s.delayLeave,v=s.duration,x=!1!==o&&!Z,b=Zs(p),w=m(l(v)?v.leave:v),O=i._leaveCb=R((function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[e.key]=null),x&&(Qs(i,h),Qs(i,d)),O.cancelled?(x&&Qs(i,c),g&&g(i)):(t(),f&&f(i)),i._leaveCb=null}));y?y(S):S()}function S(){O.cancelled||(!e.data.show&&i.parentNode&&((i.parentNode._pending||(i.parentNode._pending={}))[e.key]=e),u&&u(i),x&&(zs(i,c),zs(i,d),js((function(){Qs(i,c),O.cancelled||(zs(i,h),b||(Ys(w)?setTimeout(O,w):Us(i,a,O)))}))),p&&p(i,O),x||b||O())}}function Ys(e){return"number"==typeof e&&!isNaN(e)}function Zs(e){if(n(e))return!1;var t=e.fns;return r(t)?Zs(Array.isArray(t)?t[0]:t):(e._length||e.length)>1}function Ks(e,t){!0!==t.data.show&&Xs(t)}var Js=function(e){var i,a,l={},c=e.modules,h=e.nodeOps;for(i=0;i<pr.length;++i)for(l[pr[i]]=[],a=0;a<c.length;++a)r(c[a][pr[i]])&&l[pr[i]].push(c[a][pr[i]]);function d(e){var t=h.parentNode(e);r(t)&&h.removeChild(t,e)}function u(e,t,i,n,o,a,c){if(r(e.elm)&&r(a)&&(e=a[c]=me(e)),e.isRootInsert=!o,!function(e,t,i,n){var o=e.data;if(r(o)){var a=r(e.componentInstance)&&o.keepAlive;if(r(o=o.hook)&&r(o=o.init)&&o(e,!1),r(e.componentInstance))return p(e,t),f(i,e.elm,n),s(a)&&function(e,t,i,n){for(var s,o=e;o.componentInstance;)if(r(s=(o=o.componentInstance._vnode).data)&&r(s=s.transition)){for(s=0;s<l.activate.length;++s)l.activate[s](ur,o);t.push(o);break}f(i,e.elm,n)}(e,t,i,n),!0}}(e,t,i,n)){var d=e.data,u=e.children,g=e.tag;r(g)?(e.elm=e.ns?h.createElementNS(e.ns,g):h.createElement(g,e),x(e),m(e,u,t),r(d)&&v(e,t),f(i,e.elm,n)):s(e.isComment)?(e.elm=h.createComment(e.text),f(i,e.elm,n)):(e.elm=h.createTextNode(e.text),f(i,e.elm,n))}}function p(e,t){r(e.data.pendingInsert)&&(t.push.apply(t,e.data.pendingInsert),e.data.pendingInsert=null),e.elm=e.componentInstance.$el,y(e)?(v(e,t),x(e)):(hr(e),t.push(e))}function f(e,t,i){r(e)&&(r(i)?h.parentNode(i)===e&&h.insertBefore(e,t,i):h.appendChild(e,t))}function m(e,i,n){if(t(i))for(var r=0;r<i.length;++r)u(i[r],n,e.elm,null,!0,i,r);else o(e.text)&&h.appendChild(e.elm,h.createTextNode(String(e.text)))}function y(e){for(;e.componentInstance;)e=e.componentInstance._vnode;return r(e.tag)}function v(e,t){for(var n=0;n<l.create.length;++n)l.create[n](ur,e);r(i=e.data.hook)&&(r(i.create)&&i.create(ur,e),r(i.insert)&&t.push(e))}function x(e){var t;if(r(t=e.fnScopeId))h.setStyleScope(e.elm,t);else for(var i=e;i;)r(t=i.context)&&r(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t),i=i.parent;r(t=Vt)&&t!==e.context&&t!==e.fnContext&&r(t=t.$options._scopeId)&&h.setStyleScope(e.elm,t)}function b(e,t,i,n,r,s){for(;n<=r;++n)u(i[n],s,e,t,!1,i,n)}function w(e){var t,i,n=e.data;if(r(n))for(r(t=n.hook)&&r(t=t.destroy)&&t(e),t=0;t<l.destroy.length;++t)l.destroy[t](e);if(r(t=e.children))for(i=0;i<e.children.length;++i)w(e.children[i])}function O(e,t,i){for(;t<=i;++t){var n=e[t];r(n)&&(r(n.tag)?(S(n),w(n)):d(n.elm))}}function S(e,t){if(r(t)||r(e.data)){var i,n=l.remove.length+1;for(r(t)?t.listeners+=n:t=function(e,t){function i(){0==--i.listeners&&d(e)}return i.listeners=t,i}(e.elm,n),r(i=e.componentInstance)&&r(i=i._vnode)&&r(i.data)&&S(i,t),i=0;i<l.remove.length;++i)l.remove[i](e,t);r(i=e.data.hook)&&r(i=i.remove)?i(e,t):t()}else d(e.elm)}function k(e,t,i,n){for(var s=i;s<n;s++){var o=t[s];if(r(o)&&fr(e,o))return s}}function P(e,t,i,o,a,c){if(e!==t){r(t.elm)&&r(o)&&(t=o[a]=me(t));var d=t.elm=e.elm;if(s(e.isAsyncPlaceholder))r(t.asyncFactory.resolved)?I(e.elm,t,i):t.isAsyncPlaceholder=!0;else if(s(t.isStatic)&&s(e.isStatic)&&t.key===e.key&&(s(t.isCloned)||s(t.isOnce)))t.componentInstance=e.componentInstance;else{var p,f=t.data;r(f)&&r(p=f.hook)&&r(p=p.prepatch)&&p(e,t);var m=e.children,g=t.children;if(r(f)&&y(t)){for(p=0;p<l.update.length;++p)l.update[p](e,t);r(p=f.hook)&&r(p=p.update)&&p(e,t)}n(t.text)?r(m)&&r(g)?m!==g&&function(e,t,i,s,o){for(var a,l,c,d=0,p=0,f=t.length-1,m=t[0],g=t[f],y=i.length-1,v=i[0],x=i[y],w=!o;d<=f&&p<=y;)n(m)?m=t[++d]:n(g)?g=t[--f]:fr(m,v)?(P(m,v,s,i,p),m=t[++d],v=i[++p]):fr(g,x)?(P(g,x,s,i,y),g=t[--f],x=i[--y]):fr(m,x)?(P(m,x,s,i,y),w&&h.insertBefore(e,m.elm,h.nextSibling(g.elm)),m=t[++d],x=i[--y]):fr(g,v)?(P(g,v,s,i,p),w&&h.insertBefore(e,g.elm,m.elm),g=t[--f],v=i[++p]):(n(a)&&(a=mr(t,d,f)),n(l=r(v.key)?a[v.key]:k(v,t,d,f))?u(v,s,e,m.elm,!1,i,p):fr(c=t[l],v)?(P(c,v,s,i,p),t[l]=void 0,w&&h.insertBefore(e,c.elm,m.elm)):u(v,s,e,m.elm,!1,i,p),v=i[++p]);d>f?b(e,n(i[y+1])?null:i[y+1].elm,i,p,y,s):p>y&&O(t,d,f)}(d,m,g,i,c):r(g)?(r(e.text)&&h.setTextContent(d,""),b(d,null,g,0,g.length-1,i)):r(m)?O(m,0,m.length-1):r(e.text)&&h.setTextContent(d,""):e.text!==t.text&&h.setTextContent(d,t.text),r(f)&&r(p=f.hook)&&r(p=p.postpatch)&&p(e,t)}}}function C(e,t,i){if(s(i)&&r(e.parent))e.parent.data.pendingInsert=t;else for(var n=0;n<t.length;++n)t[n].data.hook.insert(t[n])}var A=g("attrs,class,staticClass,staticStyle,key");function I(e,t,i,n){var o,a=t.tag,l=t.data,c=t.children;if(n=n||l&&l.pre,t.elm=e,s(t.isComment)&&r(t.asyncFactory))return t.isAsyncPlaceholder=!0,!0;if(r(l)&&(r(o=l.hook)&&r(o=o.init)&&o(t,!0),r(o=t.componentInstance)))return p(t,i),!0;if(r(a)){if(r(c))if(e.hasChildNodes())if(r(o=l)&&r(o=o.domProps)&&r(o=o.innerHTML)){if(o!==e.innerHTML)return!1}else{for(var h=!0,d=e.firstChild,u=0;u<c.length;u++){if(!d||!I(d,c[u],i,n)){h=!1;break}d=d.nextSibling}if(!h||d)return!1}else m(t,c,i);if(r(l)){var f=!1;for(var g in l)if(!A(g)){f=!0,v(t,i);break}!f&&l.class&&Xi(l.class)}}else e.data!==t.text&&(e.data=t.text);return!0}return function(e,t,i,o){if(!n(t)){var a,c=!1,d=[];if(n(e))c=!0,u(t,d);else{var p=r(e.nodeType);if(!p&&fr(e,t))P(e,t,d,null,null,o);else{if(p){if(1===e.nodeType&&e.hasAttribute(F)&&(e.removeAttribute(F),i=!0),s(i)&&I(e,t,d))return C(t,d,!0),e;a=e,e=new ue(h.tagName(a).toLowerCase(),{},[],void 0,a)}var f=e.elm,m=h.parentNode(f);if(u(t,d,f._leaveCb?null:m,h.nextSibling(f)),r(t.parent))for(var g=t.parent,v=y(t);g;){for(var x=0;x<l.destroy.length;++x)l.destroy[x](g);if(g.elm=t.elm,v){for(var b=0;b<l.create.length;++b)l.create[b](ur,g);var S=g.data.hook.insert;if(S.merged)for(var k=S.fns.slice(1),A=0;A<k.length;A++)k[A]()}else hr(g);g=g.parent}r(m)?O([e],0,0):r(e.tag)&&w(e)}}return C(t,d,c),t.elm}r(e)&&w(e)}}({nodeOps:lr,modules:[Cr,Dr,us,ms,Cs,X?{create:Ks,activate:Ks,remove:function(e,t){!0!==e.data.show?Gs(e,t):t()}}:{}].concat(Or)});Z&&document.addEventListener("selectionchange",(function(){var e=document.activeElement;e&&e.vmodel&&ao(e,"input")}));var eo={inserted:function(e,t,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?et(i,"postpatch",(function(){eo.componentUpdated(e,t,i)})):to(e,t,i.context),e._vOptions=[].map.call(e.options,ro)):("textarea"===i.tag||or(e.type))&&(e._vModifiers=t.modifiers,t.modifiers.lazy||(e.addEventListener("compositionstart",so),e.addEventListener("compositionend",oo),e.addEventListener("change",oo),Z&&(e.vmodel=!0)))},componentUpdated:function(e,t,i){if("select"===i.tag){to(e,t,i.context);var n=e._vOptions,r=e._vOptions=[].map.call(e.options,ro);r.some((function(e,t){return!L(e,n[t])}))&&(e.multiple?t.value.some((function(e){return no(e,r)})):t.value!==t.oldValue&&no(t.value,r))&&ao(e,"change")}}};function to(e,t,i){io(e,t),(Y||K)&&setTimeout((function(){io(e,t)}),0)}function io(e,t,i){var n=t.value,r=e.multiple;if(!r||Array.isArray(n)){for(var s,o,a=0,l=e.options.length;a<l;a++)if(o=e.options[a],r)s=B(n,ro(o))>-1,o.selected!==s&&(o.selected=s);else if(L(ro(o),n))return void(e.selectedIndex!==a&&(e.selectedIndex=a));r||(e.selectedIndex=-1)}}function no(e,t){return t.every((function(t){return!L(t,e)}))}function ro(e){return"_value"in e?e._value:e.value}function so(e){e.target.composing=!0}function oo(e){e.target.composing&&(e.target.composing=!1,ao(e.target,"input"))}function ao(e,t){var i=document.createEvent("HTMLEvents");i.initEvent(t,!0,!0),e.dispatchEvent(i)}function lo(e){return!e.componentInstance||e.data&&e.data.transition?e:lo(e.componentInstance._vnode)}var co={bind:function(e,t,i){var n=t.value,r=(i=lo(i)).data&&i.data.transition,s=e.__vOriginalDisplay="none"===e.style.display?"":e.style.display;n&&r?(i.data.show=!0,Xs(i,(function(){e.style.display=s}))):e.style.display=n?s:"none"},update:function(e,t,i){var n=t.value;!n!=!t.oldValue&&((i=lo(i)).data&&i.data.transition?(i.data.show=!0,n?Xs(i,(function(){e.style.display=e.__vOriginalDisplay})):Gs(i,(function(){e.style.display="none"}))):e.style.display=n?e.__vOriginalDisplay:"none")},unbind:function(e,t,i,n,r){r||(e.style.display=e.__vOriginalDisplay)}},ho={model:eo,show:co},uo={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function po(e){var t=e&&e.componentOptions;return t&&t.Ctor.options.abstract?po(Ft(t.children)):e}function fo(e){var t={},i=e.$options;for(var n in i.propsData)t[n]=e[n];var r=i._parentListeners;for(var n in r)t[k(n)]=r[n];return t}function mo(e,t){if(/\d-keep-alive$/.test(t.tag))return e("keep-alive",{props:t.componentOptions.propsData})}var go=function(e){return e.tag||Ct(e)},yo=function(e){return"show"===e.name},vo={name:"transition",props:uo,abstract:!0,render:function(e){var t=this,i=this.$slots.default;if(i&&(i=i.filter(go)).length){var n=this.mode,r=i[0];if(function(e){for(;e=e.parent;)if(e.data.transition)return!0}(this.$vnode))return r;var s=po(r);if(!s)return r;if(this._leaving)return mo(e,r);var a="__transition-".concat(this._uid,"-");s.key=null==s.key?s.isComment?a+"comment":a+s.tag:o(s.key)?0===String(s.key).indexOf(a)?s.key:a+s.key:s.key;var l=(s.data||(s.data={})).transition=fo(this),c=this._vnode,h=po(c);if(s.data.directives&&s.data.directives.some(yo)&&(s.data.show=!0),h&&h.data&&!function(e,t){return t.key===e.key&&t.tag===e.tag}(s,h)&&!Ct(h)&&(!h.componentInstance||!h.componentInstance._vnode.isComment)){var d=h.data.transition=$({},l);if("out-in"===n)return this._leaving=!0,et(d,"afterLeave",(function(){t._leaving=!1,t.$forceUpdate()})),mo(e,r);if("in-out"===n){if(Ct(s))return c;var u,p=function(){u()};et(l,"afterEnter",p),et(l,"enterCancelled",p),et(d,"delayLeave",(function(e){u=e}))}}return r}}},xo=$({tag:String,moveClass:String},uo);delete xo.mode;var bo={props:xo,beforeMount:function(){var e=this,t=this._update;this._update=function(i,n){var r=Wt(e);e.__patch__(e._vnode,e.kept,!1,!0),e._vnode=e.kept,r(),t.call(e,i,n)}},render:function(e){for(var t=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,r=this.$slots.default||[],s=this.children=[],o=fo(this),a=0;a<r.length;a++)(h=r[a]).tag&&null!=h.key&&0!==String(h.key).indexOf("__vlist")&&(s.push(h),i[h.key]=h,(h.data||(h.data={})).transition=o);if(n){var l=[],c=[];for(a=0;a<n.length;a++){var h;(h=n[a]).data.transition=o,h.data.pos=h.elm.getBoundingClientRect(),i[h.key]?l.push(h):c.push(h)}this.kept=e(t,null,l),this.removed=c}return e(t,null,s)},updated:function(){var e=this.prevChildren,t=this.moveClass||(this.name||"v")+"-move";e.length&&this.hasMove(e[0].elm,t)&&(e.forEach(wo),e.forEach(Oo),e.forEach(So),this._reflow=document.body.offsetHeight,e.forEach((function(e){if(e.data.moved){var i=e.elm,n=i.style;zs(i,t),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(Bs,i._moveCb=function e(n){n&&n.target!==i||n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(Bs,e),i._moveCb=null,Qs(i,t))})}})))},methods:{hasMove:function(e,t){if(!Es)return!1;if(this._hasMove)return this._hasMove;var i=e.cloneNode();e._transitionClasses&&e._transitionClasses.forEach((function(e){Ts(i,e)})),Is(i,t),i.style.display="none",this.$el.appendChild(i);var n=Hs(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}};function wo(e){e.elm._moveCb&&e.elm._moveCb(),e.elm._enterCb&&e.elm._enterCb()}function Oo(e){e.data.newPos=e.elm.getBoundingClientRect()}function So(e){var t=e.data.pos,i=e.data.newPos,n=t.left-i.left,r=t.top-i.top;if(n||r){e.data.moved=!0;var s=e.elm.style;s.transform=s.WebkitTransform="translate(".concat(n,"px,").concat(r,"px)"),s.transitionDuration="0s"}}var ko={Transition:vo,TransitionGroup:bo};En.config.mustUseProp=Qn,En.config.isReservedTag=nr,En.config.isReservedAttr=jn,En.config.getTagNamespace=rr,En.config.isUnknownElement=function(e){if(!X)return!0;if(nr(e))return!1;if(e=e.toLowerCase(),null!=sr[e])return sr[e];var t=document.createElement(e);return e.indexOf("-")>-1?sr[e]=t.constructor===window.HTMLUnknownElement||t.constructor===window.HTMLElement:sr[e]=/HTMLUnknownElement/.test(t.toString())},$(En.options.directives,ho),$(En.options.components,ko),En.prototype.__patch__=X?Js:E,En.prototype.$mount=function(e,t){return function(e,t,i){var n;e.$el=t,e.$options.render||(e.$options.render=pe),Zt(e,"beforeMount"),n=function(){e._update(e._render(),i)},new Zi(e,n,E,{before:function(){e._isMounted&&!e._isDestroyed&&Zt(e,"beforeUpdate")}},!0),i=!1;var r=e._preWatchers;if(r)for(var s=0;s<r.length;s++)r[s].run();return null==e.$vnode&&(e._isMounted=!0,Zt(e,"mounted")),e}(this,e=e&&X?ar(e):void 0,t)},X&&setTimeout((function(){Q.devtools&&oe&&oe.emit("init",En)}),0);var Po,Co=/\{\{((?:.|\r?\n)+?)\}\}/g,Ao=/[-.*+?^${}()|[\]\/\\]/g,Io=O((function(e){var t=e[0].replace(Ao,"\\$&"),i=e[1].replace(Ao,"\\$&");return new RegExp(t+"((?:.|\\n)+?)"+i,"g")})),To={staticKeys:["staticClass"],transformNode:function(e,t){t.warn;var i=Wr(e,"class");i&&(e.staticClass=JSON.stringify(i.replace(/\s+/g," ").trim()));var n=Vr(e,"class",!1);n&&(e.classBinding=n)},genData:function(e){var t="";return e.staticClass&&(t+="staticClass:".concat(e.staticClass,",")),e.classBinding&&(t+="class:".concat(e.classBinding,",")),t}},$o={staticKeys:["staticStyle"],transformNode:function(e,t){t.warn;var i=Wr(e,"style");i&&(e.staticStyle=JSON.stringify(gs(i)));var n=Vr(e,"style",!1);n&&(e.styleBinding=n)},genData:function(e){var t="";return e.staticStyle&&(t+="staticStyle:".concat(e.staticStyle,",")),e.styleBinding&&(t+="style:(".concat(e.styleBinding,"),")),t}},Mo=g("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Eo=g("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),_o=g("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),Do=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Lo=/^\s*((?:v-[\w-]+:|@|:|#)\[[^=]+?\][^\s"'<>\/=]*)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,Bo="[a-zA-Z_][\\-\\.0-9_a-zA-Z".concat(U.source,"]*"),Ro="((?:".concat(Bo,"\\:)?").concat(Bo,")"),No=new RegExp("^<".concat(Ro)),Fo=/^\s*(\/?)>/,jo=new RegExp("^<\\/".concat(Ro,"[^>]*>")),zo=/^<!DOCTYPE [^>]+>/i,Qo=/^<!\--/,Uo=/^<!\[/,qo=g("script,style,textarea",!0),Ho={},Vo={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t","&#39;":"'"},Wo=/&(?:lt|gt|quot|amp|#39);/g,Xo=/&(?:lt|gt|quot|amp|#39|#10|#9);/g,Go=g("pre,textarea",!0),Yo=function(e,t){return e&&Go(e)&&"\n"===t[0]};function Zo(e,t){var i=t?Xo:Wo;return e.replace(i,(function(e){return Vo[e]}))}var Ko,Jo,ea,ta,ia,na,ra,sa,oa=/^@|^v-on:/,aa=/^v-|^@|^:|^#/,la=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,ca=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,ha=/^\(|\)$/g,da=/^\[.*\]$/,ua=/:(.*)$/,pa=/^:|^\.|^v-bind:/,fa=/\.[^.\]]+(?=[^\]]*$)/g,ma=/^v-slot(:|$)|^#/,ga=/[\r\n]/,ya=/[ \f\t\r\n]+/g,va=O((function(e){return(Po=Po||document.createElement("div")).innerHTML=e,Po.textContent})),xa="_empty_";function ba(e,t,i){return{type:1,tag:e,attrsList:t,attrsMap:Aa(t),rawAttrsMap:{},parent:i,children:[]}}function wa(e,t){Ko=t.warn||Nr,na=t.isPreTag||_,ra=t.mustUseProp||_,sa=t.getTagNamespace||_,t.isReservedTag,ea=Fr(t.modules,"transformNode"),ta=Fr(t.modules,"preTransformNode"),ia=Fr(t.modules,"postTransformNode"),Jo=t.delimiters;var i,n,r=[],s=!1!==t.preserveWhitespace,o=t.whitespace,a=!1,l=!1;function c(e){if(h(e),a||e.processed||(e=Oa(e,t)),r.length||e===i||i.if&&(e.elseif||e.else)&&ka(i,{exp:e.elseif,block:e}),n&&!e.forbidden)if(e.elseif||e.else)o=e,c=function(e){for(var t=e.length;t--;){if(1===e[t].type)return e[t];e.pop()}}(n.children),c&&c.if&&ka(c,{exp:o.elseif,block:o});else{if(e.slotScope){var s=e.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[s]=e}n.children.push(e),e.parent=n}var o,c;e.children=e.children.filter((function(e){return!e.slotScope})),h(e),e.pre&&(a=!1),na(e.tag)&&(l=!1);for(var d=0;d<ia.length;d++)ia[d](e,t)}function h(e){if(!l)for(var t=void 0;(t=e.children[e.children.length-1])&&3===t.type&&" "===t.text;)e.children.pop()}return function(e,t){for(var i,n,r=[],s=t.expectHTML,o=t.isUnaryTag||_,a=t.canBeLeftOpenTag||_,l=0,c=function(){if(i=e,n&&qo(n)){var c=0,u=n.toLowerCase(),p=Ho[u]||(Ho[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i"));O=e.replace(p,(function(e,i,n){return c=n.length,qo(u)||"noscript"===u||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Yo(u,i)&&(i=i.slice(1)),t.chars&&t.chars(i),""})),l+=e.length-O.length,e=O,d(u,l-c,l)}else{var f=e.indexOf("<");if(0===f){if(Qo.test(e)){var m=e.indexOf("--\x3e");if(m>=0)return t.shouldKeepComment&&t.comment&&t.comment(e.substring(4,m),l,l+m+3),h(m+3),"continue"}if(Uo.test(e)){var g=e.indexOf("]>");if(g>=0)return h(g+2),"continue"}var y=e.match(zo);if(y)return h(y[0].length),"continue";var v=e.match(jo);if(v){var x=l;return h(v[0].length),d(v[1],x,l),"continue"}var b=function(){var t=e.match(No);if(t){var i={tagName:t[1],attrs:[],start:l};h(t[0].length);for(var n=void 0,r=void 0;!(n=e.match(Fo))&&(r=e.match(Lo)||e.match(Do));)r.start=l,h(r[0].length),r.end=l,i.attrs.push(r);if(n)return i.unarySlash=n[1],h(n[0].length),i.end=l,i}}();if(b)return function(e){var i=e.tagName,l=e.unarySlash;s&&("p"===n&&_o(i)&&d(n),a(i)&&n===i&&d(i));for(var c=o(i)||!!l,h=e.attrs.length,u=new Array(h),p=0;p<h;p++){var f=e.attrs[p],m=f[3]||f[4]||f[5]||"",g="a"===i&&"href"===f[1]?t.shouldDecodeNewlinesForHref:t.shouldDecodeNewlines;u[p]={name:f[1],value:Zo(m,g)}}c||(r.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:u,start:e.start,end:e.end}),n=i),t.start&&t.start(i,u,c,e.start,e.end)}(b),Yo(b.tagName,e)&&h(1),"continue"}var w=void 0,O=void 0,S=void 0;if(f>=0){for(O=e.slice(f);!(jo.test(O)||No.test(O)||Qo.test(O)||Uo.test(O)||(S=O.indexOf("<",1))<0);)f+=S,O=e.slice(f);w=e.substring(0,f)}f<0&&(w=e),w&&h(w.length),t.chars&&w&&t.chars(w,l-w.length,l)}if(e===i)return t.chars&&t.chars(e),"break"};e&&"break"!==c(););function h(t){l+=t,e=e.substring(t)}function d(e,i,s){var o,a;if(null==i&&(i=l),null==s&&(s=l),e)for(a=e.toLowerCase(),o=r.length-1;o>=0&&r[o].lowerCasedTag!==a;o--);else o=0;if(o>=0){for(var c=r.length-1;c>=o;c--)t.end&&t.end(r[c].tag,i,s);r.length=o,n=o&&r[o-1].tag}else"br"===a?t.start&&t.start(e,[],!0,i,s):"p"===a&&(t.start&&t.start(e,[],!1,i,s),t.end&&t.end(e,i,s))}d()}(e,{warn:Ko,expectHTML:t.expectHTML,isUnaryTag:t.isUnaryTag,canBeLeftOpenTag:t.canBeLeftOpenTag,shouldDecodeNewlines:t.shouldDecodeNewlines,shouldDecodeNewlinesForHref:t.shouldDecodeNewlinesForHref,shouldKeepComment:t.comments,outputSourceRange:t.outputSourceRange,start:function(e,s,o,h,d){var u=n&&n.ns||sa(e);Y&&"svg"===u&&(s=function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];Ia.test(n.name)||(n.name=n.name.replace(Ta,""),t.push(n))}return t}(s));var p,f=ba(e,s,n);u&&(f.ns=u),"style"!==(p=f).tag&&("script"!==p.tag||p.attrsMap.type&&"text/javascript"!==p.attrsMap.type)||se()||(f.forbidden=!0);for(var m=0;m<ta.length;m++)f=ta[m](f,t)||f;a||(function(e){null!=Wr(e,"v-pre")&&(e.pre=!0)}(f),f.pre&&(a=!0)),na(f.tag)&&(l=!0),a?function(e){var t=e.attrsList,i=t.length;if(i)for(var n=e.attrs=new Array(i),r=0;r<i;r++)n[r]={name:t[r].name,value:JSON.stringify(t[r].value)},null!=t[r].start&&(n[r].start=t[r].start,n[r].end=t[r].end);else e.pre||(e.plain=!0)}(f):f.processed||(Sa(f),function(e){var t=Wr(e,"v-if");if(t)e.if=t,ka(e,{exp:t,block:e});else{null!=Wr(e,"v-else")&&(e.else=!0);var i=Wr(e,"v-else-if");i&&(e.elseif=i)}}(f),function(e){null!=Wr(e,"v-once")&&(e.once=!0)}(f)),i||(i=f),o?c(f):(n=f,r.push(f))},end:function(e,t,i){var s=r[r.length-1];r.length-=1,n=r[r.length-1],c(s)},chars:function(e,t,i){if(n&&(!Y||"textarea"!==n.tag||n.attrsMap.placeholder!==e)){var r,c=n.children;if(e=l||e.trim()?"script"===(r=n).tag||"style"===r.tag?e:va(e):c.length?o?"condense"===o&&ga.test(e)?"":" ":s?" ":"":""){l||"condense"!==o||(e=e.replace(ya," "));var h=void 0,d=void 0;!a&&" "!==e&&(h=function(e,t){var i=t?Io(t):Co;if(i.test(e)){for(var n,r,s,o=[],a=[],l=i.lastIndex=0;n=i.exec(e);){(r=n.index)>l&&(a.push(s=e.slice(l,r)),o.push(JSON.stringify(s)));var c=Br(n[1].trim());o.push("_s(".concat(c,")")),a.push({"@binding":c}),l=r+n[0].length}return l<e.length&&(a.push(s=e.slice(l)),o.push(JSON.stringify(s))),{expression:o.join("+"),tokens:a}}}(e,Jo))?d={type:2,expression:h.expression,tokens:h.tokens,text:e}:" "===e&&c.length&&" "===c[c.length-1].text||(d={type:3,text:e}),d&&c.push(d)}}},comment:function(e,t,i){if(n){var r={type:3,text:e,isComment:!0};n.children.push(r)}}}),i}function Oa(e,t){var i,n;(n=Vr(i=e,"key"))&&(i.key=n),e.plain=!e.key&&!e.scopedSlots&&!e.attrsList.length,function(e){var t=Vr(e,"ref");t&&(e.ref=t,e.refInFor=function(e){for(var t=e;t;){if(void 0!==t.for)return!0;t=t.parent}return!1}(e))}(e),function(e){var t;"template"===e.tag?(t=Wr(e,"scope"),e.slotScope=t||Wr(e,"slot-scope")):(t=Wr(e,"slot-scope"))&&(e.slotScope=t);var i,n=Vr(e,"slot");if(n&&(e.slotTarget='""'===n?'"default"':n,e.slotTargetDynamic=!(!e.attrsMap[":slot"]&&!e.attrsMap["v-bind:slot"]),"template"===e.tag||e.slotScope||zr(e,"slot",n,function(e,t){return e.rawAttrsMap[":"+t]||e.rawAttrsMap["v-bind:"+t]||e.rawAttrsMap[t]}(e,"slot"))),"template"===e.tag){if(i=Xr(e,ma)){var r=Pa(i),s=r.name,o=r.dynamic;e.slotTarget=s,e.slotTargetDynamic=o,e.slotScope=i.value||xa}}else if(i=Xr(e,ma)){var a=e.scopedSlots||(e.scopedSlots={}),l=Pa(i),c=l.name,h=(o=l.dynamic,a[c]=ba("template",[],e));h.slotTarget=c,h.slotTargetDynamic=o,h.children=e.children.filter((function(e){if(!e.slotScope)return e.parent=h,!0})),h.slotScope=i.value||xa,e.children=[],e.plain=!1}}(e),function(e){"slot"===e.tag&&(e.slotName=Vr(e,"name"))}(e),function(e){var t;(t=Vr(e,"is"))&&(e.component=t),null!=Wr(e,"inline-template")&&(e.inlineTemplate=!0)}(e);for(var r=0;r<ea.length;r++)e=ea[r](e,t)||e;return function(e){var t,i,n,r,s,o,a,l,c=e.attrsList;for(t=0,i=c.length;t<i;t++)if(n=r=c[t].name,s=c[t].value,aa.test(n))if(e.hasBindings=!0,(o=Ca(n.replace(aa,"")))&&(n=n.replace(fa,"")),pa.test(n))n=n.replace(pa,""),s=Br(s),(l=da.test(n))&&(n=n.slice(1,-1)),o&&(o.prop&&!l&&"innerHtml"===(n=k(n))&&(n="innerHTML"),o.camel&&!l&&(n=k(n)),o.sync&&(a=Zr(s,"$event"),l?Hr(e,'"update:"+('.concat(n,")"),a,null,!1,0,c[t],!0):(Hr(e,"update:".concat(k(n)),a,null,!1,0,c[t]),A(n)!==k(n)&&Hr(e,"update:".concat(A(n)),a,null,!1,0,c[t])))),o&&o.prop||!e.component&&ra(e.tag,e.attrsMap.type,n)?jr(e,n,s,c[t],l):zr(e,n,s,c[t],l);else if(oa.test(n))n=n.replace(oa,""),(l=da.test(n))&&(n=n.slice(1,-1)),Hr(e,n,s,o,!1,0,c[t],l);else{var h=(n=n.replace(aa,"")).match(ua),d=h&&h[1];l=!1,d&&(n=n.slice(0,-(d.length+1)),da.test(d)&&(d=d.slice(1,-1),l=!0)),Ur(e,n,r,s,d,l,o,c[t])}else zr(e,n,JSON.stringify(s),c[t]),!e.component&&"muted"===n&&ra(e.tag,e.attrsMap.type,n)&&jr(e,n,"true",c[t])}(e),e}function Sa(e){var t;if(t=Wr(e,"v-for")){var i=function(e){var t=e.match(la);if(t){var i={};i.for=t[2].trim();var n=t[1].trim().replace(ha,""),r=n.match(ca);return r?(i.alias=n.replace(ca,"").trim(),i.iterator1=r[1].trim(),r[2]&&(i.iterator2=r[2].trim())):i.alias=n,i}}(t);i&&$(e,i)}}function ka(e,t){e.ifConditions||(e.ifConditions=[]),e.ifConditions.push(t)}function Pa(e){var t=e.name.replace(ma,"");return t||"#"!==e.name[0]&&(t="default"),da.test(t)?{name:t.slice(1,-1),dynamic:!0}:{name:'"'.concat(t,'"'),dynamic:!1}}function Ca(e){var t=e.match(fa);if(t){var i={};return t.forEach((function(e){i[e.slice(1)]=!0})),i}}function Aa(e){for(var t={},i=0,n=e.length;i<n;i++)t[e[i].name]=e[i].value;return t}var Ia=/^xmlns:NS\d+/,Ta=/^NS\d+:/;function $a(e){return ba(e.tag,e.attrsList.slice(),e.parent)}var Ma,Ea,_a=[To,$o,{preTransformNode:function(e,t){if("input"===e.tag){var i=e.attrsMap;if(!i["v-model"])return;var n=void 0;if((i[":type"]||i["v-bind:type"])&&(n=Vr(e,"type")),i.type||n||!i["v-bind"]||(n="(".concat(i["v-bind"],").type")),n){var r=Wr(e,"v-if",!0),s=r?"&&(".concat(r,")"):"",o=null!=Wr(e,"v-else",!0),a=Wr(e,"v-else-if",!0),l=$a(e);Sa(l),Qr(l,"type","checkbox"),Oa(l,t),l.processed=!0,l.if="(".concat(n,")==='checkbox'")+s,ka(l,{exp:l.if,block:l});var c=$a(e);Wr(c,"v-for",!0),Qr(c,"type","radio"),Oa(c,t),ka(l,{exp:"(".concat(n,")==='radio'")+s,block:c});var h=$a(e);return Wr(h,"v-for",!0),Qr(h,":type",n),Oa(h,t),ka(l,{exp:r,block:h}),o?l.else=!0:a&&(l.elseif=a),l}}}}],Da={model:function(e,t,i){var n=t.value,r=t.modifiers,s=e.tag,o=e.attrsMap.type;if(e.component)return Yr(e,n,r),!1;if("select"===s)!function(e,t,i){var n=i&&i.number,r='Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;'+"return ".concat(n?"_n(val)":"val","})"),s="var $$selectedVal = ".concat(r,";");Hr(e,"change",s="".concat(s," ").concat(Zr(t,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]")),null,!0)}(e,n,r);else if("input"===s&&"checkbox"===o)!function(e,t,i){var n=i&&i.number,r=Vr(e,"value")||"null",s=Vr(e,"true-value")||"true",o=Vr(e,"false-value")||"false";jr(e,"checked","Array.isArray(".concat(t,")")+"?_i(".concat(t,",").concat(r,")>-1")+("true"===s?":(".concat(t,")"):":_q(".concat(t,",").concat(s,")"))),Hr(e,"change","var $$a=".concat(t,",")+"$$el=$event.target,"+"$$c=$$el.checked?(".concat(s,"):(").concat(o,");")+"if(Array.isArray($$a)){"+"var $$v=".concat(n?"_n("+r+")":r,",")+"$$i=_i($$a,$$v);"+"if($$el.checked){$$i<0&&(".concat(Zr(t,"$$a.concat([$$v])"),")}")+"else{$$i>-1&&(".concat(Zr(t,"$$a.slice(0,$$i).concat($$a.slice($$i+1))"),")}")+"}else{".concat(Zr(t,"$$c"),"}"),null,!0)}(e,n,r);else if("input"===s&&"radio"===o)!function(e,t,i){var n=i&&i.number,r=Vr(e,"value")||"null";r=n?"_n(".concat(r,")"):r,jr(e,"checked","_q(".concat(t,",").concat(r,")")),Hr(e,"change",Zr(t,r),null,!0)}(e,n,r);else if("input"===s||"textarea"===s)!function(e,t,i){var n=e.attrsMap.type,r=i||{},s=r.lazy,o=r.number,a=r.trim,l=!s&&"range"!==n,c=s?"change":"range"===n?rs:"input",h="$event.target.value";a&&(h="$event.target.value.trim()"),o&&(h="_n(".concat(h,")"));var d=Zr(t,h);l&&(d="if($event.target.composing)return;".concat(d)),jr(e,"value","(".concat(t,")")),Hr(e,c,d,null,!0),(a||o)&&Hr(e,"blur","$forceUpdate()")}(e,n,r);else if(!Q.isReservedTag(s))return Yr(e,n,r),!1;return!0},text:function(e,t){t.value&&jr(e,"textContent","_s(".concat(t.value,")"),t)},html:function(e,t){t.value&&jr(e,"innerHTML","_s(".concat(t.value,")"),t)}},La={expectHTML:!0,modules:_a,directives:Da,isPreTag:function(e){return"pre"===e},isUnaryTag:Mo,mustUseProp:Qn,canBeLeftOpenTag:Eo,isReservedTag:nr,getTagNamespace:rr,staticKeys:function(e){return e.reduce((function(e,t){return e.concat(t.staticKeys||[])}),[]).join(",")}(_a)},Ba=O((function(e){return g("type,tag,attrsList,attrsMap,plain,parent,children,attrs,start,end,rawAttrsMap"+(e?","+e:""))}));function Ra(e,t){e&&(Ma=Ba(t.staticKeys||""),Ea=t.isReservedTag||_,Na(e),Fa(e,!1))}function Na(e){if(e.static=function(e){return 2!==e.type&&(3===e.type||!(!e.pre&&(e.hasBindings||e.if||e.for||y(e.tag)||!Ea(e.tag)||function(e){for(;e.parent;){if("template"!==(e=e.parent).tag)return!1;if(e.for)return!0}return!1}(e)||!Object.keys(e).every(Ma))))}(e),1===e.type){if(!Ea(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var t=0,i=e.children.length;t<i;t++){var n=e.children[t];Na(n),n.static||(e.static=!1)}if(e.ifConditions)for(t=1,i=e.ifConditions.length;t<i;t++){var r=e.ifConditions[t].block;Na(r),r.static||(e.static=!1)}}}function Fa(e,t){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=t),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var i=0,n=e.children.length;i<n;i++)Fa(e.children[i],t||!!e.for);if(e.ifConditions)for(i=1,n=e.ifConditions.length;i<n;i++)Fa(e.ifConditions[i].block,t)}}var ja=/^([\w$_]+|\([^)]*?\))\s*=>|^function(?:\s+[\w$]+)?\s*\(/,za=/\([^)]*?\);*$/,Qa=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ua={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},qa={esc:["Esc","Escape"],tab:"Tab",enter:"Enter",space:[" ","Spacebar"],up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete","Del"]},Ha=function(e){return"if(".concat(e,")return null;")},Va={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Ha("$event.target !== $event.currentTarget"),ctrl:Ha("!$event.ctrlKey"),shift:Ha("!$event.shiftKey"),alt:Ha("!$event.altKey"),meta:Ha("!$event.metaKey"),left:Ha("'button' in $event && $event.button !== 0"),middle:Ha("'button' in $event && $event.button !== 1"),right:Ha("'button' in $event && $event.button !== 2")};function Wa(e,t){var i=t?"nativeOn:":"on:",n="",r="";for(var s in e){var o=Xa(e[s]);e[s]&&e[s].dynamic?r+="".concat(s,",").concat(o,","):n+='"'.concat(s,'":').concat(o,",")}return n="{".concat(n.slice(0,-1),"}"),r?i+"_d(".concat(n,",[").concat(r.slice(0,-1),"])"):i+n}function Xa(e){if(!e)return"function(){}";if(Array.isArray(e))return"[".concat(e.map((function(e){return Xa(e)})).join(","),"]");var t=Qa.test(e.value),i=ja.test(e.value),n=Qa.test(e.value.replace(za,""));if(e.modifiers){var r="",s="",o=[],a=function(t){if(Va[t])s+=Va[t],Ua[t]&&o.push(t);else if("exact"===t){var i=e.modifiers;s+=Ha(["ctrl","shift","alt","meta"].filter((function(e){return!i[e]})).map((function(e){return"$event.".concat(e,"Key")})).join("||"))}else o.push(t)};for(var l in e.modifiers)a(l);o.length&&(r+=function(e){return"if(!$event.type.indexOf('key')&&"+"".concat(e.map(Ga).join("&&"),")return null;")}(o)),s&&(r+=s);var c=t?"return ".concat(e.value,".apply(null, arguments)"):i?"return (".concat(e.value,").apply(null, arguments)"):n?"return ".concat(e.value):e.value;return"function($event){".concat(r).concat(c,"}")}return t||i?e.value:"function($event){".concat(n?"return ".concat(e.value):e.value,"}")}function Ga(e){var t=parseInt(e,10);if(t)return"$event.keyCode!==".concat(t);var i=Ua[e],n=qa[e];return"_k($event.keyCode,"+"".concat(JSON.stringify(e),",")+"".concat(JSON.stringify(i),",")+"$event.key,"+"".concat(JSON.stringify(n))+")"}var Ya={on:function(e,t){e.wrapListeners=function(e){return"_g(".concat(e,",").concat(t.value,")")}},bind:function(e,t){e.wrapData=function(i){return"_b(".concat(i,",'").concat(e.tag,"',").concat(t.value,",").concat(t.modifiers&&t.modifiers.prop?"true":"false").concat(t.modifiers&&t.modifiers.sync?",true":"",")")}},cloak:E},Za=function(e){this.options=e,this.warn=e.warn||Nr,this.transforms=Fr(e.modules,"transformCode"),this.dataGenFns=Fr(e.modules,"genData"),this.directives=$($({},Ya),e.directives);var t=e.isReservedTag||_;this.maybeComponent=function(e){return!!e.component||!t(e.tag)},this.onceId=0,this.staticRenderFns=[],this.pre=!1};function Ka(e,t){var i=new Za(t),n=e?"script"===e.tag?"null":Ja(e,i):'_c("div")';return{render:"with(this){return ".concat(n,"}"),staticRenderFns:i.staticRenderFns}}function Ja(e,t){if(e.parent&&(e.pre=e.pre||e.parent.pre),e.staticRoot&&!e.staticProcessed)return el(e,t);if(e.once&&!e.onceProcessed)return tl(e,t);if(e.for&&!e.forProcessed)return rl(e,t);if(e.if&&!e.ifProcessed)return il(e,t);if("template"!==e.tag||e.slotTarget||t.pre){if("slot"===e.tag)return function(e,t){var i=e.slotName||'"default"',n=ll(e,t),r="_t(".concat(i).concat(n?",function(){return ".concat(n,"}"):""),s=e.attrs||e.dynamicAttrs?dl((e.attrs||[]).concat(e.dynamicAttrs||[]).map((function(e){return{name:k(e.name),value:e.value,dynamic:e.dynamic}}))):null,o=e.attrsMap["v-bind"];return!s&&!o||n||(r+=",null"),s&&(r+=",".concat(s)),o&&(r+="".concat(s?"":",null",",").concat(o)),r+")"}(e,t);var i=void 0;if(e.component)i=function(e,t,i){var n=t.inlineTemplate?null:ll(t,i,!0);return"_c(".concat(e,",").concat(sl(t,i)).concat(n?",".concat(n):"",")")}(e.component,e,t);else{var n=void 0,r=t.maybeComponent(e);(!e.plain||e.pre&&r)&&(n=sl(e,t));var s=void 0,o=t.options.bindings;r&&o&&!1!==o.__isScriptSetup&&(s=function(e,t){var i=k(t),n=P(i),r=function(r){return e[t]===r?t:e[i]===r?i:e[n]===r?n:void 0},s=r("setup-const")||r("setup-reactive-const");return s||(r("setup-let")||r("setup-ref")||r("setup-maybe-ref")||void 0)}(o,e.tag)),s||(s="'".concat(e.tag,"'"));var a=e.inlineTemplate?null:ll(e,t,!0);i="_c(".concat(s).concat(n?",".concat(n):"").concat(a?",".concat(a):"",")")}for(var l=0;l<t.transforms.length;l++)i=t.transforms[l](e,i);return i}return ll(e,t)||"void 0"}function el(e,t){e.staticProcessed=!0;var i=t.pre;return e.pre&&(t.pre=e.pre),t.staticRenderFns.push("with(this){return ".concat(Ja(e,t),"}")),t.pre=i,"_m(".concat(t.staticRenderFns.length-1).concat(e.staticInFor?",true":"",")")}function tl(e,t){if(e.onceProcessed=!0,e.if&&!e.ifProcessed)return il(e,t);if(e.staticInFor){for(var i="",n=e.parent;n;){if(n.for){i=n.key;break}n=n.parent}return i?"_o(".concat(Ja(e,t),",").concat(t.onceId++,",").concat(i,")"):Ja(e,t)}return el(e,t)}function il(e,t,i,n){return e.ifProcessed=!0,nl(e.ifConditions.slice(),t,i,n)}function nl(e,t,i,n){if(!e.length)return n||"_e()";var r=e.shift();return r.exp?"(".concat(r.exp,")?").concat(s(r.block),":").concat(nl(e,t,i,n)):"".concat(s(r.block));function s(e){return i?i(e,t):e.once?tl(e,t):Ja(e,t)}}function rl(e,t,i,n){var r=e.for,s=e.alias,o=e.iterator1?",".concat(e.iterator1):"",a=e.iterator2?",".concat(e.iterator2):"";return e.forProcessed=!0,"".concat(n||"_l","((").concat(r,"),")+"function(".concat(s).concat(o).concat(a,"){")+"return ".concat((i||Ja)(e,t))+"})"}function sl(e,t){var i="{",n=function(e,t){var i=e.directives;if(i){var n,r,s,o,a="directives:[",l=!1;for(n=0,r=i.length;n<r;n++){s=i[n],o=!0;var c=t.directives[s.name];c&&(o=!!c(e,s,t.warn)),o&&(l=!0,a+='{name:"'.concat(s.name,'",rawName:"').concat(s.rawName,'"').concat(s.value?",value:(".concat(s.value,"),expression:").concat(JSON.stringify(s.value)):"").concat(s.arg?",arg:".concat(s.isDynamicArg?s.arg:'"'.concat(s.arg,'"')):"").concat(s.modifiers?",modifiers:".concat(JSON.stringify(s.modifiers)):"","},"))}return l?a.slice(0,-1)+"]":void 0}}(e,t);n&&(i+=n+","),e.key&&(i+="key:".concat(e.key,",")),e.ref&&(i+="ref:".concat(e.ref,",")),e.refInFor&&(i+="refInFor:true,"),e.pre&&(i+="pre:true,"),e.component&&(i+='tag:"'.concat(e.tag,'",'));for(var r=0;r<t.dataGenFns.length;r++)i+=t.dataGenFns[r](e);if(e.attrs&&(i+="attrs:".concat(dl(e.attrs),",")),e.props&&(i+="domProps:".concat(dl(e.props),",")),e.events&&(i+="".concat(Wa(e.events,!1),",")),e.nativeEvents&&(i+="".concat(Wa(e.nativeEvents,!0),",")),e.slotTarget&&!e.slotScope&&(i+="slot:".concat(e.slotTarget,",")),e.scopedSlots&&(i+="".concat(function(e,t,i){var n=e.for||Object.keys(t).some((function(e){var i=t[e];return i.slotTargetDynamic||i.if||i.for||ol(i)})),r=!!e.if;if(!n)for(var s=e.parent;s;){if(s.slotScope&&s.slotScope!==xa||s.for){n=!0;break}s.if&&(r=!0),s=s.parent}var o=Object.keys(t).map((function(e){return al(t[e],i)})).join(",");return"scopedSlots:_u([".concat(o,"]").concat(n?",null,true":"").concat(!n&&r?",null,false,".concat(function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return t>>>0}(o)):"",")")}(e,e.scopedSlots,t),",")),e.model&&(i+="model:{value:".concat(e.model.value,",callback:").concat(e.model.callback,",expression:").concat(e.model.expression,"},")),e.inlineTemplate){var s=function(e,t){var i=e.children[0];if(i&&1===i.type){var n=Ka(i,t.options);return"inlineTemplate:{render:function(){".concat(n.render,"},staticRenderFns:[").concat(n.staticRenderFns.map((function(e){return"function(){".concat(e,"}")})).join(","),"]}")}}(e,t);s&&(i+="".concat(s,","))}return i=i.replace(/,$/,"")+"}",e.dynamicAttrs&&(i="_b(".concat(i,',"').concat(e.tag,'",').concat(dl(e.dynamicAttrs),")")),e.wrapData&&(i=e.wrapData(i)),e.wrapListeners&&(i=e.wrapListeners(i)),i}function ol(e){return 1===e.type&&("slot"===e.tag||e.children.some(ol))}function al(e,t){var i=e.attrsMap["slot-scope"];if(e.if&&!e.ifProcessed&&!i)return il(e,t,al,"null");if(e.for&&!e.forProcessed)return rl(e,t,al);var n=e.slotScope===xa?"":String(e.slotScope),r="function(".concat(n,"){")+"return ".concat("template"===e.tag?e.if&&i?"(".concat(e.if,")?").concat(ll(e,t)||"undefined",":undefined"):ll(e,t)||"undefined":Ja(e,t),"}"),s=n?"":",proxy:true";return"{key:".concat(e.slotTarget||'"default"',",fn:").concat(r).concat(s,"}")}function ll(e,t,i,n,r){var s=e.children;if(s.length){var o=s[0];if(1===s.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag){var a=i?t.maybeComponent(o)?",1":",0":"";return"".concat((n||Ja)(o,t)).concat(a)}var l=i?function(e,t){for(var i=0,n=0;n<e.length;n++){var r=e[n];if(1===r.type){if(cl(r)||r.ifConditions&&r.ifConditions.some((function(e){return cl(e.block)}))){i=2;break}(t(r)||r.ifConditions&&r.ifConditions.some((function(e){return t(e.block)})))&&(i=1)}}return i}(s,t.maybeComponent):0,c=r||hl;return"[".concat(s.map((function(e){return c(e,t)})).join(","),"]").concat(l?",".concat(l):"")}}function cl(e){return void 0!==e.for||"template"===e.tag||"slot"===e.tag}function hl(e,t){return 1===e.type?Ja(e,t):3===e.type&&e.isComment?function(e){return"_e(".concat(JSON.stringify(e.text),")")}(e):function(e){return"_v(".concat(2===e.type?e.expression:ul(JSON.stringify(e.text)),")")}(e)}function dl(e){for(var t="",i="",n=0;n<e.length;n++){var r=e[n],s=ul(r.value);r.dynamic?i+="".concat(r.name,",").concat(s,","):t+='"'.concat(r.name,'":').concat(s,",")}return t="{".concat(t.slice(0,-1),"}"),i?"_d(".concat(t,",[").concat(i.slice(0,-1),"])"):t}function ul(e){return e.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function pl(e,t){try{return new Function(e)}catch(i){return t.push({err:i,code:e}),E}}function fl(e){var t=Object.create(null);return function(i,n,r){(n=$({},n)).warn,delete n.warn;var s=n.delimiters?String(n.delimiters)+i:i;if(t[s])return t[s];var o=e(i,n),a={},l=[];return a.render=pl(o.render,l),a.staticRenderFns=o.staticRenderFns.map((function(e){return pl(e,l)})),t[s]=a}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");var ml,gl,yl=(ml=function(e,t){var i=wa(e.trim(),t);!1!==t.optimize&&Ra(i,t);var n=Ka(i,t);return{ast:i,render:n.render,staticRenderFns:n.staticRenderFns}},function(e){function t(t,i){var n=Object.create(e),r=[],s=[];if(i)for(var o in i.modules&&(n.modules=(e.modules||[]).concat(i.modules)),i.directives&&(n.directives=$(Object.create(e.directives||null),i.directives)),i)"modules"!==o&&"directives"!==o&&(n[o]=i[o]);n.warn=function(e,t,i){(i?s:r).push(e)};var a=ml(t.trim(),n);return a.errors=r,a.tips=s,a}return{compile:t,compileToFunctions:fl(t)}}),vl=yl(La).compileToFunctions;function xl(e){return(gl=gl||document.createElement("div")).innerHTML=e?'<a href="\n"/>':'<div a="\n"/>',gl.innerHTML.indexOf("&#10;")>0}var bl=!!X&&xl(!1),wl=!!X&&xl(!0),Ol=O((function(e){var t=ar(e);return t&&t.innerHTML})),Sl=En.prototype.$mount;return En.prototype.$mount=function(e,t){if((e=e&&ar(e))===document.body||e===document.documentElement)return this;var i=this.$options;if(!i.render){var n=i.template;if(n)if("string"==typeof n)"#"===n.charAt(0)&&(n=Ol(n));else{if(!n.nodeType)return this;n=n.innerHTML}else e&&(n=function(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}(e));if(n){var r=vl(n,{outputSourceRange:!1,shouldDecodeNewlines:bl,shouldDecodeNewlinesForHref:wl,delimiters:i.delimiters,comments:i.comments},this),s=r.render,o=r.staticRenderFns;i.render=s,i.staticRenderFns=o}}return Sl.call(this,e,t)},En.compile=vl,$(En,Vi),En.effect=function(e,t){var i=new Zi(he,e,E,{sync:!0});t&&(i.update=function(){t((function(){return i.run()}))})},En}()},9746:()=>{},9977:()=>{},197:()=>{},1866:()=>{},2739:()=>{},5463:e=>{e.exports={nanoid:(e=21)=>{let t="",i=0|e;for(;i--;)t+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return t},customAlphabet:(e,t=21)=>(i=t)=>{let n="",r=0|i;for(;r--;)n+=e[Math.random()*e.length|0];return n}}}},t={};function i(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,i),s.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=i(6678),t=i.n(e),n=i(269),r=i(1570),s=i(3627),o=i(6403),a=i(7550),l=i(4286),c=i(8728),h=i(2063),d=i(6935),u=i(5999),p=i(1867),f=i(8176),m=i(3550),g=i(2958);function y(e){const t=[];let i="";const r=[],s=[];let o="",a="";return(0,n.jJ)(e.effects,((n,l)=>{const c=(0,p.nC)(n.effect);if(c){const h=c.applyEffect(e,l,n.args);if("svg-filter"===h.kind){const r=`item-svg-filter-effect-${e.id}-${l}`;t.push({id:r,html:h.html}),n.cascade?a+=`url(#${r}) `:i+=`url(#${r}) `}else"back"===h.kind?r.push(h.html):"front"===h.kind?s.push(h.html):"css-filter"===h.kind&&(n.cascade?a+=h.value+" ":o+=h.value+" ")}})),{svgFilters:t,filterUrl:i,backgroundEffects:r,foregroundEffects:s,cssFilter:o,cascadingFilter:a}}function v(e){const t=c.A.getShapePropDescriptor(e,"strokeSize");return t&&"number"===t.type}const x={name:"ItemSvg",props:{editorId:{type:String,required:!0},item:{type:Object},mode:{type:String},patchIndex:{type:Object,default:null},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1},eventListener:{type:Object,required:!0}},components:{AdvancedFill:a.Ay},mounted(){this.switchShape(this.item.shape),f.A.item.changed.specific.$on(this.editorId,this.item.id,this.onItemChanged),f.A.item.selected.specific.$on(this.editorId,this.item.id,this.onItemSelected),f.A.item.deselected.specific.$on(this.editorId,this.item.id,this.onItemDeselected),f.A.textSlot.triggered.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),f.A.textSlot.canceled.specific.$on(this.editorId,this.item.id,this.onItemTextSlotEditCanceled);const e=c.A.find(this.item.shape);if(e&&e.shapeEvents.mounted&&e.shapeEvents.mounted(this.$store,this.item,this.$refs.textSlots,this.editorId),"edit"===this.mode){const e=document.getElementById(`in-place-text-edit-wrapper-${this.editorId}-${this.item.id}`);if(!e)return;this.hiddenTextSlotName=e.getAttribute("data-slot-name")}this.item.meta.componentUserEventBus&&this.item.meta.componentItemIdsForInit&&"view"===this.mode&&this.item.meta.componentItemIdsForInit.forEach((e=>{this.item.meta.componentUserEventBus.emitItemEvent(e,g.A.standardEvents.init.id)}))},beforeDestroy(){f.A.item.changed.specific.$off(this.editorId,this.item.id,this.onItemChanged),f.A.item.selected.specific.$off(this.editorId,this.item.id,this.onItemSelected),f.A.item.deselected.specific.$off(this.editorId,this.item.id,this.onItemDeselected),f.A.textSlot.triggered.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditTriggered),f.A.textSlot.canceled.specific.$off(this.editorId,this.item.id,this.onItemTextSlotEditCanceled),this.item.meta.componentSchemeContainer&&f.A.component.destroyed.$emit(this.editorId,this.item.meta.componentSchemeContainer,this.item.meta.componentUserEventBus)},data(){const e=c.A.find(this.item.shape),t={shapeType:e?e.shapeType:"missing",shapeComponent:null,oldShape:this.item.shape,shapePrimitives:[],itemSvgOutlinePath:null,shouldRenderText:!0,isSelected:this.item.meta&&this.item.meta.selected,revision:0,textSlots:[],hiddenTextSlotName:null,supportsStrokeSize:!!e&&v(e),hasDescription:(0,s.sS)(this.item),hasLinks:Array.isArray(this.item.links)&&this.item.links.length>0,hasFiles:Array.isArray(this.item.links)&&this.item.links.findIndex((e=>"file"===e.type))>=0,detailsMarker:e.getDetailsMarker(this.item),svgFilters:[],filterUrl:"",cascadingFilter:"",backgroundEffects:[],foregroundEffects:[],svgItemTransform:this.calculateSVGItemTransform(),customAreas:e&&e.computeCustomAreas?e.computeCustomAreas(this.item):[],draggingFileOver:!1,shapeStyle:{},hoverPathFill:this.getHoverPathFill()};e&&(e.editorProps&&e.editorProps.customTextRendering?t.shouldRenderText=!1:t.textSlots=this.generateTextSlots());const{svgFilters:i,filterUrl:n,backgroundEffects:r,foregroundEffects:o,cssFilter:a,cascadingFilter:l}=y(this.item);return t.effectFill=this.getEffectFill(),t.svgFilters=i,t.filterUrl=n,t.cascadingFilter=l,t.backgroundEffects=r,t.foregroundEffects=o,t.shapeStyle=this.computeShapeStyle(a),t},methods:{computeShapeStyle(e){const t={opacity:this.item.selfOpacity/100};return e&&(t.filter=e),t},onComponentLoadRequested(e){this.item.meta.componentSchemeContainer&&this.item.meta.componentUserEventBus?f.A.component.loadRequested.specific.$emit(this.editorId,e.id,e,this.item.meta.componentSchemeContainer,this.item.meta.componentUserEventBus):this.$emit("component-load-requested",e)},onComponentMouseDown(e){if(!this.eventListener||!this.item.meta.componentSchemeContainer||!this.item.meta.componentUserEventBus)return null;e.preventDefault(),e.stopPropagation(),this.eventListener.mouseDown(e,this.item)},onComponentMouseUp(e){if(!this.eventListener||!this.item.meta.componentSchemeContainer||!this.item.meta.componentUserEventBus)return null;e.preventDefault(),e.stopPropagation(),this.eventListener.mouseUp(e,this.item)},onComponentMouseMove(e){if(!this.eventListener||!this.item.meta.componentSchemeContainer||!this.item.meta.componentUserEventBus)return null;e.preventDefault(),e.stopPropagation(),this.eventListener.mouseMove(e,this.item)},getHoverPathFill(){return this.draggingFileOver?"rgba(140, 255, 140, 0.6)":"path"===this.item.shape&&this.item.shapeProps.fill&&"none"===this.item.shapeProps.fill.type?"none":"connector"!==this.item.shape||this.item.shapeProps.thick?"rgba(255, 255, 255, 0)":"none"},onItemDragEnter(e){"edit"===this.mode&&e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onItemDragOver(e){"edit"===this.mode&&e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onItemDragLeave(e){this.draggingFileOver=!1},onItemDrop(e){if(this.draggingFileOver=!1,e.preventDefault(),"edit"!==this.mode||!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;let t=[...e.dataTransfer.items].filter((e=>"file"===e.kind));0!==t.length&&("link"===this.item.shape&&(t=[t[0]]),t.map((e=>e.getAsFile())).map((e=>{const t=e.name;return m.A.addInfoSystemMessage(this.$store,`Uploading file "${t}"...`,`file-uploading-${t}`,"fas fa-spinner fa-spin fa-1x"),this.$store.state.apiClient.uploadFile(e).then((e=>{"link"===this.item.shape?(this.item.shapeProps.url=e,this.item.shapeProps.icon="file",m.A.addInfoSystemMessage(this.$store,`Updated link url to ${e}`,`item-link-url-changed-${this.item.id}`),f.A.item.changed.specific.$emit(this.editorId,this.item.id),f.A.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.links`)):(Array.isArray(this.item.links)||(this.item.links=[]),this.item.links.push({title:t,url:e,type:"file"}),m.A.addInfoSystemMessage(this.$store,`Attached file "${t}" to item`,`item-link-url-changed-${this.item.id}-${t}`),f.A.item.changed.specific.$emit(this.editorId,this.item.id,"links"),f.A.schemeChangeCommitted.$emit(this.editorId,`items.${this.item.id}.links`))})).catch((e=>(console.error(e),e.response&&e.response.data&&e.response.data.message?m.A.addErrorSystemMessage(this.$store,e.response.data.message,`item-upload-error-${t}`):m.A.addErrorSystemMessage(this.$store,"Something went wrong, could not upload file",`item-upload-error-${t}`),null)))})))},getEffectFill(){const e=c.A.find(this.item.shape);if(!e)return null;const t=c.A.getShapeArgs(e);return this.item.effects&&this.item.effects.length>0?"image"===this.item.shape?{type:"image",image:this.item.shapeProps.image,stretch:this.item.shapeProps.stretch,imageBox:{x:0,y:0,w:1,h:1}}:t.fill&&"advanced-color"===t.fill.type?this.item.shapeProps.fill:null:null},calculateSVGItemTransform(){const e=r.A.standardTransformWithArea(r.A.identityMatrix(),this.item.area);return`matrix(${e[0][0]},${e[1][0]},${e[0][1]},${e[1][1]},${e[0][2]},${e[1][2]})`},switchShape(e){this.oldShape=this.item.shape;const t=c.A.find(e);t&&(this.shapeType=t.shapeType,this.supportsStrokeSize=v(t),this.customAreas=t&&t.computeCustomAreas?t.computeCustomAreas(this.item):[],t.vueComponent?this.shapeComponent=t.vueComponent:this.shapeComponent=null,"templated"===t.shapeType?this.shapePrimitives=t.computePrimitives(this.item):"standard"===t.shapeType&&(this.shapePrimitives=[{fill:this.item.shapeProps.fill,strokeColor:this.item.shapeProps.strokeColor,strokeSize:this.item.shapeProps.strokeSize,strokePattern:this.item.shapeProps.strokePattern,type:"path",svgPath:t.computePath(this.item)}]),this.effectFill=this.getEffectFill(),"view"===this.mode&&t.editorProps&&t.editorProps.disableEventLayer||(this.itemSvgOutlinePath=t.computeOutline(this.item)))},computeStrokeDashArray:(e,t)=>l.A.createDashArray(e,t),onItemDeselected(){this.isSelected=!1},onItemSelected(){this.isSelected=!0},onItemChanged(e,t){this.hoverPathFill=this.getHoverPathFill(),this.svgItemTransform=this.calculateSVGItemTransform(),this.effectFill=this.getEffectFill();const i=c.A.find(this.item.shape);if(!i)return void(this.revision+=1);this.hasDescription=(0,s.sS)(this.item),this.hasLinks=Array.isArray(this.item.links)&&this.item.links.length>0,this.hasFiles=Array.isArray(this.item.links)&&this.item.links.findIndex((e=>"file"===e.type))>=0,this.detailsMarker=i.getDetailsMarker(this.item),this.oldShape!==this.item.shape?this.switchShape(this.item.shape):i&&("templated"===i.shapeType?this.shapePrimitives=i.computePrimitives(this.item):"standard"===i.shapeType&&(this.shapePrimitives=[{fill:this.item.shapeProps.fill,strokeColor:this.item.shapeProps.strokeColor,strokeSize:this.item.shapeProps.strokeSize,strokePattern:this.item.shapeProps.strokePattern,type:"path",svgPath:i.computePath(this.item)}]),"view"===this.mode&&i.editorProps&&i.editorProps.disableEventLayer||(this.itemSvgOutlinePath=i.computeOutline(this.item)),this.customAreas=i&&i.computeCustomAreas?i.computeCustomAreas(this.item):[]),i.editorProps&&i.editorProps.customTextRendering||(this.textSlots=this.generateTextSlots());const{svgFilters:n,filterUrl:r,backgroundEffects:o,foregroundEffects:a,cssFilter:l,cascadingFilter:h}=y(this.item);this.svgFilters=n,this.filterUrl=r,this.backgroundEffects=o,this.foregroundEffects=a,this.cascadingFilter=h,this.shapeStyle=this.computeShapeStyle(l),this.revision+=1,this.$forceUpdate()},onFrameAnimatorEventInsideComponent(e,t){t?this.$emit("frame-animator",e,t):this.$emit("frame-animator",e,this.item)},passThroughFrameAnimatorEvent(e,t){this.$emit("frame-animator",e,t)},generateTextSlots(){const e=c.A.find(this.item.shape);if(!e)return[];const t=h.A.clone(e.getTextSlots(this.item)),i=[];return(0,n.jJ)(t,(e=>{const t=this.item.textSlots[e.name];t&&(e.text=t.text||"",e.sanitizedText=(0,d.A)(e.text),e.cssClass||(e.cssClass=""),e.style=(0,u.E)(t),e.style.width=`${e.area.w}px`,e.style.height=`${e.area.h}px`,i.push(e))})),i},onItemTextSlotEditTriggered(e,t,i,n){this.hiddenTextSlotName=t},onItemTextSlotEditCanceled(e,t){this.hiddenTextSlotName===t&&(this.hiddenTextSlotName=null),this.$nextTick((()=>{const e=c.A.find(this.item.shape);if(e&&e.onTextSlotTextUpdate){const i=this.$refs.textSlots.find((e=>e.getAttribute("data-text-slot-name")===t));if(!i)return;e.onTextSlotTextUpdate(this.$store,this.item,t,i)}}))},computeSvgFill:(e,t)=>(0,a.fD)(e,t)},computed:{hoverPathStrokeWidth(){return this.draggingFileOver?"8px":this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+2+"px":"0px"},hoverPathStroke(){return this.draggingFileOver?"rgba(130, 240, 130, 0.7)":"rgba(255, 255, 255, 0)"},shouldBeDrawn(){if(!this.item.visible)return!1;const e=c.A.find(this.item.shape);return!(!e||"view"===this.mode&&e.editorProps&&e.editorProps.onlyEditMode)},componentChildrenLayerStyle(){return this.item.clip||"component"===this.item.shape?{"clip-path":`url(#item-clip-path-${this.item.id})`}:{}},childrenLayerStyle(){return this.item.clip?{"clip-path":`url(#item-clip-path-${this.item.id})`}:{}},patchOutline(){if(this.patchIndex){if(this.patchIndex.addedItems.has(this.item.id))return this.$store.getters.patchAdditionsColor;if(this.patchIndex.deletedItems.has(this.item.id))return this.$store.getters.patchDeletionsColor;if(this.patchIndex.modifiedItems.has(this.item.id))return this.$store.getters.patchModificationsColor}return null},patchIsDiffColoringEnabled(){return this.$store.getters.patchIsDiffColoringEnabled},patchOutlineStrokeSize(){return this.supportsStrokeSize?parseInt(this.item.shapeProps.strokeSize)+10+"px":"8px"},missingShapeTextStyle(){return{"font-size":Math.min(this.item.area.w,this.item.area.h)/6+"px",display:"inline-block"}},showItemDetailMarkers(){return this.$store.getters.showItemDetailMarkers}},watch:{draggingFileOver(e){this.hoverPathFill=this.getHoverPathFill()}}};var b=i(4486);const w=(0,b.A)(x,(function(){var e=this,t=e._self._c;return t("g",{attrs:{transform:e.svgItemTransform,"data-svg-item-container-id":e.item.id,"data-item-id":e.item.id}},[e.itemSvgOutlinePath&&e.patchOutline&&e.patchIsDiffColoringEnabled?t("path",{attrs:{"data-preview-ignore":"true",d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.patchOutlineStrokeSize,stroke:e.patchOutline,fill:"none"}}):e._e(),e._v(" "),e.effectFill?t("advanced-fill",{key:`effect-fill-${e.item.id}-${e.revision}`,attrs:{fillId:`effect-fill-${e.item.id}`,fill:e.effectFill,area:e.item.area}}):e._e(),e._v(" "),t("g",{style:{opacity:e.item.opacity/100,"mix-blend-mode":e.item.blendMode,filter:e.cascadingFilter}},[e._l(e.backgroundEffects,(function(i){return t("g",{style:e.shapeStyle,domProps:{innerHTML:e._s(i)}})})),e._v(" "),t("defs",e._l(e.svgFilters,(function(i){return t("filter",{attrs:{id:i.id,x:"-50%",y:"-50%",width:"200%",height:"200%"},domProps:{innerHTML:e._s(i.html)}})})),0),e._v(" "),t("g",{attrs:{filter:e.filterUrl,"data-component-key":`item-component-${e.item.id}-${e.item.shape}-${e.revision}`}},[e.shouldBeDrawn&&e.shapeComponent&&e.item.visible?t(e.shapeComponent,{key:`item-component-${e.item.id}-${e.item.shape}-${e.revision}`,tag:"component",style:e.shapeStyle,attrs:{item:e.item,editorId:e.editorId,mode:e.mode},on:{"frame-animator":e.passThroughFrameAnimatorEvent,"component-load-requested":e.onComponentLoadRequested}}):e._e(),e._v(" "),!e.shapeComponent&&e.item.visible&&e.shapePrimitives&&e.shouldBeDrawn?t("g",{style:e.shapeStyle},e._l(e.shapePrimitives,(function(i,n){return t("g",["text"===i.type?t("g",[t("foreignObject",{attrs:{x:i.area.x,y:i.area.y,width:i.area.w,height:i.area.h}},[t("div",{style:{width:`${i.area.w}px`,height:`${i.area.h}px`,color:i.fontColor,"font-size":`${i.fontSize}px`},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("div",[e._v(e._s(i.text))])])]),e._v(" "),t("rect",{attrs:{x:i.area.x,y:i.area.y,width:i.area.w,height:i.area.h,"stroke-width":"0","data-item-id":e.item.id,fill:"rgba(255,255,255,0.0)"}})]):t("g",[i.fill?t("advanced-fill",{key:`advanced-fill-${e.item.id}-${n}-${e.revision}`,attrs:{fillId:`fill-templated-${e.item.id}-${n}`,fill:i.fill,area:e.item.area}}):e._e(),e._v(" "),i.svgPath?t("path",{attrs:{d:i.svgPath,"stroke-width":i.strokeSize+"px",stroke:i.strokeColor,"stroke-dasharray":e.computeStrokeDashArray(i.strokePattern,i.strokeSize),"stroke-dashoffset":e.item.meta.strokeOffset,"data-item-id":e.item.id,"stroke-linejoin":"round",fill:e.computeSvgFill(i.fill,`fill-templated-${e.item.id}-${n}`)}}):e._e()],1)])})),0):e._e(),e._v(" "),"missing"===e.shapeType&&e.item.visible?t("g",{staticClass:"missing-shape"},[t("rect",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}}),e._v(" "),t("foreignObject",{attrs:{x:"0",y:"0",width:e.item.area.w,height:e.item.area.h}},[t("div",{style:{width:`${e.item.area.w}px`,height:`${e.item.area.h}px`},attrs:{xmlns:"http://www.w3.org/1999/xhtml"}},[t("div",{style:e.missingShapeTextStyle},[e._v("Missing Shape")])])])]):e._e(),e._v(" "),e.shouldBeDrawn?t("g",e._l(e.textSlots,(function(i){return i.name!==e.hiddenTextSlotName?t("g",{style:{opacity:e.item.selfOpacity/100}},[t("foreignObject",{ref:"textSlots",refInFor:!0,attrs:{"data-text-slot-name":i.name,id:`item-text-slot-${e.item.id}-${i.name}`,x:i.area.x,y:i.area.y,width:i.area.w,height:i.area.h}},[t("div",{staticClass:"item-text-container",class:i.cssClass,style:i.style,attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id}},[t("div",{staticClass:"item-text-element",staticStyle:{display:"inline-block"},attrs:{"data-item-text-element-item-id":e.item.id},domProps:{innerHTML:e._s(i.sanitizedText)}})])])]):e._e()})),0):e._e()],1),e._v(" "),e._l(e.foregroundEffects,(function(i){return t("g",{domProps:{innerHTML:e._s(i)}})})),e._v(" "),t("g",{attrs:{id:`animation-container-${e.item.id}`}}),e._v(" "),e.item._childItems&&e.item.visible&&"edit"===e.mode?t("g",{style:e.componentChildrenLayerStyle},e._l(e.item._childItems,(function(i){return i.visible?t("ItemSvg",{key:`itsvg-${i.id}-${i.shape}-${e.item.meta.revision}`,attrs:{item:i,editorId:e.editorId,patchIndex:e.patchIndex,mode:e.mode,eventListener:e.eventListener},on:{"frame-animator":e.passThroughFrameAnimatorEvent,"component-load-requested":e.onComponentLoadRequested}}):e._e()})),1):e._e(),e._v(" "),e.shouldBeDrawn&&e.itemSvgOutlinePath&&!e.textSelectionEnabled?t("path",{staticClass:"svg-event-layer",style:{cursor:e.item.cursor},attrs:{"data-preview-ignore":"true",id:`item-svg-path-${e.item.id}`,d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":e.hoverPathStrokeWidth,stroke:e.hoverPathStroke,fill:e.hoverPathFill},on:{dragenter:e.onItemDragEnter,dragover:e.onItemDragOver,dragleave:e.onItemDragLeave,drop:e.onItemDrop}}):e._e(),e._v(" "),"view"!==e.mode||e.textSelectionEnabled?e._e():t("g",e._l(e.customAreas,(function(i){return t("path",{staticClass:"svg-event-layer",style:{cursor:i.cursor?i.cursor:e.item.cursor},attrs:{"data-preview-ignore":"true",id:`item-svg-path-${e.item.id}`,d:i.path,"data-type":"custom-item-area","data-item-id":e.item.id,"data-custom-area-id":i.id,"stroke-width":e.hoverPathStrokeWidth,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}})})),0),e._v(" "),"missing"===e.shapeType?t("rect",{staticClass:"svg-event-layer",attrs:{"data-preview-ignore":"true","data-item-id":e.item.id,x:"0",y:"0",width:e.item.area.w,height:e.item.area.h,stroke:"rgba(255, 255, 255, 0)",fill:e.hoverPathFill}}):e._e(),e._v(" "),"view"===e.mode&&e.item.meta.componentSchemeContainer&&e.item.meta.componentUserEventBus?t("g",{on:{touchstart:e.onComponentMouseDown,touchend:e.onComponentMouseUp,touchmove:e.onComponentMouseMove,mousedown:e.onComponentMouseDown,mouseup:e.onComponentMouseUp,mousemove:e.onComponentMouseMove}},e._l(e.item.meta.componentSchemeContainer.worldItems,(function(i){return i.visible&&"hud"!==i.shape?t("g",{staticClass:"item-container",class:"item-cursor-"+i.cursor},[t("ItemSvg",{key:`${e.item.id}-component-${i.id}-${i.shape}-${e.textSelectionEnabled}-${e.itemsReloadKey}`,attrs:{item:i,editorId:e.editorId,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,eventListener:e.eventListener},on:{"component-load-requested":e.onComponentLoadRequested,"frame-animator":e.onFrameAnimatorEventInsideComponent}})],1):e._e()})),0):e._e(),e._v(" "),"edit"===e.mode&&!e.isSelected&&e.showItemDetailMarkers&&(e.hasDescription||e.hasLinks||e.hasFiles)?t("g",{attrs:{"data-preview-ignore":"true"}},[t("foreignObject",{attrs:{x:e.detailsMarker.x,y:e.detailsMarker.y,width:e.detailsMarker.w,height:e.detailsMarker.h,"data-item-id":e.item.id}},[t("div",{staticClass:"item-details-marker-icon",attrs:{xmlns:"http://www.w3.org/1999/xhtml","data-item-id":e.item.id}},[e.hasFiles?t("i",{staticClass:"icon fa-solid fa-paperclip",attrs:{"data-item-id":e.item.id}}):e.hasLinks?t("i",{staticClass:"icon fa-solid fa-link",attrs:{"data-item-id":e.item.id}}):t("i",{staticClass:"icon fa-solid fa-paragraph",attrs:{"data-item-id":e.item.id}})])]),e._v(" "),t("rect",{style:{cursor:e.item.cursor},attrs:{x:e.detailsMarker.x,y:e.detailsMarker.y,width:e.detailsMarker.w,height:e.detailsMarker.h,"data-type":"item-details-marker","data-item-id":e.item.id,fill:"rgba(0,0,0,0)"}})]):e._e(),e._v(" "),e.item.clip?t("defs",[t("clipPath",{attrs:{id:`item-clip-path-${e.item.id}`}},[e.itemSvgOutlinePath?t("path",{staticClass:"svg-event-layer",attrs:{d:e.itemSvgOutlinePath,"data-item-id":e.item.id,"stroke-width":"0px",stroke:"rgba(255, 255, 255, 0)",fill:"rgba(255, 255, 255, 0)"}}):e._e()])]):e._e(),e._v(" "),e.item.childItems&&e.item.visible?t("g",{style:e.childrenLayerStyle},e._l(e.item.childItems,(function(i){return i.visible&&("hud"!==i.shape&&"view"===e.mode||"edit"===e.mode)?t("ItemSvg",{key:`itsvg-${i.id}-${i.shape}-${e.textSelectionEnabled}`,attrs:{item:i,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode,eventListener:e.eventListener},on:{"frame-animator":e.passThroughFrameAnimatorEvent,"component-load-requested":e.onComponentLoadRequested}}):e._e()})),1):e._e(),e._v(" "),e.item._childItems&&e.item.visible&&"view"===e.mode?t("g",{style:e.componentChildrenLayerStyle},e._l(e.item._childItems,(function(i){return i.visible&&"hud"!==i.shape?t("ItemSvg",{key:`itsvg-${i.id}-${i.shape}-${e.textSelectionEnabled}`,attrs:{item:i,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,mode:e.mode,eventListener:e.eventListener},on:{"frame-animator":e.passThroughFrameAnimatorEvent,"component-load-requested":e.onComponentLoadRequested}}):e._e()})),1):e._e()],2)],1)}),[],!1,null,null,null).exports;var O=i(7562),S=i(7234),k=i(869),P=i(955),C=i(1953),A=i(711);var I=i(6583),T=i(333),$=i(5824),M=i.n($),E=i(9898),_=i(5395);window.addEventListener("keydown",(function(e){L&&L.onKeyDown(e)})),window.addEventListener("keyup",(function(e){L&&L.onKeyUp(e)}));const D={0:"Digit0",1:"Digit1",2:"Digit2",3:"Digit3",4:"Digit4",5:"Digit5",6:"Digit6",7:"Digit7",8:"Digit8",9:"Digit9",Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Space:"Space",Enter:"Enter",Escape:"Escape"};for(let e=65;e<90;e++){const t=String.fromCharCode(e);D[t]="Key"+t}let L=null;class B{constructor(){this.id=M().generate(),this.loaded=!1,this.keyBinds={down:{},up:{}}}init(){L=this}registerAllKeyBinders(e,t){(0,s.zD)(e.scheme.items,(i=>{i.meta.componentSchemeContainer&&i.meta.componentUserEventBus?this.registerAllKeyBinders(i.meta.componentSchemeContainer,i.meta.componentUserEventBus):"key_bind"===i.shape&&this.registerKeyBindItem(i,e,t)}))}onKeyDown(e){const t=this.keyBinds.down[e.code];if(t&&Array.isArray(t))for(let e=t.length-1;e>=0;e--){const{itemId:i,schemeContainer:n,userEventBus:r}=t[e],s=n.findItemById(i);s?s.shapeProps.active&&r.emitItemEvent(s.id,_.DS):t.splice(e,1)}}onKeyUp(e){const t=this.keyBinds.up[e.code];if(t&&Array.isArray(t))for(let e=t.length-1;e>=0;e--){const{itemId:i,schemeContainer:n,userEventBus:r}=t[e],s=n.findItemById(i);s?s.shapeProps.active&&r.emitItemEvent(s.id,_.wU):t.splice(e,1)}}deregisterEventsForSchemeContainer(e){for(let t in this.keyBinds.up)this.keyBinds.up.hasOwnProperty(t)&&this._deregisterEventsForSchemeContainer(this.keyBinds.up[t],e);for(let t in this.keyBinds.down)this.keyBinds.down.hasOwnProperty(t)&&this._deregisterEventsForSchemeContainer(this.keyBinds.down[t],e)}_deregisterEventsForSchemeContainer(e,t){if(e&&Array.isArray(e))for(let i=e.length-1;i>=0;i--)e[i].schemeContainer.id===t&&e.splice(i,1)}registerKeyBindItem(e,t,i){if("key_bind"===!e.shape)return;const n=D[e.shapeProps.key];n&&(e.shapeProps.down&&(this.keyBinds.down.hasOwnProperty(n)||(this.keyBinds.down[n]=[]),this.keyBinds.down[n].push({itemId:e.id,userEventBus:i,schemeContainer:t})),e.shapeProps.up&&(this.keyBinds.up.hasOwnProperty(n)||(this.keyBinds.up[n]=[]),this.keyBinds.up[n].push({itemId:e.id,userEventBus:i,schemeContainer:t})))}destroy(){L&&L.id===this.id&&(L=null),this.keyBinds={down:{},up:{}},this.userEventBus=null,this.schemeContainer=null}}var R=i(4804);function N(e,t,i,n,o,a){(0,s.I$)(e.scheme.items,(s=>{if(!s.visible)return!1;if(o(s)&&a.push(F(s,!1,i,n,e.shadowTransform)),t&&function(e){return"component"===e.shape&&"external"===e.shapeProps.kind&&!0===e.shapeProps.showButton&&!(Array.isArray(e._childItems)&&e._childItems.length>0)}(s)){const t=(0,k.XL)(s,e.shadowTransform);let o=Math.max(t.x,t.y);r.A.tooSmall(o)&&(o=1);const l=(0,k.nI)(s,e.shadowTransform);a.push({id:s.id,transform:`matrix(${l[0][0]},${l[1][0]},${l[0][1]},${l[1][1]},${l[0][2]},${l[1][2]})`,path:(0,A.bd)(s),fill:n,strokeSize:Math.max(2,s.shapeProps.buttonStrokeSize+2),stroke:i,pins:[],opacity:.5,scalingFactor:o})}return s.meta.componentSchemeContainer&&N(s.meta.componentSchemeContainer,t,i,n,o,a),!0}))}function F(e,t,i,n,s){const o=c.A.find(e.shape);if(!o)return;const a=o.computeOutline(e);if(!a)return;const l=(0,k.bw)([e],s),h=(0,k.nI)(e,s),d=(0,k.XL)(e,s);let u=Math.max(d.x,d.y);r.A.tooSmall(u)&&(u=1);let p=6;if("path"===e.shape)p=e.shapeProps.strokeSize;else{const t=c.A.find(e.shape);c.A.getShapePropDescriptor(t,"strokeSize")&&(p=e.shapeProps.strokeSize)}const f={id:e.id,transform:`matrix(${h[0][0]},${h[1][0]},${h[0][1]},${h[1][1]},${h[0][2]},${h[1][2]})`,path:a,fill:n,strokeSize:p,stroke:i,pins:[],opacity:.5,globalBox:l,scalingFactor:u};return t&&(f.pins=o.getPins(e)),f}const j="ctrl-a",z="ctrl-0",Q="space",U="minus",q="equals",H={escape:e=>"Escape"===e.key||"Esc"===e.key||27===e.keyCode,delete:e=>"Backspace"===e.key||"Delete"===e.key||8===e.keyCode||127===e.keyCode,"ctrl-x":e=>"x"===e.key&&(e.metaKey||e.ctrlKey)};H[j]=e=>"a"===e.key&&(e.metaKey||e.ctrlKey),H["ctrl-c"]=e=>"c"===e.key&&(e.metaKey||e.ctrlKey),H["ctrl-v"]=e=>"v"===e.key&&(e.metaKey||e.ctrlKey),H["ctrl-s"]=e=>"s"===e.key&&(e.metaKey||e.ctrlKey),H["ctrl-z"]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&!e.shiftKey,H[z]=e=>48===e.keyCode&&(e.metaKey||e.ctrlKey)&&!e.shiftKey,H["ctrl-shift-z"]=e=>"z"===e.key&&(e.metaKey||e.ctrlKey)&&e.shiftKey,H["arrow-left"]=e=>"ArrowLeft"===e.key,H["arrow-right"]=e=>"ArrowRight"===e.key,H["arrow-up"]=e=>"ArrowUp"===e.key,H["arrow-down"]=e=>"ArrowDown"===e.key,H[Q]=e=>" "===e.key||32===e.keyCode,H[U]=e=>"-"===e.key||189===e.keyCode,H[q]=e=>"="===e.key||187===e.keyCode,H.ctrl=e=>"Control"===e.key,H.cmd=e=>"Meta"===e.key,H.shift=e=>"Shift"===e.key;const V=new(t())({});let W=null;function X(e,t){if(t||(W=null),(e=e||window.event).target!==document.body)return;const i=function(e){return(0,n.Tj)(H,(t=>t(e)))}(e);if(i){if(t){if(W===i&&!i.startsWith("arrow-"))return;W=i}i===j&&e.target&&"body"===e.target.nodeName.toLowerCase()&&e.preventDefault(),V.$emit("key-press",t,i,{ctrlCmdPressed:e.metaKey||e.ctrlKey},e)}}function G(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Y(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}document.addEventListener("keydown",(e=>X(e,!0))),document.addEventListener("keyup",(e=>X(e,!1)));const Z={type:"void"},K={x:0,y:0},J={props:{editorId:{type:String,required:!0},mode:{type:String,default:"edit"},textSelectionEnabled:{type:Boolean,default:!1},stateLayerShown:{type:Boolean,default:!1},userEventBus:{type:Object,default:null},patchIndex:{type:Object,default:null},highlightedItems:{type:Object,default:null},zoomedItems:{type:Array,default:null},zoomToItemsTrigger:{type:String,default:null},schemeContainer:{default:null,type:Object},zoom:{default:1,type:Number},useMouseWheel:{default:!0,type:Boolean},itemsReloadKey:{default:0,type:Number}},components:{ItemSvg:w},beforeMount(){if("view"===this.mode){this.loadUserKeyBinders(),this.reindexUserEvents(),this.prepareFrameAnimations();const e=this.schemeContainer.scheme.scripts.main.source;if(e)try{this.compiledMainScript=(0,I.YK)(e)}catch(e){this.compiledMainScript=null,console.error(e),m.A.addErrorSystemMessage(this.$store,"Failed to compile main script","main-script-compilation-error")}}f.A.zoomToAreaRequested.$on(this.editorId,this.onBringToView),f.A.item.linksShowRequested.$on(this.editorId,this.onShowItemLinks),f.A.item.clicked.any.$on(this.editorId,this.onAnyItemClicked),f.A.item.changed.any.$on(this.editorId,this.onAnyItemChanged),f.A.void.clicked.$on(this.editorId,this.onVoidClicked),f.A.void.doubleClicked.$on(this.editorId,this.onVoidDoubleClicked),f.A.item.selected.any.$on(this.editorId,this.onAnyItemSelected),f.A.component.loadFailed.any.$on(this.editorId,this.onComponentLoadFailed),f.A.framePlayer.prepared.$on(this.editorId,this.onFramePlayerPrepared),f.A.clickableMarkers.toggled.$on(this.editorId,this.toggleClickableMarkers),f.A.searchKeywordUpdated.$on(this.editorId,this.onSearchKeywordUpdated),f.A.searchedItemsToggled.$on(this.editorId,this.onSearchedItemsToggled),f.A.editorResized.$on(this.editorId,this.updateSvgSize),f.A.component.loadRequested.any.$on(this.editorId,this.onComponentLoadRequested),f.A.component.destroyed.$on(this.editorId,this.onComponentDestroyed)},mounted(){if(this.updateSvgSize(),window.addEventListener("resize",this.updateSvgSize),window.addEventListener("message",this.onExternalMessage,!1),this.useMouseWheel){var e=this.$refs.svgDomElement;e&&e.addEventListener("wheel",this.mouseWheel)}if("view"===this.mode){if(this.compiledMainScript&&this.userEventBus)try{const e=(0,T.rp)(this.schemeContainer,this.userEventBus);this.compiledMainScript.evalNode(e),this.schemeContainer.mainScopeData=e.data}catch(e){console.error(e),m.A.addErrorSystemMessage(this.$store,"Failed to execute main script","main-script-failure")}this.itemsForInit.forEach((e=>{this.userEventBus.emitItemEvent(e,g.A.standardEvents.init.id)}))}},beforeDestroy(){if(this.highlightAnimated=!0,window.removeEventListener("message",this.onExternalMessage),window.removeEventListener("resize",this.updateSvgSize),this.mouseEventsEnabled=!1,f.A.zoomToAreaRequested.$off(this.editorId,this.onBringToView),f.A.item.linksShowRequested.$off(this.editorId,this.onShowItemLinks),f.A.item.clicked.any.$off(this.editorId,this.onAnyItemClicked),f.A.item.changed.any.$off(this.editorId,this.onAnyItemChanged),f.A.void.clicked.$off(this.editorId,this.onVoidClicked),f.A.void.doubleClicked.$off(this.editorId,this.onVoidDoubleClicked),f.A.item.selected.any.$off(this.editorId,this.onAnyItemSelected),f.A.component.loadFailed.any.$off(this.editorId,this.onComponentLoadFailed),f.A.framePlayer.prepared.$off(this.editorId,this.onFramePlayerPrepared),f.A.clickableMarkers.toggled.$off(this.editorId,this.toggleClickableMarkers),f.A.searchKeywordUpdated.$off(this.editorId,this.onSearchKeywordUpdated),f.A.searchedItemsToggled.$off(this.editorId,this.onSearchedItemsToggled),f.A.editorResized.$off(this.editorId,this.updateSvgSize),f.A.component.loadRequested.any.$off(this.editorId,this.onComponentLoadRequested),f.A.component.destroyed.$off(this.editorId,this.onComponentDestroyed),"view"===this.mode&&this.destroyUserKeyBinders(),this.useMouseWheel){const e=this.$refs.svgDomElement;e&&e.removeEventListener("wheel",this.mouseWheel)}},data(){return{mouseEventsEnabled:!("view"===this.mode&&this.textSelectionEnabled),linkPalette:["#ec4b4b","#bd4bec","#4badec","#226D18","#6A590E","#0F8989","#7B245B"],lastClickPoint:null,doubleClickLastTime:-1e3,width:window.innerWidth,height:window.innerHeight,selectedItemLinks:[],linksAnimated:!1,lastHoveredItem:null,itemsForInit:new Set,clickableItemMarkers:[],worldHighlightedItems:[],lastTouchStartTime:0,lastTouchStartCoords:{x:-1e3,y:-1e3},draggingFileOver:!1,highlightAnimated:!1,highlightAnimationTime:0,compiledMainScript:null,keyBinder:new B,eventListenerInterceptor:{mouseDown:(e,t)=>{this.onEventListenerInterceptorMouseEvent("mouse-down",e,t)},mouseUp:(e,t)=>{this.onEventListenerInterceptorMouseEvent("mouse-up",e,t)},mouseMove:(e,t)=>{this.onEventListenerInterceptorMouseEvent("mouse-move",e,t)}}}},methods:{onSearchedItemsToggled(){if(this.worldHighlightedItems.length>0){const e=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?G(Object(i),!0).forEach((function(t){Y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):G(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},this.worldHighlightedItems[0].globalBox);for(let t=1;t<this.worldHighlightedItems.length;t++){const i=this.worldHighlightedItems[t].globalBox;e.x>i.x&&(e.x=i.x),e.y>i.y&&(e.y=i.y),e.x+e.w<i.x+i.w&&(e.w=i.x+i.w-e.x),e.y+e.h<i.y+i.h&&(e.h=i.y+i.h-e.y)}this.bringAreaToViewAnimated(e)}else this.zoomToItems([])},onSearchKeywordUpdated(e){if((e=e.trim().toLowerCase()).length>0){const t=t=>{if("view"===this.mode&&(0,S.U0)(t))return!1;if((t.name||"").toLowerCase().indexOf(e)>=0)return!0;if(t.tags&&t.tags.length>0&&find(t.tags,(t=>t&&t.toLowerCase().indexOf(e)>=0)))return!0;if(t.textSlots)for(let i in t.textSlots)if(t.textSlots.hasOwnProperty(i)){const n=t.textSlots[i].text;if(n&&n.toLowerCase().indexOf(e)>=0)return!0}return!1},i=this.schemeContainer.scheme.style.boundaryBoxColor;this.worldHighlightedItems=function(e,t,i,n){const r=[];return N(e,!1,t,"none",n,r),r}(this.schemeContainer,i,0,t)}else this.worldHighlightedItems=[]},loadUserKeyBinders(){this.keyBinder.init(),this.keyBinder.registerAllKeyBinders(this.schemeContainer,this.userEventBus)},destroyUserKeyBinders(){this.keyBinder.destroy()},onExternalMessage(e){if("view"===this.mode&&this.userEventBus&&"object"==typeof e.data&&"item-event"===e.data.type&&e.data.hasOwnProperty("name")&&e.data.hasOwnProperty("event")){const t=e.data.name,i=e.data.event,n=Array.isArray(e.data.args)?e.data.args:[],r=this.schemeContainer.findItemByName(t);if(!r)return;this.userEventBus.emitItemEvent(r.id,i,...n)}},onComponentDestroyed(e,t){this.keyBinder.deregisterEventsForSchemeContainer(e.id)},onComponentLoadRequested(e,t,i){t&&i||(t=this.schemeContainer,i=this.userEventBus),(0,R.p)(t,i,e,this.$store,this.onCompilerError).then((i=>{if(!e.shapeProps.autoZoom)return;const n=(0,k.bw)([e],t.shadowTransform);this.bringAreaToViewAnimated(n),this.keyBinder.registerAllKeyBinders(i.schemeContainer,i.userEventBus)}))},zoomToItems(e){if(0===e.length)return void(0===this.schemeContainer.scheme.items.length&&(this.schemeContainer.screenTransform.scale=1,this.schemeContainer.screenTransform.x=0,this.schemeContainer.screenTransform.y=0,this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform)));const t=(0,k.Mt)(e,this.mode);this.bringAreaToViewAnimated(t)},updateSvgSize(){if(!this.$refs.svgDomElement)return;const e=this.$refs.svgDomElement.getBoundingClientRect();this.width=e.width,this.height=e.height,this.schemeContainer.screenSettings.width=e.width,this.schemeContainer.screenSettings.height=e.height,this.$emit("svg-size-updated",{width:this.width,height:this.height})},mouseCoordsFromEvent(e){const t=function(e){return e.touches?e.touches.length>0?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches.length>0?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:null:{x:e.pageX,y:e.pageY}}(e);return t?this.mouseCoordsFromPageCoords(t.x,t.y):null},mouseCoordsFromPageCoords(e,t){var i=this.$refs.svgDomElement.getBoundingClientRect(),n=e-i.left,r=t-i.top;return{x:Math.round(n),y:Math.round(r)}},identifyElement(e,t){if(e){const i=e.getAttribute("data-type");if("path-segment"===i)return{type:i,pathIndex:parseInt(e.getAttribute("data-path-index")),segmentIndex:parseInt(e.getAttribute("data-path-segment-index"))};if("path-point"===i)return{type:i,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index"))};if("path-control-point"===i)return{type:i,pointIndex:parseInt(e.getAttribute("data-path-point-index")),pathIndex:parseInt(e.getAttribute("data-path-index")),controlPointIndex:parseInt(e.getAttribute("data-path-control-point-index"))};if("edit-box"===i||"edit-box-template-control"===i||"edit-box-custom-control"===i||"edit-box-rotational-dragger"===i||"edit-box-pivot-dragger"===i||"edit-box-reset-image-crop-link"===i||"edit-box-context-menu-button"===i)return{type:i,editBox:this.schemeContainer.editBox};if("edit-box-resize-dragger"===i)return{type:i,editBox:this.schemeContainer.editBox,draggerEdges:(0,n.kH)(e.getAttribute("data-dragger-edges").split(","),(e=>e.trim()))};if("custom-item-area"===i)return{type:i,item:this.schemeContainer.findItemById(e.getAttribute("data-item-id")),areaId:e.getAttribute("data-custom-area-id")};if("item-details-marker"===i)return{type:i,item:this.schemeContainer.findItemById(e.getAttribute("data-item-id"))};const r=e.getAttribute("data-item-id");if(r){const e=this.schemeContainer.findItemById(r);if(e)return{type:"item",item:e}}const s=e.getAttribute("data-connector-starter-item-id");if(s){const e=this.schemeContainer.findItemById(s);if(e)return{type:"connection-starter",connectorStarter:{item:e,point:t}}}const o=e.getAttribute("data-control-point-id");if(o){const t=this.schemeContainer.findItemById(e.getAttribute("data-control-point-item-id"));if(t)return{type:"control-point",controlPoint:{pointId:o,item:t}}}const a=e.closest(".item-text-element");if(a){const e=this.schemeContainer.findItemById(a.getAttribute("data-item-text-element-item-id"));if(e)return{type:"item-text-element",itemTextElement:{item:e}}}}return Z},mouseWheel(e){const t=this.mouseCoordsFromEvent(e),i=this.toLocalPoint(t.x,t.y);this.$emit("mouse-wheel",i.x,i.y,t.x,t.y,e)},touchStart(e){if(!this.mouseEventsEnabled)return;e.preventDefault();const t=this.mouseCoordsFromEvent(e),i=performance.now(),n=(t.x-this.lastTouchStartCoords.x)*(t.x-this.lastTouchStartCoords.x)+(t.y-this.lastTouchStartCoords.y)*(t.y-this.lastTouchStartCoords.y);i-this.lastTouchStartTime<500&&n<50?this.mouseEvent("mouse-double-click",e):this.mouseEvent("mouse-down",e),this.lastTouchStartTime=i,this.lastTouchStartCoords=t},touchEnd(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-up",e))},touchMove(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-move",e))},mouseMove(e){this.mouseEventsEnabled&&(e.preventDefault(),this.mouseEvent("mouse-move",e))},mouseDown(e){if(e.target.closest(".item-control-point-textfield"))return;let t=performance.now(),i=0;this.lastClickPoint&&(i=Math.abs(e.pageX-this.lastClickPoint.x)+Math.abs(e.pageY-this.lastClickPoint.y)),this.lastClickPoint={x:e.pageX,y:e.pageY};const n=t-this.doubleClickLastTime;0===e.button&&i<=2&&n<400?(this.doubleClickLastTime=0,this.mouseDoubleClick(e)):(0===e.button&&(this.doubleClickLastTime=t),this.mouseEvent("mouse-down",e))},mouseUp(e){this.mouseEvent("mouse-up",e)},mouseDoubleClick(e){this.mouseEvent("mouse-double-click",e)},mouseEvent(e,t){if(this.mouseEventsEnabled){var i=this.mouseCoordsFromEvent(t),n=this.toLocalPoint(i.x,i.y);K.x=i.x,K.y=i.y,this.$emit(e,n.x,n.y,i.x,i.y,this.identifyElement(t.srcElement,n),t)}},onEventListenerInterceptorMouseEvent(e,t,i){if(this.mouseEventsEnabled){var n=this.mouseCoordsFromEvent(t),r=this.toLocalPoint(n.x,n.y);K.x=n.x,K.y=n.y,this.$emit(e,r.x,r.y,n.x,n.y,null,t,i)}},highlightItems(e,t){this.worldHighlightedItems=[],this.highlightAnimated=!1,this.highlightAnimationTime=0,(0,n.jJ)(e,(e=>{const i=this.schemeContainer.findItemById(e);if(!i)return;const n=F(i,t,this.schemeContainer.scheme.style.boundaryBoxColor,"none");this.worldHighlightedItems.push(n)}))},reindexUserEvents(){this.userEventBus&&(this.userEventBus.clear(),this.itemsForInit=this.schemeContainer.indexUserEvents(this.userEventBus,(e=>{this.onCompilerError(e)})))},onCompilerError(e){this.$emit("compiler-error",e)},onComponentLoadFailed(e){"component"===e.shape&&this.userEventBus&&this.userEventBus.emitItemEvent(e.id,A.Ej)},prepareFrameAnimations(){this.schemeContainer.prepareFrameAnimations()},onFramePlayerPrepared(e,t){if("view"!==this.mode)return;const i=this.schemeContainer.getFrameAnimation(e.id);i&&i.setCallbacks(t)},onFrameAnimatorEvent(e,t){if("view"!==this.mode)return;const i=e.item.id;let n=this.schemeContainer;t&&t.meta.componentSchemeContainer&&(n=t.meta.componentSchemeContainer);const r=n.getFrameAnimation(i);r&&("play"===e.operation?(r.setCallbacks(e.callbacks),r.setFrame(e.frame),e.stopFrame?r.setStopFrame(e.stopFrame):r.setStopFrame(-1),(0,P.N4)(this.editorId,r,i,"frame-player")):"setFrame"===e.operation?r.toggleFrame(e.frame):"stop"===e.operation&&r.stop())},onSvgItemLinkClick(e,t){return e.startsWith("/")&&!this.linksAnimated&&(window.open(e,"_blank")||window.location.replace(e),t.preventDefault()),!1},onShowItemLinks(e,t){"view"===this.mode&&(this.selectedItemLinks=this.generateItemLinks(e,t),this.$nextTick((()=>{(0,n.jJ)(this.selectedItemLinks,((e,t)=>{const i=document.querySelector(`#item-link-${t} span.item-link-title`);if(i){const t=i.getBoundingClientRect();e.width=t.width,e.height=t.height}}))})),this.startLinksAnimation())},onAnyItemChanged(e,t){"visible"===t&&this.$forceUpdate()},onAnyItemClicked(e){this.removeDrawnLinks(),this.resetHighlightedItems()},onAnyItemSelected(){this.resetHighlightedItems()},resetHighlightedItems(){this.highlightAnimated=!1,this.highlightAnimationTime=0,this.worldHighlightedItems.length>0&&(this.worldHighlightedItems=[])},onVoidClicked(){this.removeDrawnLinks()},onVoidDoubleClicked(e,t,i,n){if("edit"===this.mode){const i=h.A.clone(s.f7);i.name=this.schemeContainer.copyNameAndMakeUnique("Label"),i.textSlots={body:{text:"",halign:"left",valign:"top",paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0}},i.shape="none",i.area={x:e,y:t,w:40,h:40},(0,o.V_)(i),this.schemeContainer.addItem(i),this.$nextTick((()=>{f.A.textSlot.triggered.specific.$emit(this.editorId,i,"body",{x:0,y:0,w:i.area.w,h:i.area.h},!1,!0)}))}},removeDrawnLinks(){this.selectedItemLinks.length>0&&(this.selectedItemLinks=[])},bringAreaToViewAnimated(e){this.onBringToView(e,!0)},onBringToView(e,t){const i=(0,k.NM)(e,this.width,this.height),n=this.schemeContainer.screenTransform.x,r=this.schemeContainer.screenTransform.y,s=this.schemeContainer.screenTransform.scale;t?(0,P.N4)(this.editorId,new C.Ay({durationMillis:400,animationType:"ease-out",update:e=>{this.schemeContainer.screenTransform.scale=s*(1-e)+i.scale*e,this.schemeContainer.screenTransform.x=n*(1-e)+i.x*e,this.schemeContainer.screenTransform.y=r*(1-e)+i.y*e},destroy:()=>{this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform)}}),"screen","screen-tansform"):(this.schemeContainer.screenTransform.scale=i.scale,this.schemeContainer.screenTransform.x=i.x,this.schemeContainer.screenTransform.y=i.y,this.informUpdateOfScreenTransform(this.schemeContainer.screenTransform))},startLinksAnimation(){this.linksAnimated=!0,(0,P.N4)(this.editorId,new C.Ay({durationMillis:300,update:e=>{(0,n.jJ)(this.selectedItemLinks,(t=>{t.x=t.startX*(1-e)+t.destinationX*e,t.y=t.startY*(1-e)+t.destinationY*e}))},destroy:()=>{this.linksAnimated=!1}}),"screen","links-animation")},generateItemLinks(e,t){let i=this.schemeContainer.shadowTransform;if(t&&t.meta.componentSchemeContainer&&(i=t.meta.componentSchemeContainer.shadowTransform),e.links&&e.links.length>0){const t=(0,k.xS)(e.area.w/2,e.area.h/2,e,i);let r=this._x(t.x),s=this._y(t.y),o=r,a=s;(s>this.height-100||s<100)&&(s=this.height/4);let l=Math.max(20,Math.min(40,this.height/(e.links.length+1))),c=s-e.links.length*l/2;const h=(0,k.xS)(e.area.w,0,e,i);let d=this._x(h.x)+10;this.width-d<300&&(d=Math.max(10,this.width-300));const u=e=>"doc"===e.type&&e.url&&e.url.startsWith("/docs/")&&this.$router&&"history"!==this.$router.mode?"#"+e.url:e.url;return(0,n.kH)(e.links,((e,t)=>({url:u(e),type:e.type,iconClass:this.getIconClassForLink(e),title:e.title,x:r,y:s,startX:o,startY:a,destinationX:d,destinationY:c+l*t,width:1e3,height:30})))}return[]},informUpdateOfScreenTransform(e){f.A.screenTransformUpdated.$emit(this.editorId,e)},calculateLinkBackgroundRectWidth:e=>e.title?10*e.title.length:10*e.url.length,getIconClassForLink(e){if("file"===e.type){const t=e.title.lastIndexOf("."),i=e.title.substring(Math.max(0,t+1)).toLowerCase();return O.A.findFileIcon(i).cssClass}return O.A.findTypeByNameOrDefault(e.type).cssClass},toLocalPoint(e,t){return{x:(e-this.schemeContainer.screenTransform.x)/this.schemeContainer.screenTransform.scale,y:(t-this.schemeContainer.screenTransform.y)/this.schemeContainer.screenTransform.scale}},createHUDTransform(e){let t=0,i=0;return"left"===e.shapeProps.horizontalPosition?t=0:"right"===e.shapeProps.horizontalPosition?t=this.width-e.area.w:"center"===e.shapeProps.horizontalPosition&&(t=(this.width-e.area.w)/2),"top"===e.shapeProps.verticalPosition?i=0:"bottom"===e.shapeProps.verticalPosition?i=this.height-e.area.h:"center"===e.shapeProps.verticalPosition&&(i=(this.height-e.area.h)/2),`translate(${t} ${i})`},onDragEnter(e){e.preventDefault(),e.stopPropagation()},onDragOver(e){e.preventDefault(),e.stopPropagation()},onDragLeave(e){e.preventDefault(),e.stopPropagation()},areaToViewport(e,t){const i=this.pointToViewport(e.x,e.y,t);return{x:i.x,y:i.y,w:e.w*t.scale,h:e.h*t.scale}},pointToViewport:(e,t,i)=>({x:e*i.scale+i.x,y:t*i.scale+i.y}),onFileDragEnter(e){e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onFileDragOver(e){e.dataTransfer&&this.$store.state.apiClient&&this.$store.state.apiClient.uploadFile&&(this.draggingFileOver=!0)},onFileDragLeave(e){this.draggingFileOver=!1},onFileDrop(e){if(this.draggingFileOver=!1,e.preventDefault(),"edit"!==this.mode||!this.$store.state.apiClient||!this.$store.state.apiClient.uploadFile)return;let t=[...e.dataTransfer.items].filter((e=>"file"===e.kind));if(0===t.length)return;const i=this.mouseCoordsFromPageCoords(e.pageX,e.pageY),n=this.toLocalPoint(i.x,i.y);let r=-1;t.map((e=>e.getAsFile())).map((e=>{const t=e.type||"",i=e.name;return m.A.addInfoSystemMessage(this.$store,`Uploading file "${i}"...`,`file-uploading-${i}`,"fas fa-spinner fa-spin fa-1x"),this.$store.state.apiClient.uploadFile(e).then((e=>{r+=1;const a=h.A.clone(s.f7);if(t.startsWith("image/")){a.name=i,a.shape="image",a.shapeProps={image:e};const t=200;a.area={x:n.x,y:n.y+r*(t+10),w:200,h:t}}else a.name="Link to "+i,a.shape="link",a.shapeProps={url:e,icon:"file"},a.cursor="pointer",a.textSlots={link:{text:i,halign:"left",valign:"top",fontSize:16,paddingLeft:0,paddingTop:0,paddingBottom:0,paddingRight:0,color:"#047EFB"}},a.area={x:n.x,y:n.y+40*r,w:12*i.length+30,h:30};(0,o.V_)(a),this.schemeContainer.addItem(a),f.A.item.changed.specific.$emit(this.editorId,a.id,"links"),f.A.schemeChangeCommitted.$emit(this.editorId)})).catch((e=>(console.error(e),e.response&&e.response.data&&e.response.data.message?m.A.addErrorSystemMessage(this.$store,e.response.data.message,`item-upload-error-${i}`):m.A.addErrorSystemMessage(this.$store,"Something went wrong, could not upload file",`item-upload-error-${i}`),null)))}))},toggleClickableMarkers(){const e=this.schemeContainer.scheme.style.boundaryBoxColor;this.worldHighlightedItems=function(e,t,i,n){const r=[];return N(e,!0,t,i,(e=>{if(e.description&&e.description.length>4)return!0;if(e.links&&e.links.length>0)return!0;if(e.behavior.dragging&&e.behavior.dragging,0===e.behavior.events.length)return!1;for(let t=0;t<e.behavior.events.length;t++){const i=e.behavior.events[t].event;if(i===g.A.standardEvents.mousein.id||i===g.A.standardEvents.clicked.id)return!0}return!1}),r),r}(this.schemeContainer,e,e),this.animateCurrentHighlightedItems()},animateCurrentHighlightedItems(){if(this.highlightAnimationTime=0,this.highlightAnimated)return;if(0===this.worldHighlightedItems.length)return;this.highlightAnimated=!0;const e=t=>{const i=performance.now(),n=i-t;if(this.highlightAnimationTime+=n,!this.highlightAnimated||this.highlightAnimationTime>5e3||0===this.worldHighlightedItems.length)return this.highlightAnimationTime=0,this.highlightAnimated=!1,this.worldHighlightedItems=[],void this.$forceUpdate();let r=1;this.highlightAnimationTime>4e3&&(r=(5e3-this.highlightAnimationTime)/1e3);for(let e=0;e<this.worldHighlightedItems.length;e++)this.worldHighlightedItems[e].opacity=r*(.2*Math.cos(this.highlightAnimationTime/300)+.3);this.$forceUpdate(),requestAnimationFrame((()=>e(i)))};requestAnimationFrame((()=>e(performance.now())))},_x(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.x},_y(e){return e*this.schemeContainer.screenTransform.scale+this.schemeContainer.screenTransform.y},_z(e){return e*this.schemeContainer.screenTransform.scale}},computed:{fileDropLayerFill(){return this.draggingFileOver?"rgba(200,255,200,0.6)":"rgba(255,255,255,0.0)"},cssClass(){const e=["mode-"+this.mode];return"view"===this.mode&&this.textSelectionEnabled||e.push("text-nonselectable"),e},safeZoom(){return this.schemeContainer.screenTransform.scale>1e-5?this.schemeContainer.screenTransform.scale:1},transformSvg(){const e=Math.floor(this.schemeContainer.screenTransform.x||0),t=Math.floor(this.schemeContainer.screenTransform.y||0),i=this.schemeContainer.screenTransform.scale||1;return`translate(${e} ${t}) scale(${i} ${i})`},gridStep(){return r.A.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale},gridCount(){const e=r.A.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale),t=e*this.schemeContainer.screenTransform.scale;if(t<4)return{x:0,y:0,x0:0,y0:0};const i=Math.ceil(this.width/t)+1,n=Math.ceil(this.height/t)+1,s=e*this.schemeContainer.screenTransform.scale;let o=Math.ceil(this.schemeContainer.screenTransform.x%s)-s,a=Math.ceil(this.schemeContainer.screenTransform.y%s)-s;return{x:i,y:n,x0:Math.ceil((this._x(0)-o)/t),y0:Math.ceil((this._y(0)-a)/t)}},gridTransform(){const e=r.A.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale)*this.schemeContainer.screenTransform.scale;return`translate(${Math.ceil(this.schemeContainer.screenTransform.x%e)-e} ${Math.ceil(this.schemeContainer.screenTransform.y%e)-e})`},multiSelectBox(){return this.$store.getters.multiSelectBox},horizontalSnapper(){return this.$store.getters.horizontalSnapper},verticalSnapper(){return this.$store.getters.verticalSnapper},shouldShowDropMask(){return this.$store.getters.isDraggingItemCreation}},filters:{formatLinkTitle:e=>e.title?e.title:e.url},watch:{textSelectionEnabled(e){this.mouseEventsEnabled=!("view"===this.mode&&e),this.$forceUpdate()},highlightedItems(e){this.highlightItems(e.itemIds,e.showPins)},zoomToItemsTrigger(){this.zoomToItems(this.zoomedItems)}}},ee=(0,b.A)(J,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"svg-editor",attrs:{id:"svg-editor"}},[t("svg",{ref:"svgDomElement",staticClass:"svg-editor-plot",class:e.cssClass,style:{background:e.schemeContainer.scheme.style.backgroundColor},attrs:{id:`svg-plot-${e.editorId}`,"data-void":"true",oncontextmenu:"return false;"},on:{mousemove:e.mouseMove,touchstart:e.touchStart,touchend:e.touchEnd,touchmove:e.touchMove,mousedown:e.mouseDown,mouseup:e.mouseUp,dragenter:e.onDragEnter,dragover:e.onDragOver,dragleave:e.onDragLeave}},["view"===e.mode&&e.schemeContainer?t("g",[t("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(i){return i.visible&&"hud"!==i.shape?t("g",{staticClass:"item-container",class:"item-cursor-"+i.cursor},[t("ItemSvg",{key:`${i.id}-${i.shape}-${e.textSelectionEnabled}-${e.itemsReloadKey}`,attrs:{item:i,editorId:e.editorId,mode:e.mode,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,eventListener:e.eventListenerInterceptor},on:{"component-load-requested":e.onComponentLoadRequested,"frame-animator":e.onFrameAnimatorEvent}})],1):e._e()})),e._v(" "),e._l(e.worldHighlightedItems,(function(i){return t("g",{attrs:{transform:i.transform}},[t("path",{style:{opacity:i.opacity},attrs:{d:i.path,fill:i.fill,stroke:i.stroke,"stroke-width":`${i.strokeSize+6/(i.scalingFactor*e.safeZoom)}px`,"data-item-id":i.id,"data-preview-ignore":"true"}})])}))],2),e._v(" "),t("g",e._l(e.schemeContainer.hudItems,(function(i){return i.visible?t("g",{style:{opacity:i.opacity/100,"mix-blend-mode":i.blendMode},attrs:{transform:e.createHUDTransform(i)}},e._l(i.childItems,(function(i){return i.visible?t("ItemSvg",{key:`${i.id}-${i.shape}-${e.textSelectionEnabled}-${e.itemsReloadKey}`,attrs:{item:i,editorId:e.editorId,textSelectionEnabled:e.textSelectionEnabled,patchIndex:e.patchIndex,mode:e.mode,eventListener:e.eventListenerInterceptor},on:{"component-load-requested":e.onComponentLoadRequested,"frame-animator":e.onFrameAnimatorEvent}}):e._e()})),1):e._e()})),0),e._v(" "),e._l(e.selectedItemLinks,(function(i,n){return t("g",{attrs:{"data-preview-ignore":"true"}},[t("a",{staticClass:"item-link",attrs:{id:`item-link-${n}`,"xlink:href":e.linksAnimated?"#":i.url,target:"_blank",title:i.title},on:{click:function(t){return e.onSvgItemLinkClick(i.url,arguments[0])}}},[t("circle",{attrs:{cx:i.x,cy:i.y,r:12,stroke:e.linkPalette[n%e.linkPalette.length],fill:e.linkPalette[n%e.linkPalette.length]}}),e._v(" "),t("foreignObject",{attrs:{x:i.x-7,y:i.y-6,width:16,height:16}},[t("div",{staticClass:"item-link-icon"},[t("i",{class:i.iconClass})])]),e._v(" "),t("foreignObject",{attrs:{x:i.x+16,y:i.y-11,width:i.width,height:i.height}},[t("span",{staticClass:"item-link-title"},[e._v(e._s(e._f("formatLinkTitle")(i)))])])])])}))],2):e._e(),e._v(" "),"edit"===e.mode?t("g",[t("g",{staticClass:"grid",attrs:{"data-preview-ignore":"true",transform:e.gridTransform,"data-void":"true"}},[e._l(e.gridCount.x,(function(i){return t("line",{class:{"grid-line-zero":i===e.gridCount.x0},attrs:{x1:i*e.gridStep,y1:"0",x2:i*e.gridStep,y2:e.height+2*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})})),e._v(" "),e._l(e.gridCount.y,(function(i){return t("line",{class:{"grid-line-zero":i===e.gridCount.y0},attrs:{x1:"0",y1:i*e.gridStep,x2:e.width+2*e.gridStep,y2:i*e.gridStep,stroke:e.schemeContainer.scheme.style.gridColor,"data-void":"true"}})}))],2),e._v(" "),t("rect",{attrs:{"data-preview-ignore":"true",x:"0",y:"0",width:e.width,height:e.height,fill:e.fileDropLayerFill},on:{dragenter:e.onFileDragEnter,dragover:e.onFileDragOver,dragleave:e.onFileDragLeave,drop:e.onFileDrop}}),e._v(" "),t("g",{attrs:{"data-type":"scene-transform",transform:e.transformSvg}},[e._l(e.schemeContainer.worldItems,(function(i){return i.visible?t("g",{staticClass:"item-container",class:"item-cursor-"+i.cursor},[t("ItemSvg",{key:`${i.id}-${i.shape}-${e.itemsReloadKey}`,attrs:{item:i,editorId:e.editorId,patchIndex:e.patchIndex,mode:e.mode,eventListener:e.eventListenerInterceptor}})],1):e._e()})),e._v(" "),e.schemeContainer.activeBoundaryBox?t("g",{attrs:{"data-preview-ignore":"true"}},[t("rect",{staticClass:"boundary-box",attrs:{stroke:e.schemeContainer.scheme.style.boundaryBoxColor,x:e.schemeContainer.activeBoundaryBox.x,y:e.schemeContainer.activeBoundaryBox.y,width:e.schemeContainer.activeBoundaryBox.w,height:e.schemeContainer.activeBoundaryBox.h}})]):e._e(),e._v(" "),e._t("scene-transform"),e._v(" "),e._l(e.worldHighlightedItems,(function(i){return t("g",{attrs:{transform:i.transform}},[t("path",{style:{opacity:i.opacity},attrs:{d:i.path,fill:i.fill,stroke:i.stroke,"stroke-width":`${i.strokeSize+6/(i.scalingFactor*e.safeZoom)}px`,"data-item-id":i.id,"stroke-linejoin":"round","data-preview-ignore":"true"}}),e._v(" "),e._l(i.pins,(function(n){return t("circle",{staticStyle:{opacity:"0.5"},attrs:{cx:n.x,cy:n.y,r:8/(i.scalingFactor*e.safeZoom),"data-preview-ignore":"true",fill:i.stroke}})}))],2)}))],2),e._v(" "),e.multiSelectBox?t("g",[t("rect",{staticClass:"multi-select-box",attrs:{x:e._x(e.multiSelectBox.x),y:e._y(e.multiSelectBox.y),width:e._z(e.multiSelectBox.w),height:e._z(e.multiSelectBox.h)}})]):e._e(),e._v(" "),e.horizontalSnapper?t("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:0,y1:e._y(e.horizontalSnapper.value),x2:e.width,y2:e._y(e.horizontalSnapper.value)}}):e._e(),e._v(" "),e.verticalSnapper?t("line",{staticStyle:{stroke:"red",opacity:"0.4","stroke-width":"1px"},attrs:{x1:e._x(e.verticalSnapper.value),y1:0,x2:e._x(e.verticalSnapper.value),y2:e.height}}):e._e(),e._v(" "),e.stateLayerShown?t("rect",{staticClass:"state-hover-layer",attrs:{x:"0",y:"0",width:e.width,height:e.height,fill:"rgba(255, 255, 255, 0.0)"}}):e._e()]):e._e()]),e._v(" "),e._t("overlay")],2)}),[],!1,null,null,null).exports;function te(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ie(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ne={props:{item:{type:Object,required:!0},x:{type:Number,required:!0},y:{type:Number,required:!0},isShortDetails:{type:Boolean,default:!1}},beforeMount(){document.body.addEventListener("click",this.onBodyClick)},mounted(){const e=document.getElementById(this.domId).getBoundingClientRect(),t=Math.min(0,window.innerWidth-this.x-e.width),i=Math.min(0,window.innerHeight-this.y-e.height);this.positionLeft=this.x+t,this.positionTop=this.y+i},beforeDestroy(){document.body.removeEventListener("click",this.onBodyClick)},data(){const e=this.isShortDetails?300:Math.min(300,.7*window.innerWidth),t=this.isShortDetails?200:Math.min(700,.7*window.innerWidth),i=Math.min(500,.7*window.innerHeight),n=(this.item.links||[]).map((e=>{const t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?te(Object(i),!0).forEach((function(t){ie(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):te(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e);if("file"===e.type){const t=e.title.lastIndexOf("."),i=e.title.substring(Math.max(0,t+1));e.iconClass=O.A.findFileIcon(i).cssClass}else e.iconClass=O.A.findTypeByNameOrDefault(e.type).cssClass;return t}));return{domId:`item-tooltip-${this.item.id}`,positionLeft:this.x,positionTop:this.y,minWidth:e,maxWidth:t,maxHeight:i,hasLinks:n.length>0,tooltipBackground:this.item.tooltipBackground||"#eeeeee",tooltipColor:this.item.tooltipColor||"#111111"}},methods:{onBodyClick(e){e.srcElement.closest("svg.svg-editor-plot")||e.srcElement.closest(".item-tooltip")||this.$emit("close")}},computed:{tooltipStyle(){return{left:this.positionLeft+"px",top:this.positionTop+"px",background:this.tooltipBackground,color:this.tooltipColor,padding:"10px","min-width":`${this.minWidth}px`,"max-width":`${this.maxWidth}px`,"max-height":`${this.maxHeight}px`}},sanitizedItemDescription(){return(0,d.A)(this.item.description)},dataType(){return this.isShortDetails?"item-details-tooltip":"item-tooltip"}}},re=(0,b.A)(ne,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"item-tooltip",class:{"item-short-details-tooltip":e.isShortDetails},style:e.tooltipStyle,attrs:{id:e.domId,"data-type":e.dataType,"data-item-id":e.item.id},on:{mouseover:function(t){return e.$emit("mouseover",t)},mouseleave:function(t){return e.$emit("mouseleave",t)}}},[e.isShortDetails?e._e():t("div",{staticClass:"tooltip-header"},[t("span",{staticClass:"item-tooltip-close",style:{color:e.tooltipColor},on:{click:function(t){return e.$emit("close")}}},[e._v("×")]),e._v(" "),t("h3",{style:{color:e.tooltipColor}},[e._v(e._s(e.item.name))])]),e._v(" "),e.hasLinks?t("ul",{staticClass:"item-tooltip-links"},e._l(e.item.links,(function(i){return t("li",[t("a",{attrs:{href:i.url}},[t("i",{staticClass:"icon",class:i.iconClass}),e._v("\n                "+e._s(i.title)+"\n            ")])])})),0):e._e(),e._v(" "),t("div",{staticClass:"item-tooltip-body",domProps:{innerHTML:e._s(e.sanitizedItemDescription)}})])}),[],!1,null,null,null).exports,se={props:["item"],methods:{getLinkCssClass:e=>O.A.findTypeByNameOrDefault(e.type).cssClass},computed:{sanitizedItemDescription(){return(0,d.A)(this.item.description)}},filters:{formatLinkTitle:e=>e.title?e.title:e.url}},oe=(0,b.A)(se,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"item-details"},[t("h3",[e._v(e._s(e.item.name))]),e._v(" "),t("div",{domProps:{innerHTML:e._s(e.sanitizedItemDescription)}}),e._v(" "),e.item.links&&e.item.links.length>0?t("div",[t("h5",[e._v("Links")]),e._v(" "),t("ul",{staticClass:"links"},e._l(e.item.links,(function(i){return t("li",[t("a",{staticClass:"link",attrs:{href:i.url,target:"_blank"}},[t("i",{class:e.getLinkCssClass(i)}),e._v("\n                    "+e._s(e._f("formatLinkTitle")(i))+"\n                ")])])})),0)]):e._e()])}),[],!1,null,null,null).exports;var ae=("undefined"!=typeof window?window:void 0!==i.g?i.g:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function le(e,t){if(void 0===t&&(t=[]),null===e||"object"!=typeof e)return e;var i,n=(i=function(t){return t.original===e},t.filter(i)[0]);if(n)return n.copy;var r=Array.isArray(e)?[]:{};return t.push({original:e,copy:r}),Object.keys(e).forEach((function(i){r[i]=le(e[i],t)})),r}function ce(e,t){Object.keys(e).forEach((function(i){return t(e[i],i)}))}function he(e){return null!==e&&"object"==typeof e}var de=function(e,t){this.runtime=t,this._children=Object.create(null),this._rawModule=e;var i=e.state;this.state=("function"==typeof i?i():i)||{}},ue={namespaced:{configurable:!0}};ue.namespaced.get=function(){return!!this._rawModule.namespaced},de.prototype.addChild=function(e,t){this._children[e]=t},de.prototype.removeChild=function(e){delete this._children[e]},de.prototype.getChild=function(e){return this._children[e]},de.prototype.hasChild=function(e){return e in this._children},de.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)},de.prototype.forEachChild=function(e){ce(this._children,e)},de.prototype.forEachGetter=function(e){this._rawModule.getters&&ce(this._rawModule.getters,e)},de.prototype.forEachAction=function(e){this._rawModule.actions&&ce(this._rawModule.actions,e)},de.prototype.forEachMutation=function(e){this._rawModule.mutations&&ce(this._rawModule.mutations,e)},Object.defineProperties(de.prototype,ue);var pe,fe=function(e){this.register([],e,!1)};function me(e,t,i){if(t.update(i),i.modules)for(var n in i.modules){if(!t.getChild(n))return;me(e.concat(n),t.getChild(n),i.modules[n])}}fe.prototype.get=function(e){return e.reduce((function(e,t){return e.getChild(t)}),this.root)},fe.prototype.getNamespace=function(e){var t=this.root;return e.reduce((function(e,i){return e+((t=t.getChild(i)).namespaced?i+"/":"")}),"")},fe.prototype.update=function(e){me([],this.root,e)},fe.prototype.register=function(e,t,i){var n=this;void 0===i&&(i=!0);var r=new de(t,i);0===e.length?this.root=r:this.get(e.slice(0,-1)).addChild(e[e.length-1],r),t.modules&&ce(t.modules,(function(t,r){n.register(e.concat(r),t,i)}))},fe.prototype.unregister=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1],n=t.getChild(i);n&&n.runtime&&t.removeChild(i)},fe.prototype.isRegistered=function(e){var t=this.get(e.slice(0,-1)),i=e[e.length-1];return!!t&&t.hasChild(i)};var ge=function(e){var t=this;void 0===e&&(e={}),!pe&&"undefined"!=typeof window&&window.Vue&&ke(window.Vue);var i=e.plugins;void 0===i&&(i=[]);var n=e.strict;void 0===n&&(n=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new fe(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new pe,this._makeLocalGettersCache=Object.create(null);var r=this,s=this.dispatch,o=this.commit;this.dispatch=function(e,t){return s.call(r,e,t)},this.commit=function(e,t,i){return o.call(r,e,t,i)},this.strict=n;var a=this._modules.root.state;we(this,a,[],this._modules.root),be(this,a),i.forEach((function(e){return e(t)})),(void 0!==e.devtools?e.devtools:pe.config.devtools)&&function(e){ae&&(e._devtoolHook=ae,ae.emit("vuex:init",e),ae.on("vuex:travel-to-state",(function(t){e.replaceState(t)})),e.subscribe((function(e,t){ae.emit("vuex:mutation",e,t)}),{prepend:!0}),e.subscribeAction((function(e,t){ae.emit("vuex:action",e,t)}),{prepend:!0}))}(this)},ye={state:{configurable:!0}};function ve(e,t,i){return t.indexOf(e)<0&&(i&&i.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function xe(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var i=e.state;we(e,i,[],e._modules.root,!0),be(e,i,t)}function be(e,t,i){var n=e._vm;e.getters={},e._makeLocalGettersCache=Object.create(null);var r=e._wrappedGetters,s={};ce(r,(function(t,i){s[i]=function(e,t){return function(){return e(t)}}(t,e),Object.defineProperty(e.getters,i,{get:function(){return e._vm[i]},enumerable:!0})}));var o=pe.config.silent;pe.config.silent=!0,e._vm=new pe({data:{$$state:t},computed:s}),pe.config.silent=o,e.strict&&function(e){e._vm.$watch((function(){return this._data.$$state}),(function(){}),{deep:!0,sync:!0})}(e),n&&(i&&e._withCommit((function(){n._data.$$state=null})),pe.nextTick((function(){return n.$destroy()})))}function we(e,t,i,n,r){var s=!i.length,o=e._modules.getNamespace(i);if(n.namespaced&&(e._modulesNamespaceMap[o],e._modulesNamespaceMap[o]=n),!s&&!r){var a=Oe(t,i.slice(0,-1)),l=i[i.length-1];e._withCommit((function(){pe.set(a,l,n.state)}))}var c=n.context=function(e,t,i){var n=""===t,r={dispatch:n?e.dispatch:function(i,n,r){var s=Se(i,n,r),o=s.payload,a=s.options,l=s.type;return a&&a.root||(l=t+l),e.dispatch(l,o)},commit:n?e.commit:function(i,n,r){var s=Se(i,n,r),o=s.payload,a=s.options,l=s.type;a&&a.root||(l=t+l),e.commit(l,o,a)}};return Object.defineProperties(r,{getters:{get:n?function(){return e.getters}:function(){return function(e,t){if(!e._makeLocalGettersCache[t]){var i={},n=t.length;Object.keys(e.getters).forEach((function(r){if(r.slice(0,n)===t){var s=r.slice(n);Object.defineProperty(i,s,{get:function(){return e.getters[r]},enumerable:!0})}})),e._makeLocalGettersCache[t]=i}return e._makeLocalGettersCache[t]}(e,t)}},state:{get:function(){return Oe(e.state,i)}}}),r}(e,o,i);n.forEachMutation((function(t,i){!function(e,t,i,n){(e._mutations[t]||(e._mutations[t]=[])).push((function(t){i.call(e,n.state,t)}))}(e,o+i,t,c)})),n.forEachAction((function(t,i){var n=t.root?i:o+i,r=t.handler||t;!function(e,t,i,n){(e._actions[t]||(e._actions[t]=[])).push((function(t){var r,s=i.call(e,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:e.getters,rootState:e.state},t);return(r=s)&&"function"==typeof r.then||(s=Promise.resolve(s)),e._devtoolHook?s.catch((function(t){throw e._devtoolHook.emit("vuex:error",t),t})):s}))}(e,n,r,c)})),n.forEachGetter((function(t,i){!function(e,t,i,n){e._wrappedGetters[t]||(e._wrappedGetters[t]=function(e){return i(n.state,n.getters,e.state,e.getters)})}(e,o+i,t,c)})),n.forEachChild((function(n,s){we(e,t,i.concat(s),n,r)}))}function Oe(e,t){return t.reduce((function(e,t){return e[t]}),e)}function Se(e,t,i){return he(e)&&e.type&&(i=t,t=e,e=e.type),{type:e,payload:t,options:i}}function ke(e){pe&&e===pe||function(e){if(Number(e.version.split(".")[0])>=2)e.mixin({beforeCreate:i});else{var t=e.prototype._init;e.prototype._init=function(e){void 0===e&&(e={}),e.init=e.init?[i].concat(e.init):i,t.call(this,e)}}function i(){var e=this.$options;e.store?this.$store="function"==typeof e.store?e.store():e.store:e.parent&&e.parent.$store&&(this.$store=e.parent.$store)}}(pe=e)}ye.state.get=function(){return this._vm._data.$$state},ye.state.set=function(e){},ge.prototype.commit=function(e,t,i){var n=this,r=Se(e,t,i),s=r.type,o=r.payload,a=(r.options,{type:s,payload:o}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(e){e(o)}))})),this._subscribers.slice().forEach((function(e){return e(a,n.state)})))},ge.prototype.dispatch=function(e,t){var i=this,n=Se(e,t),r=n.type,s=n.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(e){return e.before})).forEach((function(e){return e.before(o,i.state)}))}catch(e){}var l=a.length>1?Promise.all(a.map((function(e){return e(s)}))):a[0](s);return new Promise((function(e,t){l.then((function(t){try{i._actionSubscribers.filter((function(e){return e.after})).forEach((function(e){return e.after(o,i.state)}))}catch(e){}e(t)}),(function(e){try{i._actionSubscribers.filter((function(e){return e.error})).forEach((function(t){return t.error(o,i.state,e)}))}catch(e){}t(e)}))}))}},ge.prototype.subscribe=function(e,t){return ve(e,this._subscribers,t)},ge.prototype.subscribeAction=function(e,t){return ve("function"==typeof e?{before:e}:e,this._actionSubscribers,t)},ge.prototype.watch=function(e,t,i){var n=this;return this._watcherVM.$watch((function(){return e(n.state,n.getters)}),t,i)},ge.prototype.replaceState=function(e){var t=this;this._withCommit((function(){t._vm._data.$$state=e}))},ge.prototype.registerModule=function(e,t,i){void 0===i&&(i={}),"string"==typeof e&&(e=[e]),this._modules.register(e,t),we(this,this.state,e,this._modules.get(e),i.preserveState),be(this,this.state)},ge.prototype.unregisterModule=function(e){var t=this;"string"==typeof e&&(e=[e]),this._modules.unregister(e),this._withCommit((function(){var i=Oe(t.state,e.slice(0,-1));pe.delete(i,e[e.length-1])})),xe(this)},ge.prototype.hasModule=function(e){return"string"==typeof e&&(e=[e]),this._modules.isRegistered(e)},ge.prototype.hotUpdate=function(e){this._modules.update(e),xe(this,!0)},ge.prototype._withCommit=function(e){var t=this._committing;this._committing=!0,e(),this._committing=t},Object.defineProperties(ge.prototype,ye);var Pe=$e((function(e,t){var i={};return Te(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){var t=this.$store.state,i=this.$store.getters;if(e){var n=Me(this.$store,0,e);if(!n)return;t=n.context.state,i=n.context.getters}return"function"==typeof r?r.call(this,t,i):t[r]},i[n].vuex=!0})),i})),Ce=$e((function(e,t){var i={};return Te(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=this.$store.commit;if(e){var s=Me(this.$store,0,e);if(!s)return;n=s.context.commit}return"function"==typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i})),Ae=$e((function(e,t){var i={};return Te(t).forEach((function(t){var n=t.key,r=t.val;r=e+r,i[n]=function(){if(!e||Me(this.$store,0,e))return this.$store.getters[r]},i[n].vuex=!0})),i})),Ie=$e((function(e,t){var i={};return Te(t).forEach((function(t){var n=t.key,r=t.val;i[n]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var n=this.$store.dispatch;if(e){var s=Me(this.$store,0,e);if(!s)return;n=s.context.dispatch}return"function"==typeof r?r.apply(this,[n].concat(t)):n.apply(this.$store,[r].concat(t))}})),i}));function Te(e){return function(e){return Array.isArray(e)||he(e)}(e)?Array.isArray(e)?e.map((function(e){return{key:e,val:e}})):Object.keys(e).map((function(t){return{key:t,val:e[t]}})):[]}function $e(e){return function(t,i){return"string"!=typeof t?(i=t,t=""):"/"!==t.charAt(t.length-1)&&(t+="/"),e(t,i)}}function Me(e,t,i){return e._modulesNamespaceMap[i]}function Ee(e,t,i){var n=i?e.groupCollapsed:e.group;try{n.call(e,t)}catch(i){e.log(t)}}function _e(e){try{e.groupEnd()}catch(t){e.log("—— log end ——")}}function De(){var e=new Date;return" @ "+Le(e.getHours(),2)+":"+Le(e.getMinutes(),2)+":"+Le(e.getSeconds(),2)+"."+Le(e.getMilliseconds(),3)}function Le(e,t){return"0",i=t-e.toString().length,new Array(i+1).join("0")+e;var i}const Be={Store:ge,install:ke,version:"3.6.2",mapState:Pe,mapMutations:Ce,mapGetters:Ae,mapActions:Ie,createNamespacedHelpers:function(e){return{mapState:Pe.bind(null,e),mapGetters:Ae.bind(null,e),mapMutations:Ce.bind(null,e),mapActions:Ie.bind(null,e)}},createLogger:function(e){void 0===e&&(e={});var t=e.collapsed;void 0===t&&(t=!0);var i=e.filter;void 0===i&&(i=function(e,t,i){return!0});var n=e.transformer;void 0===n&&(n=function(e){return e});var r=e.mutationTransformer;void 0===r&&(r=function(e){return e});var s=e.actionFilter;void 0===s&&(s=function(e,t){return!0});var o=e.actionTransformer;void 0===o&&(o=function(e){return e});var a=e.logMutations;void 0===a&&(a=!0);var l=e.logActions;void 0===l&&(l=!0);var c=e.logger;return void 0===c&&(c=console),function(e){var h=le(e.state);void 0!==c&&(a&&e.subscribe((function(e,s){var o=le(s);if(i(e,h,o)){var a=De(),l=r(e),d="mutation "+e.type+a;Ee(c,d,t),c.log("%c prev state","color: #9E9E9E; font-weight: bold",n(h)),c.log("%c mutation","color: #03A9F4; font-weight: bold",l),c.log("%c next state","color: #4CAF50; font-weight: bold",n(o)),_e(c)}h=o})),l&&e.subscribeAction((function(e,i){if(s(e,i)){var n=De(),r=o(e),a="action "+e.type+n;Ee(c,a,t),c.log("%c action","color: #03A9F4; font-weight: bold",r),_e(c)}})))}}};var Re=i(8590);function Ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Fe(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(i),!0).forEach((function(t){je(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function je(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}t().use(Be);const ze="defaultConnectorSmoothing",Qe=(0,Re.eU)("store",100),Ue=new Be.Store({state:{rootPath:"/",assetsPath:"/assets",routePrefix:"",apiClient:null,editorSubStateName:null,itemMenu:{artPackIds:new Set,artPacks:[],shapeGroupIds:new Set},connecting:{connectorItem:null},patch:{settings:{additionsColor:"rgba(90, 255, 90, 0.4)",deletionsColor:"rgba(255, 90, 90, 0.4)",modificationsColor:"rgba(90, 90, 255, 0.4)"},diffColoringEnabled:!0},defaultConnectorSmoothing:Qe.get(ze,"linear"),autoRemount:Qe.get("autoRemount",!0),showPivot:Qe.get("showPivot",!1),showItemDetailMarkers:Qe.get("showItemDetailMarkers",!0),copiedStyleItem:null,snap:{grid:Qe.get("snap.grid",!1),items:Qe.get("snap.items",!0)},itemSurround:{padding:40},itemControlPoints:[],selectedConnectorPath:null,selectedConnector:null,multiSelectBox:null,snappers:{horizontal:null,vertical:null},connectorProposedDestination:{shown:!1,connectorItemId:null,mx:0,my:0},imageUpload:{images:new Map},statusMessage:{message:null,isError:!1},systemMessages:[],draw:{epsilon:0,pencilSize:3,brushSize:5}},mutations:{SET_ROUTE_PREFIX(e,t){e.routePrefix=t},SET_ROOT_PATH(e,t){e.rootPath=t},SET_ASSESTS_PATH(e,t){e.assetsPath=t},SET_API_CLIENT(e,t){e.apiClient=t},TOGGLE_AUTO_REMOUNT(e){e.autoRemount=!e.autoRemount,Qe.save("autoRemount",e.autoRemount)},TOGGLE_PIVOT(e){e.showPivot=!e.showPivot,Qe.save("showPivot",e.showPivot)},TOGGLE_ITEM_DETAIL_MARKERS(e){e.showItemDetailMarkers=!e.showItemDetailMarkers,Qe.save("showItemDetailMarkers",e.showItemDetailMarkers)},SET_DEFAULT_CONNECTOR_SMOOTHING(e,t){e.defaultConnectorSmoothing=t,Qe.save(ze,t)},SET_GRID_SNAP(e,t){e.snap.grid=t,Qe.save("snap.grid",t)},SET_ITEM_SNAP(e,t){e.snap.items=t,Qe.save("snap.items",t)},SET_EDITOR_SUB_STATE_NAME(e,t){e.editorSubStateName=t},SET_ITEM_SURROUND_PADDING(e,t){e.itemSurround.padding=t},SET_ITEM_CONTROL_POINTS(e,t){e.itemControlPoints=t},CLEAR_ITEM_CONTROL_POINTS(e){e.itemControlPoints.length=0},SET_MULTI_SELECT_BOX(e,t){e.multiSelectBox=t},SET_SELECTED_CONNECTOR_WITH_PATH(e,{item:t,path:i}){e.selectedConnectorPath=i,e.selectedConnector=t},SET_ITEM_SNAPPER(e,t){"horizontal"===t.snapperType?e.snappers.horizontal=t:"vertical"===t.snapperType&&(e.snappers.vertical=t)},CLEAR_ITEM_SNAPPERS(e){e.snappers.horizontal=null,e.snappers.vertical=null},PROPOSE_CONNECTOR_DESTINATION_ITEMS(e,{connectorItemId:t,mx:i,my:n}){e.connectorProposedDestination.connectorItemId=t,e.connectorProposedDestination.mx=i,e.connectorProposedDestination.my=n,e.connectorProposedDestination.shown=!0},DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS(e){e.connectorProposedDestination.shown=!1},UPDATE_IMAGE_UPLOAD_STATUS(e,{imageId:t,uploading:i,uploadFailed:n}){n&&(e.statusMessage.message="Failed to upload image",e.statusMessage.isError=!0),i&&!n||!e.imageUpload.images.has(t)?e.imageUpload.images.set(t,{uploading:i,date:new Date}):e.imageUpload.images.delete(t);let r=0;if(e.imageUpload.images.forEach((e=>{e.uploading&&(r+=1)})),!e.statusMessage.isError||!e.statusMessage.message)if(r>0){let t="";r>1&&(t="s"),e.statusMessage.message=`Uploading ${r} image${t}`,e.statusMessage.isError=!1}else e.statusMessage.message=null,e.statusMessage.isError=!1},RESET_IMAGE_UPLOAD_STATUS(e){const t=new Date,i=[];e.imageUpload.images.forEach(((e,n)=>{t.getTime()-e.date.getTime()>45e3&&i.push(n)})),(0,n.jJ)(i,(t=>{e.imageUpload.images.delete(t)}))},CLEAR_STATUS_MESSAGE(e){e.statusMessage.message=null,e.statusMessage.isError=!1},SET_STATUS_MESSAGE(e,{message:t,isError:i}){e.statusMessage.message=t,e.statusMessage.isError=i},ADD_SYSTEM_MESSAGE(e,{message:t,status:i,id:n,iconClass:r}){if(n){for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===n)return}else n=M().generate();e.systemMessages.push({id:n,message:t,status:i,iconClass:r}),setTimeout((()=>{for(let t=0;t<e.systemMessages.length;t++)if(e.systemMessages[t].id===n)return void e.systemMessages.splice(t,1)}),5e3)},REMOVE_SYSTEM_MESSAGE(e,t){for(let i=0;i<e.systemMessages.length;i++)if(e.systemMessages[i].id===t)return void e.systemMessages.splice(i,1)},UPDATE_DRAW_PENCIL_SIZE(e,t){isNaN(t)||(e.draw.pencilSize=t)},UPDATE_DRAW_BRUSH_SIZE(e,t){isNaN(t)||(e.draw.brushSize=t)},UPDATE_DRAW_EPSILON(e,t){isNaN(t)||(e.draw.epsilon=t)},COPY_ITEM_STYLE(e,t){e.copiedStyleItem=h.A.clone(t)},SET_PATCH_DIFF_COLORING_ENABLED(e,t){e.patch.diffColoringEnabled=t},UPDATE_PATCH_DIFF_COLOR(e,{changeType:t,color:i}){"additions"===t?e.patch.settings.additionsColor=i:"deletions"===t?e.patch.settings.deletionsColor=i:"modifications"===t&&(e.patch.settings.modificationsColor=i)},SET_CURRENT_CONNECTOR(e,{item:t}){e.connecting.connectorItem=t},ADD_ART_PACK(e,{artPack:t,artPackId:i}){e.itemMenu.artPackIds.has(i)||(e.itemMenu.artPacks.push(Fe(Fe({},t),{},{id:i})),e.itemMenu.artPackIds.add(i))},REMOVE_ART_PACK(e,t){if(e.itemMenu.artPackIds.has(t)){e.itemMenu.artPackIds.delete(t);for(let i=0;i<e.itemMenu.artPacks.length;i++)if(e.itemMenu.artPacks[i].id===t)return void e.itemMenu.artPacks.splice(i,1)}},REGISTER_SHAPE_GROUP_ID(e,t){e.itemMenu.shapeGroupIds.add(t)}},actions:{setRoutePrefix({commit:e},t){e("SET_ROUTE_PREFIX",t)},setRootPath({commit:e},t){e("SET_ROOT_PATH",t)},setAssetsPath({commit:e},t){e("SET_ASSESTS_PATH",t)},setApiClient({commit:e},t){e("SET_API_CLIENT",t)},setDefaultConnectorSmoothing({commit:e},t){e("SET_DEFAULT_CONNECTOR_SMOOTHING",t)},setGridSnap({commit:e},t){e("SET_GRID_SNAP",t)},setItemSnap({commit:e},t){e("SET_ITEM_SNAP",t)},setEditorSubStateName({commit:e},t){e("SET_EDITOR_SUB_STATE_NAME",t)},setItemSurroundPadding({commit:e},t){e("SET_ITEM_SURROUND_PADDING",t)},setItemControlPoints({commit:e},t){const i=[];(0,n.jJ)(t,((e,t)=>{i.push({id:t,point:e})})),e("SET_ITEM_CONTROL_POINTS",i)},clearItemControlPoints({commit:e}){e("CLEAR_ITEM_CONTROL_POINTS")},setMultiSelectBox({commit:e},t){e("SET_MULTI_SELECT_BOX",t)},setSelectedConnectorWithPath({commit:e},{item:t,path:i}){e("SET_SELECTED_CONNECTOR_WITH_PATH",{item:t,path:i})},setItemSnapper({commit:e},t){e("SET_ITEM_SNAPPER",t)},clearItemSnappers({commit:e}){e("CLEAR_ITEM_SNAPPERS")},toggleAutoRemount({commit:e}){e("TOGGLE_AUTO_REMOUNT")},togglePivot({commit:e}){e("TOGGLE_PIVOT")},toggleItemDetailMarkers({commit:e}){e("TOGGLE_ITEM_DETAIL_MARKERS")},proposeConnectorDestinationItems({commit:e},t){e("PROPOSE_CONNECTOR_DESTINATION_ITEMS",t)},disableProposeConnectorDestinationItems({commit:e}){e("DISABLE_PROPOSE_CONNECTOR_DESTINATION_ITEMS")},updateImageUploadStatus({commit:e},{imageId:t,uploading:i,uploadFailed:n}){e("UPDATE_IMAGE_UPLOAD_STATUS",{imageId:t,uploading:i,uploadFailed:n}),setTimeout((()=>{e("RESET_IMAGE_UPLOAD_STATUS")}),6e4)},clearStatusMessage({commit:e}){e("CLEAR_STATUS_MESSAGE")},setErrorStatusMessage({commit:e},t){e("SET_STATUS_MESSAGE",{message:t,isError:!0})},addSystemMessage({commit:e},{message:t,status:i,id:n,iconClass:r}){e("ADD_SYSTEM_MESSAGE",{message:t,status:i,id:n,iconClass:r})},removeSystemMessage({commit:e},t){e("REMOVE_SYSTEM_MESSAGE",t)},updateDrawEpsilon({commit:e},t){e("UPDATE_DRAW_EPSILON",t)},updateDrawPencilSize({commit:e},t){e("UPDATE_DRAW_PENCIL_SIZE",t)},updateDrawBrushSize({commit:e},t){e("UPDATE_DRAW_BRUSH_SIZE",t)},copyItemStyle({commit:e},t){e("COPY_ITEM_STYLE",t)},setPatchDiffColoringEnabled({commit:e},t){e("SET_PATCH_DIFF_COLORING_ENABLED",t)},updatePatchDiffColor({commit:e},{changeType:t,color:i}){e("UPDATE_PATCH_DIFF_COLOR",{changeType:t,color:i})},setCurrentConnector({commit:e},t){e("SET_CURRENT_CONNECTOR",{item:t})},addArtPack({commit:e},{artPack:t,artPackId:i}){e("ADD_ART_PACK",{artPack:t,artPackId:i})},removeArtPack({commit:e},t){e("REMOVE_ART_PACK",t)},registerShapeGroupId({commit:e},t){e("REGISTER_SHAPE_GROUP_ID",t)}},getters:{apiClient:e=>e.apiClient,itemControlPointsList:e=>e.itemControlPoints,multiSelectBox:e=>e.multiSelectBox,horizontalSnapper:e=>e.snappers.horizontal,verticalSnapper:e=>e.snappers.vertical,shouldSnapToGrid:e=>e.snap.grid,shouldSnapToItems:e=>e.snap.items,autoRemount:e=>e.autoRemount,showPivot:e=>e.showPivot,showItemDetailMarkers:e=>e.showItemDetailMarkers,connectorProposedDestination:e=>e.connectorProposedDestination,statusMessage:e=>e.statusMessage,selectedConnectorPath:e=>e.selectedConnectorPath,selectedConnector:e=>e.selectedConnector,systemMessages:e=>e.systemMessages,drawEpsilon:e=>e.draw.epsilon,drawPencilSize:e=>e.draw.pencilSize,drawBrushSize:e=>e.draw.brushSize,editorSubStateName:e=>e.editorSubStateName,patchAdditionsColor:e=>e.patch.settings.additionsColor,patchDeletionsColor:e=>e.patch.settings.deletionsColor,patchModificationsColor:e=>e.patch.settings.modificationsColor,patchIsDiffColoringEnabled:e=>e.patch.diffColoringEnabled,staticExportAllowed:e=>!(!e.apiClient||!e.apiClient.submitStaticExport),rootPath:e=>e.routePrefix?"/"===e.rootPath?e.routePrefix:e.routePrefix+e.rootPath:e.rootPath,assetsPath:e=>e.routePrefix?e.routePrefix+e.assetsPath:e.assetsPath,routePrefix:e=>e.routePrefix}}),qe=[.1,.25,.35,.5,.75,1,1.25,1.5,2,3,4,5,7.5,10];function He(e,t,i){return t*(1-e)+i*e}let Ve=null;class We{constructor(e,t,i,n){this.schemeContainer=null,this.name=i||"",this.store=t,this.editorId=e,this.subState=null,this.previousSubStates=[],this.listener=n,this.pinchToZoomId=0,this.pinchToZoom={id:0,wp1:{x:0,y:0},wp2:{x:0,y:0},x0:0,y0:0,scale:1},this.inertiaDrag={on:!1,speed:0,direction:{x:0,y:0},positionTracker:{idx:0,positions:[]}}}onItemChanged(e){}resetInertiaDrag(){this.inertiaDrag.positionTracker.idx=0,this.inertiaDrag.positionTracker.positions=[],this.inertiaDrag.speed=0,this.inertiaDrag.on=!1}registerInertiaPositions(e,t){this.inertiaDrag.positionTracker.positions.length<5?this.inertiaDrag.positionTracker.positions.push({x:e,y:t,time:performance.now()}):this.inertiaDrag.positionTracker.positions[this.inertiaDrag.positionTracker.idx]={x:e,y:t,time:performance.now()},this.inertiaDrag.positionTracker.idx=(this.inertiaDrag.positionTracker.idx+1)%5}initScreenInertia(){if(this.inertiaDrag.on)return;const e=this.inertiaDrag.positionTracker.positions;if(e.length>2){e.sort(((e,t)=>t.time-e.time));let t=0,i=0,n=0;const r=[1,.5,.3,.1,.05];let s=0;for(let o=0;o<e.length-1;o++){const a=e[o+1],l=e[o],c=Math.sqrt((a.x-l.x)*(a.x-l.x)+(a.y-l.y)*(a.y-l.y));c>.01&&(t+=(l.x-a.x)/c,i+=(l.y-a.y)/c);const h=l.time-a.time;if(h>.01){const e=c/h;if(0===o&&e<.5)return void(this.inertiaDrag.speed=0);n+=e*r[o],s+=r[o]}}t/=e.length-1,i/=e.length-1,this.inertiaDrag.direction.x=t,this.inertiaDrag.direction.y=i,s>0?(this.inertiaDrag.speed=Math.min(10,n/s),this.inertiaDrag.on=!0):(this.inertiaDrag.speed=0,this.inertiaDrag.on=!1)}else this.inertiaDrag.speed=0,this.inertiaDrag.on=!1}loop(e){if(this.inertiaDrag.on)if(this.inertiaDrag.speed>.05){const t=this.schemeContainer.screenTransform.x+this.inertiaDrag.speed*e*this.inertiaDrag.direction.x/2,i=this.schemeContainer.screenTransform.y+this.inertiaDrag.speed*e*this.inertiaDrag.direction.y/2;this.dragScreenTo(t,i),this.inertiaDrag.speed=Math.max(0,this.inertiaDrag.speed-e/200)}else this.inertiaDrag.on=!1}migrateSubState(e){this.subState&&(this.previousSubStates.push(this.subState),this.previousSubStates.length>10&&this.previousSubStates.shift()),this.subState=e,this.subState.listener=this.listener,this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null"),this.listener.onSubStateMigrated()}migrateToPreviousSubState(){this.previousSubStates.length>0&&(this.subState=this.previousSubStates.pop(),this.subState.listener=this.listener,this.store.dispatch("setEditorSubStateName",this.subState?this.subState.name:"null"),this.listener.onSubStateMigrated())}resetPreviousSubStates(){this.previousSubStates=[]}setSchemeContainer(e){this.schemeContainer=e}reset(){}cancel(){this.reset(),this.listener.onCancel(this.name)}keyPressed(e,t){this.subState&&this.subState.keyPressed(e,t)}keyUp(e,t){this.subState&&this.subState.keyUp(e,t)}mouseDoubleClick(e,t,i,n,r,s,o){this.subState&&this.subState.mouseDoubleClick(e,t,i,n,r,s)}mouseDown(e,t,i,n,r,s,o){this.pinchToZoomId+=1,this.subState&&this.subState.mouseDown(e,t,i,n,r,s,o)}mouseMove(e,t,i,n,r,s,o){this.subState&&this.subState.mouseMove(e,t,i,n,r,s,o)}mouseUp(e,t,i,n,r,s,o){this.subState&&this.subState.mouseUp(e,t,i,n,r,s,o)}mobilePinchToZoom(e){if(e.preventDefault(),this.pinchToZoom.id!==this.pinchToZoomId)return void this.initPinchToZoom(e);if(2!==e.touches.length)return;const t=this.pinchToZoom.wp1,i=this.pinchToZoom.wp2,n=e.touches[0].pageX,s=e.touches[0].pageY,o=e.touches[1].pageX,a=e.touches[1].pageY,l=t.x-i.x,c=t.y-i.y;if(Math.abs(l)>Math.abs(c)){if(r.A.tooSmall(l))return;this.schemeContainer.screenTransform.scale=r.A.clamp(Math.abs((n-o)/l),5e-4,1e5)}else{if(r.A.tooSmall(c))return;this.schemeContainer.screenTransform.scale=r.A.clamp(Math.abs((s-a)/c),5e-4,1e5)}const h=n-t.x*this.schemeContainer.screenTransform.scale,d=o-i.x*this.schemeContainer.screenTransform.scale,u=s-t.y*this.schemeContainer.screenTransform.scale,p=a-i.y*this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.x=(h+d)/2,this.schemeContainer.screenTransform.y=(u+p)/2,f.A.screenTransformUpdated.$emit(this.editorId,this.schemeContainer.screenTransform)}initPinchToZoom(e){if(2!==e.touches.length)return;const t=this.schemeContainer.screenTransform.x,i=this.schemeContainer.screenTransform.y,n=this.schemeContainer.screenTransform.scale;this.pinchToZoom.id=this.pinchToZoomId,this.pinchToZoom.wp1={x:(e.touches[0].pageX-t)/n,y:(e.touches[0].pageY-i)/n},this.pinchToZoom.wp2={x:(e.touches[1].pageX-t)/n,y:(e.touches[1].pageY-i)/n},this.pinchToZoom.scale=this.schemeContainer.screenTransform.scale,this.pinchToZoom.x0=this.schemeContainer.screenTransform.x,this.pinchToZoom.y0=this.schemeContainer.screenTransform.y}mouseWheel(e,t,i,n,r){r&&this.zoomByWheel(i,n,r.deltaY)}zoomByWheel(e,t,i){const n=(100+Math.min(120,Math.sqrt(Math.abs(i))))/100;var r=0,s=this.schemeContainer.screenTransform.x,o=this.schemeContainer.screenTransform.y;if(i<0){const i=e-(r=this.schemeContainer.screenTransform.scale*n)*(e-s)/this.schemeContainer.screenTransform.scale,a=t-r*(t-o)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=r,this.dragScreenTo(i,a)}else if(this.schemeContainer.screenTransform.scale>.05){const i=e-(r=this.schemeContainer.screenTransform.scale/n)*(e-s)/this.schemeContainer.screenTransform.scale,a=t-r*(t-o)/this.schemeContainer.screenTransform.scale;this.schemeContainer.screenTransform.scale=r,this.dragScreenTo(i,a)}}resetZoom(){this.changeZoomTo(1)}zoomOut(){const e=this.schemeContainer.screenTransform.scale;let t=qe[0],i=!1;for(let n=0;n<qe.length&&!i;n++)qe[n]<e?t=qe[n]:i=!0;this.changeZoomTo(t)}zoomIn(){const e=this.schemeContainer.screenTransform.scale;let t=qe[qe.length-1],i=!1,n=qe.length-1;for(;!i;)qe[n]>e?t=qe[n]:i=!0,n-=1,n<0&&(i=!0);this.changeZoomTo(t)}changeZoomTo(e){!function(e,t,i){const n=e.screenTransform.x,s=e.screenTransform.y,o=document.getElementById(`svg-plot-${e.editorId}`).getBoundingClientRect(),a=o.width/2,l=o.height/2,c=a-t*(a-n)/e.screenTransform.scale,h=l-t*(l-s)/e.screenTransform.scale,d={t:0,finished:!1,oldScale:e.screenTransform.scale,oldX:e.screenTransform.x,oldY:e.screenTransform.y,newScale:t,newX:c,newY:h};Ve&&(Ve.finished=!0);const u=t=>{const n=performance.now(),s=n-t;d.t+=8*s/1e3;const o=(0,C.t)(r.A.clamp(d.t,0,1),C.Uq.EASE_OUT);e.screenTransform.scale=He(o,d.oldScale,d.newScale),e.screenTransform.x=He(o,d.oldX,d.newX),e.screenTransform.y=He(o,d.oldY,d.newY),i(e.screenTransform),f.A.screenTransformUpdated.$emit(e.editorId,e.screenTransform),!d.finished&&d.t<1&&window.requestAnimationFrame((()=>{u(n)}))};u(performance.now()),Ve=d}(this.schemeContainer,e,(e=>{f.A.screenTransformUpdated.$emit(this.editorId,e)}))}dragScreenOffset(e,t){let i=this.schemeContainer.screenTransform.x+e,n=this.schemeContainer.screenTransform.y+t;this.dragScreenTo(i,n)}getScreenBounds(){return null}getScreenBoundsPadding(){return{x:10,y:10}}dragScreenTo(e,t){const i=this.getScreenBounds(),n=this.schemeContainer.screenTransform.scale,r=this.getScreenBoundsPadding();if(i){const s=-i.x*n,o=-i.y*n,a=this.schemeContainer.screenSettings.width-(i.x+i.w)*n,l=this.schemeContainer.screenSettings.height-(i.y+i.h)*n,c={min:Math.min(s,a),max:Math.max(s,a)},h={min:Math.min(o,l),max:Math.max(o,l)};this.schemeContainer.screenTransform.x=Math.max(c.min-r.x,Math.min(e,c.max+r.x)),this.schemeContainer.screenTransform.y=Math.max(h.min-r.y,Math.min(t,h.max+r.y))}else this.schemeContainer.screenTransform.x=e,this.schemeContainer.screenTransform.y=t;f.A.screenTransformUpdated.$emit(this.editorId,this.schemeContainer.screenTransform)}isSnappingToItemsEnabled(){return this.store.state.snap.items}snapToGrid(e){const t=r.A.getSnappingWidthForScale(this.schemeContainer.screenTransform.scale);return this.store.state.snap.grid?Math.round(e/t)*t:e}snapPoints(e,t,i,r){if(!e)return{dx:i,dy:r};let s=i,o=r,a=this.schemeContainer.screenTransform.scale,l=null,c=1e3,h=null,d=1e3;if(this.isSnappingToItemsEnabled()&&((0,n.jJ)(this.schemeContainer.relativeSnappers.horizontal,(i=>{t.has(i.item.id)||(0,n.jJ)(e.horizontal,(e=>{let t=Math.abs(i.value-e.y-r);t*a<6&&t<c&&(l={snapper:i,dy:i.value-e.y},c=t)}))})),(0,n.jJ)(this.schemeContainer.relativeSnappers.vertical,(r=>{t.has(r.item.id)||(0,n.jJ)(e.vertical,(e=>{let t=Math.abs(r.value-e.x-i);t*a<6&&t<d&&(h={snapper:r,dx:r.value-e.x},d=t)}))}))),l)m.A.setItemSnapper(this.store,l.snapper),o=l.dy;else if(this.store.state.snap.grid){let t=1e3;(0,n.jJ)(e.horizontal,(e=>{const i=this.snapToGrid(e.y+r),n=Math.abs(i-e.y);n<t&&(t=n,o=i-e.y)}))}if(h)m.A.setItemSnapper(this.store,h.snapper),s=h.dx;else if(this.store.state.snap.grid){let t=1e3;(0,n.jJ)(e.vertical,(e=>{const n=this.snapToGrid(e.x+i),r=Math.abs(n-e.x);r<t&&(t=r,s=n-e.x)}))}return{dx:s,dy:o}}getUpdatePrecision(){return this.schemeContainer.screenTransform.scale<.5?0:Math.max(0,Math.round(Math.log10(100*this.schemeContainer.screenTransform.scale)-1))}round(e){return r.A.roundPrecise(e,this.getUpdatePrecision())}}class Xe extends We{constructor(e,t){super(e.editorId,e.store,t),this.schemeContainer=e.schemeContainer,this.parentState=e}getScreenBounds(){return this.parentState.getScreenBounds()}getScreenBoundsPadding(){return this.parentState.getScreenBoundsPadding()}migrate(e){this.parentState.migrateSubState(e)}migrateSubState(e){this.parentState.migrateSubState(e)}migrateToPreviousSubState(){this.parentState.migrateToPreviousSubState()}cancel(){this.parentState.cancel()}getSchemeContainer(){return this.parentState.schemeContainer}}class Ge extends Xe{constructor(e,t,i){super(e,"drag-screen"),this.schemeContainer=e.schemeContainer,this.originalClickPoint=i,this.exitOnMouseUp=t,this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y},this.parentState.resetInertiaDrag()}keyUp(e,t){e===Q&&this.migrateToPreviousSubState()}mouseDown(e,t,i,n,r,s){this.originalClickPoint={x:e,y:t,mx:i,my:n},this.originalScreenOffset={x:this.schemeContainer.screenTransform.x,y:this.schemeContainer.screenTransform.y},this.parentState.resetInertiaDrag()}mouseMove(e,t,i,n,r,s){if(this.originalClickPoint){if(0===s.buttons)return void this.mouseUp(e,t,i,n,r,s);this.parentState.registerInertiaPositions(i,n),this.dragScreenTo(Math.floor(this.originalScreenOffset.x+i-this.originalClickPoint.mx),Math.floor(this.originalScreenOffset.y+n-this.originalClickPoint.my))}}mouseUp(e,t,i,n,r,s){this.originalClickPoint=null,this.parentState.initScreenInertia(),f.A.screenTransformUpdated.$emit(this.editorId,this.schemeContainer.screenTransform),this.exitOnMouseUp&&this.migrateToPreviousSubState()}}const Ye=We;function Ze(e,t){window.requestAnimationFrame((()=>{const i=performance.now();e.loop(i-t)&&Ze(e,i)}))}class Ke{constructor(e,t,i){this.globalSchemeContainer=e,this.shouldLoop=!0,this.pos={x:0,y:0},this.localClickPoint=t,this.shadowTransform=i}start(){Ze(this,performance.now())}updateItemPosition(e){this.pos=(0,k.xS)(this.localClickPoint.x,this.localClickPoint.y,e,this.shadowTransform)}loop(e){const t=this.pos.x*this.globalSchemeContainer.screenTransform.scale+this.globalSchemeContainer.screenTransform.x,i=this.pos.y*this.globalSchemeContainer.screenTransform.scale+this.globalSchemeContainer.screenTransform.y;return t<20&&(this.globalSchemeContainer.screenTransform.x+=e/2),i<20&&(this.globalSchemeContainer.screenTransform.y+=e/2),t>this.globalSchemeContainer.screenSettings.width-20&&(this.globalSchemeContainer.screenTransform.x-=e/2),i>this.globalSchemeContainer.screenSettings.height-20&&(this.globalSchemeContainer.screenTransform.y-=e/2),this.shouldLoop}stop(){this.shouldLoop=!1}}class Je extends Xe{constructor(e,t,i,n,r,s,o){super(e,"drag-item"),this.listener=t,this.userEventBus=s,this.initialClickPoint={x:n,y:r},this.originalItemPosition={x:i.area.x,y:i.area.y},this.item=i,this.moved=!1,this.lastDropCandidate=null,this.componentItem=o,o&&(this.schemeContainer=o.meta.componentSchemeContainer);const a=(0,k.Qb)(n,r,i,this.schemeContainer.shadowTransform);this.looper=new Ke(this.parentState.schemeContainer,a,this.schemeContainer.shadowTransform);const l=(0,k.xS)(i.area.px*i.area.w,i.area.py*i.area.h,i,this.schemeContainer.shadowTransform);this.worldPivotCorrection={x:n-l.x,y:r-l.y}}cancel(){super.cancel(),this.looper.stop()}emit(e,t,...i){this.componentItem?this.componentItem.meta.componentUserEventBus.emitItemEvent(e.id,t,...i):this.userEventBus.emitItemEvent(e.id,t,...i)}mouseMove(e,t,i,n,r,o,a){if(0===o.buttons)return void this.mouseUp(e,t,i,n,r,o,a);this.moved||(this.emit(this.item,g.A.standardEvents.dragStart.id),this.looper.start()),this.moved=!0,this.emit(this.item,g.A.standardEvents.drag.id);const l=this.schemeContainer.relativePointForItem(this.initialClickPoint.x,this.initialClickPoint.y,this.item),c=this.schemeContainer.relativePointForItem(e,t,this.item),h=this.originalItemPosition.x+c.x-l.x,d=this.originalItemPosition.y+c.y-l.y;this.item.behavior.dragging===s.Xq.dragndrop.id?this.handleDroppableMouseMove(h,d):this.item.behavior.dragging===s.Xq.path.id&&this.item.behavior.dragPath?this.handlePathMouseMove(e,t):(this.item.area.x=h,this.item.area.y=d),this.schemeContainer.readjustItemAndDescendants(this.item.id,!0),this.looper.updateItemPosition(this.item),f.A.item.changed.specific.$emit(this.editorId,this.item.id,"area")}handlePathMouseMove(e,t){const i=this.schemeContainer.findElementsBySelector(this.item.behavior.dragPath);if(0===i.length)return;let s=-1,o=null,a=null,l=null,c=-1;if(i.forEach((i=>{if(i.id===this.item.id||i.meta.ancestorIds&&(0,n.qh)(i.meta.ancestorIds)>=0)return;const h=(0,k.bS)(i);if(!h)return;const d=(0,k.Qb)(e-this.worldPivotCorrection.x,t-this.worldPivotCorrection.y,i,this.schemeContainer.shadowTransform),u=r.A.closestPointOnPath(d.x,d.y,h);if(!u)return;const p=(0,k.xS)(u.x,u.y,i,this.schemeContainer.shadowTransform),f=(p.x-e)*(p.x-e)+(p.y-t)*(p.y-t);(f<s||s<0)&&(s=f,o=p,a=i,l=h,c=u.distance)})),!o)return;let h=this.item.meta.transformMatrix;this.schemeContainer.shadowTransform&&(h=r.A.multiplyMatrices(this.schemeContainer.shadowTransform,h));const d=r.A.findTranslationMatchingWorldPoint(o.x,o.y,this.item.area.w*this.item.area.px,this.item.area.h*this.item.area.py,this.item.area,h);if(this.item.area.x=d.x,this.item.area.y=d.y,this.item.behavior.dragPathAlign){const e=l.getPointAtLength(c+1),t=l.getPointAtLength(c-1),i=(0,k.xS)(e.x,e.y,a,this.schemeContainer.shadowTransform),n=(0,k.xS)(t.x,t.y,a,this.schemeContainer.shadowTransform),s=i.x-n.x,o=i.y-n.y,h=s*s+o*o;if(!r.A.tooSmall(h)){const e=Math.sqrt(h),t=s/e,i=o/e,n=180*r.A.fullAngleForNormalizedVector(t,i)/Math.PI;this.item.area.r=n,isFinite(this.item.behavior.dragPathRotation)&&(this.item.area.r+=this.item.behavior.dragPathRotation)}}}handleDroppableMouseMove(e,t){this.item.area.x=e,this.item.area.y=t;const i=this.findDesignatedDropItem();if(!this.lastDropCandidate||i&&i.id===this.lastDropCandidate.id||(this.emit(this.item,g.A.standardEvents.dragObjectOut.id,this.lastDropCandidate),this.emit(this.lastDropCandidate,g.A.standardEvents.dragObjectOut.id,this.item)),!i)return void(this.lastDropCandidate=null);const n=this.getDropPosition(i);n&&(this.item.area.x=n.x,this.item.area.y=n.y),this.lastDropCandidate&&this.lastDropCandidate.id===i.id||(this.emit(this.item,g.A.standardEvents.dragObjectIn.id,i),this.emit(i,g.A.standardEvents.dragObjectIn.id,this.item)),this.lastDropCandidate=i}getDropPosition(e){const t=(0,k.xS)(e.area.w/2,e.area.h/2,e,this.schemeContainer.shadowTransform);let i=this.item.meta.transformMatrix;return this.schemeContainer.shadowTransform&&(i=r.A.multiplyMatrices(this.schemeContainer.shadowTransform,i)),r.A.findTranslationMatchingWorldPoint(t.x,t.y,this.item.area.w/2,this.item.area.h/2,this.item.area,i)}mouseUp(e,t,i,n,r,o,a){if(this.looper.stop(),this.emit(this.item,g.A.standardEvents.dragEnd.id),!this.moved)return this.parentState.handleItemClick(this.item,i,n,a),void this.migrateToPreviousSubState();if(this.item.behavior.dragging===s.Xq.dragndrop.id){const e=this.lastDropCandidate;if(e){const t=this.getDropPosition(e);t&&(this.item.area.x=t.x,this.item.area.y=t.y),this.emit(this.item,g.A.standardEvents.drop.id,e),this.emit(e,g.A.standardEvents.receiveDrop.id,this.item)}else this.item.area.x=this.originalItemPosition.x,this.item.area.y=this.originalItemPosition.y}f.A.item.changed.specific.$emit(this.editorId,this.item.id,"area"),this.migrateToPreviousSubState()}findDesignatedDropItem(){if("self"===this.item.behavior.dropTo)return null;const e=this.schemeContainer.findElementsBySelector(this.item.behavior.dropTo,null),t=(0,k.bw)([this.item],this.schemeContainer.shadowTransform);let i=null;const s=t.w*t.h;return e.forEach((e=>{if(e.id===this.item.id||e.meta.ancestorIds&&(0,n.qh)(e.meta.ancestorIds)>=0)return;const o=(0,k.bw)([e],this.schemeContainer.shadowTransform),a=r.A.overlappingArea(t,o);a&&a.w*a.h>s/2&&(i=e)})),i}}const et=g.A.standardEvents.mousein.id,tt=g.A.standardEvents.mouseout.id;class it extends Xe{constructor(e,t,i){super(e,"idle"),this.listener=t,this.mouseMovedAfterClick=!1,this.initialClickPoint=null,this.currentHovered=null,this.hoveredItemEntries=new Map,this.userEventBus=i,this.schemeContainer=this.parentState.schemeContainer}reset(){this.softReset(),this.hoveredItemEntries=new Map}softReset(){this.mouseMovedAfterClick=!1,this.initialClickPoint=null}keyPressed(e,t){e===U?this.zoomOut():e===q?this.zoomIn():e===z&&this.resetZoom()}mouseDown(e,t,i,n,r,s,o){if(super.mouseDown(e,t,i,n,r,s,o),this.mouseMovedAfterClick=!1,this.initialClickPoint={x:i,y:n},!function(e){return 1===e.button}(s)&&r&&"item"===r.type){if("none"!==r.item.behavior.dragging)return void this.migrateSubState(new Je(this,this.listener,r.item,e,t,this.userEventBus,o));if(r.item.meta.ancestorDraggableId){const i=(o?o.meta.componentSchemeContainer:this.schemeContainer).findItemById(r.item.meta.ancestorDraggableId);if(i)return void this.migrateSubState(new Je(this,this.listener,i,e,t,this.userEventBus,o))}}}mouseUp(e,t,i,n,r,s,o){if(!this.mouseMovedAfterClick){if(r&&r.item){this.listener.onItemClicked(r.item,e,t);const s=c.A.find(r.item.shape);if(s&&s.onMouseDown){let i=null;o&&o.meta.componentSchemeContainer&&(i=o.meta.componentSchemeContainer.shadowTransform);const n=(0,k.Qb)(e,t,r.item,i);s.onMouseDown(this.editorId,r.item,r.areaId,n.x,n.y)}this.parentState.handleItemClick(r.item,i,n,o)}else s.target&&s.target.closest(".item-link")||this.listener.onVoidClicked();this.softReset()}}mouseMove(e,t,i,n,r,s,o){if(s.touches&&2===s.touches.length)this.mobilePinchToZoom(s);else if(this.initialClickPoint&&Math.abs(i-this.initialClickPoint.x)+Math.abs(n-this.initialClickPoint.y)>3)this.mouseMovedAfterClick=!0,s.preventDefault(),0===s.buttons?this.softReset():this.migrate(new Ge(this.parentState,!0,{x:e,y:t,mx:i,my:n}));else{if(r.item){const i=c.A.find(r.item.shape);if(i&&i.onMouseMove){let n=null;o&&o.meta.componentSchemeContainer&&(n=o.meta.componentSchemeContainer.shadowTransform);const s=(0,k.Qb)(e,t,r.item,n);i.onMouseMove(this.editorId,r.item,r.areaId,s.x,s.y)}}this.handleItemHoverEvents(r,o)}}sendItemEventById(e,t,i){if(i&&i.meta.componentUserEventBus)return void i.meta.componentUserEventBus.emitItemEvent(e,t);const n=this.schemeContainer.findItemById(e);n&&this.emit(i,n,t)}handleItemHoverEvents(e,t){if(e&&("item"===e.type||"custom-item-area"===e.type)&&e.item)if(this.currentHovered){if(this.currentHovered.item.id!==e.item.id){let i=new Set;e.item.meta&&Array.isArray(e.item.meta.ancestorIds)&&(i=new Set(e.item.meta.ancestorIds)),i.add(e.item.id),this.hoveredItemEntries.forEach(((e,t)=>{i.has(t)||(this.hoveredItemEntries.delete(t),this.sendMouseOutEvent(t,e.componentItem))})),i.forEach((e=>{this.hoveredItemEntries.has(e)||(this.hoveredItemEntries.set(e,{itemId:e,componentItem:t}),this.sendItemEventById(e,et,t))})),this.currentHovered={item:e.item,componentItem:t}}}else{if(e.item.meta&&Array.isArray(e.item.meta.ancestorIds)){const i=e.item;this.hoveredItemEntries=new Map,i.meta.ancestorIds.forEach((e=>{this.hoveredItemEntries.set(e,{itemId:e,componentItem:t})})),this.hoveredItemEntries.set(i.id,{itemId:i.id,componentItem:t}),i.meta.ancestorIds.forEach((e=>{this.sendItemEventById(e,et,t)}))}else this.hoveredItemEntries=new Map,this.hoveredItemEntries.set(item.id,{itemId:item.id,componentItem:t});this.emit(t,e.item,et),this.currentHovered={item:e.item,componentItem:t}}else this.hoveredItemEntries.forEach(((e,t)=>{this.sendMouseOutEvent(t,e.componentItem)})),this.hoveredItemEntries.clear(),this.currentHovered=null}sendMouseOutEvent(e,t){this.sendItemEventById(e,tt,t);let i=this.schemeContainer;t&&t.meta.componentSchemeContainer&&(i=t.meta.componentSchemeContainer);const n=i.findItemById(e);if(!n)return;const r=c.A.find(n.shape);r&&r.onMouseOut&&r.onMouseOut(this.editorId,n)}emit(e,t,i,...n){e&&e.meta.componentUserEventBus&&t&&t.id?e.meta.componentUserEventBus.emitItemEvent(t.id,i,...n):this.userEventBus.emitItemEvent(t.id,i,...n)}handleItemClick(e,t,i,n){this.parentState.handleItemClick(e,t,i,n)}}const nt=g.A.standardEvents.clicked.id;class rt extends Ye{constructor(e,t,i,n){super(e,t,"interact",n),this.subState=null,this.userEventBus=i,this.screenBoundsUpdateTimer=null,this.screenBounds=null,this.screenBoundsPadding={x:10,y:10}}cancel(){super.cancel(),this.screenBoundsUpdateTimer&&(clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=null)}reset(){this.screenBoundsUpdateTimer&&(clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=null),this.screenBounds=null,this.updateScreenBounds(),this.migrateSubState(new it(this,this.listener,this.userEventBus))}scheduleScreenBoundsUpdate(){this.screenBoundsUpdateTimer&&clearTimeout(this.screenBoundsUpdateTimer),this.screenBoundsUpdateTimer=setTimeout((()=>this.updateScreenBounds()),500)}onItemChanged(e){this.scheduleScreenBoundsUpdate()}getScreenBounds(){return this.screenBounds}getScreenBoundsPadding(){return this.screenBoundsPadding}updateScreenBounds(){let e=null;const t=[],i=n=>{for(let r=0;r<n.length;r++){const s=n[r];if("dummy"===s.shape&&s.shapeProps.screenBounds)return e=s,!1;s.visible&&"hud"!==s.shape&&(t.push(s),s.clip||(Array.isArray(s.childItems)&&i(s.childItems),Array.isArray(s._childItems)&&i(s._childItems)))}return!0};i(this.schemeContainer.scheme.items);const n=(0,k.bw)(e?[e]:t);this.screenBounds=n,e?(this.screenBoundsPadding.x=0,this.screenBoundsPadding.y=0):(this.screenBoundsPadding.x=.95*this.schemeContainer.screenSettings.width,this.screenBoundsPadding.y=.95*this.schemeContainer.screenSettings.height),this.dragScreenTo(this.schemeContainer.screenTransform.x,this.schemeContainer.screenTransform.y)}handleItemClick(e,t,i,n){n&&this.emitInComponent(n,e,nt),this.emit(e,nt),e.links&&e.links.length>0&&f.A.item.linksShowRequested.$emit(this.editorId,e,n),(0,s.sS)(e)&&(e.interactionMode===s.Dt.SIDE_PANEL?this.listener.onItemSidePanelRequested(e):e.interactionMode===s.Dt.TOOLTIP&&this.listener.onItemTooltipRequested(e,t,i))}emit(e,t,...i){e&&e.id&&this.userEventBus.emitItemEvent(e.id,t,...i)}emitInComponent(e,t,i,...n){t&&t.id&&e.meta.componentUserEventBus.emitItemEvent(t.id,i,...n)}}var st=i(9131);const ot={props:{scheme:{type:Object},zoom:{type:Number,default:100},autoZoom:{type:Boolean,default:!0},sidePanelWidth:{type:Number,default:400},useMouseWheel:{type:Boolean,default:!0},homeLink:{type:String,default:"https://github.com/ishubin/schemio"},linkColor:{type:String,default:"#b0d8f5"},headerBackground:{type:String,default:"#555"},headerColor:{type:String,default:"#f0f0f0"},headerEnabled:{type:Boolean,default:!0},zoomButton:{type:Boolean,default:!0},zoomInput:{type:Boolean,default:!0},title:{type:String,default:""}},components:{SvgEditor:ee,ItemTooltip:re,ItemDetails:oe},beforeMount(){this.initSchemeContainer(),f.A.screenTransformUpdated.$on(this.editorId,this.onScreenTransformUpdated),f.A.item.changed.any.$on(this.editorId,this.onAnyItemChanged),f.A.void.clicked.$on(this.editorId,this.onVoidClicked),this.startStateLoop()},beforeDestroy(){f.A.screenTransformUpdated.$off(this.editorId,this.onScreenTransformUpdated),f.A.item.changed.any.$off(this.editorId,this.onAnyItemChanged),f.A.void.clicked.$off(this.editorId,this.onVoidClicked),this.animationRegistry.destroy(),this.stopStateLoop()},created(){this.animationRegistry=(0,P._j)(this.editorId),this.userEventBus=new E.A(this.editorId),this.stateInteract=new rt(this.editorId,Ue,this.userEventBus,{onCancel:()=>{},onItemChanged:(e,t)=>f.A.item.changed.specific.$emit(this.editorId,e,t),onItemClicked:e=>this.onInteractItemClicked(e),onVoidClicked:()=>this.onInteractVoidClicked(),onItemTooltipRequested:(e,t,i)=>this.onItemTooltipTriggered(e,t,i),onItemSidePanelRequested:e=>this.onItemSidePanelTriggered(e),onScreenTransformUpdated:e=>this.onScreenTransformUpdated(e),onItemsHighlighted:e=>this.highlightedItems=e,onSubStateMigrated:()=>{}})},data(){return{editorId:"standalone-"+M().generate(),schemeContainer:null,initialized:!1,textZoom:""+this.zoom,vZoom:this.zoom,itemTooltip:{id:null,item:null,shown:!1,x:0,y:0},highlightedItems:{itemIds:[],showPins:!1},sidePanel:{item:null},isStateLooping:!1,eventListener:{}}},methods:{onAnyItemChanged(e){this.stateInteract.onItemChanged(e)},initSchemeContainer(){(0,st.vN)(this.scheme.items,this.$store).catch((e=>{console.error("Failed to load shapes",e)})).then((()=>{this.schemeContainer=new S.Ay(this.scheme,this.editorId,"view",this.$store.state.apiClient),this.stateInteract.setSchemeContainer(this.schemeContainer);const e=this.schemeContainer.getBoundingBoxOfItems((0,k.xG)(this.schemeContainer.getItems()));this.schemeContainer.screenSettings.boundingBox=e,this.stateInteract.reset(),this.initialized=!0,this.autoZoom&&this.zoomToScheme()}))},mouseWheel(e,t,i,n,r){this.initialized&&this.stateInteract.mouseWheel(e,t,i,n,r)},mouseDown(e,t,i,n,r,s){this.initialized&&this.stateInteract.mouseDown(e,t,i,n,r,s)},mouseUp(e,t,i,n,r,s){this.initialized&&this.stateInteract.mouseUp(e,t,i,n,r,s)},mouseMove(e,t,i,n,r,s){this.initialized&&this.stateInteract.mouseMove(e,t,i,n,r,s)},mouseDoubleClick(e,t,i,n,r,s){this.initialized&&this.stateInteract.mouseDoubleClick(e,t,i,n,r,s)},onScreenTransformUpdated(e){this.textZoom=""+Math.round(1e4*e.scale)/100},onInteractVoidClicked(){this.itemTooltip.shown=!1,f.A.void.clicked.$emit(this.editorId)},onInteractItemClicked(e){this.itemTooltip.shown=!1,f.A.item.clicked.any.$emit(this.editorId,e)},onItemTooltipTriggered(e,t,i){this.itemTooltip.id=e.id,this.itemTooltip.item=e,this.itemTooltip.x=t,this.itemTooltip.y=i,this.itemTooltip.shown=!0},onItemSidePanelTriggered(e){this.sidePanel.item=e},onZoomSubmitted(){this.vZoom=parseFloat(this.textZoom),this.initialized&&(this.schemeContainer.screenTransform.scale=this.vZoom/100)},onVoidClicked(){this.sidePanel.item=null},zoomToScheme(){this.zoomToItems(this.schemeContainer.getItems())},zoomToItems(e){if(e&&e.length>0){const t=this.getBoundingBoxOfItems(e);t&&f.A.zoomToAreaRequested.$emit(this.editorId,t,!1)}},getBoundingBoxOfItems(e){let t=null;return(0,n.jJ)(e,(e=>{t?(t.x>e.area.x&&(t.x=e.area.x),t.y>e.area.y&&(t.y=e.area.y),t.x+t.w<e.area.x+e.area.w&&(t.w=e.area.x+e.area.w-t.x),t.y+t.h<e.area.y+e.area.h&&(t.h=e.area.y+e.area.h-t.y)):t={x:e.area.x,y:e.area.y,w:e.area.w,h:e.area.h}})),t},startStateLoop(){this.isStateLooping=!0,this.stateLoop(0)},stateLoop(e){const t=performance.now();this.stateInteract.loop(Math.min(100,e)),this.isStateLooping&&window.requestAnimationFrame((()=>{this.stateLoop(performance.now()-t)}))},stopStateLoop(){this.isStateLooping=!1}}},at=(0,b.A)(ot,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"ssc-container",staticStyle:{position:"relative"},attrs:{oncontextmenu:"return false;"}},[e.headerEnabled?t("div",{staticClass:"ssc-header",style:{background:e.headerBackground}},[t("div",{staticClass:"ssc-header-search"},[e.zoomInput?t("span",{style:{color:e.headerColor}},[e._v("Zoom:")]):e._e(),e._v(" "),e.zoomInput?t("input",{directives:[{name:"model",rawName:"v-model",value:e.textZoom,expression:"textZoom"}],staticClass:"ssc-zoom",attrs:{type:"text"},domProps:{value:e.textZoom},on:{blur:e.onZoomSubmitted,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onZoomSubmitted.apply(null,arguments)},input:function(t){t.target.composing||(e.textZoom=t.target.value)}}}):e._e(),e._v(" "),e.zoomButton?t("span",{staticClass:"ssc-button",on:{click:e.zoomToScheme}},[e._v("Auto-Zoom")]):e._e()]),e._v(" "),t("div",{staticClass:"ssc-header-title",style:{color:e.headerColor}},[e._v("\n            "+e._s(e.title)+"\n        ")]),e._v(" "),t("div",{staticClass:"ssc-header-right"},[t("span",{style:{color:e.headerColor}},[e._v("built with")]),e._v(" "),t("a",{style:{color:e.linkColor},attrs:{target:"_top",href:e.homeLink}},[e._v("Schemio")])])]):e._e(),e._v(" "),t("div",{staticClass:"ssc-body"},[e.schemeContainer?t("SvgEditor",{ref:"svgEditor",attrs:{editorId:e.editorId,"scheme-container":e.schemeContainer,zoom:e.vZoom,"use-mouse-wheel":e.useMouseWheel,mode:"view",userEventBus:e.userEventBus,highlightedItems:e.highlightedItems},on:{"mouse-wheel":e.mouseWheel,"mouse-move":e.mouseMove,"mouse-down":e.mouseDown,"mouse-up":e.mouseUp,"mouse-double-click":e.mouseDoubleClick,"screen-transform-updated":e.onScreenTransformUpdated}}):e._e(),e._v(" "),e.itemTooltip.shown?t("item-tooltip",{key:`item-tooltip-${e.itemTooltip.id}`,attrs:{item:e.itemTooltip.item,x:e.itemTooltip.x,y:e.itemTooltip.y},on:{close:function(t){e.itemTooltip.shown=!1}}}):e._e(),e._v(" "),e.sidePanel.item?t("div",{staticClass:"ssc-side-panel-right",style:{width:`${e.sidePanelWidth}px`}},[t("div",{staticClass:"ssc-side-panel-content"},[t("span",{staticClass:"ssc-button",on:{click:function(t){e.sidePanel.item=null}}},[e._v("Close")]),e._v(" "),t("item-details",{attrs:{item:e.sidePanel.item}})],1)]):e._e()],1)])}),[],!1,null,null,null).exports;function lt(e,t,i){return e&&e.hasOwnProperty(t)?e[t]:i}window.schemioViewScheme=(e,i,n)=>{const r=n||{};r.apiClient&&Ue.dispatch("setApiClient",r.apiClient),Ue.dispatch("setAssetsPath",r.assetsPath||"/"),new(t())({components:{StandaloneSchemeView:at},store:Ue,data:()=>({scheme:i,zoom:Math.max(5e-5,parseFloat(r.zoom)||100),autoZoom:lt(r,"autoZoom",!0),sidePanelWidth:parseInt(r.sidePanelWidth)||400,useMouseWheel:lt(r,"useMouseWheel",!0),homeLink:lt(r,"homeLink","https://schem.io"),linkColor:lt(r,"linkColor","#b0d8f5"),headerBackground:lt(r,"headerBackground","#555"),headerColor:lt(r,"headerColor","#f0f0f0"),headerEnabled:lt(r,"headerEnabled",!0),zoomButton:lt(r,"zoomButton",!0),zoomInput:lt(r,"zoomInput",!0),title:lt(r,"title","")}),template:'<standalone-scheme-view :scheme="scheme" :zoom="zoom" :auto-zoom="autoZoom" :link-color="linkColor" :header-background="headerBackground" :headerColor="headerColor" :header-enabled="headerEnabled" :zoom-button="zoomButton" :zoom-input="zoomInput" :home-link="homeLink" :side-panel-width="sidePanelWidth" :use-mouse-wheel="useMouseWheel" :title="title"/>'}).$mount(e)}})()})();